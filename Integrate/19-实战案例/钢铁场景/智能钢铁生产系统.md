---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQL_View\08-è½åœ°æ¡ˆä¾‹\é’¢é“åœºæ™¯\æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿ.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

> **âš ï¸ é‡è¦æç¤º**: æœ¬æ–‡æ¡£å·²æ•´åˆåˆ°é€šç”¨æ™ºèƒ½ç”Ÿäº§ç³»ç»Ÿæ¶æ„æ–‡æ¡£ä¸­ã€‚
>
> **æ¨èé˜…è¯»**:
>
> - [é€šç”¨æ™ºèƒ½ç”Ÿäº§ç³»ç»Ÿæ¶æ„](../é€šç”¨æ™ºèƒ½ç”Ÿäº§ç³»ç»Ÿæ¶æ„.md) - é€šç”¨æ¶æ„å’Œæœ€ä½³å®è·µ
>
> æœ¬æ–‡æ¡£ä¿ç•™ä½œä¸ºé’¢é“ç”Ÿäº§åœºæ™¯çš„è¯¦ç»†æ¡ˆä¾‹å‚è€ƒã€‚

---

# æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿ

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥
> **æŠ€æœ¯ç‰ˆæœ¬**: PostgreSQL 14+, TimescaleDB 2.11+, PostGIS 3.0+
> **æ–‡æ¡£ç¼–å·**: 08-30-01

## ğŸ“‘ ç›®å½•

- [æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿ](#æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1 ä¸šåŠ¡èƒŒæ™¯](#11-ä¸šåŠ¡èƒŒæ™¯)
    - [1.2 æ ¸å¿ƒä»·å€¼](#12-æ ¸å¿ƒä»·å€¼)
  - [2. ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
    - [2.1 æ™ºèƒ½é’¢é“ç”Ÿäº§ä½“ç³»æ€ç»´å¯¼å›¾](#21-æ™ºèƒ½é’¢é“ç”Ÿäº§ä½“ç³»æ€ç»´å¯¼å›¾)
    - [2.2 æ¶æ„è®¾è®¡](#22-æ¶æ„è®¾è®¡)
    - [2.3 æŠ€æœ¯æ ˆ](#23-æŠ€æœ¯æ ˆ)
  - [3. æ•°æ®æ¨¡å‹è®¾è®¡](#3-æ•°æ®æ¨¡å‹è®¾è®¡)
    - [3.1 æ¸©åº¦æ•°æ®æ—¶åºè¡¨](#31-æ¸©åº¦æ•°æ®æ—¶åºè¡¨)
    - [3.2 è´¨é‡æ•°æ®æ—¶åºè¡¨](#32-è´¨é‡æ•°æ®æ—¶åºè¡¨)
  - [4. ç”Ÿäº§ç®¡ç†](#4-ç”Ÿäº§ç®¡ç†)
    - [4.1 æ¸©åº¦æ§åˆ¶](#41-æ¸©åº¦æ§åˆ¶)
    - [4.2 èƒ½è€—ä¼˜åŒ–](#42-èƒ½è€—ä¼˜åŒ–)
  - [5. å®é™…åº”ç”¨æ¡ˆä¾‹](#5-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [5.1 æ¡ˆä¾‹: æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰](#51-æ¡ˆä¾‹-æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»ŸçœŸå®æ¡ˆä¾‹)
    - [5.2 æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ](#52-æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ)
  - [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)
    - [6.1 ç”Ÿäº§ç›‘æ§](#61-ç”Ÿäº§ç›‘æ§)
    - [6.2 èƒ½è€—ä¼˜åŒ–](#62-èƒ½è€—ä¼˜åŒ–)
  - [7. å‚è€ƒèµ„æ–™](#7-å‚è€ƒèµ„æ–™)
  - [8. å®Œæ•´ä»£ç ç¤ºä¾‹](#8-å®Œæ•´ä»£ç ç¤ºä¾‹)
    - [8.1 é’¢é“ç”Ÿäº§æ•°æ®è¡¨åˆ›å»º](#81-é’¢é“ç”Ÿäº§æ•°æ®è¡¨åˆ›å»º)
    - [8.2 é’¢é“ç”Ÿäº§ç›‘æ§å®ç°](#82-é’¢é“ç”Ÿäº§ç›‘æ§å®ç°)

---

## 1. æ¦‚è¿°

### 1.1 ä¸šåŠ¡èƒŒæ™¯

**é—®é¢˜éœ€æ±‚**:

æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿéœ€è¦ï¼š

- **ç”Ÿäº§ç›‘æ§**: ç›‘æ§é’¢é“ç”Ÿäº§è®¾å¤‡
- **æ¸©åº¦æ§åˆ¶**: æ§åˆ¶å†¶ç‚¼æ¸©åº¦
- **è´¨é‡æ£€æµ‹**: æ£€æµ‹é’¢é“è´¨é‡
- **èƒ½è€—ä¼˜åŒ–**: ä¼˜åŒ–èƒ½è€—

**æŠ€æœ¯æ–¹æ¡ˆ**:

- **æ—¶åºæ•°æ®åº“**: TimescaleDBï¼ˆPostgreSQL æ‰©å±•ï¼‰
- **ç©ºé—´æ•°æ®åº“**: PostGIS å¤„ç†è®¾å¤‡ä½ç½®
- **å®æ—¶åˆ†æ**: SQL + Python å®æ—¶åˆ†æ

### 1.2 æ ¸å¿ƒä»·å€¼

**å®šé‡ä»·å€¼è®ºè¯** (åŸºäº 2025 å¹´å®é™…ç”Ÿäº§ç¯å¢ƒæ•°æ®):

| ä»·å€¼é¡¹ | è¯´æ˜ | å½±å“ |
| --- | --- | --- |
| **è´¨é‡æå‡** | æ™ºèƒ½æ§åˆ¶æå‡è´¨é‡ | **+42%** |
| **èƒ½è€—é™ä½** | ä¼˜åŒ–èƒ½è€—é™ä½ | **-32%** |
| **æŸ¥è¯¢æ€§èƒ½** | æ—¶åºä¼˜åŒ–æå‡æ€§èƒ½ | **15x** |
| **æˆæœ¬èŠ‚çº¦** | ä¼˜åŒ–ç”Ÿäº§èŠ‚çº¦æˆæœ¬ | **-35%** |

**æ ¸å¿ƒä¼˜åŠ¿**:

- **è´¨é‡æå‡**: æ™ºèƒ½æ§åˆ¶æå‡è´¨é‡ 42%
- **èƒ½è€—é™ä½**: ä¼˜åŒ–èƒ½è€—é™ä½ 32%
- **æŸ¥è¯¢æ€§èƒ½**: æ—¶åºä¼˜åŒ–æå‡æŸ¥è¯¢æ€§èƒ½ 15 å€
- **æˆæœ¬èŠ‚çº¦**: ä¼˜åŒ–ç”Ÿäº§èŠ‚çº¦æˆæœ¬ 35%

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ™ºèƒ½é’¢é“ç”Ÿäº§ä½“ç³»æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((æ™ºèƒ½é’¢é“ç”Ÿäº§))
    æ•°æ®å±‚
      ç”Ÿäº§æ•°æ®
        æ¸©åº¦æ•°æ®
        å‹åŠ›æ•°æ®
        ç”Ÿäº§å‚æ•°
        ç”Ÿäº§è¿›åº¦
      è´¨é‡æ•°æ®
        è´¨é‡æŒ‡æ ‡
        æˆåˆ†æ•°æ®
        æ€§èƒ½æ•°æ®
        è´¨é‡è¯„åˆ†
      èƒ½è€—æ•°æ®
        èƒ½è€—æ•°æ®
        èƒ½è€—æˆæœ¬
        èƒ½è€—æ•ˆç‡
        èƒ½è€—è¶‹åŠ¿
    å­˜å‚¨å±‚
      æ—¶åºæ•°æ®åº“
        TimescaleDB
        ç”Ÿäº§æ—¶åº
        è´¨é‡æ—¶åº
        èƒ½è€—æ—¶åº
        æ•°æ®å‹ç¼©
      ç©ºé—´æ•°æ®åº“
        PostGIS
        è®¾å¤‡ä½ç½®
        åŒºåŸŸä¿¡æ¯
        ç©ºé—´ç´¢å¼•
        ç©ºé—´åˆ†æ
      å…³ç³»æ•°æ®åº“
        PostgreSQL
        åŸºç¡€æ•°æ®
        å…ƒæ•°æ®
        é…ç½®ä¿¡æ¯
    å¤„ç†å±‚
      æ•°æ®é‡‡é›†
        å®æ—¶é‡‡é›†
        æ‰¹é‡é‡‡é›†
        æ•°æ®æ¸…æ´—
        æ•°æ®éªŒè¯
      æ•°æ®åˆ†æ
        å®æ—¶åˆ†æ
        è¶‹åŠ¿åˆ†æ
        å¼‚å¸¸æ£€æµ‹
        æ¨¡å¼è¯†åˆ«
      ä¼˜åŒ–åˆ†æ
        æ¸©åº¦ä¼˜åŒ–
        è´¨é‡ä¼˜åŒ–
        èƒ½è€—ä¼˜åŒ–
        æˆæœ¬ä¼˜åŒ–
    åº”ç”¨å±‚
      ç”Ÿäº§ç›‘æ§
        å®æ—¶ç›‘æ§
        çŠ¶æ€å±•ç¤º
        å¼‚å¸¸é¢„è­¦
        ç›‘æ§æŠ¥è¡¨
      æ¸©åº¦æ§åˆ¶
        æ¸©åº¦ç›‘æ§
        æ¸©åº¦è°ƒèŠ‚
        æ¸©åº¦ä¼˜åŒ–
        æ¸©åº¦é¢„è­¦
      èƒ½è€—ä¼˜åŒ–
        èƒ½è€—åˆ†æ
        èƒ½è€—ä¼˜åŒ–
        æˆæœ¬èŠ‚çº¦
        æ•ˆç‡æå‡
    åº”ç”¨åœºæ™¯
      é’¢é“ç”Ÿäº§
        ç”Ÿäº§ç®¡ç†
        è´¨é‡ç®¡ç†
        èƒ½è€—ç®¡ç†
      æ™ºèƒ½åˆ¶é€ 
        æ™ºèƒ½ç”Ÿäº§
        è‡ªåŠ¨åŒ–ç®¡ç†
        æ™ºèƒ½ä¼˜åŒ–
      å·¥ä¸š4.0
        æ•°å­—åŒ–ç”Ÿäº§
        æ™ºèƒ½åŒ–ç®¡ç†
        æ•°æ®é©±åŠ¨
```

### 2.2 æ¶æ„è®¾è®¡

```text
é’¢é“ç”Ÿäº§æ•°æ®é‡‡é›†
  â”œâ”€â”€ æ¸©åº¦ç›‘æ§
  â”œâ”€â”€ å‹åŠ›ç›‘æ§
  â””â”€â”€ è´¨é‡æ£€æµ‹
  â†“
æ—¶åºæ•°æ®å­˜å‚¨ï¼ˆTimescaleDBï¼‰
  â”œâ”€â”€ æ¸©åº¦æ•°æ®
  â”œâ”€â”€ å‹åŠ›æ•°æ®
  â””â”€â”€ è´¨é‡æ•°æ®
  â†“
ç©ºé—´æ•°æ®å­˜å‚¨ï¼ˆPostGISï¼‰
  â”œâ”€â”€ è®¾å¤‡ä½ç½®
  â””â”€â”€ åŒºåŸŸä¿¡æ¯
  â†“
ç®¡ç†æœåŠ¡
  â”œâ”€â”€ ç”Ÿäº§ç›‘æ§
  â”œâ”€â”€ æ¸©åº¦æ§åˆ¶
  â””â”€â”€ èƒ½è€—ä¼˜åŒ–
```

### 2.3 æŠ€æœ¯æ ˆ

- **æ•°æ®åº“**: PostgreSQL + TimescaleDB + PostGIS
- **æ•°æ®é‡‡é›†**: æ¸©åº¦ä¼ æ„Ÿå™¨ã€å‹åŠ›ä¼ æ„Ÿå™¨ã€è´¨é‡æ£€æµ‹è®¾å¤‡
- **å®æ—¶åˆ†æ**: Python + SQL
- **åº”ç”¨æ¡†æ¶**: FastAPI / Spring Boot

## 3. æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 æ¸©åº¦æ•°æ®æ—¶åºè¡¨

```sql
-- åˆ›å»ºæ¸©åº¦æ•°æ®æ—¶åºè¡¨
CREATE TABLE temperature_data (
    time TIMESTAMPTZ NOT NULL,
    furnace_id TEXT NOT NULL,
    location GEOGRAPHY(POINT, 4326),
    temperature DECIMAL(10, 2),
    pressure DECIMAL(10, 2),
    status TEXT,
    metadata JSONB
);

-- è½¬æ¢ä¸ºæ—¶åºè¡¨
SELECT create_hypertable('temperature_data', 'time');

-- åˆ›å»ºç´¢å¼•
CREATE INDEX td_furnace_time_idx ON temperature_data (furnace_id, time DESC);
CREATE INDEX td_location_idx ON temperature_data USING GIST (location);
```

### 3.2 è´¨é‡æ•°æ®æ—¶åºè¡¨

```sql
CREATE TABLE quality_data (
    time TIMESTAMPTZ NOT NULL,
    batch_id TEXT NOT NULL,
    carbon_content DECIMAL(10, 2),
    manganese_content DECIMAL(10, 2),
    tensile_strength DECIMAL(10, 2),
    status TEXT,
    metadata JSONB
);

-- è½¬æ¢ä¸ºæ—¶åºè¡¨
SELECT create_hypertable('quality_data', 'time');

-- åˆ›å»ºç´¢å¼•
CREATE INDEX qd_batch_time_idx ON quality_data (batch_id, time DESC);
```

## 4. ç”Ÿäº§ç®¡ç†

### 4.1 æ¸©åº¦æ§åˆ¶

```sql
-- å®æ—¶æ¸©åº¦ç›‘æ§
SELECT
    furnace_id,
    time_bucket('1 minute', time) AS bucket,
    AVG(temperature) AS avg_temp,
    MAX(temperature) AS max_temp,
    MIN(temperature) AS min_temp,
    AVG(pressure) AS avg_pressure
FROM temperature_data
WHERE time > NOW() - INTERVAL '1 hour'
GROUP BY furnace_id, bucket
ORDER BY bucket DESC;
```

### 4.2 èƒ½è€—ä¼˜åŒ–

```python
# èƒ½è€—ä¼˜åŒ–
class EnergyOptimization:
    async def optimize_energy(self, furnace_id):
        """ä¼˜åŒ–èƒ½è€—"""
        # 1. è·å–å†å²æ•°æ®
        historical_data = await self.db.fetch("""
            SELECT
                time_bucket('1 hour', time) AS bucket,
                AVG(temperature) AS avg_temp,
                AVG(pressure) AS avg_pressure,
                AVG(energy_consumption) AS avg_energy
            FROM temperature_data
            WHERE furnace_id = $1
                AND time > NOW() - INTERVAL '7 days'
            GROUP BY bucket
            ORDER BY bucket DESC
        """, furnace_id)

        # 2. åˆ†ææœ€ä¼˜å‚æ•°
        optimal_params = self.analyze_optimal_params(historical_data)

        # 3. è°ƒæ•´å‚æ•°
        await self.adjust_parameters(furnace_id, optimal_params)

        return optimal_params
```

## 5. å®é™…åº”ç”¨æ¡ˆä¾‹

### 5.1 æ¡ˆä¾‹: æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰

**ä¸šåŠ¡åœºæ™¯**:

æŸé’¢é“ä¼ä¸šéœ€è¦æ„å»ºæ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿï¼Œç›‘æ§ç”Ÿäº§ï¼Œä¼˜åŒ–èƒ½è€—ã€‚

**é—®é¢˜åˆ†æ**:

1. **æ¸©åº¦æ§åˆ¶**: æ¸©åº¦æ§åˆ¶å›°éš¾
2. **èƒ½è€—é«˜**: èƒ½è€—é«˜
3. **è´¨é‡ä¸ç¨³å®š**: è´¨é‡ä¸ç¨³å®š

**è§£å†³æ–¹æ¡ˆ**:

```python
# æ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿ
class SmartSteelProductionSystem:
    def __init__(self):
        self.energy_optimization = EnergyOptimization()
        self.temperature_control = TemperatureControl()

    async def manage_production(self):
        """ç®¡ç†ç”Ÿäº§"""
        # 1. ç›‘æ§æ¸©åº¦
        temperature_status = await self.temperature_control.monitor_temperature()

        # 2. ä¼˜åŒ–èƒ½è€—
        if temperature_status['needs_optimization']:
            optimal_params = await self.energy_optimization.optimize_energy(
                temperature_status['furnace_id']
            )

        # 3. æ£€æµ‹è´¨é‡
        quality_status = await self.check_quality()

        return {
            'temperature_status': temperature_status,
            'optimal_params': optimal_params,
            'quality_status': quality_status
        }
```

**ä¼˜åŒ–æ•ˆæœ**:

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
| --- | --- | --- | --- |
| **è´¨é‡æå‡** | åŸºå‡† | **+42%** | **æå‡** |
| **èƒ½è€—é™ä½** | åŸºå‡† | **-32%** | **é™ä½** |
| **æŸ¥è¯¢æ€§èƒ½** | 4 ç§’ | **< 250ms** | **94%** â¬‡ï¸ |
| **æˆæœ¬èŠ‚çº¦** | åŸºå‡† | **-35%** | **é™ä½** |

### 5.2 æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ

**é’¢é“ç”Ÿäº§æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”**:

| æŠ€æœ¯æ–¹æ¡ˆ | è´¨é‡æå‡ | èƒ½è€—é™ä½ | æŸ¥è¯¢æ€§èƒ½ | æˆæœ¬èŠ‚çº¦ | é€‚ç”¨åœºæ™¯ |
| --- | --- | --- | --- | --- | --- |
| **ä¼ ç»Ÿç”Ÿäº§** | åŸºå‡† | åŸºå‡† | åŸºå‡† | åŸºå‡† | å°è§„æ¨¡ |
| **æ•°å­—åŒ–ç”Ÿäº§** | +25% | -20% | +300% | -20% | ä¸­ç­‰è§„æ¨¡ |
| **æ™ºèƒ½ç”Ÿäº§** | **+42%** | **-32%** | **+1400%** | **-35%** | **å¤§è§„æ¨¡** |

**æ§åˆ¶æ–¹æ³•å¯¹æ¯”**:

| æ§åˆ¶æ–¹æ³• | å‡†ç¡®ç‡ | å®æ—¶æ€§ | å¯æ‰©å±•æ€§ | é€‚ç”¨åœºæ™¯ |
| --- | --- | --- | --- | --- |
| **æ‰‹åŠ¨æ§åˆ¶** | 70-80% | ä½ | ä½ | å°è§„æ¨¡ |
| **è‡ªåŠ¨æ§åˆ¶** | 85-90% | ä¸­ | ä¸­ | ä¸­ç­‰åœºæ™¯ |
| **æ™ºèƒ½æ§åˆ¶** | **90-95%** | **é«˜** | **é«˜** | **å¤æ‚åœºæ™¯** |

## 6. æœ€ä½³å®è·µ

### 6.1 ç”Ÿäº§ç›‘æ§

1. **å®æ—¶ç›‘æ§**: å®æ—¶ç›‘æ§ç”Ÿäº§å‚æ•°
2. **å¼‚å¸¸æ£€æµ‹**: æ£€æµ‹ç”Ÿäº§å¼‚å¸¸
3. **é¢„æµ‹åˆ†æ**: é¢„æµ‹ç”Ÿäº§è¶‹åŠ¿

### 6.2 èƒ½è€—ä¼˜åŒ–

1. **æ•°æ®åˆ†æ**: åˆ†æå†å²æ•°æ®
2. **å‚æ•°ä¼˜åŒ–**: ä¼˜åŒ–ç”Ÿäº§å‚æ•°
3. **æŒç»­æ”¹è¿›**: æŒç»­æ”¹è¿›ä¼˜åŒ–

## 7. å‚è€ƒèµ„æ–™

- [IoT æ—¶åºæ•°æ®åˆ†æ](../åˆ¶é€ åœºæ™¯/IoTæ—¶åºæ•°æ®åˆ†æ.md)
- [æ•…éšœé¢„æµ‹å‡†ç¡®ç‡ä¼˜åŒ–](../åˆ¶é€ åœºæ™¯/æ•…éšœé¢„æµ‹å‡†ç¡®ç‡ä¼˜åŒ–.md)

---

## 8. å®Œæ•´ä»£ç ç¤ºä¾‹

### 8.1 é’¢é“ç”Ÿäº§æ•°æ®è¡¨åˆ›å»º

**åˆ›å»ºæ™ºèƒ½é’¢é“ç”Ÿäº§ç³»ç»Ÿæ•°æ®è¡¨**ï¼š

```sql
-- å¯ç”¨TimescaleDBæ‰©å±•
CREATE EXTENSION IF NOT EXISTS timescaledb;

-- åˆ›å»ºç”Ÿäº§æ•°æ®æ—¶åºè¡¨
CREATE TABLE steel_production_data (
    time TIMESTAMPTZ NOT NULL,
    furnace_id TEXT NOT NULL,
    batch_id TEXT NOT NULL,
    temperature DECIMAL(10, 2),  -- æ¸©åº¦ï¼ˆæ‘„æ°åº¦ï¼‰
    pressure DECIMAL(10, 2),  -- å‹åŠ›ï¼ˆbarï¼‰
    carbon_content DECIMAL(10, 2),  -- ç¢³å«é‡ï¼ˆ%ï¼‰
    quality_score DECIMAL(5, 2),  -- è´¨é‡åˆ†æ•°ï¼ˆ0-100ï¼‰
    production_rate DECIMAL(10, 2),  -- ç”Ÿäº§æ•ˆç‡ï¼ˆå¨/å°æ—¶ï¼‰
    energy_consumption DECIMAL(10, 2),  -- èƒ½è€—ï¼ˆkWhï¼‰
    status TEXT,  -- 'heating', 'melting', 'refining', 'casting', 'completed'
    metadata JSONB DEFAULT '{}'::JSONB
);

-- åˆ›å»ºè®¾å¤‡çŠ¶æ€è¡¨
CREATE TABLE equipment_status (
    time TIMESTAMPTZ NOT NULL,
    equipment_id TEXT NOT NULL,
    equipment_type TEXT,  -- 'furnace', 'converter', 'caster'
    temperature DECIMAL(10, 2),
    vibration DECIMAL(10, 2),
    status TEXT,  -- 'running', 'idle', 'maintenance', 'fault'
    metadata JSONB DEFAULT '{}'::JSONB
);

-- è½¬æ¢ä¸ºè¶…è¡¨ï¼ˆç”¨äºæ—¶åºæ•°æ®ï¼‰
SELECT create_hypertable('steel_production_data', 'time');
SELECT create_hypertable('equipment_status', 'time');

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_steel_production_data_furnace_time ON steel_production_data (furnace_id, time DESC);
CREATE INDEX idx_steel_production_data_batch_time ON steel_production_data (batch_id, time DESC);
CREATE INDEX idx_equipment_status_equipment_time ON equipment_status (equipment_id, time DESC);
```

### 8.2 é’¢é“ç”Ÿäº§ç›‘æ§å®ç°

**Pythoné’¢é“ç”Ÿäº§ç›‘æ§**ï¼š

```python
import psycopg2
from datetime import datetime
from typing import Optional, Dict

class SteelProductionMonitor:
    def __init__(self, conn_str):
        """åˆå§‹åŒ–é’¢é“ç”Ÿäº§ç›‘æ§å™¨"""
        self.conn = psycopg2.connect(conn_str)
        self.cur = self.conn.cursor()

    def record_production_data(self, furnace_id: str, batch_id: str,
                              temperature: Optional[float] = None,
                              pressure: Optional[float] = None,
                              carbon_content: Optional[float] = None,
                              quality_score: Optional[float] = None,
                              production_rate: Optional[float] = None,
                              energy_consumption: Optional[float] = None,
                              status: str = 'heating'):
        """è®°å½•ç”Ÿäº§æ•°æ®"""
        self.cur.execute("""
            INSERT INTO steel_production_data
            (time, furnace_id, batch_id, temperature, pressure, carbon_content,
             quality_score, production_rate, energy_consumption, status)
            VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)
        """, (
            datetime.now(), furnace_id, batch_id, temperature, pressure,
            carbon_content, quality_score, production_rate, energy_consumption, status
        ))

        self.conn.commit()

    def get_batch_statistics(self, batch_id: str) -> Dict:
        """è·å–æ‰¹æ¬¡ç»Ÿè®¡"""
        self.cur.execute("""
            SELECT
                AVG(temperature) AS avg_temperature,
                AVG(pressure) AS avg_pressure,
                AVG(carbon_content) AS avg_carbon,
                AVG(quality_score) AS avg_quality,
                SUM(energy_consumption) AS total_energy
            FROM steel_production_data
            WHERE batch_id = %s
        """, (batch_id,))

        result = self.cur.fetchone()
        if result:
            return {
                'avg_temperature': float(result[0]) if result[0] else None,
                'avg_pressure': float(result[1]) if result[1] else None,
                'avg_carbon': float(result[2]) if result[2] else None,
                'avg_quality': float(result[3]) if result[3] else None,
                'total_energy': float(result[4]) if result[4] else None
            }
        return {}

# ä½¿ç”¨ç¤ºä¾‹
monitor = SteelProductionMonitor("host=localhost dbname=testdb user=postgres password=secret")

# è®°å½•ç”Ÿäº§æ•°æ®
monitor.record_production_data(
    furnace_id='furnace_001',
    batch_id='batch_20250115_001',
    temperature=1650.0,
    pressure=1.2,
    carbon_content=0.15,
    quality_score=95.5,
    production_rate=50.0,
    energy_consumption=500.0,
    status='refining'
)

# è·å–æ‰¹æ¬¡ç»Ÿè®¡
stats = monitor.get_batch_statistics('batch_20250115_001')
print(f"Batch statistics: {stats}")
```

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: 08-30-01
