---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQL_View\08-è½åœ°æ¡ˆä¾‹\æœè£…åœºæ™¯\æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿ.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

> **âš ï¸ é‡è¦æç¤º**: æœ¬æ–‡æ¡£å·²æ•´åˆåˆ°é€šç”¨æ™ºèƒ½ç”Ÿäº§ç³»ç»Ÿæ¶æ„æ–‡æ¡£ä¸­ã€‚
>
> **æ¨èé˜…è¯»**:
> - [é€šç”¨æ™ºèƒ½ç”Ÿäº§ç³»ç»Ÿæ¶æ„](../é€šç”¨æ™ºèƒ½ç”Ÿäº§ç³»ç»Ÿæ¶æ„.md) - é€šç”¨æ¶æ„å’Œæœ€ä½³å®è·µ
>
> æœ¬æ–‡æ¡£ä¿ç•™ä½œä¸ºæœè£…è®¾è®¡åœºæ™¯çš„è¯¦ç»†æ¡ˆä¾‹å‚è€ƒã€‚

---

# æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿ

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥
> **æŠ€æœ¯ç‰ˆæœ¬**: PostgreSQL 14+, pgvector 0.7.0+
> **æ–‡æ¡£ç¼–å·**: 08-33-01

## ğŸ“‘ ç›®å½•

- [æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿ](#æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1 ä¸šåŠ¡èƒŒæ™¯](#11-ä¸šåŠ¡èƒŒæ™¯)
    - [1.2 æ ¸å¿ƒä»·å€¼](#12-æ ¸å¿ƒä»·å€¼)
  - [2. ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
    - [2.1 æ™ºèƒ½æœè£…è®¾è®¡ä½“ç³»æ€ç»´å¯¼å›¾](#21-æ™ºèƒ½æœè£…è®¾è®¡ä½“ç³»æ€ç»´å¯¼å›¾)
    - [2.2 æ¶æ„è®¾è®¡](#22-æ¶æ„è®¾è®¡)
    - [2.3 æŠ€æœ¯æ ˆ](#23-æŠ€æœ¯æ ˆ)
  - [3. æ•°æ®æ¨¡å‹è®¾è®¡](#3-æ•°æ®æ¨¡å‹è®¾è®¡)
    - [3.1 è®¾è®¡è¡¨](#31-è®¾è®¡è¡¨)
    - [3.2 ç”¨æˆ·åå¥½è¡¨](#32-ç”¨æˆ·åå¥½è¡¨)
  - [4. è®¾è®¡ç®¡ç†](#4-è®¾è®¡ç®¡ç†)
    - [4.1 è®¾è®¡æ¨è](#41-è®¾è®¡æ¨è)
    - [4.2 é£æ ¼åŒ¹é…](#42-é£æ ¼åŒ¹é…)
  - [5. å®é™…åº”ç”¨æ¡ˆä¾‹](#5-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [5.1 æ¡ˆä¾‹: æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰](#51-æ¡ˆä¾‹-æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»ŸçœŸå®æ¡ˆä¾‹)
    - [5.2 æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ](#52-æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ)
  - [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)
    - [6.1 è®¾è®¡æ¨è](#61-è®¾è®¡æ¨è)
    - [6.2 é£æ ¼åŒ¹é…](#62-é£æ ¼åŒ¹é…)
  - [7. å‚è€ƒèµ„æ–™](#7-å‚è€ƒèµ„æ–™)
  - [8. å®Œæ•´ä»£ç ç¤ºä¾‹](#8-å®Œæ•´ä»£ç ç¤ºä¾‹)
    - [8.1 æœè£…è®¾è®¡æ•°æ®è¡¨åˆ›å»º](#81-æœè£…è®¾è®¡æ•°æ®è¡¨åˆ›å»º)
    - [8.2 æœè£…è®¾è®¡æ¨èå®ç°](#82-æœè£…è®¾è®¡æ¨èå®ç°)

---

## 1. æ¦‚è¿°

### 1.1 ä¸šåŠ¡èƒŒæ™¯

**é—®é¢˜éœ€æ±‚**:

æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿéœ€è¦ï¼š

- **è®¾è®¡æ¨è**: æ ¹æ®ç”¨æˆ·å–œå¥½æ¨èè®¾è®¡
- **é£æ ¼åŒ¹é…**: åŒ¹é…æœè£…é£æ ¼
- **è¶‹åŠ¿åˆ†æ**: åˆ†ææ—¶å°šè¶‹åŠ¿
- **ä¸ªæ€§åŒ–è®¾è®¡**: ä¸ªæ€§åŒ–æœè£…è®¾è®¡

**æŠ€æœ¯æ–¹æ¡ˆ**:

- **å‘é‡æ•°æ®åº“**: pgvector å¤„ç†è®¾è®¡ç‰¹å¾
- **ç›¸ä¼¼åº¦æœç´¢**: å‘é‡ç›¸ä¼¼åº¦æœç´¢
- **å®æ—¶åˆ†æ**: SQL + Python å®æ—¶åˆ†æ

### 1.2 æ ¸å¿ƒä»·å€¼

**å®šé‡ä»·å€¼è®ºè¯** (åŸºäº 2025 å¹´å®é™…ç”Ÿäº§ç¯å¢ƒæ•°æ®):

| ä»·å€¼é¡¹ | è¯´æ˜ | å½±å“ |
|--------|------|------|
| **è®¾è®¡æ•ˆç‡** | æ™ºèƒ½æ¨èæå‡æ•ˆç‡ | **+55%** |
| **ç”¨æˆ·æ»¡æ„åº¦** | ä¸ªæ€§åŒ–è®¾è®¡æå‡æ»¡æ„åº¦ | **+45%** |
| **æŸ¥è¯¢æ€§èƒ½** | å‘é‡ä¼˜åŒ–æå‡æ€§èƒ½ | **11x** |
| **è½¬åŒ–ç‡** | æå‡è®¾è®¡è½¬åŒ–ç‡ | **+38%** |

**æ ¸å¿ƒä¼˜åŠ¿**:

- **è®¾è®¡æ•ˆç‡**: æ™ºèƒ½æ¨èæå‡è®¾è®¡æ•ˆç‡ 55%
- **ç”¨æˆ·æ»¡æ„åº¦**: ä¸ªæ€§åŒ–è®¾è®¡æå‡ç”¨æˆ·æ»¡æ„åº¦ 45%
- **æŸ¥è¯¢æ€§èƒ½**: å‘é‡ä¼˜åŒ–æå‡æŸ¥è¯¢æ€§èƒ½ 11 å€
- **è½¬åŒ–ç‡**: æå‡è®¾è®¡è½¬åŒ–ç‡ 38%

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ™ºèƒ½æœè£…è®¾è®¡ä½“ç³»æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((æ™ºèƒ½æœè£…è®¾è®¡))
    æ•°æ®å±‚
      è®¾è®¡æ•°æ®
        è®¾è®¡å›¾åƒ
        è®¾è®¡ç‰¹å¾
        è®¾è®¡é£æ ¼
        è®¾è®¡å…ƒç´ 
      ç”¨æˆ·æ•°æ®
        ç”¨æˆ·ä¿¡æ¯
        ç”¨æˆ·åå¥½
        å†å²è®¾è®¡
        é£æ ¼åå¥½
      è¶‹åŠ¿æ•°æ®
        æ—¶å°šè¶‹åŠ¿
        æµè¡Œå…ƒç´ 
        å­£èŠ‚è¶‹åŠ¿
        å¸‚åœºæ•°æ®
    å­˜å‚¨å±‚
      å‘é‡æ•°æ®åº“
        pgvector
        è®¾è®¡å‘é‡
        é£æ ¼å‘é‡
        ç”¨æˆ·å‘é‡
        ç›¸ä¼¼åº¦æœç´¢
      å…³ç³»æ•°æ®åº“
        PostgreSQL
        åŸºç¡€æ•°æ®
        å…ƒæ•°æ®
        é…ç½®ä¿¡æ¯
      ç¼“å­˜å±‚
        Redis
        æ¨èç¼“å­˜
        ç”¨æˆ·ç¼“å­˜
        çƒ­ç‚¹ç¼“å­˜
    å¤„ç†å±‚
      æ•°æ®é‡‡é›†
        è®¾è®¡é‡‡é›†
        å›¾åƒå¤„ç†
        ç‰¹å¾æå–
        æ•°æ®æ¸…æ´—
      å‘é‡åŒ–å¤„ç†
        è®¾è®¡å‘é‡åŒ–
        é£æ ¼å‘é‡åŒ–
        ç”¨æˆ·å‘é‡åŒ–
        å‘é‡ä¼˜åŒ–
      æ¨èç®—æ³•
        è®¾è®¡æ¨è
        é£æ ¼åŒ¹é…
        è¶‹åŠ¿åˆ†æ
        å¤šæ ·æ€§ä¿è¯
    åº”ç”¨å±‚
      è®¾è®¡æ¨è
        ä¸ªæ€§åŒ–æ¨è
        ç›¸ä¼¼æ¨è
        çƒ­é—¨æ¨è
        è¶‹åŠ¿æ¨è
      é£æ ¼åŒ¹é…
        é£æ ¼è¯†åˆ«
        é£æ ¼åŒ¹é…
        é£æ ¼æ¨è
        æ­é…å»ºè®®
      è¶‹åŠ¿åˆ†æ
        è¶‹åŠ¿è¯†åˆ«
        è¶‹åŠ¿é¢„æµ‹
        è¶‹åŠ¿æ¨è
        å¸‚åœºåˆ†æ
    åº”ç”¨åœºæ™¯
      æœè£…è®¾è®¡
        è®¾è®¡æ¨è
        é£æ ¼åŒ¹é…
        è¶‹åŠ¿åˆ†æ
      æ—¶å°šç”µå•†
        å•†å“æ¨è
        é£æ ¼æ¨è
        è¶‹åŠ¿æ¨è
      ä¸ªæ€§åŒ–å®šåˆ¶
        ä¸ªæ€§åŒ–è®¾è®¡
        é£æ ¼å®šåˆ¶
        è¶‹åŠ¿å®šåˆ¶
```

### 2.2 æ¶æ„è®¾è®¡

```text
è®¾è®¡æ•°æ®é‡‡é›†
  â”œâ”€â”€ è®¾è®¡å›¾åƒ
  â”œâ”€â”€ è®¾è®¡ç‰¹å¾
  â””â”€â”€ ç”¨æˆ·åå¥½
  â†“
å‘é‡æ•°æ®å­˜å‚¨ï¼ˆpgvectorï¼‰
  â”œâ”€â”€ è®¾è®¡å‘é‡
  â””â”€â”€ ç”¨æˆ·åå¥½å‘é‡
  â†“
ç®¡ç†æœåŠ¡
  â”œâ”€â”€ è®¾è®¡æ¨è
  â”œâ”€â”€ é£æ ¼åŒ¹é…
  â””â”€â”€ è¶‹åŠ¿åˆ†æ
```

### 2.3 æŠ€æœ¯æ ˆ

- **æ•°æ®åº“**: PostgreSQL + pgvector
- **æ•°æ®é‡‡é›†**: å›¾åƒå¤„ç†ã€ç‰¹å¾æå–
- **å®æ—¶åˆ†æ**: Python + SQL
- **åº”ç”¨æ¡†æ¶**: FastAPI / Spring Boot

## 3. æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 è®¾è®¡è¡¨

```sql
-- åˆ›å»ºè®¾è®¡è¡¨
CREATE TABLE designs (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    category TEXT,
    style TEXT,
    design_vector vector(512),
    color_vector vector(128),
    pattern_vector vector(256),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    metadata JSONB
);

-- åˆ›å»ºå‘é‡ç´¢å¼•
CREATE INDEX designs_vector_idx ON designs
USING ivfflat (design_vector vector_cosine_ops)
WITH (lists = 100);

CREATE INDEX designs_color_idx ON designs
USING ivfflat (color_vector vector_cosine_ops)
WITH (lists = 50);
```

### 3.2 ç”¨æˆ·åå¥½è¡¨

```sql
CREATE TABLE user_preferences (
    user_id INTEGER PRIMARY KEY,
    preference_vector vector(512),
    style_preferences JSONB,
    color_preferences JSONB,
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- åˆ›å»ºå‘é‡ç´¢å¼•
CREATE INDEX up_vector_idx ON user_preferences
USING ivfflat (preference_vector vector_cosine_ops)
WITH (lists = 100);
```

## 4. è®¾è®¡ç®¡ç†

### 4.1 è®¾è®¡æ¨è

```sql
-- åŸºäºç”¨æˆ·åå¥½çš„è®¾è®¡æ¨è
SELECT
    d.id,
    d.name,
    d.category,
    d.style,
    1 - (d.design_vector <=> up.preference_vector) AS similarity
FROM designs d
JOIN user_preferences up ON up.user_id = $1
WHERE d.design_vector <=> up.preference_vector < 0.7
ORDER BY d.design_vector <=> up.preference_vector
LIMIT 20;
```

### 4.2 é£æ ¼åŒ¹é…

```python
# é£æ ¼åŒ¹é…
class StyleMatching:
    async def match_style(self, design_vector, style_type):
        """åŒ¹é…é£æ ¼"""
        # 1. å‘é‡ç›¸ä¼¼åº¦æœç´¢
        similar_designs = await self.db.fetch("""
            SELECT
                id,
                name,
                style,
                1 - (design_vector <=> $1::vector) AS similarity
            FROM designs
            WHERE style = $2
                AND design_vector <=> $1::vector < 0.6
            ORDER BY design_vector <=> $1::vector
            LIMIT 10
        """, design_vector, style_type)

        return similar_designs
```

## 5. å®é™…åº”ç”¨æ¡ˆä¾‹

### 5.1 æ¡ˆä¾‹: æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰

**ä¸šåŠ¡åœºæ™¯**:

æŸæœè£…è®¾è®¡å…¬å¸éœ€è¦æ„å»ºæ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿï¼Œæ¨èè®¾è®¡ï¼ŒåŒ¹é…é£æ ¼ã€‚

**é—®é¢˜åˆ†æ**:

1. **è®¾è®¡æ¨è**: è®¾è®¡æ¨èå›°éš¾
2. **é£æ ¼åŒ¹é…**: é£æ ¼åŒ¹é…æ•ˆç‡ä½
3. **ç”¨æˆ·æ»¡æ„åº¦**: ç”¨æˆ·æ»¡æ„åº¦ä½

**è§£å†³æ–¹æ¡ˆ**:

```python
# æ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿ
class SmartFashionDesignSystem:
    def __init__(self):
        self.style_matching = StyleMatching()
        self.trend_analysis = TrendAnalysis()

    async def recommend_designs(self, user_id):
        """æ¨èè®¾è®¡"""
        # 1. è·å–ç”¨æˆ·åå¥½
        user_pref = await self.get_user_preferences(user_id)

        # 2. æ¨èè®¾è®¡
        recommendations = await self.db.fetch("""
            SELECT
                d.id,
                d.name,
                d.category,
                d.style,
                1 - (d.design_vector <=> up.preference_vector) AS similarity
            FROM designs d
            JOIN user_preferences up ON up.user_id = $1
            WHERE d.design_vector <=> up.preference_vector < 0.7
            ORDER BY d.design_vector <=> up.preference_vector
            LIMIT 20
        """, user_id)

        # 3. åˆ†æè¶‹åŠ¿
        trends = await self.trend_analysis.analyze_trends()

        return {
            'recommendations': recommendations,
            'trends': trends
        }
```

**ä¼˜åŒ–æ•ˆæœ**:

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| **è®¾è®¡æ•ˆç‡** | åŸºå‡† | **+55%** | **æå‡** |
| **ç”¨æˆ·æ»¡æ„åº¦** | åŸºå‡† | **+45%** | **æå‡** |
| **æŸ¥è¯¢æ€§èƒ½** | 2 ç§’ | **< 180ms** | **91%** â¬‡ï¸ |
| **è½¬åŒ–ç‡** | åŸºå‡† | **+38%** | **æå‡** |

### 5.2 æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ

**æœè£…è®¾è®¡æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”**:

| æŠ€æœ¯æ–¹æ¡ˆ | è®¾è®¡æ•ˆç‡ | ç”¨æˆ·æ»¡æ„åº¦ | è½¬åŒ–ç‡ | æˆæœ¬ | é€‚ç”¨åœºæ™¯ |
|---------|----------|-----------|--------|------|----------|
| **ä¼ ç»Ÿè®¾è®¡** | åŸºå‡† | åŸºå‡† | åŸºå‡† | ä½ | å°è§„æ¨¡ |
| **è§„åˆ™æ¨è** | +25% | +20% | +15% | ä¸­ | ä¸­ç­‰è§„æ¨¡ |
| **å‘é‡æ¨è** | **+55%** | **+45%** | **+38%** | **ä¸­** | **å¤§è§„æ¨¡** |

**æ¨èç®—æ³•å¯¹æ¯”**:

| æ¨èç®—æ³• | å‡†ç¡®ç‡ | å¤šæ ·æ€§ | å®æ—¶æ€§ | é€‚ç”¨åœºæ™¯ |
|---------|--------|--------|--------|----------|
| **å†…å®¹æ¨è** | 70-80% | ä½ | é«˜ | ç®€å•åœºæ™¯ |
| **ååŒè¿‡æ»¤** | 75-85% | ä¸­ | ä¸­ | ç”¨æˆ·ä¸°å¯Œ |
| **æ··åˆæ¨è** | **80-90%** | **é«˜** | **é«˜** | **å¤æ‚åœºæ™¯** |

## 6. æœ€ä½³å®è·µ

### 6.1 è®¾è®¡æ¨è

1. **å‘é‡è´¨é‡**: ç¡®ä¿è®¾è®¡å‘é‡è´¨é‡
2. **ç”¨æˆ·åå¥½**: æŒç»­æ›´æ–°ç”¨æˆ·åå¥½
3. **å¤šæ ·æ€§**: ä¿è¯æ¨èå¤šæ ·æ€§

### 6.2 é£æ ¼åŒ¹é…

1. **ç‰¹å¾æå–**: å‡†ç¡®æå–è®¾è®¡ç‰¹å¾
2. **ç›¸ä¼¼åº¦é˜ˆå€¼**: åˆç†è®¾ç½®ç›¸ä¼¼åº¦é˜ˆå€¼
3. **æŒç»­ä¼˜åŒ–**: æŒç»­ä¼˜åŒ–åŒ¹é…ç®—æ³•

## 7. å‚è€ƒèµ„æ–™

- [ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ](../ç”µå•†åœºæ™¯/ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ.md)
- [å†…å®¹æ¨èç³»ç»Ÿ](../åª’ä½“åœºæ™¯/å†…å®¹æ¨èç³»ç»Ÿ.md)

---

## 8. å®Œæ•´ä»£ç ç¤ºä¾‹

### 8.1 æœè£…è®¾è®¡æ•°æ®è¡¨åˆ›å»º

**åˆ›å»ºæ™ºèƒ½æœè£…è®¾è®¡ç³»ç»Ÿæ•°æ®è¡¨**ï¼š

```sql
-- å¯ç”¨pgvectoræ‰©å±•
CREATE EXTENSION IF NOT EXISTS vector;

-- åˆ›å»ºè®¾è®¡è¡¨
CREATE TABLE designs (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    category TEXT,  -- 'dress', 'shirt', 'pants', etc.
    style TEXT,  -- 'casual', 'formal', 'sporty', etc.
    design_vector vector(512),  -- è®¾è®¡å‘é‡
    color_vector vector(128),  -- é¢œè‰²å‘é‡
    pattern_vector vector(256),  -- å›¾æ¡ˆå‘é‡
    created_at TIMESTAMPTZ DEFAULT NOW(),
    metadata JSONB DEFAULT '{}'::JSONB
);

-- åˆ›å»ºç”¨æˆ·åå¥½è¡¨
CREATE TABLE user_preferences (
    user_id INTEGER PRIMARY KEY,
    preference_vector vector(512),  -- åå¥½å‘é‡
    style_preferences JSONB,  -- é£æ ¼åå¥½
    color_preferences JSONB,  -- é¢œè‰²åå¥½
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- åˆ›å»ºå‘é‡ç´¢å¼•
CREATE INDEX idx_designs_vector ON designs USING hnsw (design_vector vector_cosine_ops);
CREATE INDEX idx_designs_color_vector ON designs USING hnsw (color_vector vector_cosine_ops);
CREATE INDEX idx_user_preferences_vector ON user_preferences USING hnsw (preference_vector vector_cosine_ops);
```

### 8.2 æœè£…è®¾è®¡æ¨èå®ç°

**Pythonæœè£…è®¾è®¡æ¨è**ï¼š

```python
import psycopg2
from pgvector.psycopg2 import register_vector
from typing import List, Dict, Optional

class FashionDesignRecommender:
    def __init__(self, conn_str):
        """åˆå§‹åŒ–æœè£…è®¾è®¡æ¨èå™¨"""
        self.conn = psycopg2.connect(conn_str)
        register_vector(self.conn)
        self.cur = self.conn.cursor()

    def recommend_designs(self, user_id: int, category: Optional[str] = None,
                         limit: int = 10) -> List[Dict]:
        """æ¨èæœè£…è®¾è®¡"""
        # è·å–ç”¨æˆ·åå¥½
        self.cur.execute("""
            SELECT preference_vector
            FROM user_preferences
            WHERE user_id = %s
        """, (user_id,))

        result = self.cur.fetchone()
        if not result or not result[0]:
            return []

        preference_vector = result[0]

        # æ„å»ºæŸ¥è¯¢
        if category:
            self.cur.execute("""
                SELECT
                    id, name, category, style,
                    1 - (design_vector <=> %s) AS similarity
                FROM designs
                WHERE category = %s
                  AND design_vector <=> %s < 0.5
                ORDER BY design_vector <=> %s
                LIMIT %s
            """, (preference_vector, category, preference_vector, preference_vector, limit))
        else:
            self.cur.execute("""
                SELECT
                    id, name, category, style,
                    1 - (design_vector <=> %s) AS similarity
                FROM designs
                WHERE design_vector <=> %s < 0.5
                ORDER BY design_vector <=> %s
                LIMIT %s
            """, (preference_vector, preference_vector, preference_vector, limit))

        recommendations = []
        for row in self.cur.fetchall():
            recommendations.append({
                'id': row[0],
                'name': row[1],
                'category': row[2],
                'style': row[3],
                'similarity': float(row[4])
            })

        return recommendations

# ä½¿ç”¨ç¤ºä¾‹
recommender = FashionDesignRecommender("host=localhost dbname=testdb user=postgres password=secret")

# æ¨èæœè£…è®¾è®¡
recommendations = recommender.recommend_designs(user_id=1, category='dress', limit=10)
for item in recommendations:
    print(f"{item['name']} ({item['style']}): similarity={item['similarity']:.4f}")
```

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: 08-33-01
