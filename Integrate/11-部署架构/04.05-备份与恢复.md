---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQL\04-éƒ¨ç½²è¿ç»´\04.05-å¤‡ä»½ä¸æ¢å¤.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# PostgreSQLå¤‡ä»½ä¸æ¢å¤å®Œæ•´æŒ‡å—

> **ç‰ˆæœ¬**: v3.0
> **æœ€åæ›´æ–°**: 2025-01-15
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **éš¾åº¦**: â­â­â­â­
> **åº”ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒå¤‡ä»½ã€ç¾éš¾æ¢å¤ã€æ•°æ®è¿ç§»ã€åˆè§„è¦æ±‚
> ğŸ†• **PostgreSQL 18 æ–°ç‰¹æ€§**
>
> PostgreSQL 18å¼•å…¥äº†**å¢é‡å¤‡ä»½**åŠŸèƒ½ï¼Œå¯æ˜¾è‘—å‡å°‘å¤‡ä»½æ—¶é—´ï¼ˆæœ€å¤š95%ï¼‰å’Œå­˜å‚¨ç©ºé—´ï¼ˆæœ€å¤š99%ï¼‰ï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒçš„é‡å¤§æ”¹è¿›ï¼

---

## ğŸ“‘ ç›®å½•

- [1.1 å¤‡ä»½çš„é‡è¦æ€§](#11-å¤‡ä»½çš„é‡è¦æ€§)
- [1.2 å¤‡ä»½ç­–ç•¥æ€»è§ˆ](#12-å¤‡ä»½ç­–ç•¥æ€»è§ˆ)
- [1.3 RPOä¸RTO](#13-rpoä¸rto)
- [2.1 å¤‡ä»½ç±»å‹å¯¹æ¯”](#21-å¤‡ä»½ç±»å‹å¯¹æ¯”)
- [2.2 ç­–ç•¥é€‰æ‹©æŒ‡å—](#22-ç­–ç•¥é€‰æ‹©æŒ‡å—)
- [1.1 å¤‡ä»½ç­–ç•¥é€‰æ‹©](#11-å¤‡ä»½ç­–ç•¥é€‰æ‹©)
- [3.1 pg_dumpä½¿ç”¨](#31-pg_dumpä½¿ç”¨)
- [3.2 pg_restoreä½¿ç”¨](#32-pg_restoreä½¿ç”¨)
- [3.3 é€»è¾‘å¤‡ä»½æœ€ä½³å®è·µ](#33-é€»è¾‘å¤‡ä»½æœ€ä½³å®è·µ)
- [4.1 ç‰©ç†å¤‡ä»½åŸºç¡€](#41-ç‰©ç†å¤‡ä»½åŸºç¡€)
- [4.2 WALå½’æ¡£é…ç½®](#42-walå½’æ¡£é…ç½®)
- [4.3 pg_basebackupä½¿ç”¨](#43-pg_basebackupä½¿ç”¨)
- [5.1 åŠŸèƒ½è¯´æ˜](#51-åŠŸèƒ½è¯´æ˜)
- [5.2 åŸºæœ¬ä½¿ç”¨](#52-åŸºæœ¬ä½¿ç”¨)
- [5.3 ç”Ÿäº§ç¯å¢ƒå¤‡ä»½ç­–ç•¥](#53-ç”Ÿäº§ç¯å¢ƒå¤‡ä»½ç­–ç•¥)
- [5.4 æ€§èƒ½å¯¹æ¯”](#54-æ€§èƒ½å¯¹æ¯”)
- [5.5 æ¢å¤æµç¨‹](#55-æ¢å¤æµç¨‹)
- [5.6 ç›‘æ§ä¸å‘Šè­¦](#56-ç›‘æ§ä¸å‘Šè­¦)
- [5.7 æœ€ä½³å®è·µ](#57-æœ€ä½³å®è·µ)
- [5.8 æ•…éšœæ’æŸ¥](#58-æ•…éšœæ’æŸ¥)
- [5.9 ç”Ÿäº§æ¡ˆä¾‹](#59-ç”Ÿäº§æ¡ˆä¾‹)
- [6.1 PITRåŸç†](#61-pitråŸç†)
- [6.2 PITRé…ç½®](#62-pitré…ç½®)
- [6.3 PITRæ¢å¤æµç¨‹](#63-pitræ¢å¤æµç¨‹)
- [7.1 ç¾å¤‡æ¶æ„](#71-ç¾å¤‡æ¶æ„)
- [7.2 æ¼”ç»ƒSOP](#72-æ¼”ç»ƒsop)
- [8.1 å¤‡ä»½æ–¹æ¡ˆå¯¹æ¯”](#81-å¤‡ä»½æ–¹æ¡ˆå¯¹æ¯”)
- [8.2 æ¢å¤æ—¶é—´å¯¹æ¯”](#82-æ¢å¤æ—¶é—´å¯¹æ¯”)
- [9.1 å¤‡ä»½åŠ å¯†](#91-å¤‡ä»½åŠ å¯†)
- [9.2 è®¿é—®æ§åˆ¶](#92-è®¿é—®æ§åˆ¶)
- [9.3 å®¡è®¡ä¸åˆè§„](#93-å®¡è®¡ä¸åˆè§„)
- [10.1 æ¡ˆä¾‹1ï¼šå°å‹æ•°æ®åº“å¤‡ä»½](#101-æ¡ˆä¾‹1å°å‹æ•°æ®åº“å¤‡ä»½)
- [10.2 æ¡ˆä¾‹2ï¼šå¤§å‹æ•°æ®åº“å¤‡ä»½](#102-æ¡ˆä¾‹2å¤§å‹æ•°æ®åº“å¤‡ä»½)
- [10.3 æ¡ˆä¾‹3ï¼šè·¨ç‰ˆæœ¬è¿ç§»](#103-æ¡ˆä¾‹3è·¨ç‰ˆæœ¬è¿ç§»)
- [11.1 å¤‡ä»½æœ€ä½³å®è·µ](#111-å¤‡ä»½æœ€ä½³å®è·µ)
- [11.2 æ¢å¤æœ€ä½³å®è·µ](#112-æ¢å¤æœ€ä½³å®è·µ)
- [12.1 å®˜æ–¹æ–‡æ¡£](#121-å®˜æ–¹æ–‡æ¡£)
- [12.2 ç›¸å…³æ–‡æ¡£](#122-ç›¸å…³æ–‡æ¡£)
---

## ä¸€ã€æ¦‚è¿°

### 1.1 å¤‡ä»½çš„é‡è¦æ€§

**å¤‡ä»½æ˜¯æ•°æ®å®‰å…¨çš„æœ€åä¸€é“é˜²çº¿**ï¼š

- **æ•°æ®ä¿æŠ¤**ï¼šé˜²æ­¢æ•°æ®ä¸¢å¤±
- **ç¾éš¾æ¢å¤**ï¼šå¿«é€Ÿæ¢å¤ä¸šåŠ¡
- **åˆè§„è¦æ±‚**ï¼šæ»¡è¶³æ³•è§„è¦æ±‚
- **ç‰ˆæœ¬è¿ç§»**ï¼šæ”¯æŒæ•°æ®åº“å‡çº§

### 1.2 å¤‡ä»½ç­–ç•¥æ€»è§ˆ

**ä¸»è¦å¤‡ä»½ç±»å‹**ï¼š

- **é€»è¾‘å¤‡ä»½**ï¼š`pg_dump/pg_restore`ï¼Œé€‚åˆç»“æ„è¿ç§»ä¸å°ä¸­è§„æ¨¡æ•°æ®
- **ç‰©ç†å¤‡ä»½**ï¼š`pg_basebackup` + WAL å½’æ¡£ï¼Œé€‚åˆå¤§è§„æ¨¡ä¸PITR
- **å¢é‡å¤‡ä»½** (â­ PostgreSQL 18æ–°å¢)ï¼šä»…å¤‡ä»½å˜æ›´æ•°æ®ï¼Œå¤§å¹…å‡å°‘å¤‡ä»½æ—¶é—´å’Œå­˜å‚¨

### 1.3 RPOä¸RTO

**æ¢å¤ç›®æ ‡**ï¼š

- **RPOï¼ˆRecovery Point Objectiveï¼‰**ï¼šå¯æ¥å—çš„æ•°æ®ä¸¢å¤±æ—¶é—´çª—å£
- **RTOï¼ˆRecovery Time Objectiveï¼‰**ï¼šç³»ç»Ÿæ¢å¤æ‰€éœ€çš„æ—¶é—´

**å…¸å‹SLA**ï¼š

| ä¸šåŠ¡ç±»å‹ | RPO | RTO | å¤‡ä»½ç­–ç•¥ |
|---------|-----|-----|---------|
| å…³é”®ä¸šåŠ¡ | <1å°æ—¶ | <4å°æ—¶ | å¢é‡å¤‡ä»½ + WALå½’æ¡£ |
| ä¸€èˆ¬ä¸šåŠ¡ | <24å°æ—¶ | <8å°æ—¶ | æ—¥å…¨é‡ + WALå½’æ¡£ |
| éå…³é”®ä¸šåŠ¡ | <7å¤© | <24å°æ—¶ | å‘¨å…¨é‡å¤‡ä»½ |

## äºŒã€å¤‡ä»½ç­–ç•¥é€‰æ‹©

### 2.1 å¤‡ä»½ç±»å‹å¯¹æ¯”

| å¤‡ä»½ç±»å‹ | é€‚ç”¨åœºæ™¯ | å¤‡ä»½æ—¶é—´ | æ¢å¤æ—¶é—´ | å­˜å‚¨ç©ºé—´ | PostgreSQLç‰ˆæœ¬ |
|---------|---------|---------|---------|---------|--------------|
| é€»è¾‘å¤‡ä»½ | å°å‹æ•°æ®åº“(<100GB) | ä¸­ç­‰ | æ…¢ | ä¸­ç­‰ | æ‰€æœ‰ç‰ˆæœ¬ |
| ç‰©ç†å…¨é‡å¤‡ä»½ | ä¸­å¤§å‹æ•°æ®åº“ | é•¿ | å¿« | å¤§ | æ‰€æœ‰ç‰ˆæœ¬ |
| **å¢é‡å¤‡ä»½** | **å¤§å‹æ•°æ®åº“(>500GB)** | **æå¿«** â­ | **å¿«** | **æå°** â­ | **18+** |
| WALå½’æ¡£ | PITRéœ€æ±‚ | æŒç»­ | å¿« | æŒç»­å¢é•¿ | æ‰€æœ‰ç‰ˆæœ¬ |

### 2.2 ç­–ç•¥é€‰æ‹©æŒ‡å—

**é€‰æ‹©é€»è¾‘**ï¼š

1. **æ•°æ®åº“å¤§å°**ï¼š<100GBç”¨é€»è¾‘å¤‡ä»½ï¼Œ>100GBç”¨ç‰©ç†å¤‡ä»½
2. **RPOè¦æ±‚**ï¼š<1å°æ—¶éœ€è¦WALå½’æ¡£
3. **å­˜å‚¨æˆæœ¬**ï¼šè€ƒè™‘å¢é‡å¤‡ä»½èŠ‚çœç©ºé—´
4. **æ¢å¤é€Ÿåº¦**ï¼šç‰©ç†å¤‡ä»½æ¢å¤æ›´å¿«

### 1.1 å¤‡ä»½ç­–ç•¥é€‰æ‹©

| å¤‡ä»½ç±»å‹ | é€‚ç”¨åœºæ™¯ | å¤‡ä»½æ—¶é—´ | æ¢å¤æ—¶é—´ | å­˜å‚¨ç©ºé—´ | PostgreSQLç‰ˆæœ¬ |
|---------|---------|---------|---------|---------|--------------|
| é€»è¾‘å¤‡ä»½ | å°å‹æ•°æ®åº“(<100GB) | ä¸­ç­‰ | æ…¢ | ä¸­ç­‰ | æ‰€æœ‰ç‰ˆæœ¬ |
| ç‰©ç†å…¨é‡å¤‡ä»½ | ä¸­å¤§å‹æ•°æ®åº“ | é•¿ | å¿« | å¤§ | æ‰€æœ‰ç‰ˆæœ¬ |
| **å¢é‡å¤‡ä»½** | **å¤§å‹æ•°æ®åº“(>500GB)** | **æå¿«** â­ | **å¿«** | **æå°** â­ | **18+** |
| WALå½’æ¡£ | PITRéœ€æ±‚ | æŒç»­ | å¿« | æŒç»­å¢é•¿ | æ‰€æœ‰ç‰ˆæœ¬ |

## ä¸‰ã€é€»è¾‘å¤‡ä»½

### 3.1 pg_dumpä½¿ç”¨

**åŸºæœ¬ç”¨æ³•**ï¼š

```bash
# å•åº“é€»è¾‘å¤‡ä»½ï¼ˆè‡ªå®šä¹‰æ ¼å¼ï¼Œæ”¯æŒå¹¶è¡Œï¼‰
pg_dump -h <host> -U <user> -F c -j 4 -d mydb -f mydb_$(date +%F).dump

# å…¨åº“å¤‡ä»½
pg_dumpall -h <host> -U <user> -f all_databases_$(date +%F).sql

# ä»…å¤‡ä»½ç»“æ„
pg_dump -h <host> -U <user> -F c -s -d mydb -f mydb_schema.dump

# ä»…å¤‡ä»½æ•°æ®
pg_dump -h <host> -U <user> -F c -a -d mydb -f mydb_data.dump

# å‹ç¼©å¤‡ä»½
pg_dump -h <host> -U <user> -F c -Z 9 -d mydb -f mydb_$(date +%F).dump
```

**é«˜çº§é€‰é¡¹**ï¼š

```bash
# æ’é™¤ç‰¹å®šè¡¨
pg_dump -h <host> -U <user> -F c -d mydb \
  --exclude-table=temp_table \
  --exclude-table=log_table \
  -f mydb_filtered.dump

# ä»…å¤‡ä»½ç‰¹å®šè¡¨
pg_dump -h <host> -U <user> -F c -d mydb \
  -t users -t orders \
  -f mydb_tables.dump
```

### 3.2 pg_restoreä½¿ç”¨

**åŸºæœ¬ç”¨æ³•**ï¼š

```bash
# è¿˜åŸåˆ°æ–°æ•°æ®åº“
pg_restore -h <host> -U <user> -j 4 -d mydb_restored mydb_2025-09-11.dump

# ä»…è¿˜åŸç»“æ„
pg_restore -h <host> -U <user> -s -d mydb_restored mydb.dump

# ä»…è¿˜åŸæ•°æ®
pg_restore -h <host> -U <user> -a -d mydb_restored mydb.dump

# åˆ—å‡ºå¤‡ä»½å†…å®¹
pg_restore -l mydb.dump > backup_list.txt
```

### 3.3 é€»è¾‘å¤‡ä»½æœ€ä½³å®è·µ

**æ¨èåšæ³•**ï¼š

1. **ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼**ï¼šæ”¯æŒå¹¶è¡Œã€å‹ç¼©ã€é€‰æ‹©æ€§æ¢å¤
2. **å¹¶è¡Œå¤‡ä»½**ï¼šä½¿ç”¨`-j`å‚æ•°æé«˜å¤‡ä»½é€Ÿåº¦
3. **å‹ç¼©å¤‡ä»½**ï¼šä½¿ç”¨`-Z`å‚æ•°å‡å°‘å­˜å‚¨ç©ºé—´
4. **å®šæœŸéªŒè¯**ï¼šå®šæœŸæµ‹è¯•æ¢å¤æµç¨‹

## å››ã€ç‰©ç†å¤‡ä»½ä¸WALå½’æ¡£

### 4.1 ç‰©ç†å¤‡ä»½åŸºç¡€

**ç‰©ç†å¤‡ä»½ç‰¹ç‚¹**ï¼š

- å¤‡ä»½é€Ÿåº¦å¿«ï¼ˆæ–‡ä»¶çº§å¤åˆ¶ï¼‰
- æ¢å¤é€Ÿåº¦å¿«
- æ”¯æŒPITR
- å¤‡ä»½æ–‡ä»¶å¤§

### 4.2 WALå½’æ¡£é…ç½®

**postgresql.confé…ç½®**ï¼š

```text
# å¯ç”¨å½’æ¡£
archive_mode = on
archive_command = 'test ! -f /arch/%f && cp %p /arch/%f'

# WALçº§åˆ«
wal_level = replica

# æœ€å¤§WALå‘é€è¿›ç¨‹
max_wal_senders = 10

# WALä¿ç•™æ—¶é—´
wal_keep_size = 1GB
```

**å½’æ¡£è„šæœ¬ç¤ºä¾‹**ï¼š

```bash
#!/bin/bash
# archive_command.sh

ARCHIVE_DIR="/archive"
WAL_FILE=$1
WAL_NAME=$2

# å¤åˆ¶WALæ–‡ä»¶
cp "$WAL_FILE" "$ARCHIVE_DIR/$WAL_NAME"

# å‹ç¼©æ—§WALæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
find "$ARCHIVE_DIR" -name "*.wal" -mtime +7 -exec gzip {} \;

# æ¸…ç†æ—§å½’æ¡£ï¼ˆä¿ç•™30å¤©ï¼‰
find "$ARCHIVE_DIR" -name "*.gz" -mtime +30 -delete
```

### 4.3 pg_basebackupä½¿ç”¨

**åŸºæœ¬ç”¨æ³•**ï¼š

```bash
# åŸºç¡€å¤‡ä»½ï¼ˆåœ¨çº¿ï¼‰
pg_basebackup -h <primary> -U repl -D /data/basebackup -X stream -P -R

# å‹ç¼©å¤‡ä»½
pg_basebackup -h <primary> -U repl -D /data/basebackup \
  -F tar -z -P -R

# å¿«é€Ÿæ£€æŸ¥ç‚¹
pg_basebackup -h <primary> -U repl -D /data/basebackup \
  --checkpoint=fast -P -R
```

**å‚æ•°è¯´æ˜**ï¼š

- `-X stream`ï¼šåŒæ—¶å¤‡ä»½WALæ–‡ä»¶
- `-P`ï¼šæ˜¾ç¤ºè¿›åº¦
- `-R`ï¼šåˆ›å»ºrecoveryé…ç½®
- `-F tar`ï¼štaræ ¼å¼è¾“å‡º
- `-z`ï¼šå‹ç¼©è¾“å‡º

## äº”ã€å¢é‡å¤‡ä»½ï¼ˆPostgreSQL 18æ–°ç‰¹æ€§ï¼‰

â­â­â­ **PostgreSQL 18æœ€é‡è¦çš„ç”Ÿäº§ç‰¹æ€§ä¹‹ä¸€**

### 5.1 åŠŸèƒ½è¯´æ˜

å¢é‡å¤‡ä»½å…è®¸ä»…å¤‡ä»½è‡ªä¸Šæ¬¡å¤‡ä»½ä»¥æ¥æ›´æ”¹çš„æ•°æ®å—ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°æ®åº“ã€‚è¿™æ˜¾è‘—å‡å°‘ï¼š

- âœ… å¤‡ä»½æ—¶é—´ï¼šä»45åˆ†é’Ÿé™è‡³2-5åˆ†é’Ÿï¼ˆ90%+æå‡ï¼‰
- âœ… å­˜å‚¨ç©ºé—´ï¼šèŠ‚çœ90-99%çš„å¤‡ä»½å­˜å‚¨
- âœ… ç½‘ç»œä¼ è¾“ï¼šå‡å°‘95%+çš„ç½‘ç»œå¸¦å®½
- âœ… I/Oå‹åŠ›ï¼šé™ä½å¯¹ç”Ÿäº§ç³»ç»Ÿçš„å½±å“

### 5.2 åŸºæœ¬ä½¿ç”¨

```bash
# PostgreSQL 17+

# ============================================================
# æ­¥éª¤1: åˆ›å»ºå…¨é‡å¤‡ä»½
# ============================================================
pg_basebackup -D /backup/base/2025-10-30-full \
  -F tar \
  -z \
  -P \
  --checkpoint=fast

# å¤‡ä»½æ—¶é—´ï¼ˆç¤ºä¾‹ï¼‰ï¼š1TBæ•°æ®åº“çº¦45åˆ†é’Ÿ
# å­˜å‚¨ç©ºé—´ï¼š~1TBï¼ˆå‹ç¼©åçº¦600GBï¼‰

# ============================================================
# æ­¥éª¤2: åˆ›å»ºç¬¬ä¸€ä¸ªå¢é‡å¤‡ä»½ï¼ˆå‘¨ä¸€ï¼‰
# ============================================================
pg_basebackup -D /backup/incremental/2025-10-31-inc1 \
  --incremental=/backup/base/2025-10-30-full/backup_manifest \
  -F tar \
  -z \
  -P

# å¤‡ä»½æ—¶é—´ï¼šçº¦2-5åˆ†é’Ÿ â­
# å­˜å‚¨ç©ºé—´ï¼šçº¦10-50GBï¼ˆä»…å˜æ›´éƒ¨åˆ†ï¼‰â­

# ============================================================
# æ­¥éª¤3: åˆ›å»ºç¬¬äºŒä¸ªå¢é‡å¤‡ä»½ï¼ˆå‘¨äºŒï¼‰
# ============================================================
pg_basebackup -D /backup/incremental/2025-11-01-inc2 \
  --incremental=/backup/incremental/2025-10-31-inc1/backup_manifest \
  -F tar \
  -z \
  -P

# å¯ä»¥åŸºäºä»»ä½•å·²æœ‰å¤‡ä»½åˆ›å»ºå¢é‡

# ============================================================
# æ­¥éª¤4: æ¢å¤ï¼ˆéœ€è¦å…¨é‡+æ‰€æœ‰å¢é‡ï¼‰
# ============================================================

# 4.1 åˆå¹¶å¤‡ä»½
pg_combinebackup \
  /backup/base/2025-10-30-full \
  /backup/incremental/2025-10-31-inc1 \
  /backup/incremental/2025-11-01-inc2 \
  -o /restore/combined

# 4.2 å¯åŠ¨æ¢å¤
pg_ctl -D /restore/combined start

# æˆ–ç›´æ¥è§£å‹åˆ°æ•°æ®ç›®å½•
cd $PGDATA
tar -xzf /restore/combined/*.tar.gz
pg_ctl start
```

### 5.3 ç”Ÿäº§ç¯å¢ƒå¤‡ä»½ç­–ç•¥

#### ç­–ç•¥Aï¼šå‘¨å…¨é‡ + æ—¥å¢é‡

```bash
#!/bin/bash
# backup_strategy_weekly.sh

BACKUP_ROOT="/backup/postgresql"
TODAY=$(date +%Y-%m-%d)
DAY_OF_WEEK=$(date +%u)  # 1=Monday, 7=Sunday

if [ "$DAY_OF_WEEK" -eq 7 ]; then
    # Sunday: å…¨é‡å¤‡ä»½
    echo "Performing full backup..."
    pg_basebackup -D "$BACKUP_ROOT/full/$TODAY" \
      -F tar -z -P --checkpoint=fast

    echo "$BACKUP_ROOT/full/$TODAY" > "$BACKUP_ROOT/latest_full.txt"
else
    # Monday-Saturday: å¢é‡å¤‡ä»½
    echo "Performing incremental backup..."
    LATEST_FULL=$(cat "$BACKUP_ROOT/latest_full.txt")

    # æ‰¾åˆ°æœ€è¿‘çš„å¤‡ä»½ï¼ˆå…¨é‡æˆ–å¢é‡ï¼‰
    LATEST_BACKUP=$(ls -td "$BACKUP_ROOT"/*/* | head -1)

    pg_basebackup -D "$BACKUP_ROOT/incremental/$TODAY" \
      --incremental="$LATEST_BACKUP/backup_manifest" \
      -F tar -z -P
fi

# æ¸…ç†è¶…è¿‡30å¤©çš„å¤‡ä»½
find "$BACKUP_ROOT" -type d -mtime +30 -exec rm -rf {} \;
```

**æ•ˆæœ**ï¼š

- å‘¨æ—¥å…¨é‡ï¼š45åˆ†é’Ÿ
- å‘¨ä¸€-å…­å¢é‡ï¼šæ¯æ¬¡2-5åˆ†é’Ÿ
- **æ¯å‘¨æ€»å¤‡ä»½æ—¶é—´**ï¼šä»315åˆ†é’Ÿï¼ˆ7Ã—45ï¼‰é™è‡³75åˆ†é’Ÿ â­
- **èŠ‚çœæ—¶é—´**ï¼š76% â­â­â­

#### ç­–ç•¥Bï¼šæœˆå…¨é‡ + æ—¥å¢é‡

```text
1å·: å…¨é‡å¤‡ä»½ï¼ˆ45åˆ†é’Ÿï¼‰
2-31å·: å¢é‡å¤‡ä»½ï¼ˆæ¯æ¬¡2-5åˆ†é’Ÿï¼‰

æ¯æœˆæ€»å¤‡ä»½æ—¶é—´: 45 + 30Ã—5 = 195åˆ†é’Ÿ
vs ä¼ ç»Ÿå…¨é‡: 31Ã—45 = 1395åˆ†é’Ÿ

èŠ‚çœæ—¶é—´: 86% â­â­â­
å­˜å‚¨èŠ‚çœ: 90% â­â­â­
```

### 5.4 æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | æ•°æ®åº“å¤§å° | æ¯æ—¥å˜æ›´ | å…¨é‡å¤‡ä»½ | å¢é‡å¤‡ä»½ | æ—¶é—´èŠ‚çœ | ç©ºé—´èŠ‚çœ |
|------|-----------|---------|---------|---------|---------|---------|
| å°å‹OLTP | 100GB | 1% | 5åˆ†é’Ÿ | 30ç§’ | 90% â­ | 99% â­ |
| ä¸­å‹åº”ç”¨ | 500GB | 2% | 25åˆ†é’Ÿ | 2åˆ†é’Ÿ | 92% â­ | 98% â­ |
| å¤§å‹ç³»ç»Ÿ | 1TB | 1% | 45åˆ†é’Ÿ | 2åˆ†é’Ÿ | 95% â­â­â­ | 99% â­â­â­ |
| è¶…å¤§ç³»ç»Ÿ | 5TB | 0.5% | 240åˆ†é’Ÿ | 5åˆ†é’Ÿ | 98% â­â­â­ | 99.5% â­â­â­ |

### 5.5 æ¢å¤æµç¨‹

```bash
# ============================================================
# åœºæ™¯ï¼šéœ€è¦æ¢å¤åˆ°æœ€æ–°çŠ¶æ€
# å¤‡ä»½é“¾ï¼šFull â†’ Inc1 â†’ Inc2 â†’ Inc3
# ============================================================

# æ­¥éª¤1: åˆå¹¶æ‰€æœ‰å¤‡ä»½
pg_combinebackup \
  /backup/full/2025-10-27-full \
  /backup/inc/2025-10-28-inc1 \
  /backup/inc/2025-10-29-inc2 \
  /backup/inc/2025-10-30-inc3 \
  -o /restore/combined \
  --progress

# æ­¥éª¤2: åœæ­¢å½“å‰å®ä¾‹ï¼ˆå¦‚æœè¿è¡Œä¸­ï¼‰
pg_ctl -D $PGDATA stop -m fast

# æ­¥éª¤3: å¤‡ä»½å½“å‰æ•°æ®ç›®å½•ï¼ˆå¯é€‰ä½†æ¨èï¼‰
mv $PGDATA $PGDATA.old

# æ­¥éª¤4: è§£å‹åˆå¹¶çš„å¤‡ä»½
mkdir $PGDATA
cd $PGDATA
for tarfile in /restore/combined/*.tar.gz; do
    tar -xzf "$tarfile"
done

# æ­¥éª¤5: è®¾ç½®æƒé™
chmod 700 $PGDATA

# æ­¥éª¤6: é…ç½®recoveryï¼ˆå¦‚éœ€PITRï¼‰
cat >> postgresql.conf << EOF
restore_command = 'cp /archive/%f %p'
recovery_target_time = '2025-10-30 14:30:00+00'
EOF

# æ­¥éª¤7: å¯åŠ¨å¹¶éªŒè¯
pg_ctl -D $PGDATA start

# éªŒè¯
psql -c "SELECT pg_last_wal_replay_lsn(), now();"
psql -c "SELECT count(*) FROM critical_table;"
```

### 5.6 ç›‘æ§ä¸å‘Šè­¦

```sql
-- åˆ›å»ºå¤‡ä»½ç›‘æ§è§†å›¾

CREATE OR REPLACE VIEW backup_status AS
SELECT
    'full' AS backup_type,
    pg_stat_file('/backup/base/latest/backup_manifest').modification AS last_backup,
    EXTRACT(EPOCH FROM (now() - pg_stat_file('/backup/base/latest/backup_manifest').modification)) / 3600 AS hours_since_backup
UNION ALL
SELECT
    'incremental' AS backup_type,
    pg_stat_file('/backup/inc/latest/backup_manifest').modification AS last_backup,
    EXTRACT(EPOCH FROM (now() - pg_stat_file('/backup/inc/latest/backup_manifest').modification)) / 3600 AS hours_since_backup;

-- å‘Šè­¦æŸ¥è¯¢ï¼ˆå¤‡ä»½è¶…è¿‡24å°æ—¶ï¼‰
SELECT * FROM backup_status WHERE hours_since_backup > 24;
```

```bash
# ç›‘æ§è„šæœ¬
#!/bin/bash
# monitor_backups.sh

BACKUP_ROOT="/backup/postgresql"

# æ£€æŸ¥æœ€è¿‘çš„å¢é‡å¤‡ä»½
LAST_INC=$(find "$BACKUP_ROOT/incremental" -type f -name "backup_manifest" -mtime 0 | wc -l)

if [ "$LAST_INC" -eq 0 ]; then
    echo "CRITICAL: No incremental backup in last 24 hours"
    # å‘é€å‘Šè­¦
    exit 2
fi

# æ£€æŸ¥å¤‡ä»½é“¾å®Œæ•´æ€§
FULL=$(cat "$BACKUP_ROOT/latest_full.txt")
if [ ! -f "$FULL/backup_manifest" ]; then
    echo "CRITICAL: Full backup manifest missing"
    exit 2
fi

echo "OK: Backup status normal"
exit 0
```

### 5.7 æœ€ä½³å®è·µ

#### âœ… DO - æ¨èåšæ³•

1. **å®šæœŸå…¨é‡å¤‡ä»½**

   ```bash
   # æ¯å‘¨æˆ–æ¯æœˆåˆ›å»ºæ–°çš„å…¨é‡å¤‡ä»½
   # é¿å…å¢é‡é“¾è¿‡é•¿
   ```

2. **éªŒè¯å¤‡ä»½**

   ```bash
   # å®šæœŸæµ‹è¯•æ¢å¤æµç¨‹
   pg_combinebackup --check-only <backups>
   ```

3. **ç›‘æ§å¤‡ä»½é“¾**

   ```bash
   # ç¡®ä¿æ‰€æœ‰backup_manifestæ–‡ä»¶å­˜åœ¨ä¸”æœ‰æ•ˆ
   find /backup -name "backup_manifest" -exec pg_verifybackup {} \;
   ```

4. **å¼‚åœ°å­˜å‚¨**

   ```bash
   # å°†å¤‡ä»½åŒæ­¥åˆ°å¦ä¸€ä¸ªä½ç½®
   rsync -avz /backup/ remote:/backup-mirror/
   ```

#### âŒ DON'T - é¿å…åšæ³•

1. âŒ ä¸è¦åˆ é™¤ä¸­é—´çš„å¢é‡å¤‡ä»½ï¼ˆä¼šç ´åå¤‡ä»½é“¾ï¼‰
2. âŒ ä¸è¦è®©å¢é‡é“¾è¶…è¿‡7-10å±‚ï¼ˆæ¢å¤æ—¶é—´ä¼šå¢åŠ ï¼‰
3. âŒ ä¸è¦åœ¨æ²¡æœ‰éªŒè¯çš„æƒ…å†µä¸‹ä¾èµ–å•ä¸€å¤‡ä»½é“¾
4. âŒ ä¸è¦å¿½ç•¥backup_manifestæ–‡ä»¶ï¼ˆæ¢å¤å¿…éœ€ï¼‰

### 5.8 æ•…éšœæ’æŸ¥

#### é—®é¢˜1: å¢é‡å¤‡ä»½å¤±è´¥

```bash
# é”™è¯¯: could not open file "backup_manifest": No such file
# åŸå› : åŸºç¡€å¤‡ä»½çš„manifestæ–‡ä»¶ä¸å­˜åœ¨

# è§£å†³æ–¹æ³•1: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -l /backup/base/*/backup_manifest

# è§£å†³æ–¹æ³•2: é‡æ–°åˆ›å»ºå…¨é‡å¤‡ä»½
pg_basebackup -D /backup/base/$(date +%F) -F tar -z
```

#### é—®é¢˜2: æ¢å¤æ—¶ç¼ºå°‘ä¸­é—´å¤‡ä»½

```bash
# é”™è¯¯: incremental backup depends on missing backup
# åŸå› : å¤‡ä»½é“¾ä¸å®Œæ•´

# è§£å†³æ–¹æ³•: ä½¿ç”¨å®Œæ•´çš„å¤‡ä»½é“¾
# Full â†’ Inc1 â†’ Inc2 â†’ Inc3
# ä¸èƒ½è·³è¿‡Inc1å’ŒInc2ç›´æ¥æ¢å¤Inc3
```

#### é—®é¢˜3: å­˜å‚¨ç©ºé—´ä¸è¶³

```bash
# é”™è¯¯: No space left on device
# åŸå› : å¤‡ä»½ç›®å½•ç©ºé—´ä¸è¶³

# è§£å†³æ–¹æ³•: æ¸…ç†æ—§å¤‡ä»½
find /backup -type d -mtime +30 -exec rm -rf {} \;

# æˆ–ä½¿ç”¨æ›´é«˜æ•ˆçš„å‹ç¼©
pg_basebackup -D /backup/inc/$(date +%F) \
  --incremental=... \
  -F tar -z --compress=9  # æœ€é«˜å‹ç¼©ç‡
```

### 5.9 ç”Ÿäº§æ¡ˆä¾‹

#### æ¡ˆä¾‹ï¼šç”µå•†å¹³å°ï¼ˆ5TBæ•°æ®åº“ï¼‰

**èƒŒæ™¯**ï¼š

- æ•°æ®åº“å¤§å°ï¼š5TB
- æ¯æ—¥æ•°æ®å˜æ›´ï¼šçº¦1%ï¼ˆ50GBï¼‰
- ä¼ ç»Ÿå…¨é‡å¤‡ä»½ï¼š4å°æ—¶
- å¤‡ä»½çª—å£ï¼šå‡Œæ™¨2-6ç‚¹

**ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆPostgreSQL 16ï¼‰**ï¼š

```text
æ¯æ—¥å…¨é‡å¤‡ä»½: 4å°æ—¶
æ¯å‘¨æ€»æ—¶é—´: 7 Ã— 4 = 28å°æ—¶
å­˜å‚¨ç©ºé—´: 7 Ã— 5TB = 35TB
```

**å¢é‡æ–¹æ¡ˆï¼ˆPostgreSQL 17ï¼‰**ï¼š

```text
å‘¨æ—¥å…¨é‡: 4å°æ—¶
å‘¨ä¸€-å…­å¢é‡: æ¯æ¬¡10åˆ†é’Ÿ

æ¯å‘¨æ€»æ—¶é—´: 4 + 6Ã—0.167 = 5å°æ—¶
å­˜å‚¨ç©ºé—´: 5TB + 6Ã—50GB = 5.3TB

æ—¶é—´èŠ‚çœ: 82% â­â­â­
ç©ºé—´èŠ‚çœ: 85% â­â­â­
```

**å®é™…æ•ˆæœ**ï¼š

- âœ… æ¯æ—¥å¤‡ä»½åœ¨10åˆ†é’Ÿå†…å®Œæˆï¼Œä¸å½±å“ä¸šåŠ¡
- âœ… å­˜å‚¨æˆæœ¬é™ä½80%
- âœ… å¤‡ä»½æˆåŠŸç‡ä»92%æå‡åˆ°99.8%ï¼ˆå› ä¸ºæ—¶é—´çª—å£å……è¶³ï¼‰
- âœ… æ¢å¤æµ‹è¯•æ—¶é—´ç¼©çŸ­ï¼ˆå¤‡ä»½æ›´é¢‘ç¹æ›´æ–°é²œï¼‰

---

## å…­ã€æ—¶é—´ç‚¹æ¢å¤ï¼ˆPITRï¼‰

### 6.1 PITRåŸç†

**PITRï¼ˆPoint-In-Time Recoveryï¼‰**å…è®¸æ¢å¤åˆ°ä»»æ„æ—¶é—´ç‚¹ï¼š

1. ä»åŸºç¡€å¤‡ä»½æ¢å¤
2. åº”ç”¨WALå½’æ¡£æ–‡ä»¶
3. æ¢å¤åˆ°æŒ‡å®šæ—¶é—´ç‚¹

### 6.2 PITRé…ç½®

**æ¢å¤é…ç½®**ï¼š

```bash
# åœåº“å¹¶å‡†å¤‡æ¢å¤ç¯å¢ƒ
rm -rf $PGDATA/*
cp -a /data/basebackup/* $PGDATA/

# recovery é…ç½®ï¼ˆPostgreSQL 12+ï¼‰åœ¨ postgresql.conf ä¸­ï¼š
restore_command = 'cp /arch/%f %p'
recovery_target_time = '2025-09-11 10:15:00+00'
recovery_target_action = 'promote'

# å¯åŠ¨å¹¶å›æ”¾åˆ°ç›®æ ‡æ—¶é—´åè‡ªåŠ¨æå‡
pg_ctl -D $PGDATA start
```

**æ¢å¤ç›®æ ‡é€‰é¡¹**ï¼š

- `recovery_target_time`ï¼šæ¢å¤åˆ°æŒ‡å®šæ—¶é—´
- `recovery_target_lsn`ï¼šæ¢å¤åˆ°æŒ‡å®šLSN
- `recovery_target_name`ï¼šæ¢å¤åˆ°æŒ‡å®šæ¢å¤ç‚¹
- `recovery_target_xid`ï¼šæ¢å¤åˆ°æŒ‡å®šäº‹åŠ¡ID

### 6.3 PITRæ¢å¤æµç¨‹

**æ­¥éª¤**ï¼š

1. å‡†å¤‡åŸºç¡€å¤‡ä»½
2. é…ç½®æ¢å¤å‚æ•°
3. å¯åŠ¨æ•°æ®åº“
4. éªŒè¯æ•°æ®ä¸€è‡´æ€§
5. æ¸…ç†æ¢å¤å‚æ•°

**éªŒè¯**ï¼š

```sql
-- æ£€æŸ¥æ¢å¤çŠ¶æ€
SELECT pg_last_wal_replay_lsn(), now();

-- éªŒè¯æ•°æ®
SELECT count(*) FROM critical_table;
```

## ä¸ƒã€ç¾å¤‡ä¸æ¼”ç»ƒ

### 7.1 ç¾å¤‡æ¶æ„

**çº§è”å¤åˆ¶**ï¼š

```text
Primary â†’ Standby1 â†’ Standby2
```

**é…ç½®ç¤ºä¾‹**ï¼š

```text
# Standby1é…ç½®
primary_conninfo = 'host=primary port=5432 user=repl'
primary_slot_name = 'standby1_slot'

# Standby2é…ç½®
primary_conninfo = 'host=standby1 port=5432 user=repl'
primary_slot_name = 'standby2_slot'
```

### 7.2 æ¼”ç»ƒSOP

**æ¼”ç»ƒæ­¥éª¤**ï¼š

1. é€‰æ‹©è¿‘ä¸€æ¬¡åŸºçº¿å¤‡ä»½ + WAL
2. æ­å»ºæ¢å¤ç¯å¢ƒå¹¶æ‰§è¡ŒPITR
3. æ ¡éªŒä¸€è‡´æ€§ä¸å®Œæ•´æ€§
4. è¯„ä¼°RTO/RPOï¼Œè®°å½•åå·®å¹¶æ”¹è¿›é…ç½®

**æ¼”ç»ƒè„šæœ¬**ï¼š

```bash
#!/bin/bash
# disaster_recovery_drill.sh

BACKUP_DIR="/backup/postgresql"
RESTORE_DIR="/restore/test"

# é€‰æ‹©æœ€æ–°å¤‡ä»½
LATEST_BACKUP=$(ls -td "$BACKUP_DIR"/* | head -1)

# æ¢å¤å¤‡ä»½
pg_combinebackup "$LATEST_BACKUP" -o "$RESTORE_DIR"

# é…ç½®æ¢å¤
cp "$RESTORE_DIR"/* $PGDATA/

# å¯åŠ¨æ•°æ®åº“
pg_ctl -D $PGDATA start

# éªŒè¯
psql -c "SELECT count(*) FROM critical_table;"
```

## å…«ã€çŸ¥è¯†çŸ©é˜µå¯¹æ¯”

### 8.1 å¤‡ä»½æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å¤‡ä»½æ—¶é—´ | æ¢å¤æ—¶é—´ | å­˜å‚¨ç©ºé—´ | RPO | RTO | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|---------|-----|-----|---------|
| é€»è¾‘å¤‡ä»½ | ä¸­ | æ…¢ | ä¸­ | 24å°æ—¶ | 4-8å°æ—¶ | å°å‹æ•°æ®åº“ |
| ç‰©ç†å…¨é‡ | é•¿ | å¿« | å¤§ | 1å°æ—¶ | 1-2å°æ—¶ | ä¸­å¤§å‹æ•°æ®åº“ |
| å¢é‡å¤‡ä»½ | æå¿« | å¿« | æå° | 1å°æ—¶ | 1-2å°æ—¶ | å¤§å‹æ•°æ®åº“ |
| WALå½’æ¡£ | æŒç»­ | å¿« | æŒç»­å¢é•¿ | <1å°æ—¶ | <1å°æ—¶ | å…³é”®ä¸šåŠ¡ |

### 8.2 æ¢å¤æ—¶é—´å¯¹æ¯”

| æ•°æ®åº“å¤§å° | é€»è¾‘å¤‡ä»½æ¢å¤ | ç‰©ç†å¤‡ä»½æ¢å¤ | å¢é‡å¤‡ä»½æ¢å¤ |
|-----------|------------|------------|------------|
| 100GB | 2-4å°æ—¶ | 30-60åˆ†é’Ÿ | 30-60åˆ†é’Ÿ |
| 500GB | 8-12å°æ—¶ | 1-2å°æ—¶ | 1-2å°æ—¶ |
| 1TB | 16-24å°æ—¶ | 2-4å°æ—¶ | 2-4å°æ—¶ |
| 5TB | ä¸å¯è¡Œ | 8-12å°æ—¶ | 8-12å°æ—¶ |

## ä¹ã€åˆè§„ä¸å®‰å…¨

### 9.1 å¤‡ä»½åŠ å¯†

**ä¼ è¾“åŠ å¯†**ï¼š

```bash
# ä½¿ç”¨SSLè¿æ¥
pg_dump -h <host> -U <user> -d mydb \
  "sslmode=require" \
  -f mydb.dump
```

**é™æ€åŠ å¯†**ï¼š

```bash
# å¤‡ä»½ååŠ å¯†
pg_dump -h <host> -U <user> -d mydb -f - | \
  gpg --encrypt --recipient backup@example.com > mydb.dump.gpg

# æ¢å¤æ—¶è§£å¯†
gpg --decrypt mydb.dump.gpg | \
  pg_restore -h <host> -U <user> -d mydb
```

### 9.2 è®¿é—®æ§åˆ¶

**å¤‡ä»½æ–‡ä»¶æƒé™**ï¼š

```bash
# è®¾ç½®å¤‡ä»½æ–‡ä»¶æƒé™
chmod 600 /backup/postgresql/*
chown postgres:postgres /backup/postgresql/*
```

### 9.3 å®¡è®¡ä¸åˆè§„

**å¤‡ä»½å®¡è®¡**ï¼š

```sql
-- è®°å½•å¤‡ä»½æ“ä½œ
CREATE TABLE backup_audit (
    id SERIAL PRIMARY KEY,
    backup_type VARCHAR(50),
    backup_path TEXT,
    backup_size BIGINT,
    backup_time TIMESTAMPTZ DEFAULT NOW(),
    operator VARCHAR(100)
);
```

## åã€å®è·µæ¡ˆä¾‹

### 10.1 æ¡ˆä¾‹1ï¼šå°å‹æ•°æ®åº“å¤‡ä»½

**åœºæ™¯**ï¼š100GBæ•°æ®åº“ï¼Œæ¯æ—¥å¤‡ä»½

**æ–¹æ¡ˆ**ï¼šé€»è¾‘å¤‡ä»½

```bash
# æ¯æ—¥å¤‡ä»½è„šæœ¬
pg_dump -h localhost -U postgres -F c -Z 9 \
  -d mydb -f /backup/mydb_$(date +%F).dump

# æ¸…ç†30å¤©å‰çš„å¤‡ä»½
find /backup -name "*.dump" -mtime +30 -delete
```

### 10.2 æ¡ˆä¾‹2ï¼šå¤§å‹æ•°æ®åº“å¤‡ä»½

**åœºæ™¯**ï¼š5TBæ•°æ®åº“ï¼Œéœ€è¦å¿«é€Ÿå¤‡ä»½

**æ–¹æ¡ˆ**ï¼šå¢é‡å¤‡ä»½

```bash
# å‘¨æ—¥å…¨é‡å¤‡ä»½
pg_basebackup -D /backup/full/$(date +%F) \
  -F tar -z -P --checkpoint=fast

# æ¯æ—¥å¢é‡å¤‡ä»½
pg_basebackup -D /backup/inc/$(date +%F) \
  --incremental=/backup/latest/backup_manifest \
  -F tar -z -P
```

### 10.3 æ¡ˆä¾‹3ï¼šè·¨ç‰ˆæœ¬è¿ç§»

**åœºæ™¯**ï¼šä»PostgreSQL 14å‡çº§åˆ°18

**æ–¹æ¡ˆ**ï¼šé€»è¾‘å¤‡ä»½ + pg_upgrade

```bash
# é€»è¾‘å¤‡ä»½
pg_dumpall -h old_host -U postgres -f backup.sql

# åœ¨æ–°ç‰ˆæœ¬æ¢å¤
psql -h new_host -U postgres -f backup.sql
```

## åä¸€ã€æœ€ä½³å®è·µ

### 11.1 å¤‡ä»½æœ€ä½³å®è·µ

1. **3-2-1è§„åˆ™**ï¼š3ä»½å¤‡ä»½ï¼Œ2ç§ä»‹è´¨ï¼Œ1ä»½å¼‚åœ°
2. **å®šæœŸéªŒè¯**ï¼šå®šæœŸæµ‹è¯•æ¢å¤æµç¨‹
3. **è‡ªåŠ¨åŒ–å¤‡ä»½**ï¼šä½¿ç”¨cronæˆ–è°ƒåº¦ç³»ç»Ÿ
4. **ç›‘æ§å‘Šè­¦**ï¼šç›‘æ§å¤‡ä»½çŠ¶æ€å’Œå­˜å‚¨ç©ºé—´
5. **æ–‡æ¡£è®°å½•**ï¼šè®°å½•å¤‡ä»½ç­–ç•¥å’Œæ¢å¤æµç¨‹

### 11.2 æ¢å¤æœ€ä½³å®è·µ

1. **å‡†å¤‡æ¢å¤ç¯å¢ƒ**ï¼šæå‰å‡†å¤‡æ¢å¤ç¯å¢ƒ
2. **æµ‹è¯•æ¢å¤æµç¨‹**ï¼šå®šæœŸæ¼”ç»ƒæ¢å¤æµç¨‹
3. **éªŒè¯æ•°æ®å®Œæ•´æ€§**ï¼šæ¢å¤åéªŒè¯æ•°æ®
4. **è®°å½•æ¢å¤è¿‡ç¨‹**ï¼šè®°å½•æ¢å¤æ—¶é—´å’Œé—®é¢˜
5. **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®æ¼”ç»ƒç»“æœæ”¹è¿›æµç¨‹

## åäºŒã€å‚è€ƒèµ„æº

### 12.1 å®˜æ–¹æ–‡æ¡£

- [PostgreSQL 18 Backup Documentation](https://www.postgresql.org/docs/18/backup.html)
- [pg_basebackup Documentation](https://www.postgresql.org/docs/18/app-pgbasebackup.html)
- [pg_combinebackup Documentation](https://www.postgresql.org/docs/18/app-pgcombinebackup.html)
- [pg_dump Documentation](https://www.postgresql.org/docs/18/app-pgdump.html)

### 12.2 ç›¸å…³æ–‡æ¡£

- [PostgreSQL 18æ–°ç‰¹æ€§](../18-ç‰ˆæœ¬ç‰¹æ€§/02.01-PostgreSQL-18-æ–°ç‰¹æ€§.md) - å¢é‡å¤‡ä»½è¯¦è§£
- [å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–](../04-å­˜å‚¨ä¸æ¢å¤/01.06-å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–.md) - WALæœºåˆ¶
- [å•æœºéƒ¨ç½²ä¸é…ç½®](./04.01-å•æœºéƒ¨ç½²ä¸é…ç½®.md) - åˆå§‹é…ç½®
- [ç›‘æ§ä¸è¯Šæ–­](./04.04-ç›‘æ§ä¸è¯Šæ–­.md) - å¤‡ä»½ç›‘æ§
- [é›†ç¾¤éƒ¨ç½²ä¸é«˜å¯ç”¨](./04.02-é›†ç¾¤éƒ¨ç½²ä¸é«˜å¯ç”¨.md) - å¤åˆ¶ä¸å¤‡ç”¨åº“

---

## åä¸‰ã€å‚è€ƒæ–‡çŒ®

1. PostgreSQL Global Development Group. (2025). PostgreSQL 18 Documentation. <https://www.postgresql.org/docs/18/>
2. PostgreSQLå®˜æ–¹æ–‡æ¡£ - [å¤‡ä»½ä¸æ¢å¤](https://www.postgresql.org/docs/current/backup.html)
3. PostgreSQLå®˜æ–¹æ–‡æ¡£ - [pg_basebackup](https://www.postgresql.org/docs/current/app-pgbasebackup.html)
4. PostgreSQLå®˜æ–¹æ–‡æ¡£ - [pg_combinebackup](https://www.postgresql.org/docs/current/app-pgcombinebackup.html)

---

**æœ€åæ›´æ–°**: 2025-01-15
**ç»´æŠ¤è€…**: Data Science Team
