# PostgreSQL ç½‘ç»œæµç®—æ³•å®Œæ•´æŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ
> **æŠ€æœ¯æ ˆ**: PostgreSQL 17+/18+ | å›¾ç®—æ³• | ç½‘ç»œæµ | æœ€å¤§æµæœ€å°å‰²
> **éš¾åº¦çº§åˆ«**: â­â­â­â­â­ (ä¸“å®¶çº§)
> **å‚è€ƒæ ‡å‡†**: Network Flows (Ahuja et al.), Graph Algorithms, Max-Flow Min-Cut

---

## ğŸ“‹ ç›®å½•

- [PostgreSQL ç½‘ç»œæµç®—æ³•å®Œæ•´æŒ‡å—](#postgresql-ç½‘ç»œæµç®—æ³•å®Œæ•´æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ç½‘ç»œæµæ¦‚è¿°](#ç½‘ç»œæµæ¦‚è¿°)
    - [ç†è®ºåŸºç¡€](#ç†è®ºåŸºç¡€)
    - [é—®é¢˜å®šä¹‰](#é—®é¢˜å®šä¹‰)
    - [åº”ç”¨åœºæ™¯](#åº”ç”¨åœºæ™¯)
  - [1. æœ€å¤§æµé—®é¢˜](#1-æœ€å¤§æµé—®é¢˜)
    - [1.1 Ford-Fulkersonç®—æ³•](#11-ford-fulkersonç®—æ³•)
  - [ğŸ“š å‚è€ƒèµ„æº](#-å‚è€ƒèµ„æº)

---

## ç½‘ç»œæµæ¦‚è¿°

**ç½‘ç»œæµ**æ˜¯åœ¨æœ‰å‘å›¾ä¸­å¯»æ‰¾ä»æºç‚¹åˆ°æ±‡ç‚¹çš„æœ€å¤§æµé‡ã€‚

### ç†è®ºåŸºç¡€

ç»™å®šæœ‰å‘å›¾ $G = (V, E)$ï¼Œæ¯æ¡è¾¹æœ‰å®¹é‡ $c(u,v)$ï¼Œæ±‚ä»æºç‚¹ $s$ åˆ°æ±‡ç‚¹ $t$ çš„æœ€å¤§æµã€‚

### é—®é¢˜å®šä¹‰

**æµå‡½æ•°** $f: E \rightarrow \mathbb{R}$ æ»¡è¶³ï¼š

1. **å®¹é‡çº¦æŸ**: $0 \leq f(u,v) \leq c(u,v)$
2. **æµé‡å®ˆæ’**: $\sum_{v} f(u,v) = \sum_{v} f(v,u)$ï¼ˆé™¤æºæ±‡å¤–ï¼‰

**æœ€å¤§æµ**: $\max \sum_{v} f(s,v)$

### åº”ç”¨åœºæ™¯

| åº”ç”¨é¢†åŸŸ | å…·ä½“åº”ç”¨ |
|---------|---------|
| **ç½‘ç»œè®¾è®¡** | ç½‘ç»œå¸¦å®½åˆ†é… |
| **åŒ¹é…é—®é¢˜** | äºŒåˆ†å›¾åŒ¹é… |
| **å›¾åƒå¤„ç†** | å›¾åƒåˆ†å‰² |
| **èµ„æºåˆ†é…** | ä»»åŠ¡åˆ†é… |

---

## 1. æœ€å¤§æµé—®é¢˜

### 1.1 Ford-Fulkersonç®—æ³•

**Ford-Fulkersonç®—æ³•**é€šè¿‡å¯»æ‰¾å¢å¹¿è·¯å¾„å¢åŠ æµé‡ã€‚

**ç®—æ³•æ­¥éª¤**:

1. åˆå§‹åŒ–æµä¸º0
2. åœ¨æ®‹å·®å›¾ä¸­å¯»æ‰¾å¢å¹¿è·¯å¾„
3. æ²¿å¢å¹¿è·¯å¾„å¢åŠ æµé‡
4. é‡å¤ç›´åˆ°æ²¡æœ‰å¢å¹¿è·¯å¾„

```sql
-- ç½‘ç»œæµæ•°æ®å‡†å¤‡ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
DO $$
BEGIN
    BEGIN
        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'flow_network') THEN
            RAISE WARNING 'è¡¨ flow_network å·²å­˜åœ¨ï¼Œå…ˆåˆ é™¤';
            DROP TABLE flow_network CASCADE;
        END IF;

        CREATE TABLE flow_network (
            from_node INTEGER NOT NULL,
            to_node INTEGER NOT NULL,
            capacity NUMERIC NOT NULL,
            flow NUMERIC DEFAULT 0,
            PRIMARY KEY (from_node, to_node)
        );

        -- æ’å…¥ç½‘ç»œæµè¾¹
        INSERT INTO flow_network (from_node, to_node, capacity) VALUES
            (1, 2, 10), (1, 3, 5),
            (2, 3, 15), (2, 4, 10),
            (3, 4, 10);

        RAISE NOTICE 'è¡¨ flow_network åˆ›å»ºæˆåŠŸ';
    EXCEPTION
        WHEN duplicate_table THEN
            RAISE WARNING 'è¡¨ flow_network å·²å­˜åœ¨';
        WHEN OTHERS THEN
            RAISE EXCEPTION 'åˆ›å»ºè¡¨å¤±è´¥: %', SQLERRM;
    END;
END $$;

-- æ®‹å·®å›¾è®¡ç®—
WITH residual_graph AS (
    SELECT
        from_node,
        to_node,
        capacity - flow AS residual_capacity,
        flow AS reverse_capacity
    FROM flow_network
    WHERE capacity - flow > 0
    UNION ALL
    SELECT
        to_node AS from_node,
        from_node AS to_node,
        flow AS residual_capacity,
        0 AS reverse_capacity
    FROM flow_network
    WHERE flow > 0
)
SELECT
    from_node,
    to_node,
    ROUND(residual_capacity::numeric, 2) AS residual_capacity
FROM residual_graph
ORDER BY from_node, to_node;
```

---

## ğŸ“š å‚è€ƒèµ„æº

1. **Ahuja, R.K., et al. (1993)**: "Network Flows: Theory, Algorithms, and Applications"

---

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
