# PostgreSQL å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆå®Œæ•´æŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ
> **æŠ€æœ¯æ ˆ**: PostgreSQL 17+/18+ | æ•°æ®å¯è§†åŒ– | å¤šç»´æ•°æ® | çƒ­åŠ›å›¾
> **éš¾åº¦çº§åˆ«**: â­â­â­ (ä¸­çº§)
> **å‚è€ƒæ ‡å‡†**: Multidimensional Visualization, Data Visualization

---

## ğŸ“‹ ç›®å½•

- [PostgreSQL å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆå®Œæ•´æŒ‡å—](#postgresql-å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆå®Œæ•´æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [å¤šç»´å¯è§†åŒ–æ¦‚è¿°](#å¤šç»´å¯è§†åŒ–æ¦‚è¿°)
  - [ç†è®ºåŸºç¡€](#ç†è®ºåŸºç¡€)
    - [å¤šç»´æ•°æ®å¯è§†åŒ–é—®é¢˜å®šä¹‰](#å¤šç»´æ•°æ®å¯è§†åŒ–é—®é¢˜å®šä¹‰)
    - [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
    - [ç®—æ³•åˆ†ç±»](#ç®—æ³•åˆ†ç±»)
    - [å¯è§†åŒ–ç±»å‹å¯¹æ¯”](#å¯è§†åŒ–ç±»å‹å¯¹æ¯”)
    - [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
  - [1. çƒ­åŠ›å›¾æ•°æ®](#1-çƒ­åŠ›å›¾æ•°æ®)
    - [1.1 ç›¸å…³æ€§çƒ­åŠ›å›¾](#11-ç›¸å…³æ€§çƒ­åŠ›å›¾)
    - [1.2 ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾](#12-ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾)
  - [2. é›·è¾¾å›¾æ•°æ®](#2-é›·è¾¾å›¾æ•°æ®)
    - [2.1 é›·è¾¾å›¾æ•°æ®ç”Ÿæˆ](#21-é›·è¾¾å›¾æ•°æ®ç”Ÿæˆ)
    - [2.2 é›·è¾¾å›¾æ•°æ®æ ¼å¼è½¬æ¢](#22-é›·è¾¾å›¾æ•°æ®æ ¼å¼è½¬æ¢)
  - [3. å¹³è¡Œåæ ‡æ•°æ®](#3-å¹³è¡Œåæ ‡æ•°æ®)
    - [3.1 å¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆ](#31-å¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆ)
    - [3.2 å¹³è¡Œåæ ‡æ•°æ®ï¼ˆé•¿æ ¼å¼ï¼‰](#32-å¹³è¡Œåæ ‡æ•°æ®é•¿æ ¼å¼)
  - [4. é™ç»´å¯è§†åŒ–](#4-é™ç»´å¯è§†åŒ–)
    - [4.1 PCAé™ç»´æ•°æ®](#41-pcaé™ç»´æ•°æ®)
  - [5. å®é™…åº”ç”¨æ¡ˆä¾‹](#5-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [5.1 å®¢æˆ·ç”»åƒå¯è§†åŒ–](#51-å®¢æˆ·ç”»åƒå¯è§†åŒ–)
    - [5.2 äº§å“ç‰¹å¾å¯¹æ¯”](#52-äº§å“ç‰¹å¾å¯¹æ¯”)
  - [ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®](#-æ€§èƒ½ä¼˜åŒ–å»ºè®®)
    - [ç´¢å¼•ä¼˜åŒ–](#ç´¢å¼•ä¼˜åŒ–)
    - [ç‰©åŒ–è§†å›¾](#ç‰©åŒ–è§†å›¾)
    - [æ•°æ®é‡‡æ ·](#æ•°æ®é‡‡æ ·)
  - [ğŸ¯ æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)
    - [æ•°æ®å½’ä¸€åŒ–](#æ•°æ®å½’ä¸€åŒ–)
    - [é¢œè‰²æ˜ å°„](#é¢œè‰²æ˜ å°„)
    - [äº¤äº’æ€§](#äº¤äº’æ€§)
    - [æ€§èƒ½å¹³è¡¡](#æ€§èƒ½å¹³è¡¡)
    - [SQLå®ç°æ³¨æ„äº‹é¡¹](#sqlå®ç°æ³¨æ„äº‹é¡¹)
  - [ğŸ“ˆ å¯è§†åŒ–æ–¹æ³•å¯¹æ¯”](#-å¯è§†åŒ–æ–¹æ³•å¯¹æ¯”)
  - [ğŸ” å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
    - [é—®é¢˜1ï¼šç»´åº¦è¿‡å¤šï¼Œå¯è§†åŒ–éš¾ä»¥ç†è§£](#é—®é¢˜1ç»´åº¦è¿‡å¤šå¯è§†åŒ–éš¾ä»¥ç†è§£)
    - [é—®é¢˜2ï¼šæ•°æ®å½’ä¸€åŒ–ä¸å½“](#é—®é¢˜2æ•°æ®å½’ä¸€åŒ–ä¸å½“)
    - [é—®é¢˜3ï¼šç›¸å…³æ€§è®¡ç®—æ…¢](#é—®é¢˜3ç›¸å…³æ€§è®¡ç®—æ…¢)
  - [ğŸ“š å‚è€ƒèµ„æº](#-å‚è€ƒèµ„æº)

---

## å¤šç»´å¯è§†åŒ–æ¦‚è¿°

å¤šç»´æ•°æ®å¯è§†åŒ–å¸®åŠ©ç†è§£é«˜ç»´æ•°æ®çš„å…³ç³»å’Œæ¨¡å¼ï¼Œå°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°2D/3Då¯è§†åŒ–ç©ºé—´ã€‚

## ç†è®ºåŸºç¡€

### å¤šç»´æ•°æ®å¯è§†åŒ–é—®é¢˜å®šä¹‰

å¤šç»´æ•°æ®å¯è§†åŒ–æ˜¯å°†é«˜ç»´æ•°æ®ï¼ˆç»´åº¦æ•°>3ï¼‰æ˜ å°„åˆ°ä½ç»´å¯è§†åŒ–ç©ºé—´ï¼ˆé€šå¸¸æ˜¯2Dæˆ–3Dï¼‰ï¼Œä»¥å¸®åŠ©ç”¨æˆ·ç†è§£æ•°æ®å…³ç³»ã€æ¨¡å¼å’Œç»“æ„çš„è¿‡ç¨‹ã€‚

### æ ¸å¿ƒæ¦‚å¿µ

1. **ç»´åº¦æ˜ å°„**ï¼š
   - ç›´æ¥æ˜ å°„ï¼šæ¯ä¸ªç»´åº¦å¯¹åº”ä¸€ä¸ªåæ ‡è½´
   - é™ç»´æ˜ å°„ï¼šä½¿ç”¨é™ç»´ç®—æ³•ï¼ˆPCAã€t-SNEï¼‰å°†é«˜ç»´æ˜ å°„åˆ°ä½ç»´
   - æŠ•å½±æ˜ å°„ï¼šä½¿ç”¨æŠ•å½±æ–¹æ³•å±•ç¤ºé«˜ç»´æ•°æ®

2. **å¯è§†åŒ–ç±»å‹**ï¼š
   - çƒ­åŠ›å›¾ï¼š2DçŸ©é˜µæ•°æ®å¯è§†åŒ–
   - é›·è¾¾å›¾ï¼šå¤šç»´åº¦æŒ‡æ ‡å¯¹æ¯”
   - å¹³è¡Œåæ ‡ï¼šé«˜ç»´æ•°æ®æ¢ç´¢
   - æ•£ç‚¹å›¾çŸ©é˜µï¼šå¤šç»´åº¦å…³ç³»å±•ç¤º

3. **æ•°æ®é¢„å¤„ç†**ï¼š
   - å½’ä¸€åŒ–ï¼šå°†ä¸åŒå°ºåº¦çš„æ•°æ®å½’ä¸€åŒ–
   - æ ‡å‡†åŒ–ï¼šå°†æ•°æ®æ ‡å‡†åŒ–åˆ°ç›¸åŒèŒƒå›´
   - é™ç»´ï¼šä½¿ç”¨é™ç»´ç®—æ³•å‡å°‘ç»´åº¦

### ç®—æ³•åˆ†ç±»

1. **æŒ‰æ˜ å°„æ–¹å¼åˆ†ç±»**ï¼š
   - ç›´æ¥æ˜ å°„ï¼šçƒ­åŠ›å›¾ã€é›·è¾¾å›¾
   - é™ç»´æ˜ å°„ï¼šPCAã€t-SNEã€UMAP
   - æŠ•å½±æ˜ å°„ï¼šå¹³è¡Œåæ ‡ã€æ•£ç‚¹å›¾çŸ©é˜µ

2. **æŒ‰å¯è§†åŒ–ç±»å‹åˆ†ç±»**ï¼š
   - çŸ©é˜µå¯è§†åŒ–ï¼šçƒ­åŠ›å›¾ã€ç›¸å…³çŸ©é˜µ
   - å¤šç»´åº¦å¯¹æ¯”ï¼šé›·è¾¾å›¾ã€å¹³è¡Œåæ ‡
   - å…³ç³»å¯è§†åŒ–ï¼šç½‘ç»œå›¾ã€æ ‘çŠ¶å›¾

### å¯è§†åŒ–ç±»å‹å¯¹æ¯”

| ç±»å‹ | ç»´åº¦ | åº”ç”¨åœºæ™¯ | ä¼˜åŠ¿ | å±€é™æ€§ |
|------|------|---------|------|--------|
| **çƒ­åŠ›å›¾** | 2D | ç›¸å…³æ€§çŸ©é˜µã€é¢‘ç‡åˆ†å¸ƒ | ç›´è§‚ã€æ˜“äºç†è§£ | ç»´åº¦å—é™ |
| **é›·è¾¾å›¾** | å¤šç»´åº¦ | å¤šæŒ‡æ ‡å¯¹æ¯” | å¤šç»´åº¦å¯¹æ¯” | ç»´åº¦è¿‡å¤šæ—¶éš¾ä»¥é˜…è¯» |
| **å¹³è¡Œåæ ‡** | é«˜ç»´ | é«˜ç»´æ•°æ®æ¢ç´¢ | æ”¯æŒé«˜ç»´æ•°æ® | æ•°æ®ç‚¹è¿‡å¤šæ—¶éš¾ä»¥é˜…è¯» |
| **æ•£ç‚¹å›¾çŸ©é˜µ** | å¤šç»´åº¦ | å¤šç»´åº¦å…³ç³»å±•ç¤º | å±•ç¤ºä¸¤ä¸¤å…³ç³» | ç»´åº¦è¿‡å¤šæ—¶ç»„åˆæ•°è¿‡å¤š |

### æŠ€æœ¯æ ˆ

- **èšåˆå‡½æ•°**ï¼šAVGã€SUMã€COUNTã€CORR
- **çª—å£å‡½æ•°**ï¼šROW_NUMBERã€MINã€MAXã€OVER
- **æ•°å­¦å‡½æ•°**ï¼šSQRTã€POWERã€ABS
- **æ•°ç»„æ“ä½œ**ï¼šARRAY_AGGã€unnest

---

## 1. çƒ­åŠ›å›¾æ•°æ®

### 1.1 ç›¸å…³æ€§çƒ­åŠ›å›¾

**ç›¸å…³æ€§çƒ­åŠ›å›¾**å±•ç¤ºå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚

```sql
-- å¤šç»´æ•°æ®å‡†å¤‡ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
DO $$
BEGIN
    BEGIN
        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'multidimensional_data') THEN
            DROP TABLE multidimensional_data CASCADE;
        END IF;

        CREATE TABLE multidimensional_data (
            id SERIAL PRIMARY KEY,
            category_x VARCHAR(50) NOT NULL,
            category_y VARCHAR(50) NOT NULL,
            value NUMERIC NOT NULL,
            dimension1 NUMERIC,
            dimension2 NUMERIC,
            dimension3 NUMERIC,
            dimension4 NUMERIC,
            dimension5 NUMERIC
        );

        -- æ’å…¥ç¤ºä¾‹å¤šç»´æ•°æ®
        INSERT INTO multidimensional_data (category_x, category_y, value, dimension1, dimension2, dimension3, dimension4, dimension5)
        SELECT
            'Category' || (i % 5 + 1),
            'Type' || (j % 4 + 1),
            (RANDOM() * 100),
            RANDOM() * 10,
            RANDOM() * 10,
            RANDOM() * 10,
            RANDOM() * 10,
            RANDOM() * 10
        FROM generate_series(1, 100) i
        CROSS JOIN generate_series(1, 4) j;

        CREATE INDEX idx_multidim_x ON multidimensional_data(category_x);
        CREATE INDEX idx_multidim_y ON multidimensional_data(category_y);

        RAISE NOTICE 'å¤šç»´æ•°æ®è¡¨åˆ›å»ºæˆåŠŸï¼Œå…± % æ¡è®°å½•', (SELECT COUNT(*) FROM multidimensional_data);
    EXCEPTION
        WHEN OTHERS THEN
            RAISE EXCEPTION 'åˆ›å»ºè¡¨å¤±è´¥: %', SQLERRM;
    END;
END $$;

-- çƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆï¼šé¢‘ç‡çƒ­åŠ›å›¾
WITH heatmap_data AS (
    SELECT
        category_x,
        category_y,
        COUNT(*) AS frequency,
        AVG(value) AS avg_value,
        MIN(value) AS min_value,
        MAX(value) AS max_value,
        STDDEV(value) AS std_value
    FROM multidimensional_data
    GROUP BY category_x, category_y
),
normalized_heatmap AS (
    SELECT
        category_x,
        category_y,
        frequency,
        avg_value,
        -- å½’ä¸€åŒ–åˆ°0-1èŒƒå›´
        (avg_value - MIN(avg_value) OVER ()) /
        NULLIF(MAX(avg_value) OVER () - MIN(avg_value) OVER (), 0) AS normalized_value
    FROM heatmap_data
)
SELECT
    category_x,
    category_y,
    frequency,
    ROUND(avg_value::numeric, 2) AS avg_value,
    ROUND(normalized_value::numeric, 4) AS normalized_value,
    CASE
        WHEN normalized_value > 0.8 THEN 'High'
        WHEN normalized_value > 0.5 THEN 'Medium'
        WHEN normalized_value > 0.2 THEN 'Low'
        ELSE 'Very Low'
    END AS intensity_level
FROM normalized_heatmap
ORDER BY category_x, category_y;
```

### 1.2 ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾

```sql
-- ç›¸å…³æ€§çŸ©é˜µï¼šè®¡ç®—å¤šç»´åº¦ä¹‹é—´çš„ç›¸å…³æ€§
WITH dimension_correlations AS (
    SELECT
        'dimension1' AS dim1,
        'dimension2' AS dim2,
        CORR(dimension1, dimension2) AS correlation
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL AND dimension2 IS NOT NULL

    UNION ALL

    SELECT
        'dimension1',
        'dimension3',
        CORR(dimension1, dimension3)
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL AND dimension3 IS NOT NULL

    UNION ALL

    SELECT
        'dimension2',
        'dimension3',
        CORR(dimension2, dimension3)
    FROM multidimensional_data
    WHERE dimension2 IS NOT NULL AND dimension3 IS NOT NULL
)
SELECT
    dim1,
    dim2,
    ROUND(correlation::numeric, 4) AS correlation_coefficient,
    CASE
        WHEN ABS(correlation) > 0.7 THEN 'Strong correlation'
        WHEN ABS(correlation) > 0.4 THEN 'Moderate correlation'
        WHEN ABS(correlation) > 0.2 THEN 'Weak correlation'
        ELSE 'No correlation'
    END AS correlation_strength,
    CASE
        WHEN correlation > 0 THEN 'Positive'
        ELSE 'Negative'
    END AS correlation_direction
FROM dimension_correlations
ORDER BY ABS(correlation) DESC;
```

---

## 2. é›·è¾¾å›¾æ•°æ®

### 2.1 é›·è¾¾å›¾æ•°æ®ç”Ÿæˆ

**é›·è¾¾å›¾**å±•ç¤ºå¤šä¸ªç»´åº¦çš„å€¼ï¼Œç”¨äºå¤šæŒ‡æ ‡å¯¹æ¯”ã€‚

```sql
-- é›·è¾¾å›¾æ•°æ®ï¼šå¤šç»´åº¦æŒ‡æ ‡å¯¹æ¯”
WITH radar_data AS (
    SELECT
        category_x AS entity,
        AVG(dimension1) AS dim1_avg,
        AVG(dimension2) AS dim2_avg,
        AVG(dimension3) AS dim3_avg,
        AVG(dimension4) AS dim4_avg,
        AVG(dimension5) AS dim5_avg
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
    GROUP BY category_x
),
normalized_radar AS (
    SELECT
        entity,
        -- å½’ä¸€åŒ–åˆ°0-100èŒƒå›´
        ROUND((dim1_avg - MIN(dim1_avg) OVER ()) /
              NULLIF(MAX(dim1_avg) OVER () - MIN(dim1_avg) OVER (), 0) * 100, 2) AS dim1_score,
        ROUND((dim2_avg - MIN(dim2_avg) OVER ()) /
              NULLIF(MAX(dim2_avg) OVER () - MIN(dim2_avg) OVER (), 0) * 100, 2) AS dim2_score,
        ROUND((dim3_avg - MIN(dim3_avg) OVER ()) /
              NULLIF(MAX(dim3_avg) OVER () - MIN(dim3_avg) OVER (), 0) * 100, 2) AS dim3_score,
        ROUND((dim4_avg - MIN(dim4_avg) OVER ()) /
              NULLIF(MAX(dim4_avg) OVER () - MIN(dim4_avg) OVER (), 0) * 100, 2) AS dim4_score,
        ROUND((dim5_avg - MIN(dim5_avg) OVER ()) /
              NULLIF(MAX(dim5_avg) OVER () - MIN(dim5_avg) OVER (), 0) * 100, 2) AS dim5_score
    FROM radar_data
)
SELECT
    entity,
    dim1_score AS dimension1,
    dim2_score AS dimension2,
    dim3_score AS dimension3,
    dim4_score AS dimension4,
    dim5_score AS dimension5,
    ROUND((dim1_score + dim2_score + dim3_score + dim4_score + dim5_score) / 5.0, 2) AS overall_score
FROM normalized_radar
ORDER BY overall_score DESC;
```

### 2.2 é›·è¾¾å›¾æ•°æ®æ ¼å¼è½¬æ¢

```sql
-- é›·è¾¾å›¾æ•°æ®ï¼šè½¬æ¢ä¸ºé•¿æ ¼å¼ï¼ˆä¾¿äºå¯è§†åŒ–å·¥å…·ä½¿ç”¨ï¼‰
WITH radar_long_format AS (
    SELECT
        category_x AS entity,
        'Dimension1' AS dimension_name,
        AVG(dimension1) AS dimension_value
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
    GROUP BY category_x

    UNION ALL

    SELECT
        category_x,
        'Dimension2',
        AVG(dimension2)
    FROM multidimensional_data
    WHERE dimension2 IS NOT NULL
    GROUP BY category_x

    UNION ALL

    SELECT
        category_x,
        'Dimension3',
        AVG(dimension3)
    FROM multidimensional_data
    WHERE dimension3 IS NOT NULL
    GROUP BY category_x
)
SELECT
    entity,
    dimension_name,
    ROUND(dimension_value::numeric, 2) AS value,
    ROUND((dimension_value - MIN(dimension_value) OVER (PARTITION BY dimension_name)) /
          NULLIF(MAX(dimension_value) OVER (PARTITION BY dimension_name) -
                 MIN(dimension_value) OVER (PARTITION BY dimension_name), 0) * 100, 2) AS normalized_value
FROM radar_long_format
ORDER BY entity, dimension_name;
```

---

## 3. å¹³è¡Œåæ ‡æ•°æ®

### 3.1 å¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆ

**å¹³è¡Œåæ ‡**ç”¨äºå¯è§†åŒ–é«˜ç»´æ•°æ®ã€‚

```sql
-- å¹³è¡Œåæ ‡æ•°æ®ï¼šé«˜ç»´æ•°æ®è½¬æ¢
WITH parallel_coords_data AS (
    SELECT
        id,
        category_x AS category,
        -- å½’ä¸€åŒ–å„ç»´åº¦åˆ°0-1èŒƒå›´
        (dimension1 - MIN(dimension1) OVER ()) /
        NULLIF(MAX(dimension1) OVER () - MIN(dimension1) OVER (), 0) AS dim1_norm,
        (dimension2 - MIN(dimension2) OVER ()) /
        NULLIF(MAX(dimension2) OVER () - MIN(dimension2) OVER (), 0) AS dim2_norm,
        (dimension3 - MIN(dimension3) OVER ()) /
        NULLIF(MAX(dimension3) OVER () - MIN(dimension3) OVER (), 0) AS dim3_norm,
        (dimension4 - MIN(dimension4) OVER ()) /
        NULLIF(MAX(dimension4) OVER () - MIN(dimension4) OVER (), 0) AS dim4_norm,
        (dimension5 - MIN(dimension5) OVER ()) /
        NULLIF(MAX(dimension5) OVER () - MIN(dimension5) OVER (), 0) AS dim5_norm
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
)
SELECT
    id,
    category,
    ROUND(dim1_norm::numeric, 4) AS dimension1,
    ROUND(dim2_norm::numeric, 4) AS dimension2,
    ROUND(dim3_norm::numeric, 4) AS dimension3,
    ROUND(dim4_norm::numeric, 4) AS dimension4,
    ROUND(dim5_norm::numeric, 4) AS dimension5
FROM parallel_coords_data
ORDER BY id
LIMIT 50;
```

### 3.2 å¹³è¡Œåæ ‡æ•°æ®ï¼ˆé•¿æ ¼å¼ï¼‰

```sql
-- å¹³è¡Œåæ ‡æ•°æ®ï¼šé•¿æ ¼å¼ï¼ˆæ¯è¡Œä¸€ä¸ªç»´åº¦å€¼ï¼‰
WITH parallel_coords_long AS (
    SELECT
        id,
        category_x AS category,
        1 AS dimension_order,
        'Dimension1' AS dimension_name,
        (dimension1 - MIN(dimension1) OVER ()) /
        NULLIF(MAX(dimension1) OVER () - MIN(dimension1) OVER (), 0) AS normalized_value
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL

    UNION ALL

    SELECT
        id,
        category_x,
        2,
        'Dimension2',
        (dimension2 - MIN(dimension2) OVER ()) /
        NULLIF(MAX(dimension2) OVER () - MIN(dimension2) OVER (), 0)
    FROM multidimensional_data
    WHERE dimension2 IS NOT NULL

    UNION ALL

    SELECT
        id,
        category_x,
        3,
        'Dimension3',
        (dimension3 - MIN(dimension3) OVER ()) /
        NULLIF(MAX(dimension3) OVER () - MIN(dimension3) OVER (), 0)
    FROM multidimensional_data
    WHERE dimension3 IS NOT NULL
)
SELECT
    id,
    category,
    dimension_order,
    dimension_name,
    ROUND(normalized_value::numeric, 4) AS value
FROM parallel_coords_long
ORDER BY id, dimension_order
LIMIT 100;
```

---

## 4. é™ç»´å¯è§†åŒ–

### 4.1 PCAé™ç»´æ•°æ®

```sql
-- PCAé™ç»´ï¼šå°†é«˜ç»´æ•°æ®é™åˆ°2Dç”¨äºå¯è§†åŒ–
WITH pca_data AS (
    SELECT
        id,
        category_x AS category,
        dimension1,
        dimension2,
        dimension3,
        dimension4,
        dimension5
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
),
centered_data AS (
    SELECT
        id,
        category,
        dimension1 - AVG(dimension1) OVER () AS dim1_centered,
        dimension2 - AVG(dimension2) OVER () AS dim2_centered,
        dimension3 - AVG(dimension3) OVER () AS dim3_centered,
        dimension4 - AVG(dimension4) OVER () AS dim4_centered,
        dimension5 - AVG(dimension5) OVER () AS dim5_centered
    FROM pca_data
)
SELECT
    id,
    category,
    -- ç®€åŒ–PCAï¼šä½¿ç”¨å‰ä¸¤ä¸ªä¸»æˆåˆ†
    ROUND((dim1_centered * 0.5 + dim2_centered * 0.3 + dim3_centered * 0.2)::numeric, 4) AS pc1,
    ROUND((dim2_centered * 0.4 + dim3_centered * 0.4 + dim4_centered * 0.2)::numeric, 4) AS pc2
FROM centered_data
ORDER BY id
LIMIT 50;
```

---

## 5. PostgreSQL 18 å¹¶è¡Œå¤šç»´æ•°æ®å¯è§†åŒ–å¢å¼º

**PostgreSQL 18** æ˜¾è‘—å¢å¼ºäº†å¹¶è¡Œå¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆè®¡ç®—èƒ½åŠ›ï¼Œæ”¯æŒå¹¶è¡Œæ‰§è¡Œçƒ­åŠ›å›¾ã€é›·è¾¾å›¾å’Œå¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆï¼Œå¤§å¹…æå‡å¤§è§„æ¨¡å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®å‡†å¤‡çš„æ€§èƒ½ã€‚

### 5.1 å¹¶è¡Œå¤šç»´æ•°æ®å¯è§†åŒ–åŸç†

PostgreSQL 18 çš„å¹¶è¡Œå¤šç»´æ•°æ®å¯è§†åŒ–é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

1. **å¹¶è¡Œæ‰«æ**ï¼šå¤šä¸ªå·¥ä½œè¿›ç¨‹å¹¶è¡Œæ‰«æå¤šç»´æ•°æ®
2. **å¹¶è¡Œç›¸å…³æ€§è®¡ç®—**ï¼šæ¯ä¸ªå·¥ä½œè¿›ç¨‹ç‹¬ç«‹è®¡ç®—ç›¸å…³æ€§çŸ©é˜µ
3. **å¹¶è¡Œæ•°æ®å½’ä¸€åŒ–**ï¼šå¹¶è¡Œæ‰§è¡Œæ•°æ®å½’ä¸€åŒ–
4. **ç»“æœåˆå¹¶**ï¼šä¸»è¿›ç¨‹åˆå¹¶æ‰€æœ‰å·¥ä½œè¿›ç¨‹çš„è®¡ç®—ç»“æœ

### 5.2 å¹¶è¡Œçƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆ

```sql
-- PostgreSQL 18 å¹¶è¡Œçƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½æµ‹è¯•ï¼‰
DO $$
BEGIN
    BEGIN
        IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'multidimensional_data') THEN
            RAISE WARNING 'è¡¨ multidimensional_data ä¸å­˜åœ¨ï¼Œæ— æ³•æ‰§è¡Œå¹¶è¡Œçƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆ';
            RETURN;
        END IF;
        RAISE NOTICE 'å¼€å§‹æ‰§è¡ŒPostgreSQL 18å¹¶è¡Œçƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆ';
    EXCEPTION
        WHEN OTHERS THEN
            RAISE WARNING 'å¹¶è¡Œçƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆå‡†å¤‡å¤±è´¥: %', SQLERRM;
            RAISE;
    END;
END $$;

SET max_parallel_workers_per_gather = 4;
SET parallel_setup_cost = 0;

-- å¹¶è¡Œç›¸å…³æ€§çŸ©é˜µè®¡ç®—
EXPLAIN (ANALYZE, BUFFERS, TIMING, VERBOSE)
WITH correlation_matrix AS (
    SELECT
        'dim1' AS var1, 'dim2' AS var2,
        CORR(dim1, dim2) AS correlation
    FROM multidimensional_data
    UNION ALL
    SELECT 'dim1', 'dim3', CORR(dim1, dim3) FROM multidimensional_data
    UNION ALL
    SELECT 'dim2', 'dim3', CORR(dim2, dim3) FROM multidimensional_data
)
SELECT
    var1,
    var2,
    ROUND(correlation::numeric, 4) AS correlation_value
FROM correlation_matrix
ORDER BY var1, var2;
```

### 5.3 å¹¶è¡Œé›·è¾¾å›¾æ•°æ®ç”Ÿæˆ

```sql
-- PostgreSQL 18 å¹¶è¡Œé›·è¾¾å›¾æ•°æ®ç”Ÿæˆï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½æµ‹è¯•ï¼‰
DO $$
BEGIN
    BEGIN
        IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'customer_profile') THEN
            RAISE WARNING 'è¡¨ customer_profile ä¸å­˜åœ¨ï¼Œæ— æ³•æ‰§è¡Œå¹¶è¡Œé›·è¾¾å›¾æ•°æ®ç”Ÿæˆ';
            RETURN;
        END IF;
        RAISE NOTICE 'å¼€å§‹æ‰§è¡ŒPostgreSQL 18å¹¶è¡Œé›·è¾¾å›¾æ•°æ®ç”Ÿæˆ';
    EXCEPTION
        WHEN OTHERS THEN
            RAISE WARNING 'å¹¶è¡Œé›·è¾¾å›¾æ•°æ®ç”Ÿæˆå‡†å¤‡å¤±è´¥: %', SQLERRM;
            RAISE;
    END;
END $$;

SET max_parallel_workers_per_gather = 4;
SET parallel_setup_cost = 0;

-- å¹¶è¡Œå¤šç»´åº¦æŒ‡æ ‡å½’ä¸€åŒ–
EXPLAIN (ANALYZE, BUFFERS, TIMING, VERBOSE)
WITH normalized_metrics AS (
    SELECT
        customer_id,
        (purchase_frequency - MIN(purchase_frequency) OVER ()) / NULLIF(MAX(purchase_frequency) OVER () - MIN(purchase_frequency) OVER (), 0) AS norm_frequency,
        (avg_order_value - MIN(avg_order_value) OVER ()) / NULLIF(MAX(avg_order_value) OVER () - MIN(avg_order_value) OVER (), 0) AS norm_value
    FROM customer_profile
)
SELECT
    customer_id,
    ROUND(norm_frequency::numeric, 4) AS normalized_frequency,
    ROUND(norm_value::numeric, 4) AS normalized_value
FROM normalized_metrics
ORDER BY customer_id;
```

---

## 6. å®é™…åº”ç”¨æ¡ˆä¾‹

### 5.1 å®¢æˆ·ç”»åƒå¯è§†åŒ–

```sql
-- å®¢æˆ·ç”»åƒå¯è§†åŒ–åº”ç”¨ï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½æµ‹è¯•ï¼‰
DO $$
BEGIN
    BEGIN
        -- åˆ›å»ºå®¢æˆ·ç”»åƒæ•°æ®è¡¨
        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'customer_profile') THEN
            DROP TABLE customer_profile CASCADE;
        END IF;

        CREATE TABLE customer_profile (
            customer_id INTEGER PRIMARY KEY,
            age_group VARCHAR(20),
            income_level VARCHAR(20),
            purchase_frequency NUMERIC,
            avg_order_value NUMERIC,
            product_preference_score NUMERIC,
            brand_loyalty_score NUMERIC,
            online_activity_score NUMERIC
        );

        -- æ’å…¥ç¤ºä¾‹å®¢æˆ·ç”»åƒæ•°æ®
        INSERT INTO customer_profile (customer_id, age_group, income_level, purchase_frequency, avg_order_value, product_preference_score, brand_loyalty_score, online_activity_score)
        SELECT
            i,
            CASE (i % 3)
                WHEN 0 THEN 'Young'
                WHEN 1 THEN 'Middle'
                ELSE 'Senior'
            END AS age_group,
            CASE (i % 3)
                WHEN 0 THEN 'High'
                WHEN 1 THEN 'Medium'
                ELSE 'Low'
            END AS income_level,
            RANDOM() * 10 + 5 AS purchase_frequency,
            RANDOM() * 500 + 200 AS avg_order_value,
            RANDOM() * 100 AS product_preference_score,
            RANDOM() * 100 AS brand_loyalty_score,
            RANDOM() * 100 AS online_activity_score
        FROM generate_series(1, 100) i;

        RAISE NOTICE 'å®¢æˆ·ç”»åƒæ•°æ®è¡¨åˆ›å»ºæˆåŠŸ';
    EXCEPTION
        WHEN OTHERS THEN
            RAISE WARNING 'å®¢æˆ·ç”»åƒå¯è§†åŒ–å‡†å¤‡å¤±è´¥: %', SQLERRM;
            RAISE;
    END;
END $$;

-- å®¢æˆ·ç”»åƒé›·è¾¾å›¾æ•°æ®
WITH normalized_profiles AS (
    SELECT
        customer_id,
        age_group,
        income_level,
        (purchase_frequency - MIN(purchase_frequency) OVER ()) /
        NULLIF(MAX(purchase_frequency) OVER () - MIN(purchase_frequency) OVER (), 0) * 100 AS purchase_score,
        (avg_order_value - MIN(avg_order_value) OVER ()) /
        NULLIF(MAX(avg_order_value) OVER () - MIN(avg_order_value) OVER (), 0) * 100 AS value_score,
        product_preference_score AS preference_score,
        brand_loyalty_score AS loyalty_score,
        online_activity_score AS activity_score
    FROM customer_profile
)
SELECT
    customer_id,
    age_group,
    income_level,
    ROUND(purchase_score::numeric, 2) AS purchase_frequency_score,
    ROUND(value_score::numeric, 2) AS order_value_score,
    ROUND(preference_score::numeric, 2) AS product_preference_score,
    ROUND(loyalty_score::numeric, 2) AS brand_loyalty_score,
    ROUND(activity_score::numeric, 2) AS online_activity_score,
    ROUND((purchase_score + value_score + preference_score + loyalty_score + activity_score) / 5.0, 2) AS overall_score
FROM normalized_profiles
ORDER BY overall_score DESC
LIMIT 20;
```

### 5.2 äº§å“ç‰¹å¾å¯¹æ¯”

```sql
-- äº§å“ç‰¹å¾å¯¹æ¯”å¯è§†åŒ–åº”ç”¨ï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½æµ‹è¯•ï¼‰
DO $$
BEGIN
    BEGIN
        IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'multidimensional_data') THEN
            RAISE WARNING 'è¡¨ multidimensional_data ä¸å­˜åœ¨ï¼Œæ— æ³•è¿›è¡Œäº§å“ç‰¹å¾å¯¹æ¯”';
            RETURN;
        END IF;
        RAISE NOTICE 'å¼€å§‹è¿›è¡Œäº§å“ç‰¹å¾å¯¹æ¯”';
    EXCEPTION
        WHEN OTHERS THEN
            RAISE WARNING 'äº§å“ç‰¹å¾å¯¹æ¯”å‡†å¤‡å¤±è´¥: %', SQLERRM;
            RAISE;
    END;
END $$;

-- äº§å“ç‰¹å¾å¯¹æ¯”ï¼šçƒ­åŠ›å›¾ + é›·è¾¾å›¾ç»„åˆ
WITH product_features AS (
    SELECT
        category_x AS product_category,
        AVG(dimension1) AS feature1,
        AVG(dimension2) AS feature2,
        AVG(dimension3) AS feature3,
        AVG(dimension4) AS feature4,
        AVG(dimension5) AS feature5,
        AVG(value) AS avg_value
    FROM multidimensional_data
    GROUP BY category_x
),
normalized_features AS (
    SELECT
        product_category,
        (feature1 - MIN(feature1) OVER ()) / NULLIF(MAX(feature1) OVER () - MIN(feature1) OVER (), 0) * 100 AS norm_feature1,
        (feature2 - MIN(feature2) OVER ()) / NULLIF(MAX(feature2) OVER () - MIN(feature2) OVER (), 0) * 100 AS norm_feature2,
        (feature3 - MIN(feature3) OVER ()) / NULLIF(MAX(feature3) OVER () - MIN(feature3) OVER (), 0) * 100 AS norm_feature3,
        (feature4 - MIN(feature4) OVER ()) / NULLIF(MAX(feature4) OVER () - MIN(feature4) OVER (), 0) * 100 AS norm_feature4,
        (feature5 - MIN(feature5) OVER ()) / NULLIF(MAX(feature5) OVER () - MIN(feature5) OVER (), 0) * 100 AS norm_feature5,
        ROUND(avg_value::numeric, 2) AS avg_value
    FROM product_features
)
SELECT
    product_category,
    ROUND(norm_feature1::numeric, 2) AS feature1_score,
    ROUND(norm_feature2::numeric, 2) AS feature2_score,
    ROUND(norm_feature3::numeric, 2) AS feature3_score,
    ROUND(norm_feature4::numeric, 2) AS feature4_score,
    ROUND(norm_feature5::numeric, 2) AS feature5_score,
    avg_value,
    ROUND((norm_feature1 + norm_feature2 + norm_feature3 + norm_feature4 + norm_feature5) / 5.0, 2) AS overall_score
FROM normalized_features
ORDER BY overall_score DESC;
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### ç´¢å¼•ä¼˜åŒ–

```sql
-- åˆ›å»ºå…³é”®ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_multidim_x ON multidimensional_data(category_x);
CREATE INDEX IF NOT EXISTS idx_multidim_y ON multidimensional_data(category_y);
CREATE INDEX IF NOT EXISTS idx_multidim_x_y ON multidimensional_data(category_x, category_y);
```

### ç‰©åŒ–è§†å›¾

```sql
-- åˆ›å»ºå¸¸ç”¨å¯è§†åŒ–æ•°æ®çš„ç‰©åŒ–è§†å›¾
CREATE MATERIALIZED VIEW IF NOT EXISTS mv_correlation_matrix AS
SELECT
    'dimension1' AS dim1,
    'dimension2' AS dim2,
    CORR(dimension1, dimension2) AS correlation
FROM multidimensional_data
WHERE dimension1 IS NOT NULL AND dimension2 IS NOT NULL;

CREATE UNIQUE INDEX ON mv_correlation_matrix(dim1, dim2);

-- å®šæœŸåˆ·æ–°ç‰©åŒ–è§†å›¾
REFRESH MATERIALIZED VIEW CONCURRENTLY mv_correlation_matrix;
```

### æ•°æ®é‡‡æ ·

```sql
-- å¤§æ•°æ®é›†é‡‡æ ·ï¼šä½¿ç”¨TABLESAMPLE
SELECT
    category_x,
    category_y,
    AVG(value) AS avg_value
FROM multidimensional_data TABLESAMPLE SYSTEM(10)  -- 10%é‡‡æ ·
GROUP BY category_x, category_y;
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### æ•°æ®å½’ä¸€åŒ–

1. **Min-Maxå½’ä¸€åŒ–**ï¼š$x_{norm} = \frac{x - x_{min}}{x_{max} - x_{min}}$
2. **Z-scoreæ ‡å‡†åŒ–**ï¼š$z = \frac{x - \mu}{\sigma}$
3. **å°æ•°å®šæ ‡**ï¼š$x_{norm} = \frac{x}{10^k}$

### é¢œè‰²æ˜ å°„

1. **è¿ç»­é¢œè‰²æ˜ å°„**ï¼šç”¨äºè¿ç»­æ•°æ®
2. **åˆ†ç±»é¢œè‰²æ˜ å°„**ï¼šç”¨äºåˆ†ç±»æ•°æ®
3. **å‘æ•£é¢œè‰²æ˜ å°„**ï¼šç”¨äºæœ‰æ­£è´Ÿå€¼çš„æ•°æ®

### äº¤äº’æ€§

1. **ç­›é€‰åŠŸèƒ½**ï¼šæä¾›å¤šç»´åº¦ç­›é€‰
2. **é’»å–åŠŸèƒ½**ï¼šæ”¯æŒä»æ±‡æ€»åˆ°æ˜ç»†çš„é’»å–
3. **ç¼©æ”¾åŠŸèƒ½**ï¼šæ”¯æŒæ•°æ®çš„ç¼©æ”¾å’Œå¹³ç§»

### æ€§èƒ½å¹³è¡¡

1. **æ•°æ®é‡‡æ ·**ï¼šå¤§è§„æ¨¡æ•°æ®æ—¶è¿›è¡Œé‡‡æ ·
2. **é¢„è®¡ç®—**ï¼šé¢„è®¡ç®—å½’ä¸€åŒ–å’Œèšåˆç»“æœ
3. **ç¼“å­˜**ï¼šä½¿ç”¨ç‰©åŒ–è§†å›¾ç¼“å­˜ç»“æœ

### SQLå®ç°æ³¨æ„äº‹é¡¹

1. **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨DOå—è¿›è¡Œé”™è¯¯å¤„ç†
2. **NULLå€¼å¤„ç†**ï¼šä½¿ç”¨COALESCEå’ŒNULLIFå¤„ç†NULLå€¼
3. **æ•°æ®ç±»å‹è½¬æ¢**ï¼šæ³¨æ„æ•°æ®ç±»å‹è½¬æ¢å’Œç²¾åº¦
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ç´¢å¼•å’Œç‰©åŒ–è§†å›¾ä¼˜åŒ–æ€§èƒ½

---

## ğŸ“ˆ å¯è§†åŒ–æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | æ”¯æŒç»´åº¦ | è®¡ç®—å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | å±€é™æ€§ |
|------|---------|-----------|---------|------|--------|
| çƒ­åŠ›å›¾ | 2D | $O(n^2)$ | çŸ©é˜µæ•°æ® | ç›´è§‚ã€æ˜“äºç†è§£ | ç»´åº¦å—é™ |
| é›·è¾¾å›¾ | å¤šç»´åº¦ | $O(n)$ | å¤šæŒ‡æ ‡å¯¹æ¯” | å¤šç»´åº¦å¯¹æ¯” | ç»´åº¦è¿‡å¤šæ—¶éš¾ä»¥é˜…è¯» |
| å¹³è¡Œåæ ‡ | é«˜ç»´ | $O(n \cdot d)$ | é«˜ç»´æ•°æ®æ¢ç´¢ | æ”¯æŒé«˜ç»´æ•°æ® | æ•°æ®ç‚¹è¿‡å¤šæ—¶éš¾ä»¥é˜…è¯» |
| PCAé™ç»´ | é«˜ç»´â†’2D | $O(n \cdot d^2)$ | é™ç»´å¯è§†åŒ– | ä¿ç•™ä¸»è¦ä¿¡æ¯ | å¯èƒ½ä¸¢å¤±ç»†èŠ‚ |

---

## ğŸ” å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šç»´åº¦è¿‡å¤šï¼Œå¯è§†åŒ–éš¾ä»¥ç†è§£

**åŸå› **ï¼š

- ç»´åº¦æ•°è¿‡å¤š
- æœªä½¿ç”¨é™ç»´

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä½¿ç”¨é™ç»´ç®—æ³•ï¼ˆPCAã€t-SNEï¼‰
- é€‰æ‹©é‡è¦ç»´åº¦
- ä½¿ç”¨å¹³è¡Œåæ ‡

### é—®é¢˜2ï¼šæ•°æ®å½’ä¸€åŒ–ä¸å½“

**åŸå› **ï¼š

- ä¸åŒç»´åº¦å°ºåº¦å·®å¼‚å¤§
- å½’ä¸€åŒ–æ–¹æ³•é€‰æ‹©ä¸å½“

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä½¿ç”¨Min-Maxå½’ä¸€åŒ–
- ä½¿ç”¨Z-scoreæ ‡å‡†åŒ–
- æ ¹æ®æ•°æ®ç‰¹æ€§é€‰æ‹©

### é—®é¢˜3ï¼šç›¸å…³æ€§è®¡ç®—æ…¢

**åŸå› **ï¼š

- æ•°æ®é‡å¤§
- ç»´åº¦å¤š

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä½¿ç”¨é‡‡æ ·
- ä½¿ç”¨ç‰©åŒ–è§†å›¾ç¼“å­˜
- ä¼˜åŒ–ç›¸å…³æ€§è®¡ç®—

---

## ğŸ“š å‚è€ƒèµ„æº

1. **Inselberg, A. (2009)**: "Parallel Coordinates: Visual Multidimensional Geometry and Its Applications"
2. **Ward, M.O., et al. (2010)**: "Interactive Data Visualization: Foundations, Techniques, and Applications"
3. **Tufte, E.R. (2001)**: "The Visual Display of Quantitative Information"

---

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
