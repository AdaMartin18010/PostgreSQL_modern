# PostgreSQL å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆå®Œæ•´æŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ
> **æŠ€æœ¯æ ˆ**: PostgreSQL 17+/18+ | æ•°æ®å¯è§†åŒ– | å¤šç»´æ•°æ® | çƒ­åŠ›å›¾
> **éš¾åº¦çº§åˆ«**: â­â­â­ (ä¸­çº§)
> **å‚è€ƒæ ‡å‡†**: Multidimensional Visualization, Data Visualization

---

## ğŸ“‹ ç›®å½•

- [PostgreSQL å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆå®Œæ•´æŒ‡å—](#postgresql-å¤šç»´æ•°æ®å¯è§†åŒ–æ•°æ®ç”Ÿæˆå®Œæ•´æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [å¤šç»´å¯è§†åŒ–æ¦‚è¿°](#å¤šç»´å¯è§†åŒ–æ¦‚è¿°)
    - [å¯è§†åŒ–ç±»å‹](#å¯è§†åŒ–ç±»å‹)
  - [1. çƒ­åŠ›å›¾æ•°æ®](#1-çƒ­åŠ›å›¾æ•°æ®)
    - [1.1 ç›¸å…³æ€§çƒ­åŠ›å›¾](#11-ç›¸å…³æ€§çƒ­åŠ›å›¾)
    - [1.2 ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾](#12-ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾)
  - [2. é›·è¾¾å›¾æ•°æ®](#2-é›·è¾¾å›¾æ•°æ®)
    - [2.1 é›·è¾¾å›¾æ•°æ®ç”Ÿæˆ](#21-é›·è¾¾å›¾æ•°æ®ç”Ÿæˆ)
    - [2.2 é›·è¾¾å›¾æ•°æ®æ ¼å¼è½¬æ¢](#22-é›·è¾¾å›¾æ•°æ®æ ¼å¼è½¬æ¢)
  - [3. å¹³è¡Œåæ ‡æ•°æ®](#3-å¹³è¡Œåæ ‡æ•°æ®)
    - [3.1 å¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆ](#31-å¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆ)
    - [3.2 å¹³è¡Œåæ ‡æ•°æ®ï¼ˆé•¿æ ¼å¼ï¼‰](#32-å¹³è¡Œåæ ‡æ•°æ®é•¿æ ¼å¼)
  - [4. é™ç»´å¯è§†åŒ–](#4-é™ç»´å¯è§†åŒ–)
    - [4.1 PCAé™ç»´æ•°æ®](#41-pcaé™ç»´æ•°æ®)
  - [ğŸ“š å‚è€ƒèµ„æº](#-å‚è€ƒèµ„æº)
  - [ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®](#-æ€§èƒ½ä¼˜åŒ–å»ºè®®)
  - [ğŸ¯ æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)

---

## å¤šç»´å¯è§†åŒ–æ¦‚è¿°

å¤šç»´æ•°æ®å¯è§†åŒ–å¸®åŠ©ç†è§£é«˜ç»´æ•°æ®çš„å…³ç³»å’Œæ¨¡å¼ï¼Œå°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°2D/3Då¯è§†åŒ–ç©ºé—´ã€‚

### å¯è§†åŒ–ç±»å‹

| ç±»å‹ | ç»´åº¦ | åº”ç”¨åœºæ™¯ |
|------|------|---------|
| **çƒ­åŠ›å›¾** | 2D | ç›¸å…³æ€§çŸ©é˜µã€é¢‘ç‡åˆ†å¸ƒ |
| **é›·è¾¾å›¾** | å¤šç»´åº¦ | å¤šæŒ‡æ ‡å¯¹æ¯” |
| **å¹³è¡Œåæ ‡** | é«˜ç»´ | é«˜ç»´æ•°æ®æ¢ç´¢ |

---

## 1. çƒ­åŠ›å›¾æ•°æ®

### 1.1 ç›¸å…³æ€§çƒ­åŠ›å›¾

**ç›¸å…³æ€§çƒ­åŠ›å›¾**å±•ç¤ºå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚

```sql
-- å¤šç»´æ•°æ®å‡†å¤‡ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
DO $$
BEGIN
    BEGIN
        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'multidimensional_data') THEN
            DROP TABLE multidimensional_data CASCADE;
        END IF;

        CREATE TABLE multidimensional_data (
            id SERIAL PRIMARY KEY,
            category_x VARCHAR(50) NOT NULL,
            category_y VARCHAR(50) NOT NULL,
            value NUMERIC NOT NULL,
            dimension1 NUMERIC,
            dimension2 NUMERIC,
            dimension3 NUMERIC,
            dimension4 NUMERIC,
            dimension5 NUMERIC
        );

        -- æ’å…¥ç¤ºä¾‹å¤šç»´æ•°æ®
        INSERT INTO multidimensional_data (category_x, category_y, value, dimension1, dimension2, dimension3, dimension4, dimension5)
        SELECT
            'Category' || (i % 5 + 1),
            'Type' || (j % 4 + 1),
            (RANDOM() * 100),
            RANDOM() * 10,
            RANDOM() * 10,
            RANDOM() * 10,
            RANDOM() * 10,
            RANDOM() * 10
        FROM generate_series(1, 100) i
        CROSS JOIN generate_series(1, 4) j;

        CREATE INDEX idx_multidim_x ON multidimensional_data(category_x);
        CREATE INDEX idx_multidim_y ON multidimensional_data(category_y);

        RAISE NOTICE 'å¤šç»´æ•°æ®è¡¨åˆ›å»ºæˆåŠŸï¼Œå…± % æ¡è®°å½•', (SELECT COUNT(*) FROM multidimensional_data);
    EXCEPTION
        WHEN OTHERS THEN
            RAISE EXCEPTION 'åˆ›å»ºè¡¨å¤±è´¥: %', SQLERRM;
    END;
END $$;

-- çƒ­åŠ›å›¾æ•°æ®ç”Ÿæˆï¼šé¢‘ç‡çƒ­åŠ›å›¾
WITH heatmap_data AS (
    SELECT
        category_x,
        category_y,
        COUNT(*) AS frequency,
        AVG(value) AS avg_value,
        MIN(value) AS min_value,
        MAX(value) AS max_value,
        STDDEV(value) AS std_value
    FROM multidimensional_data
    GROUP BY category_x, category_y
),
normalized_heatmap AS (
    SELECT
        category_x,
        category_y,
        frequency,
        avg_value,
        -- å½’ä¸€åŒ–åˆ°0-1èŒƒå›´
        (avg_value - MIN(avg_value) OVER ()) /
        NULLIF(MAX(avg_value) OVER () - MIN(avg_value) OVER (), 0) AS normalized_value
    FROM heatmap_data
)
SELECT
    category_x,
    category_y,
    frequency,
    ROUND(avg_value::numeric, 2) AS avg_value,
    ROUND(normalized_value::numeric, 4) AS normalized_value,
    CASE
        WHEN normalized_value > 0.8 THEN 'High'
        WHEN normalized_value > 0.5 THEN 'Medium'
        WHEN normalized_value > 0.2 THEN 'Low'
        ELSE 'Very Low'
    END AS intensity_level
FROM normalized_heatmap
ORDER BY category_x, category_y;
```

### 1.2 ç›¸å…³æ€§çŸ©é˜µçƒ­åŠ›å›¾

```sql
-- ç›¸å…³æ€§çŸ©é˜µï¼šè®¡ç®—å¤šç»´åº¦ä¹‹é—´çš„ç›¸å…³æ€§
WITH dimension_correlations AS (
    SELECT
        'dimension1' AS dim1,
        'dimension2' AS dim2,
        CORR(dimension1, dimension2) AS correlation
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL AND dimension2 IS NOT NULL

    UNION ALL

    SELECT
        'dimension1',
        'dimension3',
        CORR(dimension1, dimension3)
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL AND dimension3 IS NOT NULL

    UNION ALL

    SELECT
        'dimension2',
        'dimension3',
        CORR(dimension2, dimension3)
    FROM multidimensional_data
    WHERE dimension2 IS NOT NULL AND dimension3 IS NOT NULL
)
SELECT
    dim1,
    dim2,
    ROUND(correlation::numeric, 4) AS correlation_coefficient,
    CASE
        WHEN ABS(correlation) > 0.7 THEN 'Strong correlation'
        WHEN ABS(correlation) > 0.4 THEN 'Moderate correlation'
        WHEN ABS(correlation) > 0.2 THEN 'Weak correlation'
        ELSE 'No correlation'
    END AS correlation_strength,
    CASE
        WHEN correlation > 0 THEN 'Positive'
        ELSE 'Negative'
    END AS correlation_direction
FROM dimension_correlations
ORDER BY ABS(correlation) DESC;
```

---

## 2. é›·è¾¾å›¾æ•°æ®

### 2.1 é›·è¾¾å›¾æ•°æ®ç”Ÿæˆ

**é›·è¾¾å›¾**å±•ç¤ºå¤šä¸ªç»´åº¦çš„å€¼ï¼Œç”¨äºå¤šæŒ‡æ ‡å¯¹æ¯”ã€‚

```sql
-- é›·è¾¾å›¾æ•°æ®ï¼šå¤šç»´åº¦æŒ‡æ ‡å¯¹æ¯”
WITH radar_data AS (
    SELECT
        category_x AS entity,
        AVG(dimension1) AS dim1_avg,
        AVG(dimension2) AS dim2_avg,
        AVG(dimension3) AS dim3_avg,
        AVG(dimension4) AS dim4_avg,
        AVG(dimension5) AS dim5_avg
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
    GROUP BY category_x
),
normalized_radar AS (
    SELECT
        entity,
        -- å½’ä¸€åŒ–åˆ°0-100èŒƒå›´
        ROUND((dim1_avg - MIN(dim1_avg) OVER ()) /
              NULLIF(MAX(dim1_avg) OVER () - MIN(dim1_avg) OVER (), 0) * 100, 2) AS dim1_score,
        ROUND((dim2_avg - MIN(dim2_avg) OVER ()) /
              NULLIF(MAX(dim2_avg) OVER () - MIN(dim2_avg) OVER (), 0) * 100, 2) AS dim2_score,
        ROUND((dim3_avg - MIN(dim3_avg) OVER ()) /
              NULLIF(MAX(dim3_avg) OVER () - MIN(dim3_avg) OVER (), 0) * 100, 2) AS dim3_score,
        ROUND((dim4_avg - MIN(dim4_avg) OVER ()) /
              NULLIF(MAX(dim4_avg) OVER () - MIN(dim4_avg) OVER (), 0) * 100, 2) AS dim4_score,
        ROUND((dim5_avg - MIN(dim5_avg) OVER ()) /
              NULLIF(MAX(dim5_avg) OVER () - MIN(dim5_avg) OVER (), 0) * 100, 2) AS dim5_score
    FROM radar_data
)
SELECT
    entity,
    dim1_score AS dimension1,
    dim2_score AS dimension2,
    dim3_score AS dimension3,
    dim4_score AS dimension4,
    dim5_score AS dimension5,
    ROUND((dim1_score + dim2_score + dim3_score + dim4_score + dim5_score) / 5.0, 2) AS overall_score
FROM normalized_radar
ORDER BY overall_score DESC;
```

### 2.2 é›·è¾¾å›¾æ•°æ®æ ¼å¼è½¬æ¢

```sql
-- é›·è¾¾å›¾æ•°æ®ï¼šè½¬æ¢ä¸ºé•¿æ ¼å¼ï¼ˆä¾¿äºå¯è§†åŒ–å·¥å…·ä½¿ç”¨ï¼‰
WITH radar_long_format AS (
    SELECT
        category_x AS entity,
        'Dimension1' AS dimension_name,
        AVG(dimension1) AS dimension_value
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
    GROUP BY category_x

    UNION ALL

    SELECT
        category_x,
        'Dimension2',
        AVG(dimension2)
    FROM multidimensional_data
    WHERE dimension2 IS NOT NULL
    GROUP BY category_x

    UNION ALL

    SELECT
        category_x,
        'Dimension3',
        AVG(dimension3)
    FROM multidimensional_data
    WHERE dimension3 IS NOT NULL
    GROUP BY category_x
)
SELECT
    entity,
    dimension_name,
    ROUND(dimension_value::numeric, 2) AS value,
    ROUND((dimension_value - MIN(dimension_value) OVER (PARTITION BY dimension_name)) /
          NULLIF(MAX(dimension_value) OVER (PARTITION BY dimension_name) -
                 MIN(dimension_value) OVER (PARTITION BY dimension_name), 0) * 100, 2) AS normalized_value
FROM radar_long_format
ORDER BY entity, dimension_name;
```

---

## 3. å¹³è¡Œåæ ‡æ•°æ®

### 3.1 å¹³è¡Œåæ ‡æ•°æ®ç”Ÿæˆ

**å¹³è¡Œåæ ‡**ç”¨äºå¯è§†åŒ–é«˜ç»´æ•°æ®ã€‚

```sql
-- å¹³è¡Œåæ ‡æ•°æ®ï¼šé«˜ç»´æ•°æ®è½¬æ¢
WITH parallel_coords_data AS (
    SELECT
        id,
        category_x AS category,
        -- å½’ä¸€åŒ–å„ç»´åº¦åˆ°0-1èŒƒå›´
        (dimension1 - MIN(dimension1) OVER ()) /
        NULLIF(MAX(dimension1) OVER () - MIN(dimension1) OVER (), 0) AS dim1_norm,
        (dimension2 - MIN(dimension2) OVER ()) /
        NULLIF(MAX(dimension2) OVER () - MIN(dimension2) OVER (), 0) AS dim2_norm,
        (dimension3 - MIN(dimension3) OVER ()) /
        NULLIF(MAX(dimension3) OVER () - MIN(dimension3) OVER (), 0) AS dim3_norm,
        (dimension4 - MIN(dimension4) OVER ()) /
        NULLIF(MAX(dimension4) OVER () - MIN(dimension4) OVER (), 0) AS dim4_norm,
        (dimension5 - MIN(dimension5) OVER ()) /
        NULLIF(MAX(dimension5) OVER () - MIN(dimension5) OVER (), 0) AS dim5_norm
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
)
SELECT
    id,
    category,
    ROUND(dim1_norm::numeric, 4) AS dimension1,
    ROUND(dim2_norm::numeric, 4) AS dimension2,
    ROUND(dim3_norm::numeric, 4) AS dimension3,
    ROUND(dim4_norm::numeric, 4) AS dimension4,
    ROUND(dim5_norm::numeric, 4) AS dimension5
FROM parallel_coords_data
ORDER BY id
LIMIT 50;
```

### 3.2 å¹³è¡Œåæ ‡æ•°æ®ï¼ˆé•¿æ ¼å¼ï¼‰

```sql
-- å¹³è¡Œåæ ‡æ•°æ®ï¼šé•¿æ ¼å¼ï¼ˆæ¯è¡Œä¸€ä¸ªç»´åº¦å€¼ï¼‰
WITH parallel_coords_long AS (
    SELECT
        id,
        category_x AS category,
        1 AS dimension_order,
        'Dimension1' AS dimension_name,
        (dimension1 - MIN(dimension1) OVER ()) /
        NULLIF(MAX(dimension1) OVER () - MIN(dimension1) OVER (), 0) AS normalized_value
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL

    UNION ALL

    SELECT
        id,
        category_x,
        2,
        'Dimension2',
        (dimension2 - MIN(dimension2) OVER ()) /
        NULLIF(MAX(dimension2) OVER () - MIN(dimension2) OVER (), 0)
    FROM multidimensional_data
    WHERE dimension2 IS NOT NULL

    UNION ALL

    SELECT
        id,
        category_x,
        3,
        'Dimension3',
        (dimension3 - MIN(dimension3) OVER ()) /
        NULLIF(MAX(dimension3) OVER () - MIN(dimension3) OVER (), 0)
    FROM multidimensional_data
    WHERE dimension3 IS NOT NULL
)
SELECT
    id,
    category,
    dimension_order,
    dimension_name,
    ROUND(normalized_value::numeric, 4) AS value
FROM parallel_coords_long
ORDER BY id, dimension_order
LIMIT 100;
```

---

## 4. é™ç»´å¯è§†åŒ–

### 4.1 PCAé™ç»´æ•°æ®

```sql
-- PCAé™ç»´ï¼šå°†é«˜ç»´æ•°æ®é™åˆ°2Dç”¨äºå¯è§†åŒ–
WITH pca_data AS (
    SELECT
        id,
        category_x AS category,
        dimension1,
        dimension2,
        dimension3,
        dimension4,
        dimension5
    FROM multidimensional_data
    WHERE dimension1 IS NOT NULL
),
centered_data AS (
    SELECT
        id,
        category,
        dimension1 - AVG(dimension1) OVER () AS dim1_centered,
        dimension2 - AVG(dimension2) OVER () AS dim2_centered,
        dimension3 - AVG(dimension3) OVER () AS dim3_centered,
        dimension4 - AVG(dimension4) OVER () AS dim4_centered,
        dimension5 - AVG(dimension5) OVER () AS dim5_centered
    FROM pca_data
)
SELECT
    id,
    category,
    -- ç®€åŒ–PCAï¼šä½¿ç”¨å‰ä¸¤ä¸ªä¸»æˆåˆ†
    ROUND((dim1_centered * 0.5 + dim2_centered * 0.3 + dim3_centered * 0.2)::numeric, 4) AS pc1,
    ROUND((dim2_centered * 0.4 + dim3_centered * 0.4 + dim4_centered * 0.2)::numeric, 4) AS pc2
FROM centered_data
ORDER BY id
LIMIT 50;
```

---

## ğŸ“š å‚è€ƒèµ„æº

1. **Inselberg, A. (2009)**: "Parallel Coordinates: Visual Multidimensional Geometry and Its Applications"
2. **Ward, M.O., et al. (2010)**: "Interactive Data Visualization: Foundations, Techniques, and Applications"

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®é‡‡æ ·**ï¼šå¤§è§„æ¨¡æ•°æ®æ—¶è¿›è¡Œé‡‡æ ·
2. **é¢„è®¡ç®—**ï¼šé¢„è®¡ç®—å½’ä¸€åŒ–å’Œèšåˆç»“æœ
3. **ç´¢å¼•ä¼˜åŒ–**ï¼šåœ¨åˆ†ç±»åˆ—ä¸Šåˆ›å»ºç´¢å¼•
4. **ç‰©åŒ–è§†å›¾**ï¼šä½¿ç”¨ç‰©åŒ–è§†å›¾ç¼“å­˜å¯è§†åŒ–æ•°æ®

---

## ğŸ¯ æœ€ä½³å®è·µ

1. **æ•°æ®å½’ä¸€åŒ–**ï¼šç¡®ä¿ä¸åŒç»´åº¦åœ¨åŒä¸€å°ºåº¦
2. **é¢œè‰²æ˜ å°„**ï¼šä½¿ç”¨åˆé€‚çš„é¢œè‰²æ˜ å°„æ–¹æ¡ˆ
3. **äº¤äº’æ€§**ï¼šæä¾›ç­›é€‰å’Œé’»å–åŠŸèƒ½
4. **æ€§èƒ½å¹³è¡¡**ï¼šå¹³è¡¡æ•°æ®é‡å’Œå¯è§†åŒ–æ€§èƒ½

---

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
