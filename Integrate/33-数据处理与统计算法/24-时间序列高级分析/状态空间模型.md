# PostgreSQL çŠ¶æ€ç©ºé—´æ¨¡å‹å®Œæ•´æŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ
> **æŠ€æœ¯æ ˆ**: PostgreSQL 17+/18+ | æ—¶é—´åºåˆ— | çŠ¶æ€ç©ºé—´ | Kalmanæ»¤æ³¢
> **éš¾åº¦çº§åˆ«**: â­â­â­â­â­ (ä¸“å®¶çº§)
> **å‚è€ƒæ ‡å‡†**: State Space Models, Kalman Filtering, Time Series Analysis

---

## ğŸ“‹ ç›®å½•

- [PostgreSQL çŠ¶æ€ç©ºé—´æ¨¡å‹å®Œæ•´æŒ‡å—](#postgresql-çŠ¶æ€ç©ºé—´æ¨¡å‹å®Œæ•´æŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [çŠ¶æ€ç©ºé—´æ¨¡å‹æ¦‚è¿°](#çŠ¶æ€ç©ºé—´æ¨¡å‹æ¦‚è¿°)
  - [1. Kalmanæ»¤æ³¢](#1-kalmanæ»¤æ³¢)

---

## çŠ¶æ€ç©ºé—´æ¨¡å‹æ¦‚è¿°

**çŠ¶æ€ç©ºé—´æ¨¡å‹**æè¿°ç³»ç»Ÿçš„çŠ¶æ€æ¼”åŒ–è¿‡ç¨‹ã€‚

**çŠ¶æ€æ–¹ç¨‹**: $x_t = F x_{t-1} + w_t$
**è§‚æµ‹æ–¹ç¨‹**: $y_t = H x_t + v_t$

---

## 1. Kalmanæ»¤æ³¢

**Kalmanæ»¤æ³¢**ç”¨äºä¼°è®¡ç³»ç»ŸçŠ¶æ€ã€‚

```sql
-- Kalmanæ»¤æ³¢å®ç°ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
DO $$
BEGIN
    BEGIN
        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'kalman_data') THEN
            DROP TABLE kalman_data CASCADE;
        END IF;

        CREATE TABLE kalman_data (
            time_point INTEGER PRIMARY KEY,
            observation NUMERIC NOT NULL
        );

        INSERT INTO kalman_data (time_point, observation) VALUES
            (1, 10.1), (2, 10.2), (3, 10.0), (4, 10.3);

        RAISE NOTICE 'è¡¨ kalman_data åˆ›å»ºæˆåŠŸ';
    EXCEPTION
        WHEN OTHERS THEN
            RAISE EXCEPTION 'åˆ›å»ºè¡¨å¤±è´¥: %', SQLERRM;
    END;
END $$;

-- Kalmanæ»¤æ³¢é¢„æµ‹å’Œæ›´æ–°
WITH kalman_state AS (
    SELECT
        time_point,
        observation,
        -- é¢„æµ‹æ­¥éª¤
        LAG(state_estimate) OVER (ORDER BY time_point) AS predicted_state,
        -- æ›´æ–°æ­¥éª¤
        predicted_state + kalman_gain * (observation - predicted_state) AS updated_state
    FROM kalman_data
    CROSS JOIN (
        SELECT 0.5 AS kalman_gain
    ) kg
)
SELECT
    time_point,
    ROUND(observation::numeric, 2) AS observation,
    ROUND(updated_state::numeric, 2) AS state_estimate
FROM kalman_state
ORDER BY time_point;
```

---

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
