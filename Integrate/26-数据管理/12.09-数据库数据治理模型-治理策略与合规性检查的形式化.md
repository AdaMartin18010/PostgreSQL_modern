---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `DataBaseTheory\12-æ•°æ®ç®¡ç†æ¨¡å‹\12.09-æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹-æ²»ç†ç­–ç•¥ä¸åˆè§„æ€§æ£€æŸ¥çš„å½¢å¼åŒ–.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹-æ²»ç†ç­–ç•¥ä¸åˆè§„æ€§æ£€æŸ¥çš„å½¢å¼åŒ–

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: âœ… å†…å®¹å·²å®Œæˆ

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹-æ²»ç†ç­–ç•¥ä¸åˆè§„æ€§æ£€æŸ¥çš„å½¢å¼åŒ–](#æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹-æ²»ç†ç­–ç•¥ä¸åˆè§„æ€§æ£€æŸ¥çš„å½¢å¼åŒ–)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°](#10-æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 æ²»ç†ç­–ç•¥](#21-æ²»ç†ç­–ç•¥)
    - [2.2 åˆè§„æ€§æ£€æŸ¥](#22-åˆè§„æ€§æ£€æŸ¥)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 æ²»ç†æ¨¡å‹å½¢å¼åŒ–](#31-æ²»ç†æ¨¡å‹å½¢å¼åŒ–)
  - [4. å®šç†ä¸è¯æ˜](#4-å®šç†ä¸è¯æ˜)
    - [4.1 åˆè§„æ€§æ£€æŸ¥æ­£ç¡®æ€§å®šç†](#41-åˆè§„æ€§æ£€æŸ¥æ­£ç¡®æ€§å®šç†)
  - [5. å®é™…åº”ç”¨](#5-å®é™…åº”ç”¨)
    - [5.1 PostgreSQL 18æ•°æ®æ²»ç†å®ç°](#51-postgresql-18æ•°æ®æ²»ç†å®ç°)
      - [5.1.1 æ²»ç†ç­–ç•¥æ¡†æ¶](#511-æ²»ç†ç­–ç•¥æ¡†æ¶)
    - [5.2 å®é™…åº”ç”¨åœºæ™¯](#52-å®é™…åº”ç”¨åœºæ™¯)
      - [åœºæ™¯1ï¼šGDPRæ•°æ®æ²»ç†](#åœºæ™¯1gdpræ•°æ®æ²»ç†)
      - [åœºæ™¯2ï¼šæ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†](#åœºæ™¯2æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†)
  - [6. ç›¸å…³æ–‡æ¡£](#6-ç›¸å…³æ–‡æ¡£)
    - [5.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#51-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
    - [6.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®](#61-æ ¸å¿ƒç†è®ºæ–‡çŒ®)
    - [6.2 PostgreSQLå®ç°ç›¸å…³](#62-postgresqlå®ç°ç›¸å…³)
    - [6.3 ç›¸å…³æ–‡æ¡£](#63-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°

**æ•°æ®æ²»ç†**ï¼š

æ•°æ®æ²»ç†é€šè¿‡ç­–ç•¥å’Œåˆè§„æ€§æ£€æŸ¥æ¥ç®¡ç†æ•°æ®èµ„äº§ã€‚

**æ²»ç†æ¨¡å‹æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((æ•°æ®æ²»ç†))
    æ²»ç†ç­–ç•¥
      æ•°æ®åˆ†ç±»
      è®¿é—®æ§åˆ¶
      ç”Ÿå‘½å‘¨æœŸç®¡ç†
    åˆè§„æ€§æ£€æŸ¥
      æ³•è§„åˆè§„
      ç­–ç•¥åˆè§„
      æ ‡å‡†åˆè§„
    æ²»ç†æµç¨‹
      ç­–ç•¥åˆ¶å®š
      æ‰§è¡Œç›‘æ§
      å®¡è®¡æŠ¥å‘Š
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **æ²»ç†ç­–ç•¥**ï¼šæ•°æ®æ²»ç†ç­–ç•¥çš„å½¢å¼åŒ–
- **åˆè§„æ€§æ£€æŸ¥**ï¼šåˆè§„æ€§éªŒè¯ç®—æ³•
- **å®é™…åº”ç”¨**ï¼šæ•°æ®æ²»ç†ç³»ç»Ÿ

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 æ²»ç†ç­–ç•¥

**ç­–ç•¥ç±»å‹**ï¼š

| ç±»å‹ | å†…å®¹ | æ‰§è¡Œæ–¹å¼ |
|------|------|---------|
| **æ•°æ®åˆ†ç±»** | æ•æ„Ÿåº¦åˆ†çº§ | è‡ªåŠ¨/æ‰‹åŠ¨ |
| **è®¿é—®æ§åˆ¶** | æƒé™ç®¡ç† | å¼ºåˆ¶æ‰§è¡Œ |
| **ç”Ÿå‘½å‘¨æœŸ** | æ•°æ®ä¿ç•™ | è‡ªåŠ¨æ¸…ç† |

### 2.2 åˆè§„æ€§æ£€æŸ¥

**åˆè§„æ€§éªŒè¯**ï¼š

```haskell
-- åˆè§„æ€§æ£€æŸ¥
complianceCheck :: Data -> Policy -> Bool
complianceCheck data policy =
    validate(data, policy.rules)
```

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 æ²»ç†æ¨¡å‹å½¢å¼åŒ–

**æ²»ç†æ¨¡å‹**ï¼š

```haskell
-- æ²»ç†æ¨¡å‹å½¢å¼åŒ–
GovernanceModel = (P, C, E)
where
    P = policy set
    C = compliance checker
    E = enforcement mechanism
```

**åˆè§„æ€§æ£€æŸ¥å½¢å¼åŒ–**ï¼š

```haskell
-- åˆè§„æ€§æ£€æŸ¥
compliance :: Data -> Policy -> Bool
compliance D P = forall rule in P.rules: satisfies(D, rule)

-- ç­–ç•¥æ‰§è¡Œ
enforce :: Data -> Policy -> Data
enforce D P = apply(D, P.rules)
```

---

## 4. å®šç†ä¸è¯æ˜

### 4.1 åˆè§„æ€§æ£€æŸ¥æ­£ç¡®æ€§å®šç†

**å®šç†1ï¼ˆåˆè§„æ€§æ£€æŸ¥æ­£ç¡®æ€§ï¼‰**ï¼š

å¯¹äºæ²»ç†æ¨¡å‹GovernanceModel = (P, C, E)å’Œæ•°æ®Dï¼Œå¦‚æœåˆè§„æ€§æ£€æŸ¥C(D, P)è¿”å›trueï¼Œåˆ™æ•°æ®Dæ»¡è¶³æ‰€æœ‰ç­–ç•¥Pä¸­çš„è§„åˆ™ã€‚

**å½¢å¼åŒ–è¡¨è¿°**ï¼š

è®¾æ²»ç†æ¨¡å‹GovernanceModel = (P, C, E)ï¼Œæ•°æ®Dã€‚å¦‚æœcompliance(D, P) = trueï¼Œåˆ™ï¼š

```text
âˆ€rule âˆˆ P: satisfies(D, rule)
```

**è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šåˆè§„æ€§æ£€æŸ¥å®šä¹‰**ï¼š

- åˆè§„æ€§æ£€æŸ¥compliance(D, P) = trueï¼Œå½“ä¸”ä»…å½“æ•°æ®Dæ»¡è¶³ç­–ç•¥Pä¸­çš„æ‰€æœ‰è§„åˆ™

**æ­¥éª¤2ï¼šè§„åˆ™æ»¡è¶³æ€§**ï¼š

- å¯¹äºç­–ç•¥Pä¸­çš„ä»»æ„è§„åˆ™ruleï¼š
  - ç”±äºcompliance(D, P) = trueï¼Œæ ¹æ®å®šä¹‰ï¼Œsatisfies(D, rule) = true
  - å› æ­¤æ‰€æœ‰è§„åˆ™éƒ½è¢«æ»¡è¶³

**æ­¥éª¤3ï¼šç»“è®º**ï¼š

- åˆè§„æ€§æ£€æŸ¥æ­£ç¡®æ€§å®šç†å¾—è¯

**è¯æ˜æ ‘**ï¼š

```mermaid
graph TD
    A[åˆè§„æ€§æ£€æŸ¥æ­£ç¡®æ€§å®šç†] --> B[åˆè§„æ€§æ£€æŸ¥å®šä¹‰]
    B --> C[è§„åˆ™æ»¡è¶³æ€§]
    C --> D[æ‰€æœ‰è§„åˆ™æ»¡è¶³]
    D --> E[å®šç†å¾—è¯]

    style A fill:#FFD700
    style E fill:#90EE90
```

---

## 5. å®é™…åº”ç”¨

### 5.1 PostgreSQL 18æ•°æ®æ²»ç†å®ç°

#### 5.1.1 æ²»ç†ç­–ç•¥æ¡†æ¶

**PostgreSQL 18æ•°æ®æ²»ç†**ï¼š

PostgreSQL 18é€šè¿‡è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰ã€ç­–ç•¥å’Œè§¦å‘å™¨å®ç°æ•°æ®æ²»ç†ã€‚

**æ²»ç†ç­–ç•¥ç³»ç»Ÿ**ï¼š

```sql
-- åœºæ™¯ï¼šä¼ä¸šæ•°æ®æ²»ç†ç³»ç»Ÿ
-- 1. åˆ›å»ºç­–ç•¥è¡¨
CREATE TABLE governance_policies (
    policy_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    policy_name VARCHAR(200) NOT NULL,
    policy_type VARCHAR(50) NOT NULL,  -- 'CLASSIFICATION', 'ACCESS', 'RETENTION'
    table_name VARCHAR(200),
    policy_definition JSONB NOT NULL,
    enabled BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. æ•°æ®åˆ†ç±»è¡¨
CREATE TABLE data_classifications (
    classification_id UUID PRIMARY KEY,
    table_name VARCHAR(200) NOT NULL,
    column_name VARCHAR(200),
    classification_level VARCHAR(50) NOT NULL,  -- 'PUBLIC', 'INTERNAL', 'CONFIDENTIAL', 'RESTRICTED'
    owner VARCHAR(100),
    retention_period INTERVAL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_classifications_table ON data_classifications(table_name);

-- 3. åˆè§„æ€§æ£€æŸ¥å‡½æ•°
CREATE OR REPLACE FUNCTION check_compliance(
    p_table_name VARCHAR,
    p_policy_type VARCHAR DEFAULT NULL
)
RETURNS TABLE (
    policy_name VARCHAR,
    compliance_status BOOLEAN,
    violations JSONB
) AS $$
DECLARE
    v_policy RECORD;
    v_compliant BOOLEAN;
    v_violations JSONB;
BEGIN
    FOR v_policy IN
        SELECT * FROM governance_policies
        WHERE table_name = p_table_name
          AND enabled = TRUE
          AND (p_policy_type IS NULL OR policy_type = p_policy_type)
    LOOP
        -- æ‰§è¡Œåˆè§„æ€§æ£€æŸ¥
        v_compliant := TRUE;  -- ç®€åŒ–ï¼Œå®é™…éœ€è¦æ‰§è¡Œå…·ä½“æ£€æŸ¥é€»è¾‘
        v_violations := '[]'::JSONB;  -- ç®€åŒ–ï¼Œå®é™…éœ€è¦æ”¶é›†è¿è§„ä¿¡æ¯

        RETURN QUERY SELECT v_policy.policy_name, v_compliant, v_violations;
    END LOOP;
END;
$$ LANGUAGE plpgsql;
```

### 5.2 å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šGDPRæ•°æ®æ²»ç†

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

ä¼ä¸šéœ€è¦éµå®ˆGDPRç­‰æ•°æ®ä¿æŠ¤æ³•è§„ï¼Œå®ç°æ•°æ®åˆ†ç±»ã€è®¿é—®æ§åˆ¶å’Œä¿ç•™ç­–ç•¥ã€‚

**PostgreSQL 18å®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šGDPRæ•°æ®æ²»ç†
-- 1. æ•°æ®åˆ†ç±»
INSERT INTO data_classifications (table_name, column_name, classification_level, retention_period)
VALUES
    ('customers', 'email', 'CONFIDENTIAL', INTERVAL '7 years'),
    ('customers', 'phone', 'CONFIDENTIAL', INTERVAL '7 years'),
    ('customers', 'purchase_history', 'INTERNAL', INTERVAL '5 years');

-- 2. è®¿é—®æ§åˆ¶ç­–ç•¥ï¼ˆä½¿ç”¨RLSï¼‰
ALTER TABLE customers ENABLE ROW LEVEL SECURITY;

CREATE POLICY customer_access_policy ON customers
    FOR ALL
    TO data_analyst
    USING (
        classification_level IN ('PUBLIC', 'INTERNAL') OR
        current_user = owner
    );

-- 3. æ•°æ®ä¿ç•™ç­–ç•¥
CREATE OR REPLACE FUNCTION enforce_retention_policy()
RETURNS TRIGGER AS $$
DECLARE
    v_retention_period INTERVAL;
BEGIN
    SELECT retention_period INTO v_retention_period
    FROM data_classifications
    WHERE table_name = TG_TABLE_NAME
      AND column_name = TG_ARGV[0];

    IF v_retention_period IS NOT NULL THEN
        -- åˆ é™¤è¶…è¿‡ä¿ç•™æœŸçš„æ•°æ®
        EXECUTE format('
            DELETE FROM %I
            WHERE %I < NOW() - $1
        ', TG_TABLE_NAME, TG_ARGV[0]) USING v_retention_period;
    END IF;

    RETURN NULL;
END;
$$ LANGUAGE plpgsql;

-- 4. åˆè§„æ€§å®¡è®¡
CREATE TABLE compliance_audit (
    audit_id UUID PRIMARY KEY,
    table_name VARCHAR(200),
    policy_name VARCHAR(200),
    compliance_status BOOLEAN,
    audit_time TIMESTAMPTZ DEFAULT NOW(),
    details JSONB
);

-- å®šæœŸåˆè§„æ€§æ£€æŸ¥
INSERT INTO compliance_audit (table_name, policy_name, compliance_status)
SELECT table_name, policy_name, compliance_status
FROM check_compliance('customers');
```

#### åœºæ™¯2ï¼šæ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

ä¼ä¸šéœ€è¦è‡ªåŠ¨ç®¡ç†æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å½’æ¡£å’Œåˆ é™¤ã€‚

**PostgreSQL 18å®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šæ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†
-- 1. åˆ›å»ºå½’æ¡£è¡¨
CREATE TABLE customers_archive (LIKE customers INCLUDING ALL);

-- 2. è‡ªåŠ¨å½’æ¡£å‡½æ•°
CREATE OR REPLACE FUNCTION archive_old_data(
    p_table_name VARCHAR,
    p_archive_threshold INTERVAL
)
RETURNS BIGINT AS $$
DECLARE
    v_archived_count BIGINT;
BEGIN
    -- å½’æ¡£æ—§æ•°æ®
    EXECUTE format('
        INSERT INTO %I_archive
        SELECT * FROM %I
        WHERE updated_at < NOW() - $1
    ', p_table_name, p_table_name) USING p_archive_threshold;

    -- åˆ é™¤å·²å½’æ¡£çš„æ•°æ®
    EXECUTE format('
        DELETE FROM %I
        WHERE updated_at < NOW() - $1
    ', p_table_name) USING p_archive_threshold;

    GET DIAGNOSTICS v_archived_count = ROW_COUNT;
    RETURN v_archived_count;
END;
$$ LANGUAGE plpgsql;

-- 3. å®šæœŸæ‰§è¡Œå½’æ¡£
SELECT archive_old_data('customers', INTERVAL '2 years');
```

---

---

## 6. ç›¸å…³æ–‡æ¡£

### 5.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](./1.1.25-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](./README.md)

---

## 7. å‚è€ƒæ–‡çŒ®

### 6.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®

- **Khatri, V., & Brown, C. V. (2010). "Designing Data Governance."**
  - ä¼šè®®: Communications of the ACM 2010
  - **é‡è¦æ€§**: æ•°æ®æ²»ç†è®¾è®¡çš„ç»å…¸è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†æ²»ç†æ¡†æ¶

- **Weber, K., et al. (2009). "One Size Does Not Fit All - A Contingency Approach to Data Governance."**
  - ä¼šè®®: Journal of Data and Information Quality 2009
  - **é‡è¦æ€§**: æ•°æ®æ²»ç†çš„æƒå˜æ–¹æ³•
  - **æ ¸å¿ƒè´¡çŒ®**: æ€»ç»“äº†æ²»ç†ç­–ç•¥

### 6.2 PostgreSQLå®ç°ç›¸å…³

- **PostgreSQLå®˜æ–¹æ–‡æ¡£ - å®‰å…¨](<https://www.postgresql.org/docs/current/security.html>)**
  - PostgreSQLå®‰å…¨å®ç°è¯´æ˜

### 6.3 ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“å®¡è®¡ä¸åˆè§„-å®Œæ•´æ€§çº¦æŸä¸å®¡è®¡è½¨è¿¹çš„å½¢å¼åŒ–](../07-å®‰å…¨ä¸åˆè§„/07.05-æ•°æ®åº“å®¡è®¡ä¸åˆè§„-å®Œæ•´æ€§çº¦æŸä¸å®¡è®¡è½¨è¿¹çš„å½¢å¼åŒ–.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: âœ… å†…å®¹å·²å®Œæˆ
