---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `DataBaseTheory\12-æ•°æ®ç®¡ç†æ¨¡å‹\12.08-æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹-éšç§ä¿æŠ¤ä¸åŒ¿ååŒ–æŠ€æœ¯çš„å½¢å¼åŒ–.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹-éšç§ä¿æŠ¤ä¸åŒ¿ååŒ–æŠ€æœ¯çš„å½¢å¼åŒ–

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: âœ… å†…å®¹å·²å®Œæˆ

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹-éšç§ä¿æŠ¤ä¸åŒ¿ååŒ–æŠ€æœ¯çš„å½¢å¼åŒ–](#æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹-éšç§ä¿æŠ¤ä¸åŒ¿ååŒ–æŠ€æœ¯çš„å½¢å¼åŒ–)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°](#10-æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 åŒ¿ååŒ–æŠ€æœ¯](#21-åŒ¿ååŒ–æŠ€æœ¯)
    - [2.2 éšç§ä¿æŠ¤](#22-éšç§ä¿æŠ¤)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 åŒ¿ååŒ–å½¢å¼åŒ–](#31-åŒ¿ååŒ–å½¢å¼åŒ–)
  - [4. å®šç†ä¸è¯æ˜](#4-å®šç†ä¸è¯æ˜)
    - [4.1 k-åŒ¿åéšç§ä¿è¯å®šç†](#41-k-åŒ¿åéšç§ä¿è¯å®šç†)
  - [5. å®é™…åº”ç”¨](#5-å®é™…åº”ç”¨)
    - [5.1 PostgreSQL 18éšç§ä¿æŠ¤å®ç°](#51-postgresql-18éšç§ä¿æŠ¤å®ç°)
      - [5.1.1 k-åŒ¿åå®ç°](#511-k-åŒ¿åå®ç°)
    - [5.2 å®é™…åº”ç”¨åœºæ™¯](#52-å®é™…åº”ç”¨åœºæ™¯)
      - [åœºæ™¯1ï¼šGDPRåˆè§„æ•°æ®åŒ¿ååŒ–](#åœºæ™¯1gdpråˆè§„æ•°æ®åŒ¿ååŒ–)
      - [åœºæ™¯2ï¼šå·®åˆ†éšç§èšåˆæŸ¥è¯¢](#åœºæ™¯2å·®åˆ†éšç§èšåˆæŸ¥è¯¢)
  - [6. ç›¸å…³æ–‡æ¡£](#6-ç›¸å…³æ–‡æ¡£)
    - [5.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#51-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
    - [6.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®](#61-æ ¸å¿ƒç†è®ºæ–‡çŒ®)
    - [6.2 PostgreSQLå®ç°ç›¸å…³](#62-postgresqlå®ç°ç›¸å…³)
    - [6.3 ç›¸å…³æ–‡æ¡£](#63-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 æ•°æ®åº“æ•°æ®éšç§æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°

**æ•°æ®éšç§**ï¼š

æ•°æ®éšç§æ¨¡å‹ä½¿ç”¨åŒ¿ååŒ–å’Œéšç§ä¿æŠ¤æŠ€æœ¯æ¥ä¿æŠ¤ä¸ªäººéšç§ã€‚

**éšç§ä¿æŠ¤æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((æ•°æ®éšç§))
    åŒ¿ååŒ–æŠ€æœ¯
      k-åŒ¿å
      l-å¤šæ ·æ€§
      t-æ¥è¿‘
    éšç§ä¿æŠ¤
      å·®åˆ†éšç§
      åŒæ€åŠ å¯†
      å®‰å…¨å¤šæ–¹è®¡ç®—
    éšç§åº¦é‡
      éšç§æŸå¤±
      æ•ˆç”¨æŸå¤±
      éšç§é¢„ç®—
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **åŒ¿ååŒ–æŠ€æœ¯**ï¼šk-åŒ¿åã€l-å¤šæ ·æ€§ç­‰
- **éšç§ä¿æŠ¤**ï¼šå·®åˆ†éšç§ç­‰æœºåˆ¶
- **å®é™…åº”ç”¨**ï¼šéšç§ä¿æŠ¤ç³»ç»Ÿ

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 åŒ¿ååŒ–æŠ€æœ¯

**åŒ¿ååŒ–æ–¹æ³•**ï¼š

| æ–¹æ³• | å®šä¹‰ | éšç§ä¿è¯ |
|------|------|---------|
| **k-åŒ¿å** | æ¯ç»„è‡³å°‘kæ¡è®°å½• | èº«ä»½ä¿æŠ¤ |
| **l-å¤šæ ·æ€§** | æ¯ç»„è‡³å°‘lä¸ªæ•æ„Ÿå€¼ | å±æ€§ä¿æŠ¤ |
| **t-æ¥è¿‘** | æ•æ„Ÿå€¼åˆ†å¸ƒæ¥è¿‘æ€»ä½“ | åˆ†å¸ƒä¿æŠ¤ |

### 2.2 éšç§ä¿æŠ¤

**éšç§ä¿æŠ¤æœºåˆ¶**ï¼š

```haskell
-- å·®åˆ†éšç§
differentialPrivacy :: Query -> Double -> Query
differentialPrivacy query epsilon =
    addNoise(query, laplace(epsilon))
```

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 åŒ¿ååŒ–å½¢å¼åŒ–

**k-åŒ¿å**ï¼š

```haskell
-- k-åŒ¿åå½¢å¼åŒ–
kAnonymity(data, k) =
    forall group g in data:
        |g| >= k
        and
        g.quasiIdentifiers are identical
```

**l-å¤šæ ·æ€§**ï¼š

```haskell
-- l-å¤šæ ·æ€§å½¢å¼åŒ–
lDiversity(data, l) =
    forall group g in data:
        |g.sensitiveValues| >= l
        and
        kAnonymity(data, k)  -- é¦–å…ˆæ»¡è¶³k-åŒ¿å
```

**å·®åˆ†éšç§**ï¼š

```haskell
-- å·®åˆ†éšç§å½¢å¼åŒ–
(Îµ, Î´)-DP(M, D1, D2) =
    if |D1 - D2| = 1 then
        P[M(D1) âˆˆ S] â‰¤ e^Îµ Â· P[M(D2) âˆˆ S] + Î´
```

---

## 4. å®šç†ä¸è¯æ˜

### 4.1 k-åŒ¿åéšç§ä¿è¯å®šç†

**å®šç†1ï¼ˆk-åŒ¿åéšç§ä¿è¯ï¼‰**ï¼š

å¯¹äºk-åŒ¿åæ•°æ®é›†Dï¼Œä»»æ„æ”»å‡»è€…æœ€å¤šèƒ½ä»¥1/kçš„æ¦‚ç‡è¯†åˆ«å‡ºç‰¹å®šä¸ªä½“çš„èº«ä»½ã€‚

**å½¢å¼åŒ–è¡¨è¿°**ï¼š

è®¾æ•°æ®é›†Dæ»¡è¶³k-åŒ¿åæ€§ï¼Œå³å¯¹äºä»»æ„å‡†æ ‡è¯†ç¬¦ç»„åˆqï¼Œè‡³å°‘å­˜åœ¨kæ¡è®°å½•å…·æœ‰ç›¸åŒçš„å‡†æ ‡è¯†ç¬¦ã€‚åˆ™å¯¹äºä»»æ„ä¸ªä½“iï¼Œæ”»å‡»è€…è¯†åˆ«içš„æ¦‚ç‡è‡³å¤šä¸º1/kã€‚

**è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šk-åŒ¿åå®šä¹‰**ï¼š

- æ•°æ®é›†Dæ»¡è¶³k-åŒ¿åæ€§ï¼Œå¦‚æœå¯¹äºä»»æ„å‡†æ ‡è¯†ç¬¦ç»„åˆqï¼Œå­˜åœ¨è‡³å°‘kæ¡è®°å½•å…·æœ‰ç›¸åŒçš„å‡†æ ‡è¯†ç¬¦

**æ­¥éª¤2ï¼šæ”»å‡»æ¨¡å‹**ï¼š

- æ”»å‡»è€…çŸ¥é“ä¸ªä½“çš„å‡†æ ‡è¯†ç¬¦q
- æ”»å‡»è€…è¯•å›¾åœ¨æ•°æ®é›†ä¸­è¯†åˆ«è¯¥ä¸ªä½“

**æ­¥éª¤3ï¼šè¯†åˆ«æ¦‚ç‡è®¡ç®—**ï¼š

- å¯¹äºå‡†æ ‡è¯†ç¬¦qï¼Œå­˜åœ¨è‡³å°‘kæ¡è®°å½•å…·æœ‰ç›¸åŒçš„å‡†æ ‡è¯†ç¬¦
- æ”»å‡»è€…æ— æ³•åŒºåˆ†è¿™kæ¡è®°å½•
- å› æ­¤æ”»å‡»è€…è¯†åˆ«ç‰¹å®šä¸ªä½“çš„æ¦‚ç‡ä¸º1/k

**æ­¥éª¤4ï¼šç»“è®º**ï¼š

- k-åŒ¿åæä¾›1/kçš„èº«ä»½ä¿æŠ¤
- å®šç†å¾—è¯

**è¯æ˜æ ‘**ï¼š

```mermaid
graph TD
    A[k-åŒ¿åéšç§ä¿è¯å®šç†] --> B[k-åŒ¿åå®šä¹‰]
    B --> C[æ”»å‡»æ¨¡å‹]
    C --> D[è¯†åˆ«æ¦‚ç‡è®¡ç®—]
    D --> E[æ¦‚ç‡ä¸Šç•Œ1/k]
    E --> F[å®šç†å¾—è¯]

    style A fill:#FFD700
    style F fill:#90EE90
```

---

## 5. å®é™…åº”ç”¨

### 5.1 PostgreSQL 18éšç§ä¿æŠ¤å®ç°

#### 5.1.1 k-åŒ¿åå®ç°

**PostgreSQL 18åŒ¿ååŒ–**ï¼š

PostgreSQL 18é€šè¿‡èšåˆå’Œåˆ†ç»„å®ç°k-åŒ¿åå’Œl-å¤šæ ·æ€§åŒ¿ååŒ–ã€‚

**k-åŒ¿åå®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šåŒ»ç–—æ•°æ®åŒ¿ååŒ–
-- 1. åˆ›å»ºåŸå§‹æ‚£è€…è¡¨
CREATE TABLE patients (
    patient_id BIGSERIAL PRIMARY KEY,
    age INTEGER,
    zip_code VARCHAR(10),
    gender VARCHAR(10),
    diagnosis VARCHAR(100),
    treatment_cost DECIMAL(10,2)
);

-- 2. k-åŒ¿åå¤„ç†ï¼ˆk=5ï¼‰
CREATE TABLE anonymized_patients AS
SELECT
    CASE
        WHEN age < 30 THEN '18-29'
        WHEN age < 40 THEN '30-39'
        WHEN age < 50 THEN '40-49'
        WHEN age < 60 THEN '50-59'
        ELSE '60+'
    END as age_group,
    LEFT(zip_code, 3) as zip_prefix,  -- æ³›åŒ–
    gender,
    diagnosis,
    COUNT(*) as group_size,
    AVG(treatment_cost) as avg_cost
FROM patients
GROUP BY age_group, zip_prefix, gender, diagnosis
HAVING COUNT(*) >= 5;  -- k=5åŒ¿å

-- 3. éªŒè¯k-åŒ¿å
SELECT
    age_group,
    zip_prefix,
    gender,
    MIN(group_size) as min_group_size
FROM anonymized_patients
GROUP BY age_group, zip_prefix, gender
HAVING MIN(group_size) < 5;  -- åº”è¯¥è¿”å›ç©ºç»“æœ
```

### 5.2 å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šGDPRåˆè§„æ•°æ®åŒ¿ååŒ–

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

ä¼ä¸šéœ€è¦éµå®ˆGDPRç­‰éšç§æ³•è§„ï¼Œåœ¨å…±äº«æ•°æ®å‰è¿›è¡ŒåŒ¿ååŒ–å¤„ç†ã€‚

**PostgreSQL 18å®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šGDPRåˆè§„æ•°æ®åŒ¿ååŒ–
-- 1. åˆ›å»ºå®¢æˆ·æ•°æ®è¡¨
CREATE TABLE customer_data (
    customer_id BIGSERIAL PRIMARY KEY,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    email VARCHAR(100),
    phone VARCHAR(20),
    date_of_birth DATE,
    address TEXT,
    purchase_amount DECIMAL(10,2)
);

-- 2. k-åŒ¿åå’Œl-å¤šæ ·æ€§åŒ¿ååŒ–
CREATE TABLE anonymized_customer_data AS
WITH generalized_data AS (
    SELECT
        -- å‡†æ ‡è¯†ç¬¦æ³›åŒ–
        CASE
            WHEN EXTRACT(YEAR FROM AGE(date_of_birth)) < 30 THEN '18-29'
            WHEN EXTRACT(YEAR FROM AGE(date_of_birth)) < 40 THEN '30-39'
            WHEN EXTRACT(YEAR FROM AGE(date_of_birth)) < 50 THEN '40-49'
            ELSE '50+'
        END as age_group,
        LEFT(address, 5) as location_prefix,  -- åœ°å€æ³›åŒ–
        SUBSTRING(email FROM '@(.*)') as email_domain,
        -- æ•æ„Ÿå±æ€§
        CASE
            WHEN purchase_amount < 100 THEN 'Low'
            WHEN purchase_amount < 500 THEN 'Medium'
            ELSE 'High'
        END as purchase_category,
        COUNT(*) OVER (PARTITION BY
            CASE
                WHEN EXTRACT(YEAR FROM AGE(date_of_birth)) < 30 THEN '18-29'
                WHEN EXTRACT(YEAR FROM AGE(date_of_birth)) < 40 THEN '30-39'
                WHEN EXTRACT(YEAR FROM AGE(date_of_birth)) < 50 THEN '40-49'
                ELSE '50+'
            END,
            LEFT(address, 5)
        ) as group_size
    FROM customer_data
)
SELECT
    age_group,
    location_prefix,
    email_domain,
    purchase_category,
    group_size,
    COUNT(*) as record_count
FROM generalized_data
WHERE group_size >= 5  -- k-åŒ¿å
GROUP BY age_group, location_prefix, email_domain, purchase_category, group_size
HAVING COUNT(DISTINCT purchase_category) >= 2;  -- l-å¤šæ ·æ€§ï¼ˆl=2ï¼‰

-- 3. éªŒè¯åŒ¿ååŒ–æ•ˆæœ
SELECT
    age_group,
    location_prefix,
    MIN(group_size) as min_k,
    COUNT(DISTINCT purchase_category) as diversity_l
FROM anonymized_customer_data
GROUP BY age_group, location_prefix
HAVING MIN(group_size) >= 5 AND COUNT(DISTINCT purchase_category) >= 2;
```

#### åœºæ™¯2ï¼šå·®åˆ†éšç§èšåˆæŸ¥è¯¢

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

éœ€è¦å‘å¸ƒç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒæ—¶ä¿æŠ¤ä¸ªäººéšç§ã€‚

**PostgreSQL 18å®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šå·®åˆ†éšç§èšåˆæŸ¥è¯¢
-- 1. å·®åˆ†éšç§å™ªå£°æ·»åŠ å‡½æ•°
CREATE OR REPLACE FUNCTION add_laplace_noise(
    p_value NUMERIC,
    p_epsilon NUMERIC,
    p_sensitivity NUMERIC
)
RETURNS NUMERIC AS $$
DECLARE
    v_scale NUMERIC;
    v_noise NUMERIC;
BEGIN
    -- æ‹‰æ™®æ‹‰æ–¯åˆ†å¸ƒçš„å°ºåº¦å‚æ•°
    v_scale := p_sensitivity / p_epsilon;

    -- ç”Ÿæˆæ‹‰æ™®æ‹‰æ–¯å™ªå£°ï¼ˆç®€åŒ–å®ç°ï¼‰
    v_noise := (random() - 0.5) * v_scale * LN(1.0 - random() + 1e-10);

    RETURN p_value + v_noise;
END;
$$ LANGUAGE plpgsql;

-- 2. å·®åˆ†éšç§èšåˆæŸ¥è¯¢
SELECT
    department_id,
    COUNT(*) as employee_count,
    add_laplace_noise(COUNT(*)::NUMERIC, 1.0, 1.0) as noisy_count,
    AVG(salary) as avg_salary,
    add_laplace_noise(AVG(salary), 1.0, 10000.0) as noisy_avg_salary
FROM employees
GROUP BY department_id;
```

---

---

## 6. ç›¸å…³æ–‡æ¡£

### 5.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](./1.1.25-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](./README.md)

---

## 7. å‚è€ƒæ–‡çŒ®

### 6.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®

- **Sweeney, L. (2002). "k-Anonymity: A Model for Protecting Privacy."**
  - ä¼šè®®: International Journal of Uncertainty 2002
  - **é‡è¦æ€§**: k-åŒ¿åçš„ç»å…¸è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†k-åŒ¿åæ¨¡å‹

- **Machanavajjhala, A., et al. (2007). "l-Diversity: Privacy Beyond k-Anonymity."**
  - ä¼šè®®: TKDE 2007
  - **é‡è¦æ€§**: l-å¤šæ ·æ€§çš„ç»å…¸è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æ‰©å±•äº†åŒ¿ååŒ–æŠ€æœ¯

### 6.2 PostgreSQLå®ç°ç›¸å…³

- **PostgreSQLæ‰©å±• - éšç§ä¿æŠ¤](<https://github.com/postgresql/privacy-protection>)**
  - PostgreSQLéšç§ä¿æŠ¤æ‰©å±•

### 6.3 ç›¸å…³æ–‡æ¡£

- [å·®åˆ†éšç§-SQLèšåˆçš„çµæ•åº¦ä¸å™ªå£°æœºåˆ¶](../07-å®‰å…¨ä¸åˆè§„/07.02-å·®åˆ†éšç§-SQLèšåˆçš„çµæ•åº¦ä¸å™ªå£°æœºåˆ¶.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: âœ… å†…å®¹å·²å®Œæˆ
