# 行业标准与规范完整指南

> **创建日期**: 2025年1月
> **来源**: 国际标准组织、行业标准
> **状态**: 基于权威资源整理

---

## 📚 概述

行业标准与规范为数据建模提供了统一的框架和最佳实践，确保数据模型的一致性、互操作性和可维护性。

---

## 🌐 国际标准

### ISO/IEC标准

#### ISO/IEC 11179 - 元数据注册标准

**定义**: 元数据注册（Metadata Registry）标准，用于定义和管理数据元素。

**核心概念**:

- **数据元素（Data Element）**: 数据的基本单元
- **概念域（Conceptual Domain）**: 值的含义
- **值域（Value Domain）**: 允许的值集合

**应用场景**:

- 企业数据治理
- 数据字典管理
- 元数据管理

**PostgreSQL实现示例**:

```sql
-- 元数据注册表
CREATE TABLE metadata_registry (
    element_id SERIAL PRIMARY KEY,
    element_name VARCHAR(200) NOT NULL,
    definition TEXT NOT NULL,
    data_type VARCHAR(50) NOT NULL,
    conceptual_domain TEXT,
    value_domain TEXT,
    registration_status VARCHAR(20) DEFAULT 'draft',
    registered_date DATE DEFAULT CURRENT_DATE
);

-- 数据元素分类
CREATE TABLE data_element_categories (
    category_id SERIAL PRIMARY KEY,
    category_name VARCHAR(100) NOT NULL,
    parent_category_id INT REFERENCES data_element_categories(category_id)
);
```

---

#### ISO/IEC 61360 - 元器件数据字典标准

**定义**: 电子元器件数据字典标准，用于制造业数据建模。

**核心内容**:

- 元器件属性定义
- 分类体系
- 数据交换格式

**应用场景**:

- 电子制造业
- 供应链管理
- 产品生命周期管理

---

#### ISO/IEC 9075 - SQL标准

**定义**: SQL语言国际标准。

**版本**:

- SQL:2016 (ISO/IEC 9075:2016)
- SQL:2023 (最新)

**核心内容**:

- SQL语法规范
- 数据类型定义
- 完整性约束

**PostgreSQL兼容性**: PostgreSQL高度兼容SQL标准，支持大部分SQL:2016特性。

---

### OMG标准

#### UML (Unified Modeling Language)

**版本**: UML 2.5

**用途**: 统一建模语言，用于软件系统建模。

**在数据建模中的应用**:

- ER图绘制
- 类图设计
- 活动图建模

**工具**:

- Enterprise Architect
- Visual Paradigm
- draw.io

---

#### BPMN (Business Process Model and Notation)

**版本**: BPMN 2.0

**用途**: 业务流程模型和标记法。

**核心元素**:

- **事件（Events）**: 流程中的发生点
- **活动（Activities）**: 执行的工作
- **网关（Gateways）**: 流程控制点

**应用场景**:

- 业务流程建模
- 工作流设计
- 流程自动化

**相关文档**: `07-工作流建模/BPMN建模.md`

---

#### CWM (Common Warehouse Metamodel)

**定义**: 公共仓库元模型，用于数据仓库元数据管理。

**核心内容**:

- 数据源建模
- 转换规则定义
- 目标数据模型

**应用场景**:

- 数据仓库元数据管理
- ETL工具设计
- 数据集成

---

## 🏦 金融业标准

### ISO 20022 - 金融报文标准

**定义**: 金融信息交换标准，用于金融报文格式。

**核心内容**:

- 报文格式定义
- 数据字典
- 业务领域模型

**应用场景**:

- 银行间支付
- 证券交易
- 外汇交易

**PostgreSQL实现示例**:

```sql
-- ISO 20022支付报文模型
CREATE TABLE payment_messages (
    message_id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    message_type VARCHAR(50) NOT NULL,  -- pacs.008, pacs.009等
    message_version VARCHAR(10) NOT NULL,
    creation_datetime TIMESTAMPTZ NOT NULL,
    message_content XML NOT NULL,  -- ISO 20022 XML格式
    status VARCHAR(20) DEFAULT 'pending'
);

-- 支付交易
CREATE TABLE payment_transactions (
    transaction_id UUID PRIMARY KEY,
    message_id UUID REFERENCES payment_messages(message_id),
    instruction_id VARCHAR(50) UNIQUE NOT NULL,
    debtor_account VARCHAR(50) NOT NULL,
    creditor_account VARCHAR(50) NOT NULL,
    amount NUMERIC(15,2) NOT NULL,
    currency CHAR(3) NOT NULL,
    value_date DATE NOT NULL,
    status VARCHAR(20) DEFAULT 'pending'
);
```

---

### BCBS 239 - 风险数据管理

**定义**: 巴塞尔银行监管委员会风险数据管理标准。

**核心要求**:

- 数据完整性
- 数据准确性
- 数据及时性
- 数据一致性

**应用场景**:

- 银行风险管理系统
- 监管报告
- 风险数据治理

---

## 🏥 医疗保健标准

### HL7 FHIR

**版本**: FHIR R4 (最新)

**定义**: Fast Healthcare Interoperability Resources，医疗信息交换标准。

**核心资源**:

- **Patient**: 患者信息
- **Observation**: 观察结果（检验、检查）
- **Medication**: 药物信息
- **Encounter**: 就诊记录

**PostgreSQL实现示例**:

```sql
-- FHIR Patient资源
CREATE TABLE fhir_patients (
    patient_id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    fhir_id VARCHAR(50) UNIQUE NOT NULL,
    identifier JSONB,  -- 标识符（身份证、医保号等）
    name JSONB,         -- 姓名
    gender VARCHAR(10),
    birth_date DATE,
    address JSONB,     -- 地址
    telecom JSONB,     -- 联系方式
    fhir_resource JSONB NOT NULL,  -- 完整FHIR资源
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- FHIR Observation资源
CREATE TABLE fhir_observations (
    observation_id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    fhir_id VARCHAR(50) UNIQUE NOT NULL,
    patient_id UUID REFERENCES fhir_patients(patient_id),
    status VARCHAR(20) NOT NULL,
    category JSONB,
    code JSONB,        -- 检验项目代码
    value_quantity JSONB,  -- 数值结果
    value_string TEXT,     -- 文本结果
    effective_datetime TIMESTAMPTZ,
    fhir_resource JSONB NOT NULL
);

-- GIN索引优化FHIR查询
CREATE INDEX idx_fhir_patients_resource_gin ON fhir_patients USING GIN (fhir_resource);
CREATE INDEX idx_fhir_observations_patient ON fhir_observations(patient_id);
```

---

### OMOP CDM - 观察性医疗数据模型

**定义**: Observational Medical Outcomes Partnership Common Data Model，用于观察性医疗研究。

**核心表**:

- **PERSON**: 人员信息
- **CONDITION_OCCURRENCE**: 疾病发生
- **DRUG_EXPOSURE**: 药物暴露
- **MEASUREMENT**: 测量结果

**应用场景**:

- 医疗研究
- 药物安全性研究
- 真实世界证据（RWE）

---

## 📡 电信业标准

### TM Forum SID - 共享信息数据模型

**定义**: Shared Information/Data Model，电信行业信息数据模型。

**核心领域**:

- 产品目录
- 客户管理
- 服务管理
- 资源管理

**应用场景**:

- 电信OSS/BSS系统
- 服务开通
- 计费系统

---

## 🏭 制造业标准

### ISO 10303 (STEP) - 产品数据交换标准

**定义**: Standard for the Exchange of Product model data，产品数据交换标准。

**应用场景**:

- CAD/CAM数据交换
- 产品生命周期管理（PLM）
- 供应链协同

---

### B2MML - 制造标记语言

**定义**: Business To Manufacturing Markup Language，制造执行系统数据模型。

**核心内容**:

- 生产订单
- 物料清单（BOM）
- 工艺路线
- 质量数据

**应用场景**:

- MES系统
- 生产执行
- 质量追溯

---

## 🛒 零售业标准

### GS1标准

**核心标准**:

- **GTIN**: 全球贸易项目代码
- **GLN**: 全球位置码
- **SSCC**: 系列货运包装箱代码

**应用场景**:

- 商品标识
- 供应链追溯
- 零售POS系统

**PostgreSQL实现示例**:

```sql
-- GS1商品主数据
CREATE TABLE gs1_products (
    product_id BIGSERIAL PRIMARY KEY,
    gtin VARCHAR(14) UNIQUE NOT NULL,  -- GTIN-14
    product_name TEXT NOT NULL,
    brand_name VARCHAR(100),
    category_code VARCHAR(50),
    unit_of_measure VARCHAR(10),
    net_content NUMERIC(10,3),
    gs1_data JSONB  -- GS1扩展数据
);

-- GS1位置数据
CREATE TABLE gs1_locations (
    location_id BIGSERIAL PRIMARY KEY,
    gln VARCHAR(13) UNIQUE NOT NULL,  -- GLN
    location_name TEXT NOT NULL,
    location_type VARCHAR(50),
    address JSONB,
    coordinates GEOGRAPHY(POINT, 4326)
);
```

---

## 📊 数据治理标准

### DAMA-DMBOK

**定义**: Data Management Body of Knowledge，数据管理知识体系。

**核心领域**:

1. 数据治理
2. 数据架构
3. 数据建模与设计
4. 数据存储与操作
5. 数据安全
6. 数据质量
7. 参考数据与主数据
8. 数据仓库与商务智能
9. 文档与内容管理
10. 元数据管理

**应用场景**:

- 企业数据治理
- 数据管理成熟度评估
- 数据管理能力建设

---

## 🔧 PostgreSQL标准兼容性

### SQL标准兼容

**PostgreSQL兼容性**:

- ✅ SQL:2016核心特性
- ✅ 窗口函数
- ✅ CTE（WITH子句）
- ✅ JSON/JSONB支持
- ✅ 数组类型
- ✅ 自定义类型

**示例**:

```sql
-- SQL标准窗口函数
SELECT
    product_id,
    sale_date,
    amount,
    SUM(amount) OVER (PARTITION BY product_id ORDER BY sale_date) AS running_total,
    ROW_NUMBER() OVER (PARTITION BY product_id ORDER BY amount DESC) AS rank
FROM sales;

-- SQL标准CTE
WITH monthly_sales AS (
    SELECT
        DATE_TRUNC('month', sale_date) AS month,
        SUM(amount) AS total_amount
    FROM sales
    GROUP BY DATE_TRUNC('month', sale_date)
)
SELECT
    month,
    total_amount,
    LAG(total_amount) OVER (ORDER BY month) AS prev_month_amount
FROM monthly_sales;
```

---

## 📚 相关资源

- [权威资源索引](../00-导航与索引/权威资源索引.md)
- [Silverston数据模型资源手册](./Silverston数据模型资源手册.md)
- [Kimball维度建模](./Kimball维度建模.md)

---

## 🔗 参考文档

- ISO/IEC官方网站: <https://www.iso.org/>
- OMG官方网站: <https://www.omg.org/>
- HL7 FHIR官网: <https://www.hl7.org/fhir/>
- DAMA国际: <https://www.dama.org/>
- PostgreSQL官方文档: [SQL Conformance](https://www.postgresql.org/docs/current/features.html)

---

**最后更新**: 2025年1月
**维护者**: PostgreSQL Modern Team
