# æˆæœ¬æ•ˆç›Šåˆ†æ

> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ
> **æ¥æº**: æ•°æ®å»ºæ¨¡ç»æµå­¦
> **çŠ¶æ€**: å¾…å®Œå–„
> **æ–‡æ¡£ç¼–å·**: 03-03

---

## ğŸ“‘ ç›®å½•

- [æˆæœ¬æ•ˆç›Šåˆ†æ](#æˆæœ¬æ•ˆç›Šåˆ†æ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. å»ºæ¨¡æˆæœ¬åˆ†æ](#2-å»ºæ¨¡æˆæœ¬åˆ†æ)
    - [2.1 æˆæœ¬åˆ†ç±»](#21-æˆæœ¬åˆ†ç±»)
    - [2.2 æˆæœ¬ä¼°ç®—æ¨¡å‹](#22-æˆæœ¬ä¼°ç®—æ¨¡å‹)
    - [2.3 ä¸åŒå»ºæ¨¡æ–¹æ¡ˆæˆæœ¬å¯¹æ¯”](#23-ä¸åŒå»ºæ¨¡æ–¹æ¡ˆæˆæœ¬å¯¹æ¯”)
  - [3. æ€§èƒ½æ•ˆç›Šåˆ†æ](#3-æ€§èƒ½æ•ˆç›Šåˆ†æ)
    - [3.1 æ€§èƒ½æŒ‡æ ‡](#31-æ€§èƒ½æŒ‡æ ‡)
    - [3.2 æ€§èƒ½æ•ˆç›Šé‡åŒ–](#32-æ€§èƒ½æ•ˆç›Šé‡åŒ–)
    - [3.3 æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–æ•ˆç›Š](#33-æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–æ•ˆç›Š)
  - [4. ç»´æŠ¤æˆæœ¬åˆ†æ](#4-ç»´æŠ¤æˆæœ¬åˆ†æ)
    - [4.1 ç»´æŠ¤æˆæœ¬æ„æˆ](#41-ç»´æŠ¤æˆæœ¬æ„æˆ)
    - [4.2 ç»´æŠ¤æˆæœ¬ä¼°ç®—](#42-ç»´æŠ¤æˆæœ¬ä¼°ç®—)
    - [4.3 ä¸åŒå»ºæ¨¡æ–¹æ¡ˆçš„ç»´æŠ¤æˆæœ¬å¯¹æ¯”](#43-ä¸åŒå»ºæ¨¡æ–¹æ¡ˆçš„ç»´æŠ¤æˆæœ¬å¯¹æ¯”)
  - [5. ROIè®¡ç®—æ–¹æ³•](#5-roiè®¡ç®—æ–¹æ³•)
    - [5.1 ROIåŸºæœ¬å…¬å¼](#51-roiåŸºæœ¬å…¬å¼)
    - [5.2 ç»¼åˆROIè®¡ç®—](#52-ç»¼åˆroiè®¡ç®—)
    - [5.3 å¤šæ–¹æ¡ˆROIå¯¹æ¯”](#53-å¤šæ–¹æ¡ˆroiå¯¹æ¯”)
  - [6. PostgreSQLå®ç°](#6-postgresqlå®ç°)
    - [6.1 ç»¼åˆæˆæœ¬æ•ˆç›Šåˆ†æç³»ç»Ÿ](#61-ç»¼åˆæˆæœ¬æ•ˆç›Šåˆ†æç³»ç»Ÿ)
  - [7. ç›¸å…³èµ„æº](#7-ç›¸å…³èµ„æº)

---

## 1. æ¦‚è¿°

æˆæœ¬æ•ˆç›Šåˆ†æå¸®åŠ©è¯„ä¼°ä¸åŒå»ºæ¨¡æ–¹æ¡ˆçš„æŠ•å…¥äº§å‡ºæ¯”ï¼Œä¸ºå†³ç­–æä¾›é‡åŒ–ä¾æ®ã€‚
é€šè¿‡ç³»ç»ŸåŒ–çš„æˆæœ¬æ•ˆç›Šåˆ†æï¼Œå¯ä»¥åœ¨å¤šä¸ªå»ºæ¨¡æ–¹æ¡ˆä¸­é€‰æ‹©æœ€ä¼˜è§£ã€‚

**æ ¸å¿ƒä»·å€¼**:

- **é‡åŒ–å†³ç­–**ï¼šå°†ä¸»è§‚åˆ¤æ–­è½¬åŒ–ä¸ºå®¢è§‚æ•°æ®
- **èµ„æºä¼˜åŒ–**ï¼šåˆç†åˆ†é…å»ºæ¨¡èµ„æº
- **é£é™©æ§åˆ¶**ï¼šè¯†åˆ«é«˜æˆæœ¬ä½æ•ˆç›Šçš„æ–¹æ¡ˆ
- **æŒç»­æ”¹è¿›**ï¼šè·Ÿè¸ªå»ºæ¨¡æ•ˆæœï¼ŒæŒç»­ä¼˜åŒ–

---

## 2. å»ºæ¨¡æˆæœ¬åˆ†æ

### 2.1 æˆæœ¬åˆ†ç±»

**å»ºæ¨¡æˆæœ¬æ„æˆ**:

| æˆæœ¬ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| äººåŠ›æˆæœ¬ | å»ºæ¨¡å¸ˆã€å¼€å‘äººå‘˜å·¥æ—¶ | 1000å…ƒ/äººå¤© |
| æ—¶é—´æˆæœ¬ | é¡¹ç›®å»¶æœŸæˆæœ¬ | 5000å…ƒ/å¤© |
| æŠ€æœ¯æˆæœ¬ | å·¥å…·ã€åŸ¹è®­è´¹ç”¨ | 10000å…ƒ |
| æœºä¼šæˆæœ¬ | é€‰æ‹©Aæ–¹æ¡ˆæ”¾å¼ƒBæ–¹æ¡ˆçš„æˆæœ¬ | éš¾ä»¥é‡åŒ– |
| é£é™©æˆæœ¬ | æ–¹æ¡ˆå¤±è´¥çš„é£é™© | æ¦‚ç‡Ã—æŸå¤± |

### 2.2 æˆæœ¬ä¼°ç®—æ¨¡å‹

```sql
-- å»ºæ¨¡æˆæœ¬ä¼°ç®—è¡¨
CREATE TABLE modeling_cost_estimate (
    estimate_id SERIAL PRIMARY KEY,
    project_name VARCHAR(200) NOT NULL,
    -- äººåŠ›æˆæœ¬
    designer_days INT DEFAULT 0,
    developer_days INT DEFAULT 0,
    tester_days INT DEFAULT 0,
    daily_rate NUMERIC(10,2) DEFAULT 1000.00,
    -- æ—¶é—´æˆæœ¬
    project_duration_days INT,
    delay_cost_per_day NUMERIC(10,2) DEFAULT 5000.00,
    -- æŠ€æœ¯æˆæœ¬
    tool_license_cost NUMERIC(10,2) DEFAULT 0,
    training_cost NUMERIC(10,2) DEFAULT 0,
    -- é£é™©æˆæœ¬
    risk_probability NUMERIC(5,2) DEFAULT 0, -- 0-1
    risk_loss NUMERIC(10,2) DEFAULT 0,
    -- è®¡ç®—æ€»æˆæœ¬
    total_cost NUMERIC(12,2) GENERATED ALWAYS AS (
        -- äººåŠ›æˆæœ¬
        (designer_days + developer_days + tester_days) * daily_rate +
        -- æ—¶é—´æˆæœ¬ï¼ˆå»¶æœŸï¼‰
        GREATEST(0, project_duration_days - 30) * delay_cost_per_day +
        -- æŠ€æœ¯æˆæœ¬
        tool_license_cost + training_cost +
        -- é£é™©æˆæœ¬
        risk_probability * risk_loss
    ) STORED,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç¤ºä¾‹ï¼šç”µå•†ç³»ç»Ÿå»ºæ¨¡æˆæœ¬ä¼°ç®—
INSERT INTO modeling_cost_estimate (
    project_name, designer_days, developer_days, tester_days,
    project_duration_days, tool_license_cost, training_cost,
    risk_probability, risk_loss
) VALUES (
    'ç”µå•†ç³»ç»Ÿ', 10, 20, 5,
    45, 5000, 3000,
    0.1, 50000
);

-- æŸ¥è¯¢æˆæœ¬æ˜ç»†
SELECT
    project_name,
    (designer_days + developer_days + tester_days) * daily_rate AS labor_cost,
    GREATEST(0, project_duration_days - 30) * delay_cost_per_day AS delay_cost,
    tool_license_cost + training_cost AS tech_cost,
    risk_probability * risk_loss AS risk_cost,
    total_cost
FROM modeling_cost_estimate;
```

### 2.3 ä¸åŒå»ºæ¨¡æ–¹æ¡ˆæˆæœ¬å¯¹æ¯”

```sql
-- å»ºæ¨¡æ–¹æ¡ˆæˆæœ¬å¯¹æ¯”è¡¨
CREATE TABLE modeling_option_cost (
    option_id SERIAL PRIMARY KEY,
    project_name VARCHAR(200) NOT NULL,
    option_name VARCHAR(200) NOT NULL,
    -- æˆæœ¬å› ç´ 
    complexity_level VARCHAR(50), -- 'low', 'medium', 'high'
    estimated_days INT,
    risk_level VARCHAR(50), -- 'low', 'medium', 'high'
    -- æˆæœ¬ä¼°ç®—
    estimated_cost NUMERIC(12,2),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- æˆæœ¬ä¼°ç®—å‡½æ•°
CREATE OR REPLACE FUNCTION estimate_modeling_cost(
    p_complexity VARCHAR,
    p_days INT,
    p_risk_level VARCHAR
)
RETURNS NUMERIC AS $$
DECLARE
    v_base_rate NUMERIC := 1000.00;
    v_complexity_multiplier NUMERIC;
    v_risk_multiplier NUMERIC;
BEGIN
    -- å¤æ‚åº¦ç³»æ•°
    v_complexity_multiplier := CASE p_complexity
        WHEN 'low' THEN 1.0
        WHEN 'medium' THEN 1.5
        WHEN 'high' THEN 2.0
        ELSE 1.0
    END;

    -- é£é™©ç³»æ•°
    v_risk_multiplier := CASE p_risk_level
        WHEN 'low' THEN 1.0
        WHEN 'medium' THEN 1.2
        WHEN 'high' THEN 1.5
        ELSE 1.0
    END;

    RETURN p_days * v_base_rate * v_complexity_multiplier * v_risk_multiplier;
END;
$$ LANGUAGE plpgsql;
```

---

## 3. æ€§èƒ½æ•ˆç›Šåˆ†æ

### 3.1 æ€§èƒ½æŒ‡æ ‡

**å…³é”®æ€§èƒ½æŒ‡æ ‡**:

| æŒ‡æ ‡ | è¯´æ˜ | ç›®æ ‡å€¼ |
|------|------|--------|
| æŸ¥è¯¢å“åº”æ—¶é—´ | å¹³å‡æŸ¥è¯¢è€—æ—¶ | <100ms |
| å†™å…¥ååé‡ | æ¯ç§’å†™å…¥æ¬¡æ•° | >1000 TPS |
| å¹¶å‘ç”¨æˆ·æ•° | åŒæ—¶åœ¨çº¿ç”¨æˆ· | >1000 |
| æ•°æ®å‹ç¼©æ¯” | å‹ç¼©å/å‹ç¼©å‰ | >3:1 |
| ç´¢å¼•æ•ˆç‡ | ç´¢å¼•å‘½ä¸­ç‡ | >95% |

### 3.2 æ€§èƒ½æ•ˆç›Šé‡åŒ–

```sql
-- æ€§èƒ½æ•ˆç›Šåˆ†æè¡¨
CREATE TABLE performance_benefit (
    benefit_id SERIAL PRIMARY KEY,
    project_name VARCHAR(200) NOT NULL,
    -- æ€§èƒ½æŒ‡æ ‡
    metric_name VARCHAR(100) NOT NULL,
    baseline_value NUMERIC(12,2),
    improved_value NUMERIC(12,2),
    -- æ•ˆç›Šè®¡ç®—
    improvement_percentage NUMERIC(5,2) GENERATED ALWAYS AS (
        CASE
            WHEN baseline_value > 0 THEN
                ((baseline_value - improved_value) / baseline_value * 100)
            ELSE 0
        END
    ) STORED,
    -- ä¸šåŠ¡ä»·å€¼
    business_impact_score INT CHECK (business_impact_score BETWEEN 1 AND 10),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç¤ºä¾‹ï¼šç´¢å¼•ä¼˜åŒ–æ•ˆç›Š
INSERT INTO performance_benefit (project_name, metric_name, baseline_value, improved_value, business_impact_score) VALUES
    ('ç”µå•†ç³»ç»Ÿ', 'æŸ¥è¯¢å“åº”æ—¶é—´(ms)', 500, 50, 9),
    ('ç”µå•†ç³»ç»Ÿ', 'å†™å…¥ååé‡(TPS)', 500, 1200, 8),
    ('ç”µå•†ç³»ç»Ÿ', 'å¹¶å‘ç”¨æˆ·æ•°', 500, 1500, 10);

-- æŸ¥è¯¢æ€§èƒ½æ•ˆç›Šæ±‡æ€»
SELECT
    project_name,
    metric_name,
    baseline_value,
    improved_value,
    improvement_percentage,
    business_impact_score,
    improvement_percentage * business_impact_score AS weighted_benefit
FROM performance_benefit
ORDER BY weighted_benefit DESC;
```

### 3.3 æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–æ•ˆç›Š

```sql
-- æŸ¥è¯¢æ€§èƒ½å¯¹æ¯”è¡¨
CREATE TABLE query_performance_comparison (
    comparison_id SERIAL PRIMARY KEY,
    query_name VARCHAR(200) NOT NULL,
    -- ä¼˜åŒ–å‰
    before_execution_time_ms NUMERIC(10,2),
    before_index_size_mb NUMERIC(10,2),
    -- ä¼˜åŒ–å
    after_execution_time_ms NUMERIC(10,2),
    after_index_size_mb NUMERIC(10,2),
    -- æ•ˆç›Šè®¡ç®—
    speedup_ratio NUMERIC(5,2) GENERATED ALWAYS AS (
        CASE
            WHEN after_execution_time_ms > 0 THEN
                before_execution_time_ms / after_execution_time_ms
            ELSE 0
        END
    ) STORED,
    space_savings_mb NUMERIC(10,2) GENERATED ALWAYS AS (
        before_index_size_mb - after_index_size_mb
    ) STORED
);

-- ç¤ºä¾‹ï¼šè®¢å•æŸ¥è¯¢ä¼˜åŒ–
INSERT INTO query_performance_comparison (
    query_name, before_execution_time_ms, before_index_size_mb,
    after_execution_time_ms, after_index_size_mb
) VALUES (
    'è®¢å•æŸ¥è¯¢', 500, 500,
    50, 200
);

-- æŸ¥è¯¢ä¼˜åŒ–æ•ˆç›Š
SELECT
    query_name,
    before_execution_time_ms,
    after_execution_time_ms,
    speedup_ratio,
    before_index_size_mb,
    after_index_size_mb,
    space_savings_mb,
    CASE
        WHEN speedup_ratio > 5 THEN 'ä¼˜ç§€'
        WHEN speedup_ratio > 2 THEN 'è‰¯å¥½'
        ELSE 'ä¸€èˆ¬'
    END AS optimization_level
FROM query_performance_comparison;
```

---

## 4. ç»´æŠ¤æˆæœ¬åˆ†æ

### 4.1 ç»´æŠ¤æˆæœ¬æ„æˆ

**ç»´æŠ¤æˆæœ¬ç±»å‹**:

| æˆæœ¬ç±»å‹ | è¯´æ˜ | å æ¯” |
|---------|------|------|
| æ—¥å¸¸ç»´æŠ¤ | ç›‘æ§ã€å¤‡ä»½ã€ä¼˜åŒ– | 40% |
| é—®é¢˜ä¿®å¤ | Bugä¿®å¤ã€æ€§èƒ½è°ƒä¼˜ | 30% |
| åŠŸèƒ½æ‰©å±• | æ–°éœ€æ±‚ã€åŠŸèƒ½å¢å¼º | 20% |
| æ–‡æ¡£æ›´æ–° | æ–‡æ¡£ç»´æŠ¤ã€åŸ¹è®­ | 10% |

### 4.2 ç»´æŠ¤æˆæœ¬ä¼°ç®—

```sql
-- ç»´æŠ¤æˆæœ¬ä¼°ç®—è¡¨
CREATE TABLE maintenance_cost (
    cost_id SERIAL PRIMARY KEY,
    project_name VARCHAR(200) NOT NULL,
    -- å¹´åº¦ç»´æŠ¤æˆæœ¬
    daily_maintenance_hours NUMERIC(5,2) DEFAULT 2.0,
    hourly_rate NUMERIC(10,2) DEFAULT 200.00,
    -- é—®é¢˜ä¿®å¤æˆæœ¬
    avg_incidents_per_month INT DEFAULT 2,
    avg_fix_hours NUMERIC(5,2) DEFAULT 4.0,
    -- åŠŸèƒ½æ‰©å±•æˆæœ¬
    feature_requests_per_year INT DEFAULT 10,
    avg_feature_hours NUMERIC(5,2) DEFAULT 16.0,
    -- å¹´åº¦æ€»æˆæœ¬
    annual_cost NUMERIC(12,2) GENERATED ALWAYS AS (
        -- æ—¥å¸¸ç»´æŠ¤ï¼š2å°æ—¶/å¤© Ã— 200å…ƒ/å°æ—¶ Ã— 250å·¥ä½œæ—¥
        daily_maintenance_hours * hourly_rate * 250 +
        -- é—®é¢˜ä¿®å¤ï¼š2æ¬¡/æœˆ Ã— 4å°æ—¶ Ã— 200å…ƒ/å°æ—¶ Ã— 12æœˆ
        avg_incidents_per_month * avg_fix_hours * hourly_rate * 12 +
        -- åŠŸèƒ½æ‰©å±•ï¼š10æ¬¡/å¹´ Ã— 16å°æ—¶ Ã— 200å…ƒ/å°æ—¶
        feature_requests_per_year * avg_feature_hours * hourly_rate
    ) STORED,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç¤ºä¾‹ï¼šç”µå•†ç³»ç»Ÿç»´æŠ¤æˆæœ¬
INSERT INTO maintenance_cost (
    project_name, daily_maintenance_hours, avg_incidents_per_month,
    feature_requests_per_year
) VALUES (
    'ç”µå•†ç³»ç»Ÿ', 3.0, 3, 15
);

-- æŸ¥è¯¢ç»´æŠ¤æˆæœ¬
SELECT
    project_name,
    daily_maintenance_hours * hourly_rate * 250 AS daily_maintenance_cost,
    avg_incidents_per_month * avg_fix_hours * hourly_rate * 12 AS incident_cost,
    feature_requests_per_year * avg_feature_hours * hourly_rate AS feature_cost,
    annual_cost
FROM maintenance_cost;
```

### 4.3 ä¸åŒå»ºæ¨¡æ–¹æ¡ˆçš„ç»´æŠ¤æˆæœ¬å¯¹æ¯”

```sql
-- å»ºæ¨¡æ–¹æ¡ˆç»´æŠ¤æˆæœ¬å¯¹æ¯”
CREATE TABLE modeling_maintenance_comparison (
    comparison_id SERIAL PRIMARY KEY,
    option_name VARCHAR(200) NOT NULL,
    -- ç»´æŠ¤å¤æ‚åº¦
    maintenance_complexity VARCHAR(50), -- 'low', 'medium', 'high'
    -- é¢„ä¼°ç»´æŠ¤æˆæœ¬
    estimated_annual_maintenance_cost NUMERIC(12,2),
    -- å¯ç»´æŠ¤æ€§è¯„åˆ†ï¼ˆ1-10ï¼‰
    maintainability_score INT CHECK (maintainability_score BETWEEN 1 AND 10)
);

-- ç»´æŠ¤æˆæœ¬ä¼°ç®—å‡½æ•°
CREATE OR REPLACE FUNCTION estimate_maintenance_cost(
    p_complexity VARCHAR,
    p_base_cost NUMERIC
)
RETURNS NUMERIC AS $$
DECLARE
    v_multiplier NUMERIC;
BEGIN
    v_multiplier := CASE p_complexity
        WHEN 'low' THEN 1.0
        WHEN 'medium' THEN 1.5
        WHEN 'high' THEN 2.5
        ELSE 1.0
    END;

    RETURN p_base_cost * v_multiplier;
END;
$$ LANGUAGE plpgsql;
```

---

## 5. ROIè®¡ç®—æ–¹æ³•

### 5.1 ROIåŸºæœ¬å…¬å¼

**ROIè®¡ç®—å…¬å¼**:

```text
ROI = (æ”¶ç›Š - æˆæœ¬) / æˆæœ¬ Ã— 100%
```

### 5.2 ç»¼åˆROIè®¡ç®—

```sql
-- ROIè®¡ç®—è¡¨
CREATE TABLE roi_analysis (
    roi_id SERIAL PRIMARY KEY,
    project_name VARCHAR(200) NOT NULL,
    -- æˆæœ¬
    initial_investment NUMERIC(12,2) NOT NULL,
    annual_maintenance_cost NUMERIC(12,2) DEFAULT 0,
    -- æ”¶ç›Š
    annual_revenue_increase NUMERIC(12,2) DEFAULT 0,
    annual_cost_savings NUMERIC(12,2) DEFAULT 0,
    -- æ—¶é—´å‘¨æœŸ
    analysis_period_years INT DEFAULT 3,
    -- è®¡ç®—ROI
    total_cost NUMERIC(12,2) GENERATED ALWAYS AS (
        initial_investment + annual_maintenance_cost * analysis_period_years
    ) STORED,
    total_benefit NUMERIC(12,2) GENERATED ALWAYS AS (
        (annual_revenue_increase + annual_cost_savings) * analysis_period_years
    ) STORED,
    roi_percentage NUMERIC(10,2) GENERATED ALWAYS AS (
        CASE
            WHEN total_cost > 0 THEN
                ((total_benefit - total_cost) / total_cost * 100)
            ELSE 0
        END
    ) STORED,
    payback_period_years NUMERIC(5,2) GENERATED ALWAYS AS (
        CASE
            WHEN (annual_revenue_increase + annual_cost_savings) > 0 THEN
                initial_investment / (annual_revenue_increase + annual_cost_savings)
            ELSE NULL
        END
    ) STORED,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç¤ºä¾‹ï¼šç”µå•†ç³»ç»ŸROIåˆ†æ
INSERT INTO roi_analysis (
    project_name, initial_investment, annual_maintenance_cost,
    annual_revenue_increase, annual_cost_savings, analysis_period_years
) VALUES (
    'ç”µå•†ç³»ç»Ÿ', 500000, 100000,
    300000, 150000, 3
);

-- æŸ¥è¯¢ROIåˆ†æç»“æœ
SELECT
    project_name,
    initial_investment,
    total_cost,
    total_benefit,
    roi_percentage,
    payback_period_years,
    CASE
        WHEN roi_percentage > 100 THEN 'ä¼˜ç§€æŠ•èµ„'
        WHEN roi_percentage > 50 THEN 'è‰¯å¥½æŠ•èµ„'
        WHEN roi_percentage > 0 THEN 'ä¸€èˆ¬æŠ•èµ„'
        ELSE 'ä¸æ¨è'
    END AS investment_recommendation
FROM roi_analysis;
```

### 5.3 å¤šæ–¹æ¡ˆROIå¯¹æ¯”

```sql
-- å¤šæ–¹æ¡ˆROIå¯¹æ¯”è§†å›¾
CREATE VIEW option_roi_comparison AS
SELECT
    option_name,
    initial_investment,
    total_cost,
    total_benefit,
    roi_percentage,
    payback_period_years,
    RANK() OVER (ORDER BY roi_percentage DESC) AS roi_rank
FROM roi_analysis
ORDER BY roi_percentage DESC;
```

---

## 6. PostgreSQLå®ç°

### 6.1 ç»¼åˆæˆæœ¬æ•ˆç›Šåˆ†æç³»ç»Ÿ

```sql
-- æˆæœ¬æ•ˆç›Šç»¼åˆåˆ†æè§†å›¾
CREATE VIEW comprehensive_cost_benefit AS
SELECT
    c.project_name,
    -- æˆæœ¬
    c.total_cost AS modeling_cost,
    m.annual_cost AS maintenance_cost,
    -- æ•ˆç›Š
    SUM(p.improvement_percentage * p.business_impact_score) AS performance_benefit_score,
    -- ROI
    r.roi_percentage,
    r.payback_period_years,
    -- ç»¼åˆè¯„åˆ†
    (
        CASE WHEN r.roi_percentage > 0 THEN 1 ELSE 0 END * 0.4 +
        CASE WHEN r.payback_period_years < 2 THEN 1 ELSE 0 END * 0.3 +
        CASE WHEN SUM(p.improvement_percentage) > 50 THEN 1 ELSE 0 END * 0.3
    ) * 10 AS overall_score
FROM modeling_cost_estimate c
LEFT JOIN maintenance_cost m ON c.project_name = m.project_name
LEFT JOIN performance_benefit p ON c.project_name = p.project_name
LEFT JOIN roi_analysis r ON c.project_name = r.project_name
GROUP BY c.project_name, c.total_cost, m.annual_cost, r.roi_percentage, r.payback_period_years;
```

---

## 7. ç›¸å…³èµ„æº

- [å»ºæ¨¡å†³ç­–æ¡†æ¶](./å»ºæ¨¡å†³ç­–æ¡†æ¶.md) - å†³ç­–æ¡†æ¶æ–¹æ³•
- [æ€§èƒ½ä¼˜åŒ–](../08-PostgreSQLå»ºæ¨¡å®è·µ/æ€§èƒ½ä¼˜åŒ–.md) - æ€§èƒ½ä¼˜åŒ–æŒ‡å—
- [ç´¢å¼•ç­–ç•¥](../08-PostgreSQLå»ºæ¨¡å®è·µ/ç´¢å¼•ç­–ç•¥.md) - ç´¢å¼•ä¼˜åŒ–ç­–ç•¥

---

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
