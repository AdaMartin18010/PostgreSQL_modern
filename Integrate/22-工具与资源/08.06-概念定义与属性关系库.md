---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQL\08-å·¥å…·èµ„æº\08.06-æ¦‚å¿µå®šä¹‰ä¸å±æ€§å…³ç³»åº“.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# PostgreSQLæ¦‚å¿µå®šä¹‰ä¸å±æ€§å…³ç³»åº“

> **ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-15
> **éš¾åº¦**: â­â­â­â­
> **åº”ç”¨åœºæ™¯**: çŸ¥è¯†ä½“ç³»æ„å»ºã€æ¦‚å¿µç†è§£ã€å…³ç³»åˆ†æ

---

## ğŸ“‘ ç›®å½•

- [PostgreSQLæ¦‚å¿µå®šä¹‰ä¸å±æ€§å…³ç³»åº“](#postgresqlæ¦‚å¿µå®šä¹‰ä¸å±æ€§å…³ç³»åº“)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ä¸€ã€æ¦‚è¿°](#ä¸€æ¦‚è¿°)
    - [1.1 æ¦‚å¿µåº“ç›®æ ‡](#11-æ¦‚å¿µåº“ç›®æ ‡)
    - [1.2 æ¦‚å¿µåˆ†ç±»](#12-æ¦‚å¿µåˆ†ç±»)
    - [1.3 ä½¿ç”¨æŒ‡å—](#13-ä½¿ç”¨æŒ‡å—)
  - [äºŒã€æ ¸å¿ƒæ¦‚å¿µå®šä¹‰](#äºŒæ ¸å¿ƒæ¦‚å¿µå®šä¹‰)
    - [2.1 äº‹åŠ¡ï¼ˆTransactionï¼‰](#21-äº‹åŠ¡transaction)
      - [2.1.1 æ¦‚å¿µå®šä¹‰](#211-æ¦‚å¿µå®šä¹‰)
      - [2.1.2 å½¢å¼åŒ–å®šä¹‰](#212-å½¢å¼åŒ–å®šä¹‰)
      - [2.1.3 æ ¸å¿ƒå±æ€§](#213-æ ¸å¿ƒå±æ€§)
      - [2.1.4 å±æ€§å…³ç³»å›¾](#214-å±æ€§å…³ç³»å›¾)
      - [2.1.5 ç›¸å…³æ¦‚å¿µ](#215-ç›¸å…³æ¦‚å¿µ)
    - [2.2 ACIDç‰¹æ€§](#22-acidç‰¹æ€§)
      - [2.2.1 æ¦‚å¿µå®šä¹‰](#221-æ¦‚å¿µå®šä¹‰)
      - [2.2.2 å½¢å¼åŒ–å®šä¹‰](#222-å½¢å¼åŒ–å®šä¹‰)
      - [2.2.3 æ ¸å¿ƒå±æ€§](#223-æ ¸å¿ƒå±æ€§)
      - [2.2.4 å±æ€§å…³ç³»å›¾](#224-å±æ€§å…³ç³»å›¾)
    - [2.3 MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰](#23-mvccå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)
      - [2.3.1 æ¦‚å¿µå®šä¹‰](#231-æ¦‚å¿µå®šä¹‰)
      - [2.3.2 å½¢å¼åŒ–å®šä¹‰](#232-å½¢å¼åŒ–å®šä¹‰)
      - [2.3.3 æ ¸å¿ƒå±æ€§](#233-æ ¸å¿ƒå±æ€§)
      - [2.3.4 å±æ€§å…³ç³»å›¾](#234-å±æ€§å…³ç³»å›¾)
      - [2.3.5 ç›¸å…³æ¦‚å¿µ](#235-ç›¸å…³æ¦‚å¿µ)
    - [2.4 WALï¼ˆé¢„å†™æ—¥å¿—ï¼‰](#24-walé¢„å†™æ—¥å¿—)
      - [2.4.1 æ¦‚å¿µå®šä¹‰](#241-æ¦‚å¿µå®šä¹‰)
      - [2.4.2 å½¢å¼åŒ–å®šä¹‰](#242-å½¢å¼åŒ–å®šä¹‰)
      - [2.4.3 æ ¸å¿ƒå±æ€§](#243-æ ¸å¿ƒå±æ€§)
      - [2.4.4 å±æ€§å…³ç³»å›¾](#244-å±æ€§å…³ç³»å›¾)
    - [2.5 æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆQuery Optimizerï¼‰](#25-æŸ¥è¯¢ä¼˜åŒ–å™¨query-optimizer)
      - [2.5.1 æ¦‚å¿µå®šä¹‰](#251-æ¦‚å¿µå®šä¹‰)
      - [2.5.2 å½¢å¼åŒ–å®šä¹‰](#252-å½¢å¼åŒ–å®šä¹‰)
      - [2.5.3 æ ¸å¿ƒå±æ€§](#253-æ ¸å¿ƒå±æ€§)
      - [2.5.4 å±æ€§å…³ç³»å›¾](#254-å±æ€§å…³ç³»å›¾)
    - [2.6 ç´¢å¼•ï¼ˆIndexï¼‰](#26-ç´¢å¼•index)
      - [2.6.1 æ¦‚å¿µå®šä¹‰](#261-æ¦‚å¿µå®šä¹‰)
      - [2.6.2 å½¢å¼åŒ–å®šä¹‰](#262-å½¢å¼åŒ–å®šä¹‰)
      - [2.6.3 æ ¸å¿ƒå±æ€§](#263-æ ¸å¿ƒå±æ€§)
      - [2.6.4 å±æ€§å…³ç³»å›¾](#264-å±æ€§å…³ç³»å›¾)
    - [2.7 åˆ†åŒºï¼ˆPartitioningï¼‰](#27-åˆ†åŒºpartitioning)
      - [2.7.1 æ¦‚å¿µå®šä¹‰](#271-æ¦‚å¿µå®šä¹‰)
      - [2.7.2 å½¢å¼åŒ–å®šä¹‰](#272-å½¢å¼åŒ–å®šä¹‰)
      - [2.7.3 æ ¸å¿ƒå±æ€§](#273-æ ¸å¿ƒå±æ€§)
    - [2.8 å¤åˆ¶ï¼ˆReplicationï¼‰](#28-å¤åˆ¶replication)
      - [2.8.1 æ¦‚å¿µå®šä¹‰](#281-æ¦‚å¿µå®šä¹‰)
      - [2.8.2 æ ¸å¿ƒå±æ€§](#282-æ ¸å¿ƒå±æ€§)
    - [2.9 é”ï¼ˆLockï¼‰](#29-é”lock)
      - [2.9.1 æ¦‚å¿µå®šä¹‰](#291-æ¦‚å¿µå®šä¹‰)
      - [2.9.2 æ ¸å¿ƒå±æ€§](#292-æ ¸å¿ƒå±æ€§)
    - [2.10 æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰](#210-æ£€æŸ¥ç‚¹checkpoint)
      - [2.10.1 æ¦‚å¿µå®šä¹‰](#2101-æ¦‚å¿µå®šä¹‰)
      - [2.10.2 æ ¸å¿ƒå±æ€§](#2102-æ ¸å¿ƒå±æ€§)
  - [ä¸‰ã€æ¦‚å¿µå…³ç³»å›¾è°±](#ä¸‰æ¦‚å¿µå…³ç³»å›¾è°±)
    - [3.1 æ ¸å¿ƒæ¦‚å¿µå…³ç³»å›¾](#31-æ ¸å¿ƒæ¦‚å¿µå…³ç³»å›¾)
    - [3.2 äº‹åŠ¡ç›¸å…³æ¦‚å¿µå…³ç³»](#32-äº‹åŠ¡ç›¸å…³æ¦‚å¿µå…³ç³»)
    - [3.3 å­˜å‚¨ç›¸å…³æ¦‚å¿µå…³ç³»](#33-å­˜å‚¨ç›¸å…³æ¦‚å¿µå…³ç³»)
    - [3.4 æŸ¥è¯¢ç›¸å…³æ¦‚å¿µå…³ç³»](#34-æŸ¥è¯¢ç›¸å…³æ¦‚å¿µå…³ç³»)
  - [å››ã€å±æ€§å…³ç³»çŸ©é˜µ](#å››å±æ€§å…³ç³»çŸ©é˜µ)
    - [4.1 æ¦‚å¿µå±æ€§å¯¹æ¯”](#41-æ¦‚å¿µå±æ€§å¯¹æ¯”)
    - [4.2 æ¦‚å¿µä¾èµ–å…³ç³»](#42-æ¦‚å¿µä¾èµ–å…³ç³»)
  - [äº”ã€å‚è€ƒèµ„æº](#äº”å‚è€ƒèµ„æº)
    - [5.1 å®˜æ–¹æ–‡æ¡£](#51-å®˜æ–¹æ–‡æ¡£)
    - [5.2 ç›¸å…³æ–‡æ¡£](#52-ç›¸å…³æ–‡æ¡£)
    - [5.3 å­¦æœ¯è®ºæ–‡](#53-å­¦æœ¯è®ºæ–‡)

---

## ä¸€ã€æ¦‚è¿°

### 1.1 æ¦‚å¿µåº“ç›®æ ‡

PostgreSQLæ¦‚å¿µå®šä¹‰ä¸å±æ€§å…³ç³»åº“æ—¨åœ¨æä¾›PostgreSQLæ ¸å¿ƒæ¦‚å¿µçš„æ ‡å‡†åŒ–å®šä¹‰ã€å±æ€§å…³ç³»å’Œæ¦‚å¿µé—´çš„å…³ç³»æ˜ å°„ï¼Œæ”¯æŒçŸ¥è¯†ä½“ç³»æ„å»ºå’Œæ¦‚å¿µç†è§£ã€‚

**æ ¸å¿ƒç›®æ ‡**ï¼š

- **æ ‡å‡†åŒ–å®šä¹‰**ï¼šæä¾›ä¸­è‹±æ–‡æ ‡å‡†å®šä¹‰
- **å½¢å¼åŒ–æè¿°**ï¼šæä¾›æ•°å­¦å½¢å¼åŒ–å®šä¹‰
- **å…³ç³»æ˜ å°„**ï¼šå»ºç«‹æ¦‚å¿µé—´çš„å…³ç³»ç½‘ç»œ
- **å±æ€§åˆ†æ**ï¼šåˆ†ææ¦‚å¿µçš„å±æ€§å’Œç‰¹å¾

### 1.2 æ¦‚å¿µåˆ†ç±»

**æ ¸å¿ƒæ¦‚å¿µåˆ†ç±»**ï¼š

1. **äº‹åŠ¡ç®¡ç†ç±»**ï¼šäº‹åŠ¡ã€ACIDã€éš”ç¦»çº§åˆ«ã€å¹¶å‘æ§åˆ¶
2. **å­˜å‚¨ç®¡ç†ç±»**ï¼šWALã€æ£€æŸ¥ç‚¹ã€ç¼“å†²åŒºã€æŒä¹…åŒ–
3. **æŸ¥è¯¢å¤„ç†ç±»**ï¼šæŸ¥è¯¢ä¼˜åŒ–å™¨ã€æ‰§è¡Œè®¡åˆ’ã€ç»Ÿè®¡ä¿¡æ¯
4. **ç´¢å¼•ç»“æ„ç±»**ï¼šB-Treeã€GINã€GiSTã€BRIN
5. **é«˜å¯ç”¨ç±»**ï¼šå¤åˆ¶ã€æµå¤åˆ¶ã€é€»è¾‘å¤åˆ¶ã€æ•…éšœè½¬ç§»

### 1.3 ä½¿ç”¨æŒ‡å—

**å¦‚ä½•ä½¿ç”¨æœ¬æ¦‚å¿µåº“**ï¼š

1. **æ¦‚å¿µæŸ¥æ‰¾**ï¼šé€šè¿‡ç›®å½•å¿«é€Ÿå®šä½æ¦‚å¿µ
2. **å…³ç³»åˆ†æ**ï¼šé€šè¿‡å…³ç³»å›¾è°±ç†è§£æ¦‚å¿µé—´å…³ç³»
3. **å±æ€§å¯¹æ¯”**ï¼šé€šè¿‡å±æ€§çŸ©é˜µå¯¹æ¯”ä¸åŒæ¦‚å¿µ
4. **æ·±å…¥å­¦ä¹ **ï¼šé€šè¿‡å‚è€ƒèµ„æºæ·±å…¥å­¦ä¹ 

---

## äºŒã€æ ¸å¿ƒæ¦‚å¿µå®šä¹‰

### 2.1 äº‹åŠ¡ï¼ˆTransactionï¼‰

#### 2.1.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šäº‹åŠ¡æ˜¯æ•°æ®åº“ä¸­çš„é€»è¾‘å·¥ä½œå•å…ƒï¼Œç”±ä¸€ç³»åˆ—æ•°æ®åº“æ“ä½œç»„æˆï¼Œå…·æœ‰ACIDç‰¹æ€§ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ã€‚äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä¿è¯æ•°æ®åº“çš„ä¸€è‡´æ€§çŠ¶æ€ã€‚

**English Definition**: A transaction is a logical unit of work in a database, consisting of a sequence of database operations, with ACID properties (Atomicity, Consistency, Isolation, Durability). A transaction either fully succeeds or fully rolls back, ensuring database consistency.

#### 2.1.2 å½¢å¼åŒ–å®šä¹‰

```latex
% äº‹åŠ¡çš„å½¢å¼åŒ–å®šä¹‰
\newcommand{\trans}{\mathcal{T}}
\newcommand{\op}{\mathcal{O}}
\newcommand{\state}{\mathcal{S}}

% äº‹åŠ¡å®šä¹‰
\trans = \{\op_1, \op_2, \ldots, \op_n\}

% äº‹åŠ¡çŠ¶æ€è½¬æ¢
\state_{\text{begin}} \xrightarrow{\op_1} \state_1 \xrightarrow{\op_2} \cdots \xrightarrow{\op_n} \state_{\text{commit}}

% åŸå­æ€§
\text{Atomicity}(\trans) \Leftrightarrow \forall \op_i \in \trans, \op_i \text{ æˆåŠŸ} \Rightarrow \trans \text{ æäº¤}
```

#### 2.1.3 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | å®ç°æœºåˆ¶ |
|------|------|---------|
| **åŸå­æ€§** | äº‹åŠ¡ä¸å¯åˆ†å‰² | WALã€å›æ»šæ—¥å¿— |
| **ä¸€è‡´æ€§** | äº‹åŠ¡å‰åçŠ¶æ€ä¸€è‡´ | çº¦æŸæ£€æŸ¥ã€è§¦å‘å™¨ |
| **éš”ç¦»æ€§** | å¹¶å‘äº‹åŠ¡ç›¸äº’éš”ç¦» | MVCCã€é”æœºåˆ¶ |
| **æŒä¹…æ€§** | æäº¤ç»“æœæ°¸ä¹…ä¿å­˜ | WALã€fsync |

#### 2.1.4 å±æ€§å…³ç³»å›¾

```mermaid
graph TD
    A[äº‹åŠ¡ Transaction] --> B[åŸå­æ€§ Atomicity]
    A --> C[ä¸€è‡´æ€§ Consistency]
    A --> D[éš”ç¦»æ€§ Isolation]
    A --> E[æŒä¹…æ€§ Durability]

    B --> B1[WALæœºåˆ¶]
    B --> B2[å›æ»šæ—¥å¿—]

    C --> C1[çº¦æŸæ£€æŸ¥]
    C --> C2[è§¦å‘å™¨]

    D --> D1[MVCC]
    D --> D2[é”æœºåˆ¶]
    D --> D3[éš”ç¦»çº§åˆ«]

    E --> E1[WALæŒä¹…åŒ–]
    E --> E2[fsync]
    E --> E3[æ£€æŸ¥ç‚¹]
```

#### 2.1.5 ç›¸å…³æ¦‚å¿µ

- **ä¸Šä½æ¦‚å¿µ**ï¼šæ•°æ®åº“æ“ä½œã€é€»è¾‘å·¥ä½œå•å…ƒ
- **ä¸‹ä½æ¦‚å¿µ**ï¼šBEGINã€COMMITã€ROLLBACKã€SAVEPOINT
- **å¹³è¡Œæ¦‚å¿µ**ï¼šå¹¶å‘æ§åˆ¶ã€äº‹åŠ¡æ—¥å¿—ã€åˆ†å¸ƒå¼äº‹åŠ¡

---

### 2.2 ACIDç‰¹æ€§

#### 2.2.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šACIDæ˜¯æ•°æ®åº“äº‹åŠ¡çš„å››ä¸ªåŸºæœ¬ç‰¹æ€§ï¼ŒåŒ…æ‹¬åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰å’ŒæŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚è¿™äº›ç‰¹æ€§ç¡®ä¿æ•°æ®åº“äº‹åŠ¡çš„å¯é æ€§å’Œä¸€è‡´æ€§ã€‚

**English Definition**: ACID is the four fundamental properties of database transactions: Atomicity, Consistency, Isolation, and Durability. These properties ensure the reliability and consistency of database transactions.

#### 2.2.2 å½¢å¼åŒ–å®šä¹‰

```latex
% ACIDç‰¹æ€§çš„å½¢å¼åŒ–å®šä¹‰
\begin{align}
\text{Atomicity: } & \forall \trans, \trans \text{ è¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œ} \\
\text{Consistency: } & \forall \trans, \state_{\text{before}} \models \text{constraints} \Rightarrow \state_{\text{after}} \models \text{constraints} \\
\text{Isolation: } & \forall \trans_1, \trans_2, \trans_1 \parallel \trans_2 \equiv \trans_1; \trans_2 \text{ æˆ– } \trans_2; \trans_1 \\
\text{Durability: } & \forall \trans, \commit(\trans) \Rightarrow \text{ç»“æœæ°¸ä¹…ä¿å­˜}
\end{align}
```

#### 2.2.3 æ ¸å¿ƒå±æ€§

| ç‰¹æ€§ | å®šä¹‰ | PostgreSQLå®ç° |
|------|------|---------------|
| **A - åŸå­æ€§** | äº‹åŠ¡ä¸å¯åˆ†å‰² | WALã€å›æ»šæ®µ |
| **C - ä¸€è‡´æ€§** | æ•°æ®å®Œæ•´æ€§çº¦æŸ | çº¦æŸã€è§¦å‘å™¨ |
| **I - éš”ç¦»æ€§** | å¹¶å‘äº‹åŠ¡éš”ç¦» | MVCCã€é” |
| **D - æŒä¹…æ€§** | æäº¤ç»“æœæ°¸ä¹… | WALã€fsync |

#### 2.2.4 å±æ€§å…³ç³»å›¾

```mermaid
graph LR
    A[ACIDç‰¹æ€§] --> B[åŸå­æ€§ A]
    A --> C[ä¸€è‡´æ€§ C]
    A --> D[éš”ç¦»æ€§ I]
    A --> E[æŒä¹…æ€§ D]

    B --> B1[WAL]
    B --> B2[å›æ»š]

    C --> C1[çº¦æŸ]
    C --> C2[è§¦å‘å™¨]

    D --> D1[MVCC]
    D --> D2[é”]
    D --> D3[éš”ç¦»çº§åˆ«]

    E --> E1[WAL]
    E --> E2[æ£€æŸ¥ç‚¹]
    E --> E3[fsync]
```

---

### 2.3 MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰

#### 2.3.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šMVCCï¼ˆMulti-Version Concurrency Controlï¼‰æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œé€šè¿‡ä¸ºæ¯ä¸ªæ•°æ®é¡¹ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬æ¥å®ç°å¹¶å‘è®¿é—®ã€‚æ¯ä¸ªäº‹åŠ¡çœ‹åˆ°æ•°æ®çš„ä¸€è‡´æ€§å¿«ç…§ï¼Œè¯»æ“ä½œä¸ä¼šé˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¸ä¼šé˜»å¡è¯»æ“ä½œã€‚

**English Definition**: MVCC (Multi-Version Concurrency Control) is a concurrency control mechanism that maintains multiple versions of each data item to enable concurrent access. Each transaction sees a consistent snapshot of data, where read operations don't block write operations and vice versa.

#### 2.3.2 å½¢å¼åŒ–å®šä¹‰

```latex
% MVCCçš„å½¢å¼åŒ–å®šä¹‰
\newcommand{\version}{\mathcal{V}}
\newcommand{\snapshot}{\mathcal{S}}
\newcommand{\xid}{\text{xid}}

% ç‰ˆæœ¬å®šä¹‰
\version = \{v_1, v_2, \ldots, v_n\}

% æ¯ä¸ªç‰ˆæœ¬ v_i = (data_i, xmin_i, xmax_i)
% å…¶ä¸­ï¼š
% - data_i: ç‰ˆæœ¬æ•°æ®
% - xmin_i: åˆ›å»ºç‰ˆæœ¬çš„äº‹åŠ¡ID
% - xmax_i: åˆ é™¤ç‰ˆæœ¬çš„äº‹åŠ¡ID

% å¿«ç…§å®šä¹‰
\snapshot(\xid) = \{v_i \mid \xmin_i \leq \xid < \xmax_i\}
```

#### 2.3.3 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | ä¼˜åŠ¿ |
|------|------|------|
| **ç‰ˆæœ¬ç®¡ç†** | æ¯ä¸ªæ•°æ®é¡¹ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬ | æ”¯æŒå¹¶å‘è¯»å†™ |
| **å¿«ç…§éš”ç¦»** | äº‹åŠ¡çœ‹åˆ°ä¸€è‡´æ€§å¿«ç…§ | é¿å…è¯»é˜»å¡ |
| **ç‰ˆæœ¬æ¸…ç†** | VACUUMæ¸…ç†æ—§ç‰ˆæœ¬ | æ§åˆ¶å­˜å‚¨å¢é•¿ |
| **äº‹åŠ¡å¯è§æ€§** | åŸºäºäº‹åŠ¡IDåˆ¤æ–­å¯è§æ€§ | å®ç°éš”ç¦»çº§åˆ« |

#### 2.3.4 å±æ€§å…³ç³»å›¾

```mermaid
graph TD
    A[MVCC] --> B[ç‰ˆæœ¬ç®¡ç†]
    A --> C[å¿«ç…§éš”ç¦»]
    A --> D[ç‰ˆæœ¬æ¸…ç†]
    A --> E[äº‹åŠ¡å¯è§æ€§]

    B --> B1[xmin]
    B --> B2[xmax]
    B --> B3[ctid]

    C --> C1[å¿«ç…§]
    C --> C2[äº‹åŠ¡ID]

    D --> D1[VACUUM]
    D --> D2[autovacuum]

    E --> E1[å¯è§æ€§åˆ¤æ–­]
    E --> E2[éš”ç¦»çº§åˆ«]
```

#### 2.3.5 ç›¸å…³æ¦‚å¿µ

- **ä¸Šä½æ¦‚å¿µ**ï¼šå¹¶å‘æ§åˆ¶ã€éš”ç¦»æœºåˆ¶
- **ä¸‹ä½æ¦‚å¿µ**ï¼šè¡Œç‰ˆæœ¬ã€äº‹åŠ¡å¿«ç…§ã€VACUUM
- **å¹³è¡Œæ¦‚å¿µ**ï¼šé”æœºåˆ¶ã€æ—¶é—´æˆ³æ’åº

---

### 2.4 WALï¼ˆé¢„å†™æ—¥å¿—ï¼‰

#### 2.4.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šWALï¼ˆWrite-Ahead Loggingï¼‰æ˜¯ä¸€ç§æ—¥å¿—è®°å½•æœºåˆ¶ï¼Œè¦æ±‚æ‰€æœ‰æ•°æ®ä¿®æ”¹å¿…é¡»å…ˆå†™å…¥æ—¥å¿—ï¼Œç„¶åæ‰èƒ½å†™å…¥æ•°æ®æ–‡ä»¶ã€‚WALç¡®ä¿æ•°æ®åº“çš„æŒä¹…æ€§å’Œå¯æ¢å¤æ€§ï¼Œæ”¯æŒæ•…éšœæ¢å¤å’Œå¤åˆ¶ã€‚

**English Definition**: WAL (Write-Ahead Logging) is a logging mechanism that requires all data modifications to be written to the log before being written to data files. WAL ensures database durability and recoverability, supporting crash recovery and replication.

#### 2.4.2 å½¢å¼åŒ–å®šä¹‰

```latex
% WALçš„å½¢å¼åŒ–å®šä¹‰
\newcommand{\wal}{\mathcal{W}}
\newcommand{\logentry}{\mathcal{L}}

% WALåè®®
\text{WAL Protocol: } \forall \text{ write}(data), \text{ write}(\logentry) \rightarrow \text{ write}(data)

% æ—¥å¿—æ¡ç›®
\logentry = (\text{op}, \text{data}, \text{LSN}, \text{timestamp})

% æŒä¹…æ€§ä¿è¯
\text{Durability} \Leftrightarrow \forall \logentry, \text{ fsync}(\logentry) \text{ before commit}
```

#### 2.4.3 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | ä½œç”¨ |
|------|------|------|
| **é¢„å†™æœºåˆ¶** | å…ˆå†™æ—¥å¿—åå†™æ•°æ® | ä¿è¯æŒä¹…æ€§ |
| **LSNï¼ˆæ—¥å¿—åºåˆ—å·ï¼‰** | æ—¥å¿—ä½ç½®æ ‡è¯† | æ”¯æŒæ¢å¤å’Œå¤åˆ¶ |
| **æ£€æŸ¥ç‚¹** | å®šæœŸåˆ·æ–°è„é¡µ | æ§åˆ¶æ¢å¤æ—¶é—´ |
| **å½’æ¡£** | ä¿å­˜å†å²WAL | æ”¯æŒPITR |

#### 2.4.4 å±æ€§å…³ç³»å›¾

```mermaid
graph TD
    A[WAL] --> B[é¢„å†™æœºåˆ¶]
    A --> C[LSN]
    A --> D[æ£€æŸ¥ç‚¹]
    A --> E[å½’æ¡£]

    B --> B1[æ—¥å¿—å†™å…¥]
    B --> B2[æ•°æ®å†™å…¥]

    C --> C1[æ—¥å¿—ä½ç½®]
    C --> C2[å¤åˆ¶ä½ç½®]

    D --> D1[è„é¡µåˆ·æ–°]
    D --> D2[æ¢å¤ç‚¹]

    E --> E1[WALå½’æ¡£]
    E --> E2[PITR]
```

---

### 2.5 æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆQuery Optimizerï¼‰

#### 2.5.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šæŸ¥è¯¢ä¼˜åŒ–å™¨æ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£å°†SQLæŸ¥è¯¢è½¬æ¢ä¸ºé«˜æ•ˆçš„æ‰§è¡Œè®¡åˆ’ã€‚ä¼˜åŒ–å™¨é€šè¿‡ä»£ä»·æ¨¡å‹è¯„ä¼°ä¸åŒçš„æ‰§è¡Œç­–ç•¥ï¼Œé€‰æ‹©ä»£ä»·æœ€ä½çš„æ‰§è¡Œè®¡åˆ’ã€‚

**English Definition**: The query optimizer is a core component of database systems that transforms SQL queries into efficient execution plans. The optimizer evaluates different execution strategies using a cost model and selects the plan with the lowest cost.

#### 2.5.2 å½¢å¼åŒ–å®šä¹‰

```latex
% æŸ¥è¯¢ä¼˜åŒ–å™¨çš„å½¢å¼åŒ–å®šä¹‰
\newcommand{\query}{\mathcal{Q}}
\newcommand{\plan}{\mathcal{P}}
\newcommand{\cost}{\text{cost}}

% æŸ¥è¯¢ä¼˜åŒ–é—®é¢˜
\text{Optimize}(\query) = \arg\min_{\plan \in \text{Plans}(\query)} \cost(\plan)

% ä»£ä»·å‡½æ•°
\cost(\plan) = \sum_{i=1}^{n} \cost(\op_i) + \cost(\text{IO}) + \cost(\text{CPU})
```

#### 2.5.3 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | å®ç° |
|------|------|------|
| **æŸ¥è¯¢é‡å†™** | SQLè¯­æ³•æ ‘è½¬æ¢ | è§„åˆ™ä¼˜åŒ– |
| **è®¡åˆ’ç”Ÿæˆ** | ç”Ÿæˆå€™é€‰æ‰§è¡Œè®¡åˆ’ | åŠ¨æ€è§„åˆ’ |
| **ä»£ä»·ä¼°ç®—** | è¯„ä¼°è®¡åˆ’ä»£ä»· | ç»Ÿè®¡ä¿¡æ¯ |
| **è®¡åˆ’é€‰æ‹©** | é€‰æ‹©æœ€ä¼˜è®¡åˆ’ | ä»£ä»·æ¯”è¾ƒ |

#### 2.5.4 å±æ€§å…³ç³»å›¾

```mermaid
graph TD
    A[æŸ¥è¯¢ä¼˜åŒ–å™¨] --> B[æŸ¥è¯¢é‡å†™]
    A --> C[è®¡åˆ’ç”Ÿæˆ]
    A --> D[ä»£ä»·ä¼°ç®—]
    A --> E[è®¡åˆ’é€‰æ‹©]

    B --> B1[è§„åˆ™ä¼˜åŒ–]
    B --> B2[å­æŸ¥è¯¢ä¼˜åŒ–]

    C --> C1[è¿æ¥é¡ºåº]
    C --> C2[ç´¢å¼•é€‰æ‹©]

    D --> D1[ç»Ÿè®¡ä¿¡æ¯]
    D --> D2[ä»£ä»·æ¨¡å‹]

    E --> E1[ä»£ä»·æ¯”è¾ƒ]
    E --> E2[æ‰§è¡Œè®¡åˆ’]
```

---

### 2.6 ç´¢å¼•ï¼ˆIndexï¼‰

#### 2.6.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ç”¨äºåŠ é€ŸæŸ¥è¯¢çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡ç»´æŠ¤æ•°æ®çš„æœ‰åºç»„ç»‡æ¥å¿«é€Ÿå®šä½æ•°æ®ã€‚PostgreSQLæ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼ŒåŒ…æ‹¬B-Treeã€GINã€GiSTã€BRINç­‰ã€‚

**English Definition**: An index is a data structure in databases used to accelerate queries by maintaining an ordered organization of data for fast data location. PostgreSQL supports multiple index types, including B-Tree, GIN, GiST, BRIN, etc.

#### 2.6.2 å½¢å¼åŒ–å®šä¹‰

```latex
% ç´¢å¼•çš„å½¢å¼åŒ–å®šä¹‰
\newcommand{\index}{\mathcal{I}}
\newcommand{\key}{\mathcal{K}}
\newcommand{\value}{\mathcal{V}}

% ç´¢å¼•å®šä¹‰
\index = \{(\key_i, \value_i) \mid i = 1, 2, \ldots, n\}

% ç´¢å¼•æŸ¥æ‰¾
\text{Lookup}(\index, \key) = \value_i \text{ where } \key_i = \key
```

#### 2.6.3 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | ç´¢å¼•ç±»å‹ |
|------|------|---------|
| **æŸ¥æ‰¾é€Ÿåº¦** | O(log n)æŸ¥æ‰¾å¤æ‚åº¦ | B-Tree |
| **å­˜å‚¨å¼€é”€** | é¢å¤–çš„å­˜å‚¨ç©ºé—´ | æ‰€æœ‰ç±»å‹ |
| **ç»´æŠ¤æˆæœ¬** | æ’å…¥/æ›´æ–°/åˆ é™¤æˆæœ¬ | æ‰€æœ‰ç±»å‹ |
| **é€‚ç”¨åœºæ™¯** | ä¸åŒæŸ¥è¯¢æ¨¡å¼ | ç±»å‹ç›¸å…³ |

#### 2.6.4 å±æ€§å…³ç³»å›¾

```mermaid
graph TD
    A[ç´¢å¼• Index] --> B[B-Tree]
    A --> C[GIN]
    A --> D[GiST]
    A --> E[BRIN]
    A --> F[Hash]

    B --> B1[ç­‰å€¼æŸ¥è¯¢]
    B --> B2[èŒƒå›´æŸ¥è¯¢]

    C --> C1[å…¨æ–‡æœç´¢]
    C --> C2[æ•°ç»„æŸ¥è¯¢]

    D --> D1[ç©ºé—´æŸ¥è¯¢]
    D --> D2[èŒƒå›´æŸ¥è¯¢]

    E --> E1[æ—¶åºæ•°æ®]
    E --> E2[å¤§è¡¨æŸ¥è¯¢]
```

---

### 2.7 åˆ†åŒºï¼ˆPartitioningï¼‰

#### 2.7.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šåˆ†åŒºæ˜¯å°†å¤§è¡¨åˆ†å‰²æˆå¤šä¸ªè¾ƒå°çš„ç‰©ç†è¡¨çš„æŠ€æœ¯ï¼Œæ¯ä¸ªåˆ†åŒºå­˜å‚¨è¡¨çš„ä¸€éƒ¨åˆ†æ•°æ®ã€‚åˆ†åŒºå¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€ç®€åŒ–æ•°æ®ç®¡ç†ï¼Œå¹¶æ”¯æŒåˆ†åŒºè£å‰ªä¼˜åŒ–ã€‚

**English Definition**: Partitioning is a technique that divides large tables into multiple smaller physical tables, where each partition stores a portion of the table's data. Partitioning improves query performance, simplifies data management, and supports partition pruning optimization.

#### 2.7.2 å½¢å¼åŒ–å®šä¹‰

```latex
% åˆ†åŒºçš„å½¢å¼åŒ–å®šä¹‰
\newcommand{\table}{\mathcal{T}}
\newcommand{\partition}{\mathcal{P}}

% åˆ†åŒºå®šä¹‰
\table = \bigcup_{i=1}^{n} \partition_i

% åˆ†åŒºè£å‰ª
\text{Prune}(\query, \table) = \{\partition_i \mid \text{æ»¡è¶³æŸ¥è¯¢æ¡ä»¶}\}
```

#### 2.7.3 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | ä¼˜åŠ¿ |
|------|------|------|
| **åˆ†åŒºé”®** | ç”¨äºåˆ†åŒºçš„åˆ— | æ”¯æŒèŒƒå›´/åˆ—è¡¨/å“ˆå¸Œåˆ†åŒº |
| **åˆ†åŒºè£å‰ª** | æŸ¥è¯¢æ—¶è·³è¿‡æ— å…³åˆ†åŒº | æé«˜æŸ¥è¯¢æ€§èƒ½ |
| **å¹¶è¡Œå¤„ç†** | åˆ†åŒºé—´å¹¶è¡ŒæŸ¥è¯¢ | æé«˜å¹¶å‘æ€§èƒ½ |
| **æ•°æ®ç®¡ç†** | ç‹¬ç«‹ç®¡ç†åˆ†åŒº | ç®€åŒ–ç»´æŠ¤ |

---

### 2.8 å¤åˆ¶ï¼ˆReplicationï¼‰

#### 2.8.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šå¤åˆ¶æ˜¯å°†æ•°æ®åº“æ•°æ®ä»ä¸€ä¸ªä¸»æœåŠ¡å™¨å¤åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå¤‡ç”¨æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚PostgreSQLæ”¯æŒç‰©ç†å¤åˆ¶å’Œé€»è¾‘å¤åˆ¶ï¼Œç”¨äºé«˜å¯ç”¨ã€è´Ÿè½½å‡è¡¡å’Œç¾éš¾æ¢å¤ã€‚

**English Definition**: Replication is the process of copying database data from a primary server to one or more standby servers. PostgreSQL supports physical replication and logical replication for high availability, load balancing, and disaster recovery.

#### 2.8.2 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | ç±»å‹ |
|------|------|------|
| **ç‰©ç†å¤åˆ¶** | å¤åˆ¶WALæ•°æ® | æµå¤åˆ¶ |
| **é€»è¾‘å¤åˆ¶** | å¤åˆ¶é€»è¾‘å˜æ›´ | é€»è¾‘å¤åˆ¶ |
| **åŒæ­¥/å¼‚æ­¥** | å¤åˆ¶æ¨¡å¼ | æ€§èƒ½vsä¸€è‡´æ€§ |
| **æ•…éšœè½¬ç§»** | è‡ªåŠ¨åˆ‡æ¢ | é«˜å¯ç”¨ |

---

### 2.9 é”ï¼ˆLockï¼‰

#### 2.9.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šé”æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­ç”¨äºæ§åˆ¶å¹¶å‘è®¿é—®çš„æœºåˆ¶ï¼Œé€šè¿‡é”å®šèµ„æºæ¥é˜²æ­¢å¹¶å‘äº‹åŠ¡ä¹‹é—´çš„å†²çªã€‚PostgreSQLæ”¯æŒå¤šç§é”ç±»å‹å’Œé”æ¨¡å¼ï¼ŒåŒ…æ‹¬è¡¨é”ã€è¡Œé”ã€é¡µé”ç­‰ã€‚

**English Definition**: A lock is a mechanism in database systems used to control concurrent access by locking resources to prevent conflicts between concurrent transactions. PostgreSQL supports multiple lock types and modes, including table locks, row locks, page locks, etc.

#### 2.9.2 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | ç±»å‹ |
|------|------|------|
| **é”ç²’åº¦** | é”å®šèŒƒå›´ | è¡¨/é¡µ/è¡Œ |
| **é”æ¨¡å¼** | å…±äº«/æ’ä»– | å…¼å®¹æ€§çŸ©é˜µ |
| **æ­»é”æ£€æµ‹** | è‡ªåŠ¨æ£€æµ‹æ­»é” | æ­»é”é¿å… |
| **é”è¶…æ—¶** | é”ç­‰å¾…è¶…æ—¶ | é¿å…é•¿æ—¶é—´ç­‰å¾… |

---

### 2.10 æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰

#### 2.10.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**ï¼šæ£€æŸ¥ç‚¹æ˜¯æ•°æ®åº“ç³»ç»Ÿå®šæœŸå°†å†…å­˜ä¸­çš„è„é¡µåˆ·æ–°åˆ°ç£ç›˜çš„æ“ä½œï¼Œç”¨äºæ§åˆ¶æ¢å¤æ—¶é—´å’ŒWALæ–‡ä»¶å¤§å°ã€‚æ£€æŸ¥ç‚¹ç¡®ä¿æ•°æ®åº“å¯ä»¥åœ¨æ•…éšœåä»æ£€æŸ¥ç‚¹ä½ç½®å¿«é€Ÿæ¢å¤ã€‚

**English Definition**: A checkpoint is a periodic operation in database systems that flushes dirty pages from memory to disk, used to control recovery time and WAL file size. Checkpoints ensure the database can quickly recover from the checkpoint position after a crash.

#### 2.10.2 æ ¸å¿ƒå±æ€§

| å±æ€§ | è¯´æ˜ | é…ç½® |
|------|------|------|
| **æ£€æŸ¥ç‚¹é¢‘ç‡** | æ£€æŸ¥ç‚¹é—´éš” | checkpoint_timeout |
| **WALå¤§å°** | è§¦å‘æ£€æŸ¥ç‚¹çš„WALå¤§å° | max_wal_size |
| **è„é¡µåˆ·æ–°** | åˆ·æ–°è„é¡µåˆ°ç£ç›˜ | checkpoint_completion_target |
| **æ¢å¤æ—¶é—´** | ä»æ£€æŸ¥ç‚¹æ¢å¤çš„æ—¶é—´ | ä¸WALå¤§å°ç›¸å…³ |

---

## ä¸‰ã€æ¦‚å¿µå…³ç³»å›¾è°±

### 3.1 æ ¸å¿ƒæ¦‚å¿µå…³ç³»å›¾

```mermaid
graph TB
    A[PostgreSQLæ•°æ®åº“ç³»ç»Ÿ] --> B[äº‹åŠ¡ç®¡ç†]
    A --> C[å­˜å‚¨ç®¡ç†]
    A --> D[æŸ¥è¯¢å¤„ç†]
    A --> E[å¹¶å‘æ§åˆ¶]

    B --> B1[äº‹åŠ¡]
    B --> B2[ACID]
    B --> B3[WAL]

    C --> C1[WAL]
    C --> C2[æ£€æŸ¥ç‚¹]
    C --> C3[ç¼“å†²åŒº]

    D --> D1[æŸ¥è¯¢ä¼˜åŒ–å™¨]
    D --> D2[æ‰§è¡Œè®¡åˆ’]
    D --> D3[ç´¢å¼•]

    E --> E1[MVCC]
    E --> E2[é”]
    E --> E3[éš”ç¦»çº§åˆ«]

    B3 --> C1
    E1 --> B1
    D3 --> D1
```

### 3.2 äº‹åŠ¡ç›¸å…³æ¦‚å¿µå…³ç³»

```mermaid
graph LR
    A[äº‹åŠ¡] --> B[ACID]
    A --> C[WAL]
    A --> D[MVCC]
    A --> E[é”]

    B --> B1[åŸå­æ€§]
    B --> B2[ä¸€è‡´æ€§]
    B --> B3[éš”ç¦»æ€§]
    B --> B4[æŒä¹…æ€§]

    C --> C1[æ—¥å¿—å†™å…¥]
    C --> C2[æ£€æŸ¥ç‚¹]

    D --> D1[ç‰ˆæœ¬ç®¡ç†]
    D --> D2[å¿«ç…§éš”ç¦»]

    E --> E1[è¡¨é”]
    E --> E2[è¡Œé”]
```

### 3.3 å­˜å‚¨ç›¸å…³æ¦‚å¿µå…³ç³»

```mermaid
graph TD
    A[å­˜å‚¨ç®¡ç†] --> B[WAL]
    A --> C[æ£€æŸ¥ç‚¹]
    A --> D[ç¼“å†²åŒº]
    A --> E[æŒä¹…åŒ–]

    B --> B1[æ—¥å¿—å†™å…¥]
    B --> B2[å½’æ¡£]

    C --> C1[è„é¡µåˆ·æ–°]
    C --> C2[æ¢å¤ç‚¹]

    D --> D1[å…±äº«ç¼“å†²åŒº]
    D --> D2[æœ¬åœ°ç¼“å†²åŒº]

    E --> E1[fsync]
    E --> E2[æ•°æ®æ–‡ä»¶]
```

### 3.4 æŸ¥è¯¢ç›¸å…³æ¦‚å¿µå…³ç³»

```mermaid
graph TD
    A[æŸ¥è¯¢å¤„ç†] --> B[æŸ¥è¯¢ä¼˜åŒ–å™¨]
    A --> C[æ‰§è¡Œè®¡åˆ’]
    A --> D[ç´¢å¼•]
    A --> E[ç»Ÿè®¡ä¿¡æ¯]

    B --> B1[æŸ¥è¯¢é‡å†™]
    B --> B2[è®¡åˆ’ç”Ÿæˆ]
    B --> B3[ä»£ä»·ä¼°ç®—]

    C --> C1[æ‰«ææ“ä½œ]
    C --> C2[è¿æ¥æ“ä½œ]
    C --> C3[èšåˆæ“ä½œ]

    D --> D1[B-Tree]
    D --> D2[GIN]
    D --> D3[GiST]

    E --> E1[è¡¨ç»Ÿè®¡]
    E --> E2[åˆ—ç»Ÿè®¡]
```

---

## å››ã€å±æ€§å…³ç³»çŸ©é˜µ

### 4.1 æ¦‚å¿µå±æ€§å¯¹æ¯”

| æ¦‚å¿µ | å¤æ‚åº¦ | æ€§èƒ½å½±å“ | å­˜å‚¨å¼€é”€ | ç»´æŠ¤æˆæœ¬ | é€‚ç”¨åœºæ™¯ |
|------|--------|---------|---------|---------|---------|
| **äº‹åŠ¡** | â­â­â­ | â­â­â­â­ | â­ | â­â­ | æ‰€æœ‰åœºæ™¯ |
| **MVCC** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­ | é«˜å¹¶å‘åœºæ™¯ |
| **WAL** | â­â­â­â­ | â­â­â­ | â­â­ | â­â­ | æŒä¹…åŒ–éœ€æ±‚ |
| **ç´¢å¼•** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ | æŸ¥è¯¢ä¼˜åŒ– |
| **åˆ†åŒº** | â­â­â­â­ | â­â­â­â­ | â­ | â­â­â­ | å¤§è¡¨åœºæ™¯ |
| **å¤åˆ¶** | â­â­â­â­ | â­â­ | â­â­ | â­â­â­â­ | é«˜å¯ç”¨åœºæ™¯ |

### 4.2 æ¦‚å¿µä¾èµ–å…³ç³»

| æ¦‚å¿µ | ä¾èµ–æ¦‚å¿µ | è¢«ä¾èµ–æ¦‚å¿µ | å…³ç³»å¼ºåº¦ |
|------|---------|-----------|---------|
| **äº‹åŠ¡** | - | ACIDã€WALã€MVCC | â­â­â­â­â­ |
| **ACID** | äº‹åŠ¡ | WALã€MVCCã€é” | â­â­â­â­â­ |
| **MVCC** | äº‹åŠ¡ã€WAL | éš”ç¦»çº§åˆ«ã€VACUUM | â­â­â­â­â­ |
| **WAL** | - | äº‹åŠ¡ã€æ£€æŸ¥ç‚¹ã€å¤åˆ¶ | â­â­â­â­â­ |
| **æŸ¥è¯¢ä¼˜åŒ–å™¨** | ç»Ÿè®¡ä¿¡æ¯ | ç´¢å¼•ã€æ‰§è¡Œè®¡åˆ’ | â­â­â­â­ |
| **ç´¢å¼•** | è¡¨ | æŸ¥è¯¢ä¼˜åŒ–å™¨ã€æ‰§è¡Œè®¡åˆ’ | â­â­â­â­ |
| **åˆ†åŒº** | è¡¨ | æŸ¥è¯¢ä¼˜åŒ–å™¨ | â­â­â­ |
| **å¤åˆ¶** | WAL | é«˜å¯ç”¨ã€è´Ÿè½½å‡è¡¡ | â­â­â­â­ |

---

## äº”ã€å‚è€ƒèµ„æº

### 5.1 å®˜æ–¹æ–‡æ¡£

- [PostgreSQLå®˜æ–¹æ–‡æ¡£](https://www.postgresql.org/docs/)
- [PostgreSQLæ¦‚å¿µ](https://www.postgresql.org/docs/current/tutorial-concepts.html)

### 5.2 ç›¸å…³æ–‡æ¡£

- `01-æ ¸å¿ƒåŸºç¡€/01.04-äº‹åŠ¡ç®¡ç†ä¸ACIDç‰¹æ€§.md`
- `01-æ ¸å¿ƒåŸºç¡€/01.05-å¹¶å‘æ§åˆ¶ä¸MVCCæœºåˆ¶.md`
- `01-æ ¸å¿ƒåŸºç¡€/01.06-å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–.md`
- `02-æŸ¥è¯¢å¤„ç†/02.01-æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†.md`
- `02-æŸ¥è¯¢å¤„ç†/02.02-ç´¢å¼•ç»“æ„ä¸ä¼˜åŒ–.md`

### 5.3 å­¦æœ¯è®ºæ–‡

1. Berenson, H., et al. (1995). A critique of ANSI SQL isolation levels. ACM SIGMOD Record.
2. Cahill, M. J., et al. (2008). Serializable isolation for snapshot databases. ACM SIGMOD.
3. Graefe, G. (1995). The Cascades framework for query optimization. IEEE Data Engineering Bulletin.

---

**ç»´æŠ¤è€…**: Data-Science Team
**æœ€åæ›´æ–°**: 2025-01-15
**ç‰ˆæœ¬**: 1.0
