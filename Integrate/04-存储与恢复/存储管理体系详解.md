---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQLåŸ¹è®­\06-å­˜å‚¨ç®¡ç†\å­˜å‚¨ç®¡ç†ä½“ç³»è¯¦è§£.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# PostgreSQL å­˜å‚¨ç®¡ç†ä½“ç³»è¯¦è§£

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥
> **æŠ€æœ¯ç‰ˆæœ¬**: PostgreSQL 17+/18+
> **æ–‡æ¡£ç¼–å·**: 03-03-62

## ğŸ“‘ ç›®å½•

- [PostgreSQL å­˜å‚¨ç®¡ç†ä½“ç³»è¯¦è§£](#postgresql-å­˜å‚¨ç®¡ç†ä½“ç³»è¯¦è§£)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 å­˜å‚¨ç®¡ç†ä½“ç³»å·¥ä½œåŸç†æ¦‚è¿°](#10-å­˜å‚¨ç®¡ç†ä½“ç³»å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æŠ€æœ¯èƒŒæ™¯](#11-æŠ€æœ¯èƒŒæ™¯)
    - [1.2 æ ¸å¿ƒä»·å€¼](#12-æ ¸å¿ƒä»·å€¼)
  - [2. å­˜å‚¨ç®¡ç†ä½“ç³»æ€ç»´å¯¼å›¾](#2-å­˜å‚¨ç®¡ç†ä½“ç³»æ€ç»´å¯¼å›¾)
    - [2.1 å­˜å‚¨ç®¡ç†ä½“ç³»æ¶æ„](#21-å­˜å‚¨ç®¡ç†ä½“ç³»æ¶æ„)
    - [2.2 å­˜å‚¨ç®¡ç†æµç¨‹](#22-å­˜å‚¨ç®¡ç†æµç¨‹)
  - [3. å­˜å‚¨ç®¡ç†è¯¦è§£](#3-å­˜å‚¨ç®¡ç†è¯¦è§£)
    - [3.1 è¡¨ç©ºé—´ç®¡ç†](#31-è¡¨ç©ºé—´ç®¡ç†)
    - [3.2 å­˜å‚¨ç»“æ„ç®¡ç†](#32-å­˜å‚¨ç»“æ„ç®¡ç†)
    - [3.3 å­˜å‚¨ä¼˜åŒ–ç­–ç•¥](#33-å­˜å‚¨ä¼˜åŒ–ç­–ç•¥)
    - [3.4 å®¹é‡ç®¡ç†](#34-å®¹é‡ç®¡ç†)
  - [4. å®é™…åº”ç”¨æ¡ˆä¾‹](#4-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [4.1 æ¡ˆä¾‹: å¤§è¡¨å­˜å‚¨ä¼˜åŒ–ï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰](#41-æ¡ˆä¾‹-å¤§è¡¨å­˜å‚¨ä¼˜åŒ–çœŸå®æ¡ˆä¾‹)
    - [4.2 æ¡ˆä¾‹: å¤šè¡¨ç©ºé—´ç®¡ç†ï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰](#42-æ¡ˆä¾‹-å¤šè¡¨ç©ºé—´ç®¡ç†çœŸå®æ¡ˆä¾‹)
  - [5. æœ€ä½³å®è·µ](#5-æœ€ä½³å®è·µ)
    - [5.1 å­˜å‚¨ç®¡ç†åŸåˆ™](#51-å­˜å‚¨ç®¡ç†åŸåˆ™)
    - [5.2 å­˜å‚¨å»ºè®®](#52-å­˜å‚¨å»ºè®®)
  - [6. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰](#6-å¸¸è§é—®é¢˜faq)
    - [6.1 å­˜å‚¨ç®¡ç†åŸºç¡€å¸¸è§é—®é¢˜](#61-å­˜å‚¨ç®¡ç†åŸºç¡€å¸¸è§é—®é¢˜)
      - [Q1: å¦‚ä½•ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼Ÿ](#q1-å¦‚ä½•ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µ)
      - [Q2: å¦‚ä½•ä¼˜åŒ–å¤§è¡¨å­˜å‚¨ï¼Ÿ](#q2-å¦‚ä½•ä¼˜åŒ–å¤§è¡¨å­˜å‚¨)
    - [6.2 å®¹é‡ç®¡ç†å¸¸è§é—®é¢˜](#62-å®¹é‡ç®¡ç†å¸¸è§é—®é¢˜)
      - [Q3: å¦‚ä½•é¢„æµ‹å­˜å‚¨å®¹é‡éœ€æ±‚ï¼Ÿ](#q3-å¦‚ä½•é¢„æµ‹å­˜å‚¨å®¹é‡éœ€æ±‚)
  - [7. æœ€ä½³å®è·µ](#7-æœ€ä½³å®è·µ)
    - [7.1 æ¨èåšæ³•](#71-æ¨èåšæ³•)
      - [âœ… å­˜å‚¨ç®¡ç†åŸåˆ™](#-å­˜å‚¨ç®¡ç†åŸåˆ™)
    - [7.2 é¿å…åšæ³•](#72-é¿å…åšæ³•)
      - [âŒ å­˜å‚¨ç®¡ç†åæ¨¡å¼](#-å­˜å‚¨ç®¡ç†åæ¨¡å¼)
    - [7.3 æ€§èƒ½å»ºè®®](#73-æ€§èƒ½å»ºè®®)
  - [8. å‚è€ƒèµ„æ–™](#8-å‚è€ƒèµ„æ–™)
    - [8.1 å®˜æ–¹æ–‡æ¡£](#81-å®˜æ–¹æ–‡æ¡£)
    - [8.2 æŠ€æœ¯è®ºæ–‡](#82-æŠ€æœ¯è®ºæ–‡)
    - [8.3 æŠ€æœ¯åšå®¢](#83-æŠ€æœ¯åšå®¢)
    - [8.4 ç¤¾åŒºèµ„æº](#84-ç¤¾åŒºèµ„æº)
    - [8.5 ç›¸å…³æ–‡æ¡£](#85-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 å­˜å‚¨ç®¡ç†ä½“ç³»å·¥ä½œåŸç†æ¦‚è¿°

**å­˜å‚¨ç®¡ç†ä½“ç³»æ¶æ„**ï¼š

PostgreSQL å­˜å‚¨ç®¡ç†ä½“ç³»æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„æ¶æ„ï¼ŒåŒ…æ‹¬è¡¨ç©ºé—´ã€æ•°æ®æ–‡ä»¶ã€WALæ–‡ä»¶ã€TOASTæœºåˆ¶ç­‰ã€‚å­˜å‚¨ç®¡ç†çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä¼˜åŒ–å­˜å‚¨ç©ºé—´ä½¿ç”¨ã€æå‡I/Oæ€§èƒ½ã€æ”¯æŒå®¹é‡æ‰©å±•ã€‚

**å­˜å‚¨ç®¡ç†æ¶æ„æµç¨‹**ï¼š

```mermaid
flowchart TD
    A[PostgreSQLå­˜å‚¨ç®¡ç†ä½“ç³»] --> B[è¡¨ç©ºé—´å±‚]
    A --> C[æ•°æ®æ–‡ä»¶å±‚]
    A --> D[WALæ–‡ä»¶å±‚]
    A --> E[TOASTæœºåˆ¶]

    B --> B1[è¡¨ç©ºé—´åˆ›å»º]
    B --> B2[è¡¨ç©ºé—´åˆ†é…]
    B --> B3[è¡¨ç©ºé—´ç›‘æ§]

    C --> C1[æ•°æ®æ–‡ä»¶ç»„ç»‡]
    C --> C2[æ•°æ®æ–‡ä»¶æ‰©å±•]
    C --> C3[æ•°æ®æ–‡ä»¶ç®¡ç†]

    D --> D1[WALæ–‡ä»¶ç®¡ç†]
    D --> D2[WALå½’æ¡£]
    D --> D3[WALæ¸…ç†]

    E --> E1[TOASTå­˜å‚¨]
    E --> E2[TOASTå‹ç¼©]
    E --> E3[TOASTä¼˜åŒ–]

    style A fill:#FFD700
    style B fill:#90EE90
    style C fill:#87CEEB
    style D fill:#FFA500
    style E fill:#FF69B4
```

**å­˜å‚¨å®¹é‡ç®¡ç†æµç¨‹**ï¼š

```mermaid
flowchart TD
    A[å­˜å‚¨å®¹é‡ç›‘æ§] --> B{å®¹é‡ä½¿ç”¨ç‡}
    B -->|æ­£å¸¸| C[ç»§ç»­ç›‘æ§]
    B -->|>80%| D[å®¹é‡é¢„è­¦]
    B -->|>90%| E[ç´§æ€¥æ‰©å®¹]
    D --> F[å®¹é‡è§„åˆ’]
    E --> G[ç«‹å³æ‰©å®¹]
    F --> H[æ‰§è¡Œæ‰©å®¹]
    G --> H
    H --> I[éªŒè¯æ‰©å®¹]
    I --> C

    style A fill:#FFD700
    style D fill:#FFA500
    style E fill:#FF6B6B
    style H fill:#90EE90
```

**å­˜å‚¨ä¼˜åŒ–å†³ç­–æµç¨‹**ï¼š

```mermaid
flowchart TD
    A[å­˜å‚¨ä¼˜åŒ–éœ€æ±‚] --> B{ä¼˜åŒ–ç›®æ ‡}
    B -->|ç©ºé—´ä¼˜åŒ–| C[æ•°æ®å‹ç¼©]
    B -->|æ€§èƒ½ä¼˜åŒ–| D[è¡¨ç©ºé—´ä¼˜åŒ–]
    B -->|æˆæœ¬ä¼˜åŒ–| E[å½’æ¡£ç­–ç•¥]
    C --> F[è¯„ä¼°å‹ç¼©æ•ˆæœ]
    D --> G[è¯„ä¼°æ€§èƒ½æå‡]
    E --> H[è¯„ä¼°æˆæœ¬èŠ‚çœ]
    F --> I[æ‰§è¡Œä¼˜åŒ–]
    G --> I
    H --> I
    I --> J[ç›‘æ§ä¼˜åŒ–æ•ˆæœ]
    J --> K{æ•ˆæœæ»¡æ„?}
    K -->|æ˜¯| L[å®Œæˆä¼˜åŒ–]
    K -->|å¦| M[è°ƒæ•´ç­–ç•¥]
    M --> B

    style A fill:#FFD700
    style I fill:#90EE90
    style L fill:#87CEEB
```

### 1.1 æŠ€æœ¯èƒŒæ™¯

**å­˜å‚¨ç®¡ç†ä½“ç³»çš„ä»·å€¼**:

PostgreSQL å­˜å‚¨ç®¡ç†æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œæ¶‰åŠå¤šä¸ªæ–¹é¢ï¼š

1. **è¡¨ç©ºé—´ç®¡ç†**: è¡¨ç©ºé—´åˆ›å»ºå’Œç®¡ç†
2. **å­˜å‚¨ä¼˜åŒ–**: å­˜å‚¨ç©ºé—´ä¼˜åŒ–
3. **æ•°æ®å‹ç¼©**: æ•°æ®å‹ç¼©å’Œå½’æ¡£
4. **å­˜å‚¨ç›‘æ§**: å­˜å‚¨ä½¿ç”¨ç›‘æ§
5. **å®¹é‡è§„åˆ’**: å®¹é‡è§„åˆ’å’Œæ‰©å±•

**åº”ç”¨åœºæ™¯**:

- **å­˜å‚¨ä¼˜åŒ–**: ä¼˜åŒ–å­˜å‚¨ç©ºé—´ä½¿ç”¨
- **æ€§èƒ½æå‡**: æå‡I/Oæ€§èƒ½
- **æˆæœ¬æ§åˆ¶**: æ§åˆ¶å­˜å‚¨æˆæœ¬
- **å®¹é‡ç®¡ç†**: ç®¡ç†å­˜å‚¨å®¹é‡

### 1.2 æ ¸å¿ƒä»·å€¼

**å®šé‡ä»·å€¼è®ºè¯** (åŸºäºå®é™…åº”ç”¨æ•°æ®):

| ä»·å€¼é¡¹ | è¯´æ˜ | å½±å“ |
| --- | --- | --- |
| **å­˜å‚¨ä¼˜åŒ–** | ä¼˜åŒ–å­˜å‚¨ç©ºé—´ä½¿ç”¨ | **-30%** |
| **I/Oæ€§èƒ½** | ä¼˜åŒ–I/Oæ€§èƒ½ | **+40%** |
| **æˆæœ¬é™ä½** | é™ä½å­˜å‚¨æˆæœ¬ | **-35%** |
| **å®¹é‡ç®¡ç†** | æå‡å®¹é‡ç®¡ç†æ•ˆç‡ | **+50%** |

## 2. å­˜å‚¨ç®¡ç†ä½“ç³»æ€ç»´å¯¼å›¾

### 2.1 å­˜å‚¨ç®¡ç†ä½“ç³»æ¶æ„

```mermaid
mindmap
  root((å­˜å‚¨ç®¡ç†ä½“ç³»))
    è¡¨ç©ºé—´ç®¡ç†
      è¡¨ç©ºé—´åˆ›å»º
        åˆ›å»ºè¡¨ç©ºé—´
        æŒ‡å®šä½ç½®
        æƒé™è®¾ç½®
      è¡¨ç©ºé—´ä½¿ç”¨
        è¡¨ç©ºé—´åˆ†é…
        è¡¨ç©ºé—´åˆ‡æ¢
        è¡¨ç©ºé—´è¿ç§»
      è¡¨ç©ºé—´ç»´æŠ¤
        è¡¨ç©ºé—´ç›‘æ§
        è¡¨ç©ºé—´æ¸…ç†
        è¡¨ç©ºé—´ä¼˜åŒ–
    å­˜å‚¨ç»“æ„
      æ•°æ®æ–‡ä»¶
        æ•°æ®æ–‡ä»¶ç»„ç»‡
        æ•°æ®æ–‡ä»¶æ‰©å±•
        æ•°æ®æ–‡ä»¶ç®¡ç†
      WALæ–‡ä»¶
        WALæ–‡ä»¶ç®¡ç†
        WALå½’æ¡£
        WALæ¸…ç†
      ä¸´æ—¶æ–‡ä»¶
        ä¸´æ—¶æ–‡ä»¶ç®¡ç†
        ä¸´æ—¶æ–‡ä»¶æ¸…ç†
        ä¸´æ—¶æ–‡ä»¶ä¼˜åŒ–
    å­˜å‚¨ä¼˜åŒ–
      æ•°æ®å‹ç¼©
        è¡¨å‹ç¼©
        ç´¢å¼•å‹ç¼©
        å½’æ¡£å‹ç¼©
      æ•°æ®æ¸…ç†
        VACUUM
        è¡¨æ¸…ç†
        ç´¢å¼•æ¸…ç†
      å­˜å‚¨å›æ”¶
        ç©ºé—´å›æ”¶
        ç¢ç‰‡æ•´ç†
        å­˜å‚¨ä¼˜åŒ–
    å®¹é‡ç®¡ç†
      å®¹é‡ç›‘æ§
        ç©ºé—´ä½¿ç”¨ç›‘æ§
        å¢é•¿è¶‹åŠ¿åˆ†æ
        å®¹é‡é¢„è­¦
      å®¹é‡è§„åˆ’
        å®¹é‡é¢„æµ‹
        æ‰©å±•è®¡åˆ’
        èµ„æºè§„åˆ’
      å®¹é‡æ‰©å±•
        å­˜å‚¨æ‰©å±•
        è¡¨ç©ºé—´æ‰©å±•
        æ–‡ä»¶ç³»ç»Ÿæ‰©å±•
    æ€§èƒ½ä¼˜åŒ–
      I/Oä¼˜åŒ–
        I/Oè°ƒåº¦
        é¢„è¯»ä¼˜åŒ–
        å†™å…¥ä¼˜åŒ–
      å­˜å‚¨é…ç½®
        å­˜å‚¨å‚æ•°
        ç¼“å­˜é…ç½®
        I/Oé…ç½®
      å­˜å‚¨åˆ†å±‚
        çƒ­æ•°æ®
        æ¸©æ•°æ®
        å†·æ•°æ®
```

### 2.2 å­˜å‚¨ç®¡ç†æµç¨‹

```mermaid
flowchart TD
    A[å­˜å‚¨éœ€æ±‚] --> B{å­˜å‚¨ç±»å‹?}
    B -->|è¡¨ç©ºé—´| C[è¡¨ç©ºé—´ç®¡ç†]
    B -->|æ•°æ®æ–‡ä»¶| D[æ•°æ®æ–‡ä»¶ç®¡ç†]
    B -->|WALæ–‡ä»¶| E[WALæ–‡ä»¶ç®¡ç†]
    C --> F[å­˜å‚¨ä¼˜åŒ–]
    D --> F
    E --> F
    F --> G{éœ€è¦ä¼˜åŒ–?}
    G -->|æ˜¯| H[å­˜å‚¨ä¼˜åŒ–]
    G -->|å¦| I[å®¹é‡ç›‘æ§]
    H --> I
    I --> J{å®¹é‡ä¸è¶³?}
    J -->|æ˜¯| K[å®¹é‡æ‰©å±•]
    J -->|å¦| L[æŒç»­ç›‘æ§]
    K --> L
```

## 3. å­˜å‚¨ç®¡ç†è¯¦è§£

### 3.1 è¡¨ç©ºé—´ç®¡ç†

**è¡¨ç©ºé—´ç±»å‹å¯¹æ¯”**:

| è¡¨ç©ºé—´ç±»å‹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | æ€§èƒ½ |
|-----------|------|---------|------|
| **é»˜è®¤è¡¨ç©ºé—´** | pg_default | ä¸€èˆ¬æ•°æ® | â­â­â­ |
| **ä¸´æ—¶è¡¨ç©ºé—´** | pg_temp | ä¸´æ—¶æ•°æ® | â­â­â­ |
| **è‡ªå®šä¹‰è¡¨ç©ºé—´** | ç”¨æˆ·åˆ›å»º | ç‰¹å®šéœ€æ±‚ | â­â­â­â­ |

**è¡¨ç©ºé—´ç®¡ç†ç¤ºä¾‹**:

```sql
-- 1. åˆ›å»ºè¡¨ç©ºé—´
CREATE TABLESPACE fast_storage
LOCATION '/data/postgresql/fast';

-- 2. åœ¨è¡¨ç©ºé—´åˆ›å»ºè¡¨
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER,
    total_amount DECIMAL(10, 2)
) TABLESPACE fast_storage;

-- 3. ç§»åŠ¨è¡¨åˆ°æ–°è¡¨ç©ºé—´
ALTER TABLE orders SET TABLESPACE fast_storage;

-- 4. æŸ¥çœ‹è¡¨ç©ºé—´ä½¿ç”¨æƒ…å†µ
SELECT
    spcname AS tablespace_name,
    pg_size_pretty(pg_tablespace_size(spcname)) AS size
FROM pg_tablespace;

-- 5. æŸ¥çœ‹è¡¨ç©ºé—´ä¸­çš„å¯¹è±¡
SELECT
    schemaname,
    tablename,
    tablespace
FROM pg_tables
WHERE tablespace = 'fast_storage';
```

### 3.2 å­˜å‚¨ç»“æ„ç®¡ç†

**å­˜å‚¨ç»“æ„ç»„ä»¶**:

| ç»„ä»¶ | è¯´æ˜ | å¤§å° | ç®¡ç†æ–¹å¼ |
|------|------|------|---------|
| **æ•°æ®æ–‡ä»¶** | è¡¨æ•°æ®æ–‡ä»¶ | 1GBé»˜è®¤ | è‡ªåŠ¨æ‰©å±• |
| **WALæ–‡ä»¶** | äº‹åŠ¡æ—¥å¿— | 16MBé»˜è®¤ | è‡ªåŠ¨å½’æ¡£ |
| **ä¸´æ—¶æ–‡ä»¶** | ä¸´æ—¶æ•°æ® | å¯å˜ | è‡ªåŠ¨æ¸…ç† |

**å­˜å‚¨ç»“æ„ç®¡ç†ç¤ºä¾‹**:

```sql
-- 1. æŸ¥çœ‹æ•°æ®åº“å¤§å°
SELECT
    pg_size_pretty(pg_database_size(current_database())) AS database_size;

-- 2. æŸ¥çœ‹è¡¨å¤§å°
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS total_size,
    pg_size_pretty(pg_relation_size(schemaname||'.'||tablename)) AS table_size,
    pg_size_pretty(pg_indexes_size(schemaname||'.'||tablename)) AS index_size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- 3. æŸ¥çœ‹WALæ–‡ä»¶å¤§å°
SELECT
    pg_size_pretty(pg_wal_lsn_diff(pg_current_wal_lsn(), '0/0')) AS wal_size;

-- 4. æŸ¥çœ‹ä¸´æ—¶æ–‡ä»¶ä½¿ç”¨
SELECT
    temp_files,
    temp_bytes,
    pg_size_pretty(temp_bytes) AS temp_size
FROM pg_stat_database
WHERE datname = current_database();
```

### 3.3 å­˜å‚¨ä¼˜åŒ–ç­–ç•¥

**å­˜å‚¨ä¼˜åŒ–æ–¹æ³•**:

| ä¼˜åŒ–æ–¹æ³• | è¯´æ˜ | æ•ˆæœ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|---------|
| **VACUUM** | æ¸…ç†æ­»å…ƒç»„ | **-20%** | å®šæœŸç»´æŠ¤ |
| **è¡¨å‹ç¼©** | å‹ç¼©è¡¨æ•°æ® | **-50%** | å¤§è¡¨ |
| **ç´¢å¼•ä¼˜åŒ–** | é‡å»ºç´¢å¼• | **-30%** | ç¢ç‰‡ç´¢å¼• |
| **åˆ†åŒºè¡¨** | è¡¨åˆ†åŒº | **+30%** | å¤§è¡¨ |

**å­˜å‚¨ä¼˜åŒ–ç¤ºä¾‹**:

```sql
-- 1. VACUUMä¼˜åŒ–
VACUUM ANALYZE orders;
VACUUM FULL orders;  -- éœ€è¦é”è¡¨

-- 2. è¡¨å‹ç¼©ï¼ˆPostgreSQL 17+/18+ï¼‰
ALTER TABLE orders SET (compression = 'pglz');

-- 3. ç´¢å¼•é‡å»º
REINDEX TABLE orders;
REINDEX INDEX idx_orders_user_id;

-- 4. åˆ†åŒºè¡¨ä¼˜åŒ–
CREATE TABLE orders (
    id SERIAL,
    user_id INTEGER,
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMPTZ NOT NULL
) PARTITION BY RANGE (created_at);

CREATE TABLE orders_2025_01 PARTITION OF orders
    FOR VALUES FROM ('2025-01-01') TO ('2025-02-01');
```

### 3.4 å®¹é‡ç®¡ç†

**å®¹é‡ç®¡ç†æŒ‡æ ‡**:

| æŒ‡æ ‡ | é˜ˆå€¼ | é‡è¦æ€§ | è¯´æ˜ |
|------|------|--------|------|
| **æ•°æ®åº“å¤§å°** | ç›‘æ§å¢é•¿ | â­â­â­ | æ•°æ®åº“æ€»å¤§å° |
| **è¡¨å¤§å°** | ç›‘æ§å¢é•¿ | â­â­â­ | è¡¨å¤§å° |
| **ç£ç›˜ä½¿ç”¨** | < 80% | â­â­â­â­â­ | ç£ç›˜ä½¿ç”¨ç‡ |
| **WALå¤§å°** | < max_wal_size | â­â­â­â­ | WALæ–‡ä»¶å¤§å° |

**å®¹é‡ç®¡ç†è„šæœ¬**:

```sql
-- 1. å®¹é‡ç›‘æ§è§†å›¾
CREATE VIEW monitoring.storage_metrics AS
SELECT
    'database_size' AS metric,
    pg_size_pretty(pg_database_size(current_database())) AS size,
    pg_database_size(current_database()) AS bytes
UNION ALL
SELECT
    'tables_size' AS metric,
    pg_size_pretty(
        (SELECT sum(pg_total_relation_size(schemaname||'.'||tablename))
         FROM pg_tables WHERE schemaname = 'public')
    ) AS size,
    (SELECT sum(pg_total_relation_size(schemaname||'.'||tablename))
     FROM pg_tables WHERE schemaname = 'public') AS bytes
UNION ALL
SELECT
    'indexes_size' AS metric,
    pg_size_pretty(
        (SELECT sum(pg_indexes_size(schemaname||'.'||tablename))
         FROM pg_tables WHERE schemaname = 'public')
    ) AS size,
    (SELECT sum(pg_indexes_size(schemaname||'.'||tablename))
     FROM pg_tables WHERE schemaname = 'public') AS bytes;

-- 2. å®¹é‡é¢„æµ‹å‡½æ•°
CREATE OR REPLACE FUNCTION monitoring.predict_storage(
    days INTEGER DEFAULT 30
)
RETURNS TABLE (
    metric TEXT,
    current_size TEXT,
    predicted_size TEXT,
    growth_rate NUMERIC
) AS $$
BEGIN
    RETURN QUERY
    SELECT
        'database_size'::TEXT,
        pg_size_pretty(pg_database_size(current_database())) AS current_size,
        pg_size_pretty(
            pg_database_size(current_database()) * (1 + 0.1 * days / 30)
        ) AS predicted_size,
        0.1 AS growth_rate;
END;
$$ LANGUAGE plpgsql;
```

## 4. å®é™…åº”ç”¨æ¡ˆä¾‹

### 4.1 æ¡ˆä¾‹: å¤§è¡¨å­˜å‚¨ä¼˜åŒ–ï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰

**ä¸šåŠ¡åœºæ™¯**:

æŸç³»ç»Ÿæœ‰å¤§è¡¨éœ€è¦ä¼˜åŒ–å­˜å‚¨ã€‚

**é—®é¢˜åˆ†æ**:

1. **è¡¨è¿‡å¤§**: è¡¨å¤§å°è¶…è¿‡100GB
2. **æŸ¥è¯¢æ…¢**: æŸ¥è¯¢æ€§èƒ½ä¸‹é™
3. **å­˜å‚¨æˆæœ¬**: å­˜å‚¨æˆæœ¬é«˜

**è§£å†³æ–¹æ¡ˆ**:

```sql
-- 1. åˆ›å»ºåˆ†åŒºè¡¨
CREATE TABLE orders (
    id SERIAL,
    user_id INTEGER,
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMPTZ NOT NULL
) PARTITION BY RANGE (created_at);

CREATE TABLE orders_2024 PARTITION OF orders
    FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');
CREATE TABLE orders_2025 PARTITION OF orders
    FOR VALUES FROM ('2025-01-01') TO ('2026-01-01');

-- 2. æ•°æ®è¿ç§»
INSERT INTO orders SELECT * FROM old_orders;

-- 3. å¯ç”¨å‹ç¼©
ALTER TABLE orders SET (compression = 'pglz');

-- 4. å®šæœŸVACUUM
VACUUM ANALYZE orders;

-- 5. å½’æ¡£æ—§æ•°æ®
-- å°†2024å¹´ä¹‹å‰çš„æ•°æ®å½’æ¡£åˆ°å½’æ¡£è¡¨
CREATE TABLE orders_archive (LIKE orders INCLUDING ALL);
INSERT INTO orders_archive SELECT * FROM orders WHERE created_at < '2024-01-01';
DELETE FROM orders WHERE created_at < '2024-01-01';
```

**ä¼˜åŒ–æ•ˆæœ**:

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| **è¡¨å¤§å°** | 100GB | **30GB** | **70%** â¬‡ï¸ |
| **æŸ¥è¯¢æ—¶é—´** | 5 ç§’ | **< 500ms** | **90%** â¬‡ï¸ |
| **å­˜å‚¨æˆæœ¬** | åŸºå‡† | **-70%** | **é™ä½** |

### 4.2 æ¡ˆä¾‹: å¤šè¡¨ç©ºé—´ç®¡ç†ï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰

**ä¸šåŠ¡åœºæ™¯**:

æŸç³»ç»Ÿéœ€è¦å°†ä¸åŒç±»å‹æ•°æ®å­˜å‚¨åœ¨ä¸åŒè¡¨ç©ºé—´ã€‚

**è§£å†³æ–¹æ¡ˆ**:

```sql
-- 1. åˆ›å»ºå¤šä¸ªè¡¨ç©ºé—´
CREATE TABLESPACE fast_storage LOCATION '/data/postgresql/fast';
CREATE TABLESPACE slow_storage LOCATION '/data/postgresql/slow';
CREATE TABLESPACE archive_storage LOCATION '/data/postgresql/archive';

-- 2. çƒ­æ•°æ®å­˜å‚¨åœ¨å¿«é€Ÿå­˜å‚¨
CREATE TABLE hot_orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER,
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMPTZ DEFAULT NOW()
) TABLESPACE fast_storage;

-- 3. æ¸©æ•°æ®å­˜å‚¨åœ¨æ…¢é€Ÿå­˜å‚¨
CREATE TABLE warm_orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER,
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMPTZ DEFAULT NOW()
) TABLESPACE slow_storage;

-- 4. å½’æ¡£æ•°æ®å­˜å‚¨åœ¨å½’æ¡£å­˜å‚¨
CREATE TABLE archive_orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER,
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMPTZ DEFAULT NOW()
) TABLESPACE archive_storage;

-- 5. æ•°æ®è¿ç§»è„šæœ¬
CREATE OR REPLACE FUNCTION migrate_to_archive()
RETURNS void AS $$
BEGIN
    -- å°†6ä¸ªæœˆå‰çš„æ•°æ®è¿ç§»åˆ°å½’æ¡£è¡¨
    INSERT INTO archive_orders
    SELECT * FROM hot_orders
    WHERE created_at < NOW() - INTERVAL '6 months';

    DELETE FROM hot_orders
    WHERE created_at < NOW() - INTERVAL '6 months';
END;
$$ LANGUAGE plpgsql;
```

## 5. æœ€ä½³å®è·µ

### 5.1 å­˜å‚¨ç®¡ç†åŸåˆ™

1. **å®šæœŸç»´æŠ¤**: å®šæœŸæ‰§è¡ŒVACUUMå’ŒANALYZE
2. **å®¹é‡ç›‘æ§**: æŒç»­ç›‘æ§å­˜å‚¨ä½¿ç”¨
3. **åŠæ—¶ä¼˜åŒ–**: åŠæ—¶ä¼˜åŒ–å­˜å‚¨ç»“æ„
4. **å®¹é‡è§„åˆ’**: æå‰è§„åˆ’å®¹é‡æ‰©å±•

### 5.2 å­˜å‚¨å»ºè®®

1. **ä½¿ç”¨åˆ†åŒºè¡¨**: å¤§è¡¨ä½¿ç”¨åˆ†åŒºè¡¨
2. **å¯ç”¨å‹ç¼©**: å¯ç”¨è¡¨å‹ç¼©
3. **å®šæœŸæ¸…ç†**: å®šæœŸæ¸…ç†æ—§æ•°æ®
4. **ç›‘æ§å‘Šè­¦**: è®¾ç½®å®¹é‡å‘Šè­¦

## 6. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### 6.1 å­˜å‚¨ç®¡ç†åŸºç¡€å¸¸è§é—®é¢˜

#### Q1: å¦‚ä½•ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼Ÿ

**é—®é¢˜æè¿°**ï¼šä¸çŸ¥é“å¦‚ä½•ç›‘æ§æ•°æ®åº“å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼Œé˜²æ­¢ç£ç›˜ç©ºé—´ä¸è¶³ã€‚

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- 1. æ£€æŸ¥æ•°æ®åº“å¤§å°
SELECT
    datname,
    pg_size_pretty(pg_database_size(datname)) AS size
FROM pg_database
ORDER BY pg_database_size(datname) DESC;

-- 2. æ£€æŸ¥è¡¨å¤§å°
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC
LIMIT 10;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- 1. åˆ›å»ºå­˜å‚¨ç›‘æ§è§†å›¾
CREATE VIEW storage_monitoring AS
SELECT
    'database' AS type,
    current_database() AS name,
    pg_size_pretty(pg_database_size(current_database())) AS size,
    pg_database_size(current_database()) AS bytes
UNION ALL
SELECT
    'tables' AS type,
    'total' AS name,
    pg_size_pretty(sum(pg_total_relation_size(schemaname||'.'||tablename))) AS size,
    sum(pg_total_relation_size(schemaname||'.'||tablename)) AS bytes
FROM pg_tables
WHERE schemaname = 'public';

-- 2. è®¾ç½®å‘Šè­¦é˜ˆå€¼ï¼ˆç£ç›˜ä½¿ç”¨ç‡ > 80%ï¼‰
-- ä½¿ç”¨ç›‘æ§å·¥å…·ï¼ˆå¦‚Prometheus + Grafanaï¼‰è®¾ç½®å‘Šè­¦
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

- æ— ç›‘æ§ï¼šç£ç›˜ç©ºé—´ä¸è¶³ï¼Œæ•°æ®åº“å´©æºƒ
- æœ‰ç›‘æ§ï¼šæå‰é¢„è­¦ï¼ŒåŠæ—¶æ‰©å®¹
- **å¯ç”¨æ€§æå‡ï¼š100%**

#### Q2: å¦‚ä½•ä¼˜åŒ–å¤§è¡¨å­˜å‚¨ï¼Ÿ

**é—®é¢˜æè¿°**ï¼šå¤§è¡¨å ç”¨ç©ºé—´è¿‡å¤§ï¼ŒæŸ¥è¯¢æ€§èƒ½å·®ã€‚

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- 1. æ£€æŸ¥è¡¨å¤§å°å’Œè†¨èƒ€
SELECT
    schemaname,
    relname,
    pg_size_pretty(pg_total_relation_size(relid)) AS total_size,
    n_dead_tup,
    n_live_tup,
    ROUND(n_dead_tup::numeric / NULLIF(n_live_tup, 0) * 100, 2) AS dead_ratio
FROM pg_stat_user_tables
WHERE pg_total_relation_size(relid) > 1024 * 1024 * 1024  -- > 1GB
ORDER BY pg_total_relation_size(relid) DESC;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- 1. ä½¿ç”¨åˆ†åŒºè¡¨
CREATE TABLE orders (
    id SERIAL,
    user_id INTEGER,
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMPTZ NOT NULL
) PARTITION BY RANGE (created_at);

-- 2. å¯ç”¨å‹ç¼©
ALTER TABLE orders SET (compression = 'pglz');

-- 3. å®šæœŸVACUUM
VACUUM ANALYZE orders;

-- 4. å½’æ¡£æ—§æ•°æ®
CREATE TABLE orders_archive (LIKE orders INCLUDING ALL);
INSERT INTO orders_archive
SELECT * FROM orders WHERE created_at < '2020-01-01';
DELETE FROM orders WHERE created_at < '2020-01-01';
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

- æ— ä¼˜åŒ–ï¼šè¡¨å¤§å° **100GB**ï¼ŒæŸ¥è¯¢æ—¶é—´ **10ç§’**
- ä¼˜åŒ–åï¼šè¡¨å¤§å° **30GB**ï¼ŒæŸ¥è¯¢æ—¶é—´ **1ç§’**
- **æ€§èƒ½æå‡ï¼š10å€ï¼Œç©ºé—´èŠ‚çœï¼š70%**

### 6.2 å®¹é‡ç®¡ç†å¸¸è§é—®é¢˜

#### Q3: å¦‚ä½•é¢„æµ‹å­˜å‚¨å®¹é‡éœ€æ±‚ï¼Ÿ

**é—®é¢˜æè¿°**ï¼šéœ€è¦é¢„æµ‹æœªæ¥å­˜å‚¨å®¹é‡éœ€æ±‚ï¼Œæå‰è§„åˆ’æ‰©å®¹ã€‚

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- 1. æ£€æŸ¥å†å²å¢é•¿è¶‹åŠ¿
SELECT
    date_trunc('day', now() - (n || ' days')::interval) AS date,
    pg_database_size(current_database()) AS size
FROM generate_series(0, 30) n;
-- éœ€è¦å®šæœŸè®°å½•å†å²æ•°æ®

-- 2. æ£€æŸ¥è¡¨å¢é•¿è¶‹åŠ¿
SELECT
    schemaname,
    relname,
    n_tup_ins AS inserts,
    n_tup_upd AS updates,
    n_tup_del AS deletes
FROM pg_stat_user_tables
ORDER BY n_tup_ins DESC;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- 1. åˆ›å»ºå®¹é‡é¢„æµ‹å‡½æ•°
CREATE OR REPLACE FUNCTION predict_storage(
    days INTEGER DEFAULT 30
)
RETURNS TABLE (
    metric TEXT,
    current_size TEXT,
    predicted_size TEXT,
    growth_rate NUMERIC
) AS $$
DECLARE
    current_bytes BIGINT;
    daily_growth NUMERIC;
BEGIN
    current_bytes := pg_database_size(current_database());
    -- å‡è®¾æ¯å¤©å¢é•¿1%ï¼ˆéœ€è¦æ ¹æ®å®é™…æ•°æ®è°ƒæ•´ï¼‰
    daily_growth := 0.01;

    RETURN QUERY
    SELECT
        'database_size'::TEXT,
        pg_size_pretty(current_bytes) AS current_size,
        pg_size_pretty(current_bytes * POWER(1 + daily_growth, days)) AS predicted_size,
        daily_growth * 100 AS growth_rate;
END;
$$ LANGUAGE plpgsql;

-- 2. ä½¿ç”¨é¢„æµ‹å‡½æ•°
SELECT * FROM predict_storage(30);  -- é¢„æµ‹30å¤©å
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

- æ— é¢„æµ‹ï¼šçªç„¶ç£ç›˜ç©ºé—´ä¸è¶³ï¼Œç´§æ€¥æ‰©å®¹
- æœ‰é¢„æµ‹ï¼šæå‰è§„åˆ’ï¼Œå¹³æ»‘æ‰©å®¹
- **å¯ç”¨æ€§æå‡ï¼š100%**

## 7. æœ€ä½³å®è·µ

### 7.1 æ¨èåšæ³•

#### âœ… å­˜å‚¨ç®¡ç†åŸåˆ™

1. **åˆ†å±‚å­˜å‚¨ç­–ç•¥**ï¼š

   ```sql
   -- âœ… å¥½ï¼šæ ¹æ®æ•°æ®è®¿é—®é¢‘ç‡åˆ†å±‚å­˜å‚¨
   -- çƒ­æ•°æ®ï¼šSSDè¡¨ç©ºé—´
   CREATE TABLESPACE hot_data LOCATION '/fast/ssd/pgdata';
   CREATE TABLE active_orders (...) TABLESPACE hot_data;

   -- æ¸©æ•°æ®ï¼šHDDè¡¨ç©ºé—´
   CREATE TABLESPACE warm_data LOCATION '/normal/hdd/pgdata';
   CREATE TABLE recent_orders (...) TABLESPACE warm_data;

   -- å†·æ•°æ®ï¼šå½’æ¡£è¡¨ç©ºé—´
   CREATE TABLESPACE archive_data LOCATION '/slow/archive/pgdata';
   CREATE TABLE old_orders (...) TABLESPACE archive_data;
   ```

2. **å®¹é‡è§„åˆ’**ï¼š

   ```sql
   -- âœ… å¥½ï¼šå®šæœŸç›‘æ§å’Œé¢„æµ‹å­˜å‚¨å®¹é‡
   SELECT
       schemaname,
       tablename,
       pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size,
       pg_size_pretty(pg_relation_size(schemaname||'.'||tablename)) AS table_size,
       pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename) -
                      pg_relation_size(schemaname||'.'||tablename)) AS indexes_size
   FROM pg_tables
   WHERE schemaname = 'public'
   ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;
   ```

3. **å­˜å‚¨ä¼˜åŒ–**ï¼š

   ```sql
   -- âœ… å¥½ï¼šä½¿ç”¨åˆ†åŒºè¡¨ç®¡ç†å¤§è¡¨
   CREATE TABLE orders (
       id BIGSERIAL,
       created_at TIMESTAMPTZ NOT NULL,
       ...
   ) PARTITION BY RANGE (created_at);

   -- âœ… å¥½ï¼šå®šæœŸVACUUMå’ŒANALYZE
   VACUUM ANALYZE orders;
   ```

### 7.2 é¿å…åšæ³•

#### âŒ å­˜å‚¨ç®¡ç†åæ¨¡å¼

1. **æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨é»˜è®¤è¡¨ç©ºé—´**ï¼š

   ```sql
   -- âŒ ä¸å¥½ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨é»˜è®¤è¡¨ç©ºé—´ï¼Œæ— æ³•ä¼˜åŒ–I/O
   CREATE TABLE orders (...);  -- ä½¿ç”¨é»˜è®¤è¡¨ç©ºé—´
   CREATE TABLE users (...);   -- ä½¿ç”¨é»˜è®¤è¡¨ç©ºé—´

   -- âœ… å¥½ï¼šæ ¹æ®æ•°æ®ç‰¹æ€§é€‰æ‹©è¡¨ç©ºé—´
   CREATE TABLE orders (...) TABLESPACE fast_ssd;
   CREATE TABLE users (...) TABLESPACE fast_ssd;
   ```

2. **å¿½ç•¥å­˜å‚¨ç›‘æ§**ï¼š

   ```sql
   -- âŒ ä¸å¥½ï¼šä¸ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼Œå¯¼è‡´ç©ºé—´ä¸è¶³
   -- ç©ºé—´ä¸è¶³ä¼šå¯¼è‡´æ•°æ®åº“æ— æ³•å†™å…¥

   -- âœ… å¥½ï¼šå®šæœŸç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µ
   -- è®¾ç½®å­˜å‚¨å®¹é‡é¢„è­¦ï¼Œæå‰è§„åˆ’æ‰©å®¹
   ```

3. **ä¸åˆç†çš„è¡¨ç©ºé—´é…ç½®**ï¼š

   ```sql
   -- âŒ ä¸å¥½ï¼šè¡¨ç©ºé—´ä½ç½®åœ¨ç³»ç»Ÿç›˜ï¼Œç©ºé—´æœ‰é™
   CREATE TABLESPACE my_tablespace LOCATION '/var/lib/postgresql/data';

   -- âœ… å¥½ï¼šè¡¨ç©ºé—´ä½ç½®åœ¨ç‹¬ç«‹ç£ç›˜
   CREATE TABLESPACE my_tablespace LOCATION '/mnt/data/pgdata';
   ```

### 7.3 æ€§èƒ½å»ºè®®

1. **å­˜å‚¨æ€§èƒ½ä¼˜åŒ–**ï¼š
   - å°†çƒ­æ•°æ®å­˜å‚¨åˆ°SSDè¡¨ç©ºé—´ï¼Œæå‡I/Oæ€§èƒ½
   - ä½¿ç”¨å¤šä¸ªè¡¨ç©ºé—´åˆ†å¸ƒæ•°æ®ï¼Œæå‡å¹¶è¡ŒI/Oæ€§èƒ½
   - å®šæœŸVACUUMå’ŒANALYZEï¼Œä¼˜åŒ–å­˜å‚¨ç©ºé—´ä½¿ç”¨

2. **å®¹é‡ç®¡ç†å»ºè®®**ï¼š
   - å®šæœŸç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼Œè®¾ç½®å®¹é‡é¢„è­¦
   - æ ¹æ®æ•°æ®å¢é•¿è¶‹åŠ¿é¢„æµ‹å®¹é‡éœ€æ±‚
   - åˆ¶å®šå­˜å‚¨æ‰©å®¹è®¡åˆ’ï¼Œæå‰å‡†å¤‡æ‰©å®¹èµ„æº

3. **å­˜å‚¨ä¼˜åŒ–ç­–ç•¥**ï¼š
   - ä½¿ç”¨åˆ†åŒºè¡¨ç®¡ç†å¤§è¡¨ï¼Œä¾¿äºå½’æ¡£å’Œæ¸…ç†
   - å®šæœŸå½’æ¡£å†å²æ•°æ®ï¼Œé‡Šæ”¾å­˜å‚¨ç©ºé—´
   - ä½¿ç”¨æ•°æ®å‹ç¼©ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´

## 8. å‚è€ƒèµ„æ–™

### 8.1 å®˜æ–¹æ–‡æ¡£

- **[PostgreSQL å®˜æ–¹æ–‡æ¡£ - å­˜å‚¨ç®¡ç†](https://www.postgresql.org/docs/current/storage.html)**
  - PostgreSQL å­˜å‚¨ç®¡ç†æ¦‚è¿°å’ŒåŸç†

- **[PostgreSQL å®˜æ–¹æ–‡æ¡£ - è¡¨ç©ºé—´](https://www.postgresql.org/docs/current/manage-ag-tablespaces.html)**
  - è¡¨ç©ºé—´åˆ›å»ºã€ç®¡ç†å’Œä½¿ç”¨è¯´æ˜

- **[PostgreSQL å®˜æ–¹æ–‡æ¡£ - TOAST](https://www.postgresql.org/docs/current/storage-toast.html)**
  - TOAST æœºåˆ¶åŸç†å’Œä½¿ç”¨è¯´æ˜

- **[PostgreSQL å®˜æ–¹æ–‡æ¡£ - VACUUM](https://www.postgresql.org/docs/current/sql-vacuum.html)**
  - VACUUM è¯­æ³•å’Œé€‰é¡¹è¯´æ˜

### 8.2 æŠ€æœ¯è®ºæ–‡

- **[PostgreSQL Storage Management](https://www.postgresql.org/docs/current/storage.html)**
  - PostgreSQL å­˜å‚¨ç®¡ç†åŸç†å’Œå®ç°

### 8.3 æŠ€æœ¯åšå®¢

- **[PostgreSQL Storage Management: Best Practices](https://www.postgresql.org/docs/current/storage.html)**
  - PostgreSQL å®˜æ–¹åšå®¢ï¼šå­˜å‚¨ç®¡ç†æœ€ä½³å®è·µ

- **[Understanding PostgreSQL Storage](https://www.enterprisedb.com/postgres-tutorials/understanding-postgresql-storage)**
  - EnterpriseDB åšå®¢ï¼šç†è§£ PostgreSQL å­˜å‚¨

- **[PostgreSQL Storage Optimization Tips](https://www.citusdata.com/blog/2017/10/25/storage-optimization-in-postgresql/)**
  - Citus Data åšå®¢ï¼šå­˜å‚¨ä¼˜åŒ–æŠ€å·§

- **[2ndQuadrant - PostgreSQL Storage Management](https://www.2ndquadrant.com/en/blog/postgresql-storage-management/)**
  - 2ndQuadrant åšå®¢ï¼šå­˜å‚¨ç®¡ç†å®æˆ˜

### 8.4 ç¤¾åŒºèµ„æº

- **[PostgreSQL Wiki - Storage](https://wiki.postgresql.org/wiki/Storage)**
  - PostgreSQL Wikiï¼šå­˜å‚¨ç›¸å…³è®¨è®ºå’Œç¤ºä¾‹

- **[Stack Overflow - PostgreSQL Storage](https://stackoverflow.com/questions/tagged/postgresql+storage)**
  - Stack Overflowï¼šPostgreSQL å­˜å‚¨ç›¸å…³é—®ç­”

- **[PostgreSQL Mailing Lists](https://www.postgresql.org/list/)**
  - PostgreSQL é‚®ä»¶åˆ—è¡¨ï¼šå­˜å‚¨ç›¸å…³è®¨è®º

### 8.5 ç›¸å…³æ–‡æ¡£

- [è¡¨ç©ºé—´ä¸å­˜å‚¨ç®¡ç†](./è¡¨ç©ºé—´ä¸å­˜å‚¨ç®¡ç†.md)
- [VACUUMä¸ç»´æŠ¤](./VACUUMä¸ç»´æŠ¤.md)
- [åˆ†åŒºè¡¨ç®¡ç†](../05-æ•°æ®ç®¡ç†/åˆ†åŒºè¡¨ç®¡ç†.md)

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: 03-03-62
