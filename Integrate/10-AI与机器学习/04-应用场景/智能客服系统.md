---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQL_AI\04-åº”ç”¨åœºæ™¯\æ™ºèƒ½å®¢æœç³»ç»Ÿ.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# æ™ºèƒ½å®¢æœç³»ç»Ÿ

> **æ–‡æ¡£ç¼–å·**: AI-04-05
> **æœ€åæ›´æ–°**: 2025å¹´1æœˆ
> **ä¸»é¢˜**: 04-åº”ç”¨åœºæ™¯
> **å­ä¸»é¢˜**: 05-æ™ºèƒ½å®¢æœç³»ç»Ÿ

## ğŸ“‘ ç›®å½•

- [æ™ºèƒ½å®¢æœç³»ç»Ÿ](#æ™ºèƒ½å®¢æœç³»ç»Ÿ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ä¸€ã€æ¦‚è¿°](#ä¸€æ¦‚è¿°)
    - [1.1 æ™ºèƒ½å®¢æœç³»ç»Ÿæ€ç»´å¯¼å›¾](#11-æ™ºèƒ½å®¢æœç³»ç»Ÿæ€ç»´å¯¼å›¾)
  - [äºŒã€æ¶æ„è®¾è®¡](#äºŒæ¶æ„è®¾è®¡)
    - [2.1 ç³»ç»Ÿæ¶æ„](#21-ç³»ç»Ÿæ¶æ„)
    - [2.2 æ•°æ®æµ](#22-æ•°æ®æµ)
  - [ä¸‰ã€æ•°æ®æ¨¡å‹è®¾è®¡](#ä¸‰æ•°æ®æ¨¡å‹è®¾è®¡)
    - [3.1 çŸ¥è¯†åº“è¡¨](#31-çŸ¥è¯†åº“è¡¨)
    - [3.2 å¯¹è¯è®°å½•è¡¨](#32-å¯¹è¯è®°å½•è¡¨)
    - [3.3 ç”¨æˆ·åé¦ˆè¡¨](#33-ç”¨æˆ·åé¦ˆè¡¨)
  - [å››ã€æ ¸å¿ƒåŠŸèƒ½å®ç°](#å››æ ¸å¿ƒåŠŸèƒ½å®ç°)
    - [4.1 çŸ¥è¯†åº“æ„å»º](#41-çŸ¥è¯†åº“æ„å»º)
    - [4.2 è¯­ä¹‰æ£€ç´¢](#42-è¯­ä¹‰æ£€ç´¢)
    - [4.3 å¯¹è¯ç®¡ç†](#43-å¯¹è¯ç®¡ç†)
    - [4.4 å¤šè½®å¯¹è¯æ”¯æŒ](#44-å¤šè½®å¯¹è¯æ”¯æŒ)
  - [äº”ã€LLMé›†æˆ](#äº”llmé›†æˆ)
    - [5.1 ä½¿ç”¨pgaiè°ƒç”¨LLM](#51-ä½¿ç”¨pgaiè°ƒç”¨llm)
    - [5.2 RAGå¢å¼ºç”Ÿæˆ](#52-ragå¢å¼ºç”Ÿæˆ)
    - [5.3 ä¸Šä¸‹æ–‡ç®¡ç†](#53-ä¸Šä¸‹æ–‡ç®¡ç†)
  - [å…­ã€æ€§èƒ½ä¼˜åŒ–](#å…­æ€§èƒ½ä¼˜åŒ–)
    - [6.1 æ£€ç´¢ä¼˜åŒ–](#61-æ£€ç´¢ä¼˜åŒ–)
    - [6.2 ç¼“å­˜ç­–ç•¥](#62-ç¼“å­˜ç­–ç•¥)
    - [6.3 å¹¶å‘å¤„ç†](#63-å¹¶å‘å¤„ç†)
  - [ä¸ƒã€æ•ˆæœè¯„ä¼°](#ä¸ƒæ•ˆæœè¯„ä¼°)
    - [7.1 å‡†ç¡®ç‡è¯„ä¼°](#71-å‡†ç¡®ç‡è¯„ä¼°)
    - [7.2 ç”¨æˆ·æ»¡æ„åº¦](#72-ç”¨æˆ·æ»¡æ„åº¦)
    - [7.3 æˆæœ¬åˆ†æ](#73-æˆæœ¬åˆ†æ)
  - [å…«ã€å…³è”ä¸»é¢˜](#å…«å…³è”ä¸»é¢˜)
  - [ä¹ã€å¯¹æ ‡èµ„æº](#ä¹å¯¹æ ‡èµ„æº)
    - [ä¼ä¸šæ¡ˆä¾‹](#ä¼ä¸šæ¡ˆä¾‹)
    - [æŠ€æœ¯æ–‡æ¡£](#æŠ€æœ¯æ–‡æ¡£)

## ä¸€ã€æ¦‚è¿°

åŸºäºPostgreSQLæ„å»ºçš„æ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œç»“åˆpgvectorè¯­ä¹‰æ£€ç´¢å’Œpgai LLMè°ƒç”¨ï¼Œå®ç°çŸ¥è¯†åº“é—®ç­”ã€å¤šè½®å¯¹è¯å’Œæ™ºèƒ½æ¨èï¼Œæä¾›7x24å°æ—¶è‡ªåŠ¨åŒ–å®¢æœæœåŠ¡ã€‚

### 1.1 æ™ºèƒ½å®¢æœç³»ç»Ÿæ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((æ™ºèƒ½å®¢æœç³»ç»Ÿ))
    æ ¸å¿ƒåŠŸèƒ½
      çŸ¥è¯†åº“æ„å»º
        æ–‡æ¡£å‘é‡åŒ–
        çŸ¥è¯†ç´¢å¼•
      è¯­ä¹‰æ£€ç´¢
        å‘é‡æ£€ç´¢
        æ··åˆæŸ¥è¯¢
      å¯¹è¯ç®¡ç†
        å¤šè½®å¯¹è¯
        ä¸Šä¸‹æ–‡ç®¡ç†
      LLMé›†æˆ
        RAGå¢å¼º
        æ™ºèƒ½ç”Ÿæˆ
    æŠ€æœ¯æ¶æ„
      PostgreSQL
        pgvector
        pgai
      æ•°æ®æ¨¡å‹
        çŸ¥è¯†åº“è¡¨
        å¯¹è¯è®°å½•è¡¨
    æ€§èƒ½ä¼˜åŒ–
      æ£€ç´¢ä¼˜åŒ–
        ç´¢å¼•ä¼˜åŒ–
        æŸ¥è¯¢ä¼˜åŒ–
      ç¼“å­˜ç­–ç•¥
        ç»“æœç¼“å­˜
        å‘é‡ç¼“å­˜
    ä¸šåŠ¡æ•ˆæœ
      å‡†ç¡®ç‡æå‡
      ç”¨æˆ·æ»¡æ„åº¦
      æˆæœ¬é™ä½
```

## äºŒã€æ¶æ„è®¾è®¡

### 2.1 ç³»ç»Ÿæ¶æ„

```mermaid
graph TD
    A[ç”¨æˆ·æé—®] --> B[è¯­ä¹‰æ£€ç´¢]
    B --> C[PostgreSQLçŸ¥è¯†åº“]
    C --> D[ç›¸å…³æ–‡æ¡£æ£€ç´¢]
    D --> E[LLMç”Ÿæˆå›ç­”]
    E --> F[è¿”å›å›ç­”]

    G[çŸ¥è¯†åº“] --> H[è‡ªåŠ¨å‘é‡åŒ–]
    H --> C

    I[å¯¹è¯å†å²] --> J[ä¸Šä¸‹æ–‡ç®¡ç†]
    J --> E
```

### 2.2 æ•°æ®æµ

1. **çŸ¥è¯†åº“æ„å»ºæµ**:
   - æ–‡æ¡£å¯¼å…¥ â†’ è‡ªåŠ¨å‘é‡åŒ– â†’ å­˜å‚¨åˆ°PostgreSQL

2. **é—®ç­”æµ**:
   - ç”¨æˆ·æé—® â†’ å‘é‡æ£€ç´¢ â†’ ä¸Šä¸‹æ–‡æ„å»º â†’ LLMç”Ÿæˆ â†’ è¿”å›å›ç­”

3. **å­¦ä¹ æµ**:
   - ç”¨æˆ·åé¦ˆ â†’ çŸ¥è¯†åº“æ›´æ–° â†’ æ¨¡å‹ä¼˜åŒ–

## ä¸‰ã€æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 çŸ¥è¯†åº“è¡¨

```sql
-- çŸ¥è¯†åº“æ–‡æ¡£è¡¨
CREATE TABLE knowledge_base (
    id SERIAL PRIMARY KEY,
    title TEXT NOT NULL,
    content TEXT NOT NULL,
    category TEXT,
    tags TEXT[],
    content_vector vector(1536),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    metadata JSONB
);

-- å‘é‡ç´¢å¼•
CREATE INDEX ON knowledge_base
USING hnsw (content_vector vector_cosine_ops)
WITH (m = 16, ef_construction = 100);

-- åˆ†ç±»ç´¢å¼•
CREATE INDEX ON knowledge_base (category);
CREATE INDEX ON knowledge_base USING GIN (tags);
```

### 3.2 å¯¹è¯è®°å½•è¡¨

```sql
-- å¯¹è¯è®°å½•è¡¨
CREATE TABLE conversations (
    id SERIAL PRIMARY KEY,
    user_id TEXT,
    session_id TEXT,
    question TEXT NOT NULL,
    answer TEXT NOT NULL,
    question_vector vector(1536),
    retrieved_docs INTEGER[],  -- æ£€ç´¢åˆ°çš„æ–‡æ¡£ID
    confidence_score DECIMAL(5,4),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    metadata JSONB
);

-- ä¼šè¯ç´¢å¼•
CREATE INDEX ON conversations (session_id, created_at DESC);
CREATE INDEX ON conversations (user_id, created_at DESC);
```

### 3.3 ç”¨æˆ·åé¦ˆè¡¨

```sql
-- ç”¨æˆ·åé¦ˆè¡¨
CREATE TABLE user_feedback (
    id SERIAL PRIMARY KEY,
    conversation_id INTEGER REFERENCES conversations(id),
    user_id TEXT,
    rating INTEGER,  -- 1-5åˆ†
    feedback_text TEXT,
    helpful BOOLEAN,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- åé¦ˆç´¢å¼•
CREATE INDEX ON user_feedback (conversation_id);
CREATE INDEX ON user_feedback (rating, created_at DESC);
```

## å››ã€æ ¸å¿ƒåŠŸèƒ½å®ç°

### 4.1 çŸ¥è¯†åº“æ„å»º

```sql
-- ä½¿ç”¨pgai Vectorizerè‡ªåŠ¨æ„å»ºçŸ¥è¯†åº“
SELECT ai.create_vectorizer(
    'knowledge_base'::regclass,
    destination => 'knowledge_embeddings',
    embedding => ai.embedding_openai('text-embedding-3-small', 'content'),
    chunking => ai.chunking_recursive_character_text_splitter(
        'content',
        chunk_size => 500,
        chunk_overlap => 50
    )
);

-- æ‰¹é‡å¯¼å…¥çŸ¥è¯†
INSERT INTO knowledge_base (title, content, category)
VALUES
    ('äº§å“ä»‹ç»', 'æˆ‘ä»¬çš„äº§å“æ˜¯...', 'product'),
    ('ä½¿ç”¨æŒ‡å—', 'ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹...', 'guide'),
    ('å¸¸è§é—®é¢˜', 'Q: å¦‚ä½•... A: ...', 'faq');
-- è‡ªåŠ¨ç”Ÿæˆå‘é‡
```

### 4.2 è¯­ä¹‰æ£€ç´¢

```sql
-- è¯­ä¹‰æ£€ç´¢å‡½æ•°
CREATE OR REPLACE FUNCTION search_knowledge_base(
    p_query_text TEXT,
    p_category TEXT DEFAULT NULL,
    p_limit INTEGER DEFAULT 5
) RETURNS TABLE (
    id INTEGER,
    title TEXT,
    content TEXT,
    similarity DECIMAL,
    category TEXT
) AS $$
DECLARE
    v_query_vector vector(1536);
BEGIN
    -- ç”ŸæˆæŸ¥è¯¢å‘é‡
    v_query_vector := ai.embedding('text-embedding-3-small', p_query_text);

    -- æ£€ç´¢ç›¸å…³æ–‡æ¡£
    RETURN QUERY
    SELECT
        kb.id,
        kb.title,
        kb.content,
        (1 - (kb.content_vector <=> v_query_vector))::DECIMAL(5,4) AS similarity,
        kb.category
    FROM knowledge_base kb
    WHERE (p_category IS NULL OR kb.category = p_category)
      AND kb.content_vector <=> v_query_vector < 0.8
    ORDER BY kb.content_vector <=> v_query_vector
    LIMIT p_limit;
END;
$$ LANGUAGE plpgsql;
```

### 4.3 å¯¹è¯ç®¡ç†

```sql
-- åˆ›å»ºå¯¹è¯
CREATE OR REPLACE FUNCTION create_conversation(
    p_user_id TEXT,
    p_session_id TEXT,
    p_question TEXT
) RETURNS INTEGER AS $$
DECLARE
    v_conversation_id INTEGER;
    v_question_vector vector(1536);
BEGIN
    -- ç”Ÿæˆé—®é¢˜å‘é‡
    v_question_vector := ai.embedding('text-embedding-3-small', p_question);

    -- åˆ›å»ºå¯¹è¯è®°å½•
    INSERT INTO conversations (
        user_id,
        session_id,
        question,
        question_vector
    ) VALUES (
        p_user_id,
        p_session_id,
        p_question,
        v_question_vector
    )
    RETURNING id INTO v_conversation_id;

    RETURN v_conversation_id;
END;
$$ LANGUAGE plpgsql;
```

### 4.4 å¤šè½®å¯¹è¯æ”¯æŒ

```sql
-- è·å–å¯¹è¯å†å²
CREATE OR REPLACE FUNCTION get_conversation_history(
    p_session_id TEXT,
    p_limit INTEGER DEFAULT 10
) RETURNS JSONB AS $$
BEGIN
    RETURN (
        SELECT jsonb_agg(
            jsonb_build_object(
                'question', question,
                'answer', answer,
                'created_at', created_at
            ) ORDER BY created_at DESC
        )
        FROM conversations
        WHERE session_id = p_session_id
        ORDER BY created_at DESC
        LIMIT p_limit
    );
END;
$$ LANGUAGE plpgsql;

-- å¸¦ä¸Šä¸‹æ–‡çš„é—®ç­”
CREATE OR REPLACE FUNCTION answer_with_context(
    p_session_id TEXT,
    p_question TEXT
) RETURNS TEXT AS $$
DECLARE
    v_context TEXT;
    v_answer TEXT;
    v_retrieved_docs INTEGER[];
BEGIN
    -- æ£€ç´¢ç›¸å…³æ–‡æ¡£
    SELECT
        string_agg(content, E'\n\n'),
        array_agg(id)
    INTO v_context, v_retrieved_docs
    FROM search_knowledge_base(p_question, NULL, 5);

    -- è·å–å¯¹è¯å†å²
    DECLARE
        v_history JSONB;
    BEGIN
        v_history := get_conversation_history(p_session_id, 5);

        -- æ„å»ºå®Œæ•´ä¸Šä¸‹æ–‡
        v_context := format('å¯¹è¯å†å²:\n%s\n\nç›¸å…³çŸ¥è¯†:\n%s\n\né—®é¢˜: %s',
            v_history::text, v_context, p_question);
    END;

    -- è°ƒç”¨LLMç”Ÿæˆå›ç­”
    v_answer := ai.chat_complete(
        'gpt-4',
        format('åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜:\n\n%s', v_context)
    )->>'content';

    -- ä¿å­˜å¯¹è¯
    INSERT INTO conversations (
        session_id,
        question,
        answer,
        retrieved_docs,
        confidence_score
    ) VALUES (
        p_session_id,
        p_question,
        v_answer,
        v_retrieved_docs,
        0.8  -- ç½®ä¿¡åº¦åˆ†æ•°
    );

    RETURN v_answer;
END;
$$ LANGUAGE plpgsql;
```

## äº”ã€LLMé›†æˆ

### 5.1 ä½¿ç”¨pgaiè°ƒç”¨LLM

```sql
-- ç®€å•é—®ç­”
CREATE OR REPLACE FUNCTION simple_qa(
    p_question TEXT
) RETURNS TEXT AS $$
BEGIN
    RETURN ai.chat_complete(
        'gpt-4',
        format('è¯·å›ç­”ä»¥ä¸‹é—®é¢˜: %s', p_question)
    )->>'content';
END;
$$ LANGUAGE plpgsql;
```

### 5.2 RAGå¢å¼ºç”Ÿæˆ

```sql
-- RAGå¢å¼ºé—®ç­”
CREATE OR REPLACE FUNCTION rag_qa(
    p_question TEXT,
    p_category TEXT DEFAULT NULL
) RETURNS TEXT AS $$
DECLARE
    v_context TEXT;
    v_answer TEXT;
BEGIN
    -- æ£€ç´¢ç›¸å…³æ–‡æ¡£
    SELECT string_agg(content, E'\n\n')
    INTO v_context
    FROM search_knowledge_base(p_question, p_category, 5);

    -- ä½¿ç”¨RAGç”Ÿæˆå›ç­”
    v_answer := ai.chat_complete(
        'gpt-4',
        format('åŸºäºä»¥ä¸‹çŸ¥è¯†åº“å†…å®¹å›ç­”é—®é¢˜:\n\n%s\n\né—®é¢˜: %s',
            v_context, p_question)
    )->>'content';

    RETURN v_answer;
END;
$$ LANGUAGE plpgsql;
```

### 5.3 ä¸Šä¸‹æ–‡ç®¡ç†

```sql
-- ä¸Šä¸‹æ–‡å‹ç¼©
CREATE OR REPLACE FUNCTION compress_context(
    p_session_id TEXT,
    p_max_tokens INTEGER DEFAULT 4000
) RETURNS TEXT AS $$
DECLARE
    v_context TEXT;
    v_token_count INTEGER;
BEGIN
    -- è·å–å¯¹è¯å†å²
    SELECT
        string_agg(question || ' ' || answer, E'\n\n'),
        COUNT(*) * 100  -- ä¼°ç®—Tokenæ•°
    INTO v_context, v_token_count
    FROM conversations
    WHERE session_id = p_session_id
    ORDER BY created_at DESC
    LIMIT 10;

    -- å¦‚æœè¶…è¿‡é™åˆ¶ï¼Œå‹ç¼©
    IF v_token_count > p_max_tokens THEN
        v_context := ai.chat_complete(
            'gpt-4',
            format('å‹ç¼©ä»¥ä¸‹å¯¹è¯å†å²ï¼Œä¿ç•™å…³é”®ä¿¡æ¯:\n\n%s', v_context)
        )->>'content';
    END IF;

    RETURN v_context;
END;
$$ LANGUAGE plpgsql;
```

## å…­ã€æ€§èƒ½ä¼˜åŒ–

### 6.1 æ£€ç´¢ä¼˜åŒ–

```sql
-- ä½¿ç”¨ç¼“å­˜ä¼˜åŒ–æ£€ç´¢
CREATE TABLE knowledge_cache (
    query_hash TEXT PRIMARY KEY,
    query_vector vector(1536),
    results JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    expires_at TIMESTAMPTZ DEFAULT NOW() + INTERVAL '1 hour'
);

-- ä½¿ç”¨ç¼“å­˜çš„æ£€ç´¢
CREATE OR REPLACE FUNCTION cached_search(
    p_query_text TEXT
) RETURNS JSONB AS $$
DECLARE
    v_query_vector vector(1536);
    v_cache_key TEXT;
    v_results JSONB;
BEGIN
    v_query_vector := ai.embedding('text-embedding-3-small', p_query_text);
    v_cache_key := md5(p_query_text);

    -- æ£€æŸ¥ç¼“å­˜
    SELECT results INTO v_results
    FROM knowledge_cache
    WHERE query_hash = v_cache_key
      AND expires_at > NOW();

    IF v_results IS NOT NULL THEN
        RETURN v_results;
    END IF;

    -- æ£€ç´¢å¹¶ç¼“å­˜
    SELECT jsonb_agg(
        jsonb_build_object(
            'id', id,
            'title', title,
            'content', content,
            'similarity', similarity
        )
    ) INTO v_results
    FROM search_knowledge_base(p_query_text);

    INSERT INTO knowledge_cache (query_hash, query_vector, results)
    VALUES (v_cache_key, v_query_vector, v_results)
    ON CONFLICT (query_hash) DO UPDATE
    SET results = v_results,
        expires_at = NOW() + INTERVAL '1 hour';

    RETURN v_results;
END;
$$ LANGUAGE plpgsql;
```

### 6.2 ç¼“å­˜ç­–ç•¥

```sql
-- çƒ­é—¨é—®é¢˜ç¼“å­˜
CREATE MATERIALIZED VIEW popular_questions AS
SELECT
    question,
    COUNT(*) AS ask_count,
    AVG(rating) AS avg_rating
FROM conversations c
LEFT JOIN user_feedback uf ON c.id = uf.conversation_id
WHERE c.created_at > NOW() - INTERVAL '7 days'
GROUP BY question
ORDER BY ask_count DESC
LIMIT 100;

-- å®šæœŸåˆ·æ–°
REFRESH MATERIALIZED VIEW CONCURRENTLY popular_questions;
```

### 6.3 å¹¶å‘å¤„ç†

```sql
-- ä½¿ç”¨è¿æ¥æ± 
-- PgBounceré…ç½®
pool_mode = transaction
max_client_conn = 10000
default_pool_size = 50

-- å¼‚æ­¥å¤„ç†
CREATE OR REPLACE FUNCTION async_answer(
    p_session_id TEXT,
    p_question TEXT
) RETURNS void AS $$
BEGIN
    -- å¼‚æ­¥ç”Ÿæˆå›ç­”
    PERFORM pg_notify('answer_ready',
        format('{"session_id": "%s", "question": "%s"}',
            p_session_id, p_question));
END;
$$ LANGUAGE plpgsql;
```

## ä¸ƒã€æ•ˆæœè¯„ä¼°

### 7.1 å‡†ç¡®ç‡è¯„ä¼°

```sql
-- å‡†ç¡®ç‡ç»Ÿè®¡
SELECT
    DATE_TRUNC('day', created_at) AS date,
    COUNT(*) AS total_questions,
    COUNT(*) FILTER (WHERE rating >= 4) AS satisfied_count,
    ROUND(100.0 * COUNT(*) FILTER (WHERE rating >= 4) / COUNT(*), 2) AS satisfaction_rate
FROM conversations c
LEFT JOIN user_feedback uf ON c.id = uf.conversation_id
WHERE c.created_at > NOW() - INTERVAL '30 days'
GROUP BY DATE_TRUNC('day', created_at)
ORDER BY date DESC;
```

### 7.2 ç”¨æˆ·æ»¡æ„åº¦

```sql
-- ç”¨æˆ·æ»¡æ„åº¦åˆ†æ
SELECT
    AVG(rating) AS avg_rating,
    COUNT(*) FILTER (WHERE rating = 5) AS excellent_count,
    COUNT(*) FILTER (WHERE rating >= 4) AS good_count,
    COUNT(*) FILTER (WHERE rating < 3) AS poor_count
FROM user_feedback
WHERE created_at > NOW() - INTERVAL '30 days';
```

### 7.3 æˆæœ¬åˆ†æ

```sql
-- APIè°ƒç”¨æˆæœ¬ç»Ÿè®¡
SELECT
    DATE_TRUNC('day', created_at) AS date,
    COUNT(*) AS api_calls,
    COUNT(DISTINCT session_id) AS unique_sessions,
    AVG(LENGTH(answer)) AS avg_answer_length
FROM conversations
WHERE created_at > NOW() - INTERVAL '30 days'
GROUP BY DATE_TRUNC('day', created_at)
ORDER BY date DESC;
```

## å…«ã€å…³è”ä¸»é¢˜

- [RAGç³»ç»Ÿè®¾è®¡](./RAGç³»ç»Ÿè®¾è®¡.md) - RAGæ¶æ„
- [AIåŸç”Ÿè°ƒç”¨ (pgai)](../03-æ ¸å¿ƒèƒ½åŠ›/AIåŸç”Ÿè°ƒç”¨-pgai.md) - LLMè°ƒç”¨
- [å‘é‡å¤„ç†èƒ½åŠ› (pgvector)](../03-æ ¸å¿ƒèƒ½åŠ›/å‘é‡å¤„ç†èƒ½åŠ›-pgvector.md) - è¯­ä¹‰æ£€ç´¢

## ä¹ã€å¯¹æ ‡èµ„æº

### ä¼ä¸šæ¡ˆä¾‹

- **Google Cloud AlloyDB + Vertex AI**: æ™ºèƒ½å®¢æœåº”ç”¨
- **å‡†ç¡®ç‡**: 92%
- **ç”¨æˆ·æ»¡æ„åº¦**: 4.5/5

### æŠ€æœ¯æ–‡æ¡£

- [LangChainå®¢æœç¤ºä¾‹](https://python.langchain.com/docs/use_cases/question_answering/)
- [pgaiæ–‡æ¡£](https://github.com/pgai/pgai)

---

**æœ€åæ›´æ–°**: 2025å¹´1æœˆ
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: AI-04-05
