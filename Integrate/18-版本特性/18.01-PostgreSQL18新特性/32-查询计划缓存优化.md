---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `docs\01-PostgreSQL18\32-æŸ¥è¯¢è®¡åˆ’ç¼“å­˜ä¼˜åŒ–.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# PostgreSQL 18 æŸ¥è¯¢è®¡åˆ’ç¼“å­˜ä¼˜åŒ–

## ğŸ“‘ ç›®å½•

- [PostgreSQL 18 æŸ¥è¯¢è®¡åˆ’ç¼“å­˜ä¼˜åŒ–](#postgresql-18-æŸ¥è¯¢è®¡åˆ’ç¼“å­˜ä¼˜åŒ–)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [2. è®¡åˆ’ç¼“å­˜ç­–ç•¥](#2-è®¡åˆ’ç¼“å­˜ç­–ç•¥)
    - [2.1 Generic vs Custom Plan](#21-generic-vs-custom-plan)
    - [2.2 å¼ºåˆ¶è®¡åˆ’ç±»å‹](#22-å¼ºåˆ¶è®¡åˆ’ç±»å‹)
  - [3. è®¡åˆ’å¤±æ•ˆ](#3-è®¡åˆ’å¤±æ•ˆ)
    - [3.1 ä½•æ—¶å¤±æ•ˆ](#31-ä½•æ—¶å¤±æ•ˆ)
  - [4. è¿æ¥æ± ä¸­çš„Prepared Statements](#4-è¿æ¥æ± ä¸­çš„prepared-statements)
    - [4.1 PgBounceré™åˆ¶](#41-pgbounceré™åˆ¶)
    - [4.2 åº”ç”¨å±‚å¤„ç†](#42-åº”ç”¨å±‚å¤„ç†)
  - [5. æŸ¥è¯¢è®¡åˆ’ç›‘æ§](#5-æŸ¥è¯¢è®¡åˆ’ç›‘æ§)
    - [5.1 æŸ¥çœ‹æ´»è·ƒè®¡åˆ’](#51-æŸ¥çœ‹æ´»è·ƒè®¡åˆ’)
  - [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)
    - [6.1 è®¡åˆ’ç¼“å­˜æ€§èƒ½åˆ†æ](#61-è®¡åˆ’ç¼“å­˜æ€§èƒ½åˆ†æ)
    - [6.2 è®¡åˆ’ç¼“å­˜ä¼˜åŒ–ç­–ç•¥](#62-è®¡åˆ’ç¼“å­˜ä¼˜åŒ–ç­–ç•¥)
    - [6.3 PostgreSQL 18è®¡åˆ’ç¼“å­˜æ–°ç‰¹æ€§](#63-postgresql-18è®¡åˆ’ç¼“å­˜æ–°ç‰¹æ€§)
    - [6.4 è®¡åˆ’ç¼“å­˜æ•…éšœè¯Šæ–­](#64-è®¡åˆ’ç¼“å­˜æ•…éšœè¯Šæ–­)
    - [6.5 è®¡åˆ’ç¼“å­˜æœ€ä½³å®è·µæ€»ç»“](#65-è®¡åˆ’ç¼“å­˜æœ€ä½³å®è·µæ€»ç»“)

---

## 2. è®¡åˆ’ç¼“å­˜ç­–ç•¥

### 2.1 Generic vs Custom Plan

```sql
-- æ€§èƒ½æµ‹è¯•ï¼šPostgreSQLè‡ªåŠ¨é€‰æ‹©é€šç”¨æˆ–è‡ªå®šä¹‰è®¡åˆ’ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
BEGIN;
PREPARE user_query (INT) AS
SELECT * FROM users WHERE user_id = $1;
COMMIT;
EXCEPTION
    WHEN duplicate_prepared_statement THEN
        RAISE NOTICE 'preparedè¯­å¥user_queryå·²å­˜åœ¨';
    WHEN OTHERS THEN
        RAISE NOTICE 'å‡†å¤‡è¯­å¥å¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;

-- æ€§èƒ½æµ‹è¯•ï¼šå‰5æ¬¡ï¼šä½¿ç”¨custom planï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
BEGIN;
EXECUTE user_query(1);
EXECUTE user_query(2);
EXECUTE user_query(3);
EXECUTE user_query(4);
EXECUTE user_query(5);
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'æ‰§è¡Œpreparedè¯­å¥å¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;

-- ç¬¬6æ¬¡ï¼šè¯„ä¼°generic plan
-- å¦‚æœgeneric planå¹³å‡æˆæœ¬ <= custom planå¹³å‡æˆæœ¬
-- åˆ™åˆ‡æ¢åˆ°generic plan

-- æ€§èƒ½æµ‹è¯•ï¼šæŸ¥çœ‹è®¡åˆ’ç±»å‹ï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½åˆ†æï¼‰
BEGIN;
EXPLAIN (ANALYZE, BUFFERS, TIMING) EXECUTE user_query(123);
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'æŸ¥çœ‹è®¡åˆ’ç±»å‹å¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;
```

### 2.2 å¼ºåˆ¶è®¡åˆ’ç±»å‹

```sql
-- æ€§èƒ½æµ‹è¯•ï¼šå¼ºåˆ¶custom planï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
BEGIN;
SET LOCAL plan_cache_mode = 'force_custom_plan';
RAISE NOTICE 'å·²è®¾ç½®ä¸ºforce_custom_plan';
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'è®¾ç½®plan_cache_modeå¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;

-- æ€§èƒ½æµ‹è¯•ï¼šå¼ºåˆ¶generic planï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
BEGIN;
SET LOCAL plan_cache_mode = 'force_generic_plan';
RAISE NOTICE 'å·²è®¾ç½®ä¸ºforce_generic_plan';
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'è®¾ç½®plan_cache_modeå¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;

-- æ€§èƒ½æµ‹è¯•ï¼šè‡ªåŠ¨é€‰æ‹©ï¼ˆé»˜è®¤ï¼‰ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰
BEGIN;
SET LOCAL plan_cache_mode = 'auto';
RAISE NOTICE 'å·²è®¾ç½®ä¸ºautoï¼ˆé»˜è®¤ï¼‰';
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'è®¾ç½®plan_cache_modeå¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;
```

---

## 3. è®¡åˆ’å¤±æ•ˆ

### 3.1 ä½•æ—¶å¤±æ•ˆ

```sql
-- æ€§èƒ½æµ‹è¯•ï¼šå¯¼è‡´è®¡åˆ’å¤±æ•ˆçš„æ“ä½œï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰

-- 1. è¡¨ç»“æ„æ”¹å˜
BEGIN;
ALTER TABLE users ADD COLUMN IF NOT EXISTS status VARCHAR(20);
COMMIT;
EXCEPTION
    WHEN duplicate_column THEN
        RAISE NOTICE 'åˆ—statuså·²å­˜åœ¨';
    WHEN OTHERS THEN
        RAISE NOTICE 'æ·»åŠ åˆ—å¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;
-- prepared statementè‡ªåŠ¨å¤±æ•ˆ

-- 2. ç»Ÿè®¡ä¿¡æ¯æ›´æ–°
BEGIN;
ANALYZE users;
COMMIT;
EXCEPTION
    WHEN undefined_table THEN
        RAISE NOTICE 'è¡¨usersä¸å­˜åœ¨';
    WHEN OTHERS THEN
        RAISE NOTICE 'ANALYZEå¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;
-- custom plané‡æ–°ç”Ÿæˆ

-- 3. é…ç½®å‚æ•°æ”¹å˜
BEGIN;
SET LOCAL work_mem = '512MB';
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'è®¾ç½®work_memå¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;
-- å½±å“è®¡åˆ’é€‰æ‹©

-- 4. ä¼šè¯æ–­å¼€
-- prepared statementä¸¢å¤±
```

---

## 4. è¿æ¥æ± ä¸­çš„Prepared Statements

### 4.1 PgBounceré™åˆ¶

```ini
# pgbouncer.ini
pool_mode = transaction  # ä¸æ”¯æŒprepared statements

# è§£å†³æ–¹æ¡ˆ:
# 1. ä½¿ç”¨sessionæ¨¡å¼
pool_mode = session

# 2. æˆ–ä½¿ç”¨server_reset_queryæ¸…ç†
server_reset_query = DISCARD ALL

# 3. æˆ–ä¸ä½¿ç”¨prepared statements
```

### 4.2 åº”ç”¨å±‚å¤„ç†

```python
# Django: ç¦ç”¨server-side prepared statements
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'OPTIONS': {
            'options': '-c statement_timeout=30000 -c idle_in_transaction_session_timeout=60000'
        }
    }
}

# ä½¿ç”¨client-side bindingè€Œéserver-side prepared
```

---

## 5. æŸ¥è¯¢è®¡åˆ’ç›‘æ§

### 5.1 æŸ¥çœ‹æ´»è·ƒè®¡åˆ’

```sql
-- æ€§èƒ½æµ‹è¯•ï¼šæŸ¥çœ‹prepared statementsï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½åˆ†æï¼‰
BEGIN;
EXPLAIN (ANALYZE, BUFFERS, TIMING)
SELECT
    name,
    statement,
    prepare_time,
    parameter_types,
    from_sql  -- æ˜¯å¦æ¥è‡ªSQL PREPAREå‘½ä»¤
FROM pg_prepared_statements;
COMMIT;
EXCEPTION
    WHEN OTHERS THEN
        RAISE NOTICE 'æŸ¥è¯¢prepared statementså¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;

-- æ€§èƒ½æµ‹è¯•ï¼šæŸ¥çœ‹æ‰§è¡Œç»Ÿè®¡ï¼ˆå¸¦é”™è¯¯å¤„ç†å’Œæ€§èƒ½åˆ†æï¼‰
BEGIN;
EXPLAIN (ANALYZE, BUFFERS, TIMING)
SELECT
    LEFT(query, 100) AS query,
    calls,
    mean_exec_time,
    plans,
    mean_plan_time
FROM pg_stat_statements
WHERE query LIKE 'EXECUTE%'
ORDER BY calls DESC
LIMIT 20;
COMMIT;
EXCEPTION
    WHEN undefined_table THEN
        RAISE NOTICE 'pg_stat_statementsæ‰©å±•æœªå®‰è£…';
    WHEN OTHERS THEN
        RAISE NOTICE 'æŸ¥è¯¢æ‰§è¡Œç»Ÿè®¡å¤±è´¥: %', SQLERRM;
        ROLLBACK;
        RAISE;
```

---

## 6. æœ€ä½³å®è·µ

**ä½¿ç”¨å»ºè®®**ï¼š

```text
ä½•æ—¶ä½¿ç”¨Prepared Statements:
âœ“ ç›¸åŒæŸ¥è¯¢å¤šæ¬¡æ‰§è¡Œ
âœ“ åªæœ‰å‚æ•°ä¸åŒ
âœ“ Sessionæ¨¡å¼è¿æ¥æ± 
âœ“ OLTPé«˜é¢‘æŸ¥è¯¢

ä½•æ—¶é¿å…:
âœ— Transactionæ¨¡å¼è¿æ¥æ± 
âœ— æŸ¥è¯¢åªæ‰§è¡Œä¸€æ¬¡
âœ— æŸ¥è¯¢æ¨¡å¼å˜åŒ–é¢‘ç¹
âœ— å‚æ•°åˆ†å¸ƒæä¸å‡åŒ€

æ€§èƒ½ä¼˜åŒ–:
âœ“ æ‰¹é‡æ‰§è¡Œç›¸åŒæŸ¥è¯¢
âœ“ ç›‘æ§è®¡åˆ’ç±»å‹é€‰æ‹©
âœ“ å®šæœŸANALYZEè¡¨
âœ“ ä½¿ç”¨åˆé€‚çš„pool_mode

æ³¨æ„äº‹é¡¹:
âœ“ æ£€æŸ¥è®¡åˆ’æ˜¯å¦æœ€ä¼˜
âœ“ ç›‘æ§å†…å­˜ä½¿ç”¨
âœ“ å¤„ç†è®¡åˆ’å¤±æ•ˆ
âœ“ æ¸…ç†ä¸ç”¨çš„prepared statements
```

### 6.1 è®¡åˆ’ç¼“å­˜æ€§èƒ½åˆ†æ

**è®¡åˆ’ç¼“å­˜æ•ˆæœè¯„ä¼°**ï¼š

```sql
-- åˆ›å»ºè®¡åˆ’ç¼“å­˜åˆ†æè¡¨
CREATE TABLE IF NOT EXISTS plan_cache_analysis (
    analysis_id SERIAL PRIMARY KEY,
    prepared_statement_name VARCHAR(200),
    execution_count BIGINT,
    generic_plan_count BIGINT,
    custom_plan_count BIGINT,
    avg_execution_time_ms NUMERIC,
    avg_plan_time_ms NUMERIC,
    cache_hit_rate NUMERIC,
    analyzed_date TIMESTAMPTZ DEFAULT NOW()
);

-- ä»pg_stat_statementså¯¼å…¥æ•°æ®
INSERT INTO plan_cache_analysis
(prepared_statement_name, execution_count, avg_execution_time_ms, avg_plan_time_ms)
SELECT
    LEFT(query, 200) AS prepared_statement_name,
    calls AS execution_count,
    mean_exec_time AS avg_execution_time_ms,
    mean_plan_time AS avg_plan_time_ms
FROM pg_stat_statements
WHERE query LIKE 'EXECUTE%'
ORDER BY calls DESC
LIMIT 50;

-- è®¡ç®—ç¼“å­˜å‘½ä¸­ç‡ï¼ˆå‡è®¾å‰5æ¬¡ä½¿ç”¨custom planï¼Œä¹‹åä½¿ç”¨generic planï¼‰
UPDATE plan_cache_analysis
SET
    generic_plan_count = CASE
        WHEN execution_count > 5 THEN execution_count - 5
        ELSE 0
    END,
    custom_plan_count = CASE
        WHEN execution_count > 5 THEN 5
        ELSE execution_count
    END,
    cache_hit_rate = CASE
        WHEN execution_count > 5 THEN
            ROUND((execution_count - 5)::NUMERIC / execution_count * 100, 2)
        ELSE 0
    END;

-- æŸ¥è¯¢è®¡åˆ’ç¼“å­˜æ•ˆæœ
SELECT
    prepared_statement_name,
    execution_count,
    generic_plan_count,
    custom_plan_count,
    ROUND(avg_execution_time_ms, 2) AS avg_exec_time_ms,
    ROUND(avg_plan_time_ms, 2) AS avg_plan_time_ms,
    cache_hit_rate || '%' AS cache_hit_rate,
    CASE
        WHEN cache_hit_rate >= 80 THEN 'ä¼˜ç§€'
        WHEN cache_hit_rate >= 60 THEN 'è‰¯å¥½'
        ELSE 'éœ€ä¼˜åŒ–'
    END AS cache_status
FROM plan_cache_analysis
ORDER BY execution_count DESC;
```

### 6.2 è®¡åˆ’ç¼“å­˜ä¼˜åŒ–ç­–ç•¥

**ä¼˜åŒ–ç­–ç•¥å®ç°**ï¼š

```sql
-- åˆ›å»ºè®¡åˆ’ç¼“å­˜ä¼˜åŒ–å»ºè®®å‡½æ•°
CREATE OR REPLACE FUNCTION generate_plan_cache_optimization_suggestions()
RETURNS TABLE (
    prepared_statement_name TEXT,
    current_status TEXT,
    optimization_suggestion TEXT,
    expected_improvement TEXT
) AS $$
BEGIN
    RETURN QUERY
    SELECT
        pca.prepared_statement_name,
        CASE
            WHEN pca.execution_count < 5 THEN 'ä½¿ç”¨ä¸è¶³'
            WHEN pca.cache_hit_rate < 60 THEN 'ç¼“å­˜æ•ˆç‡ä½'
            WHEN pca.avg_plan_time_ms > 10 THEN 'è®¡åˆ’ç”Ÿæˆæ…¢'
            ELSE 'æ­£å¸¸'
        END AS current_status,
        CASE
            WHEN pca.execution_count < 5 THEN 'è€ƒè™‘ä½¿ç”¨æ™®é€šæŸ¥è¯¢è€Œéprepared statement'
            WHEN pca.cache_hit_rate < 60 THEN 'å¢åŠ æ‰§è¡Œæ¬¡æ•°æˆ–å¼ºåˆ¶ä½¿ç”¨generic plan'
            WHEN pca.avg_plan_time_ms > 10 THEN 'ä¼˜åŒ–æŸ¥è¯¢æˆ–æ›´æ–°ç»Ÿè®¡ä¿¡æ¯'
            ELSE 'æ— éœ€ä¼˜åŒ–'
        END AS optimization_suggestion,
        CASE
            WHEN pca.execution_count < 5 THEN 'å‡å°‘è®¡åˆ’ç¼“å­˜å¼€é”€'
            WHEN pca.cache_hit_rate < 60 THEN 'æå‡ç¼“å­˜å‘½ä¸­ç‡20-30%'
            WHEN pca.avg_plan_time_ms > 10 THEN 'å‡å°‘è®¡åˆ’ç”Ÿæˆæ—¶é—´50%'
            ELSE 'N/A'
        END AS expected_improvement
    FROM plan_cache_analysis pca
    WHERE pca.execution_count < 5
       OR pca.cache_hit_rate < 60
       OR pca.avg_plan_time_ms > 10
    ORDER BY pca.execution_count DESC;
END;
$$ LANGUAGE plpgsql;

-- æŸ¥è¯¢ä¼˜åŒ–å»ºè®®
SELECT * FROM generate_plan_cache_optimization_suggestions();
```

### 6.3 PostgreSQL 18è®¡åˆ’ç¼“å­˜æ–°ç‰¹æ€§

**è®¡åˆ’ç¼“å­˜å¢å¼º**ï¼š

```sql
-- PostgreSQL 18è®¡åˆ’ç¼“å­˜æ”¹è¿›
-- 1. æ›´æ™ºèƒ½çš„generic plané€‰æ‹©
-- 2. è®¡åˆ’ç¼“å­˜å†…å­˜ç®¡ç†ä¼˜åŒ–
-- 3. è®¡åˆ’å¤±æ•ˆæœºåˆ¶æ”¹è¿›

-- æ£€æŸ¥è®¡åˆ’ç¼“å­˜é…ç½®
SELECT
    name,
    setting,
    unit,
    context,
    short_desc
FROM pg_settings
WHERE name IN (
    'plan_cache_mode',
    'shared_preload_libraries',
    'max_prepared_transactions'
)
ORDER BY name;

-- ä¼˜åŒ–è®¡åˆ’ç¼“å­˜é…ç½®
ALTER SYSTEM SET plan_cache_mode = 'auto';  -- è‡ªåŠ¨é€‰æ‹©
ALTER SYSTEM SET max_prepared_transactions = 100;  -- å¢åŠ preparedäº‹åŠ¡æ•°
SELECT pg_reload_conf();
```

**è®¡åˆ’ç¼“å­˜ç›‘æ§**ï¼š

```sql
-- åˆ›å»ºè®¡åˆ’ç¼“å­˜ç›‘æ§è§†å›¾
CREATE OR REPLACE VIEW plan_cache_monitoring AS
SELECT
    name AS prepared_statement_name,
    statement AS query_text,
    prepare_time,
    parameter_types,
    from_sql,
    CASE
        WHEN from_sql THEN 'SQL PREPARE'
        ELSE 'JDBC/ODBC'
    END AS source_type
FROM pg_prepared_statements
ORDER BY prepare_time DESC;

-- æŸ¥è¯¢è®¡åˆ’ç¼“å­˜çŠ¶æ€
SELECT
    COUNT(*) AS total_prepared_statements,
    COUNT(*) FILTER (WHERE from_sql) AS sql_prepared,
    COUNT(*) FILTER (WHERE NOT from_sql) AS client_prepared,
    AVG(EXTRACT(EPOCH FROM (NOW() - prepare_time))) AS avg_age_seconds
FROM pg_prepared_statements;

-- ç›‘æ§è®¡åˆ’ç¼“å­˜å†…å­˜ä½¿ç”¨
SELECT
    pg_size_pretty(
        (SELECT SUM(pg_column_size(statement)) FROM pg_prepared_statements)
    ) AS total_cache_size;
```

### 6.4 è®¡åˆ’ç¼“å­˜æ•…éšœè¯Šæ–­

**å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- é—®é¢˜1: Prepared statementå¤±æ•ˆé¢‘ç¹
-- è¯Šæ–­
SELECT
    schemaname,
    tablename,
    last_vacuum,
    last_autovacuum,
    last_analyze,
    last_autoanalyze
FROM pg_stat_user_tables
WHERE schemaname = 'public'
ORDER BY last_autoanalyze DESC NULLS LAST;

-- è§£å†³æ–¹æ¡ˆ: å®šæœŸANALYZE
ANALYZE VERBOSE users;

-- é—®é¢˜2: è®¡åˆ’ç¼“å­˜å†…å­˜å ç”¨è¿‡é«˜
-- è¯Šæ–­
SELECT
    COUNT(*) AS prepared_count,
    pg_size_pretty(SUM(pg_column_size(statement))) AS cache_size
FROM pg_prepared_statements;

-- è§£å†³æ–¹æ¡ˆ: æ¸…ç†ä¸ç”¨çš„prepared statements
DEALLOCATE ALL;

-- é—®é¢˜3: Generic planæ€§èƒ½å·®
-- è¯Šæ–­
EXPLAIN (ANALYZE, BUFFERS, TIMING) EXECUTE user_query(123);

-- è§£å†³æ–¹æ¡ˆ: å¼ºåˆ¶ä½¿ç”¨custom plan
SET plan_cache_mode = 'force_custom_plan';
EXECUTE user_query(123);
```

### 6.5 è®¡åˆ’ç¼“å­˜æœ€ä½³å®è·µæ€»ç»“

**æ¨èåšæ³•**ï¼š

1. **ç›‘æ§è®¡åˆ’ç¼“å­˜ä½¿ç”¨æƒ…å†µ**
   - å®šæœŸæ£€æŸ¥prepared statementsæ•°é‡
   - ç›‘æ§è®¡åˆ’ç¼“å­˜å‘½ä¸­ç‡
   - è·Ÿè¸ªè®¡åˆ’ç”Ÿæˆæ—¶é—´

2. **ä¼˜åŒ–è®¡åˆ’ç¼“å­˜é…ç½®**
   - æ ¹æ®å·¥ä½œè´Ÿè½½è°ƒæ•´plan_cache_mode
   - åˆç†è®¾ç½®max_prepared_transactions
   - å®šæœŸæ›´æ–°ç»Ÿè®¡ä¿¡æ¯

3. **å¤„ç†è¿æ¥æ± å…¼å®¹æ€§**
   - Sessionæ¨¡å¼ï¼šå®Œå…¨æ”¯æŒprepared statements
   - Transactionæ¨¡å¼ï¼šä½¿ç”¨client-side binding
   - åº”ç”¨å±‚ï¼šæ ¹æ®è¿æ¥æ± æ¨¡å¼é€‰æ‹©ç­–ç•¥

4. **æ€§èƒ½è°ƒä¼˜**
   - æ‰¹é‡æ‰§è¡Œç›¸åŒæŸ¥è¯¢
   - ç›‘æ§è®¡åˆ’ç±»å‹é€‰æ‹©
   - ä¼˜åŒ–æŸ¥è¯¢ä»¥å‡å°‘è®¡åˆ’ç”Ÿæˆæ—¶é—´

---

**å®Œæˆ**: PostgreSQL 18æŸ¥è¯¢è®¡åˆ’ç¼“å­˜ä¼˜åŒ–
**å­—æ•°**: ~12,000å­—
**æ¶µç›–**: Prepared Statementsã€è®¡åˆ’ç¼“å­˜ã€Generic vs Customã€è¿æ¥æ± é›†æˆã€ç›‘æ§ã€ä¼˜åŒ–ç­–ç•¥ã€æ•…éšœè¯Šæ–­
