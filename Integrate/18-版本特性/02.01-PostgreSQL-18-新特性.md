---

> **ğŸ“‹ æ–‡æ¡£æ¥æº**: `PostgreSQL\02-ç‰ˆæœ¬ç‰¹æ€§\02.01-PostgreSQL-18-æ–°ç‰¹æ€§.md`
> **ğŸ“… å¤åˆ¶æ—¥æœŸ**: 2025-12-22
> **âš ï¸ æ³¨æ„**: æœ¬æ–‡æ¡£ä¸ºå¤åˆ¶ç‰ˆæœ¬ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜

---

# PostgreSQL 2025æ–°ç‰¹æ€§

> **ç‰ˆæœ¬**: v3.0
> **æœ€åæ›´æ–°**: 2025-01-15
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 17 (2024-09-26) | PostgreSQL 18 (2025-09-25) â­
> **æ–‡æ¡£çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å†…å®¹ä¸ºæ¦‚å¿µè®¾è®¡ï¼Œå·²æ ‡æ³¨
> **âš ï¸ æ–‡æ¡£æ€§è´¨è¯´æ˜**
>
> æœ¬æ–‡æ¡£åŒ…å«ä»¥ä¸‹ç±»å‹çš„å†…å®¹ï¼Œè¯·æ ¹æ®æ ‡ç­¾è¯†åˆ«ï¼š
>
> - âœ… **[å¯è¿è¡Œ]**: å¯åœ¨PostgreSQL 15+ç›´æ¥è¿è¡Œçš„ä»£ç 
> - âš ï¸ **[éœ€æ‰©å±•]**: éœ€è¦å®‰è£…ç‰¹å®šæ‰©å±•ï¼ˆå¦‚pgvectorï¼‰çš„ä»£ç 
> - ğŸ“š **[æ¦‚å¿µè®¾è®¡]**: ç†è®ºæ¢ç´¢å’Œææ¡ˆï¼Œ**éå®é™…å¯ç”¨ç‰¹æ€§**
> - ğŸ”¬ **[ç ”ç©¶æ–¹å‘]**: å­¦æœ¯ç ”ç©¶ï¼Œæš‚æ— ç”Ÿäº§å®ç°
>
> **é‡è¦æç¤º**: æ ‡æ³¨ä¸º`[æ¦‚å¿µè®¾è®¡]`çš„å†…å®¹å±•ç¤ºäº†æœªæ¥å¯èƒ½çš„å‘å±•æ–¹å‘ï¼Œä½†PostgreSQLæ ¸å¿ƒç›®å‰**ä¸æ”¯æŒ**è¿™äº›è¯­æ³•ã€‚å®é™…åº”ç”¨è¯·å‚è€ƒæ ‡æ³¨ä¸º`[å¯è¿è¡Œ]`æˆ–`[éœ€æ‰©å±•]`çš„å†…å®¹ã€‚
>
> **æœ€æ–°å®é™…ç‰¹æ€§**:
>
> - PostgreSQL 17 å®é™…ç‰¹æ€§è¯·å‚è€ƒ[å®˜æ–¹å‘å¸ƒè¯´æ˜](https://www.postgresql.org/docs/17/release-17.html)
> - PostgreSQL 18 å®é™…ç‰¹æ€§è¯·å‚è€ƒ[å®˜æ–¹å‘å¸ƒè¯´æ˜](https://www.postgresql.org/docs/18/release-18.html) â­â­â­ (2025-09-25)
> - Azure AIæ‰©å±•è¯·å‚è€ƒ[Azure AIæ‰©å±•å®æˆ˜](05.03-Azure-AIæ‰©å±•å®æˆ˜.md)
> - RAGæ¶æ„è¯·å‚è€ƒ[RAGæ¶æ„å®æˆ˜æŒ‡å—](05.04-RAGæ¶æ„å®æˆ˜æŒ‡å—.md)
> - **AI æ—¶ä»£ä¸“é¢˜**è¯·å‚è€ƒ[PostgreSQL åœ¨ AI æ—¶ä»£çš„å…¨é¢æ¼”è¿›](../ai_view.md) â­â­â­ (v3.0, 2025-11-11)

---

## ğŸ“‘ ç›®å½•

- [PostgreSQL 2025æ–°ç‰¹æ€§](#postgresql-2025æ–°ç‰¹æ€§)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ğŸ“Š æ€ç»´å¯¼å›¾](#-æ€ç»´å¯¼å›¾)
  - [ä¸€ã€å®šä¹‰ä¸å½¢å¼åŒ–](#ä¸€å®šä¹‰ä¸å½¢å¼åŒ–)
    - [1.1 æ¦‚å¿µå®šä¹‰](#11-æ¦‚å¿µå®šä¹‰)
    - [1.2 å½¢å¼åŒ–å®šä¹‰](#12-å½¢å¼åŒ–å®šä¹‰)
    - [1.3 æ ¸å¿ƒåˆ›æ–°é¢†åŸŸ](#13-æ ¸å¿ƒåˆ›æ–°é¢†åŸŸ)
  - [äºŒã€PostgreSQL 18å®é™…æ–°ç‰¹æ€§ï¼ˆ2025-09-25å‘å¸ƒï¼‰â­â­â­](#äºŒpostgresql-18å®é™…æ–°ç‰¹æ€§2025-09-25å‘å¸ƒ)
    - [2.1 å¼‚æ­¥I/Oå­ç³»ç»Ÿï¼ˆAsynchronous I/Oï¼‰](#21-å¼‚æ­¥ioå­ç³»ç»Ÿasynchronous-io)
    - [2.2 è™šæ‹Ÿç”Ÿæˆåˆ—ï¼ˆVirtual Generated Columnsï¼‰](#22-è™šæ‹Ÿç”Ÿæˆåˆ—virtual-generated-columns)
    - [2.3 OAuth 2.0èº«ä»½éªŒè¯](#23-oauth-20èº«ä»½éªŒè¯)
    - [2.4 å¢é‡å¤‡ä»½å¢å¼º](#24-å¢é‡å¤‡ä»½å¢å¼º)
    - [2.5 UUID v7æ”¯æŒ](#25-uuid-v7æ”¯æŒ)
    - [2.6 BRINå¹¶è¡Œæ„å»º](#26-brinå¹¶è¡Œæ„å»º)
    - [2.7 INå­å¥B-Treeä¼˜åŒ–](#27-inå­å¥b-treeä¼˜åŒ–)
  - [ä¸‰ã€AIåŸç”Ÿé›†æˆæ¶æ„](#ä¸‰aiåŸç”Ÿé›†æˆæ¶æ„)
    - [3.1 ç†è®ºåŸºç¡€](#31-ç†è®ºåŸºç¡€)
      - [3.1.1 æ•°æ®åº“ä¸AIèåˆç†è®º](#311-æ•°æ®åº“ä¸aièåˆç†è®º)
      - [3.1.2 æ¨ç†å¼•æ“æ¶æ„](#312-æ¨ç†å¼•æ“æ¶æ„)
    - [3.2 å®é™…åº”ç”¨æ¡ˆä¾‹](#32-å®é™…åº”ç”¨æ¡ˆä¾‹)
      - [3.2.1 æ™ºèƒ½æ¨èç³»ç»Ÿ](#321-æ™ºèƒ½æ¨èç³»ç»Ÿ)
  - [å››ã€å‘é‡æ•°æ®åº“å¢å¼º](#å››å‘é‡æ•°æ®åº“å¢å¼º)
    - [4.1 å‘é‡æ•°æ®ç±»å‹](#41-å‘é‡æ•°æ®ç±»å‹)
    - [4.2 å‘é‡ç´¢å¼•ä¼˜åŒ–](#42-å‘é‡ç´¢å¼•ä¼˜åŒ–)
    - [4.3 æ··åˆæŸ¥è¯¢ä¼˜åŒ–](#43-æ··åˆæŸ¥è¯¢ä¼˜åŒ–)
  - [äº”ã€å®æ—¶æµå¤„ç†](#äº”å®æ—¶æµå¤„ç†)
    - [5.1 æµå¼æ•°æ®å¤„ç†](#51-æµå¼æ•°æ®å¤„ç†)
    - [5.2 å¤æ‚äº‹ä»¶å¤„ç†](#52-å¤æ‚äº‹ä»¶å¤„ç†)
  - [å…­ã€å¤šæ¨¡æ€æ•°æ®æ”¯æŒ](#å…­å¤šæ¨¡æ€æ•°æ®æ”¯æŒ)
    - [6.1 å¤šæ¨¡æ€æ•°æ®æ¨¡å‹](#61-å¤šæ¨¡æ€æ•°æ®æ¨¡å‹)
    - [6.2 å¤šæ¨¡æ€æŸ¥è¯¢](#62-å¤šæ¨¡æ€æŸ¥è¯¢)
  - [ä¸ƒã€äº‘åŸç”Ÿæ¶æ„](#ä¸ƒäº‘åŸç”Ÿæ¶æ„)
    - [7.1 åˆ†å¸ƒå¼éƒ¨ç½²](#71-åˆ†å¸ƒå¼éƒ¨ç½²)
    - [7.2 å¼¹æ€§æ‰©å±•](#72-å¼¹æ€§æ‰©å±•)
  - [å…«ã€é‡å­è®¡ç®—å‡†å¤‡](#å…«é‡å­è®¡ç®—å‡†å¤‡)
    - [8.1 é‡å­ç®—æ³•å…¼å®¹æ€§](#81-é‡å­ç®—æ³•å…¼å®¹æ€§)
    - [8.2 é‡å­-ç»å…¸æ··åˆè®¡ç®—](#82-é‡å­-ç»å…¸æ··åˆè®¡ç®—)
  - [ä¹ã€æ€§èƒ½ä¼˜åŒ–](#ä¹æ€§èƒ½ä¼˜åŒ–)
    - [9.1 GPUåŠ é€Ÿ](#91-gpuåŠ é€Ÿ)
    - [9.2 å¹¶è¡ŒAIå¤„ç†](#92-å¹¶è¡Œaiå¤„ç†)
  - [åã€å®é™…åº”ç”¨æ¡ˆä¾‹](#åå®é™…åº”ç”¨æ¡ˆä¾‹)
    - [10.1 æ™ºèƒ½å®¢æœç³»ç»Ÿ](#101-æ™ºèƒ½å®¢æœç³»ç»Ÿ)
    - [10.2 å®æ—¶é£æ§ç³»ç»Ÿ](#102-å®æ—¶é£æ§ç³»ç»Ÿ)
  - [åä¸€ã€ç›¸å…³æ¦‚å¿µ](#åä¸€ç›¸å…³æ¦‚å¿µ)
    - [11.1 ä¸Šä½æ¦‚å¿µ](#111-ä¸Šä½æ¦‚å¿µ)
    - [11.2 ä¸‹ä½æ¦‚å¿µ](#112-ä¸‹ä½æ¦‚å¿µ)
    - [11.3 å¹³è¡Œæ¦‚å¿µ](#113-å¹³è¡Œæ¦‚å¿µ)
  - [åäºŒã€ç›¸å…³æ–‡æ¡£](#åäºŒç›¸å…³æ–‡æ¡£)
    - [12.1 å®æˆ˜æ¡ˆä¾‹ä¸ç¤ºä¾‹](#121-å®æˆ˜æ¡ˆä¾‹ä¸ç¤ºä¾‹)
    - [12.2 ç‰ˆæœ¬ç›¸å…³æ–‡æ¡£](#122-ç‰ˆæœ¬ç›¸å…³æ–‡æ¡£)
    - [12.3 æ ¸å¿ƒè¯¾ç¨‹](#123-æ ¸å¿ƒè¯¾ç¨‹)
    - [12.4 æŸ¥è¯¢ä¸ä¼˜åŒ–](#124-æŸ¥è¯¢ä¸ä¼˜åŒ–)
    - [12.5 æ•°æ®æ¨¡å‹è®¾è®¡](#125-æ•°æ®æ¨¡å‹è®¾è®¡)
    - [12.6 è¿ç»´å®è·µ](#126-è¿ç»´å®è·µ)
  - [åä¸‰ã€å‚è€ƒæ–‡çŒ®](#åä¸‰å‚è€ƒæ–‡çŒ®)
  - [åå››ã€Wikidataå¯¹é½](#åå››wikidataå¯¹é½)
  - [åˆå¹¶æ¥æºä¸æ˜ å°„ï¼ˆæ•´åˆä¸­ï¼‰](#åˆå¹¶æ¥æºä¸æ˜ å°„æ•´åˆä¸­)
    - [å¾…åŠäº‹é¡¹](#å¾…åŠäº‹é¡¹)
      - [1. æœ¯è¯­ç»Ÿä¸€](#1-æœ¯è¯­ç»Ÿä¸€)
      - [2. å†…å®¹æ•´åˆ](#2-å†…å®¹æ•´åˆ)
      - [3. ç‰¹æ€§æ ‡æ³¨](#3-ç‰¹æ€§æ ‡æ³¨)

---

## ğŸ“Š æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((PostgreSQL 2025æ–°ç‰¹æ€§))
    å®šä¹‰ä¸å½¢å¼åŒ–
      æ¦‚å¿µå®šä¹‰
      å½¢å¼åŒ–å®šä¹‰
      æ ¸å¿ƒåˆ›æ–°é¢†åŸŸ
    çŸ¥è¯†çŸ©é˜µ
      æ–°ç‰¹æ€§å¯¹æ¯”
      ç‰ˆæœ¬ç‰¹æ€§å¯¹æ¯”
    AIåŸç”Ÿé›†æˆ
      ç†è®ºåŸºç¡€
      æ¨ç†å¼•æ“
      åº”ç”¨æ¡ˆä¾‹
    å‘é‡æ•°æ®åº“
      æ•°æ®ç±»å‹
      ç´¢å¼•ä¼˜åŒ–
      æ··åˆæŸ¥è¯¢
    å®æ—¶æµå¤„ç†
      æµå¼æ•°æ®
      å¤æ‚äº‹ä»¶å¤„ç†
    å¤šæ¨¡æ€æ•°æ®
      æ•°æ®æ¨¡å‹
      å¤šæ¨¡æ€æŸ¥è¯¢
    äº‘åŸç”Ÿæ¶æ„
      åˆ†å¸ƒå¼éƒ¨ç½²
      å¼¹æ€§æ‰©å±•
    é‡å­è®¡ç®—
      ç®—æ³•å…¼å®¹æ€§
      æ··åˆè®¡ç®—
    æ€§èƒ½ä¼˜åŒ–
      GPUåŠ é€Ÿ
      å¹¶è¡ŒAIå¤„ç†
    åº”ç”¨æ¡ˆä¾‹
      æ™ºèƒ½å®¢æœ
      å®æ—¶é£æ§
```

---

## ä¸€ã€å®šä¹‰ä¸å½¢å¼åŒ–

### 1.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**: PostgreSQL 2025æ˜¯PostgreSQLæ•°æ®åº“ç³»ç»Ÿçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¼•å…¥äº†AIåŸç”Ÿé›†æˆã€å‘é‡æ•°æ®åº“å¢å¼ºã€å®æ—¶æµå¤„ç†ã€å¤šæ¨¡æ€æ•°æ®æ”¯æŒç­‰é©å‘½æ€§ç‰¹æ€§ï¼Œè¿›ä¸€æ­¥å·©å›ºäº†å…¶åœ¨ä¼ä¸šçº§æ•°æ®åº“é¢†åŸŸçš„é¢†å…ˆåœ°ä½ã€‚

**English Definition**: PostgreSQL 2025 is the latest version of the PostgreSQL database system, introducing revolutionary features such as AI-native integration, vector database enhancements, real-time stream processing, and multimodal data support, further consolidating its leading position in the enterprise database field.

### 1.2 å½¢å¼åŒ–å®šä¹‰

```latex
% æ•°å­¦ç¬¦å·å®šä¹‰
\newcommand{\pg2025}{\mathcal{PG}_{2025}}
\newcommand{\ai}{\mathcal{AI}}
\newcommand{\vector}{\mathcal{V}}
\newcommand{\stream}{\mathcal{S}}
\newcommand{\multimodal}{\mathcal{M}}

% PostgreSQL 2025çš„å½¢å¼åŒ–å®šä¹‰
\pg2025 = (\ai, \vector, \stream, \multimodal, \text{core})

å…¶ä¸­ï¼š
\ai: AIåŸç”Ÿé›†æˆæ¨¡å—
\vector: å‘é‡æ•°æ®åº“å¢å¼ºæ¨¡å—
\stream: å®æ—¶æµå¤„ç†æ¨¡å—
\multimodal: å¤šæ¨¡æ€æ•°æ®æ”¯æŒæ¨¡å—
\text{core}: PostgreSQLæ ¸å¿ƒåŠŸèƒ½
```

### 1.3 æ ¸å¿ƒåˆ›æ–°é¢†åŸŸ

- **AIåŸç”Ÿé›†æˆ**: å†…ç½®æœºå™¨å­¦ä¹ æ¨ç†å¼•æ“
- **å‘é‡æ•°æ®åº“å¢å¼º**: é«˜æ€§èƒ½å‘é‡æœç´¢å’Œç›¸ä¼¼æ€§è®¡ç®—
- **å®æ—¶æµå¤„ç†**: åŸç”Ÿæµå¼æ•°æ®å¤„ç†èƒ½åŠ›
- **å¤šæ¨¡æ€æ•°æ®æ”¯æŒ**: ç»Ÿä¸€å¤„ç†ç»“æ„åŒ–ã€åŠç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®
- **äº‘åŸç”Ÿæ¶æ„**: åˆ†å¸ƒå¼éƒ¨ç½²å’Œå¼¹æ€§æ‰©å±•
- **é‡å­è®¡ç®—å‡†å¤‡**: é‡å­ç®—æ³•å…¼å®¹æ€§è®¾è®¡

## äºŒã€PostgreSQL 18å®é™…æ–°ç‰¹æ€§ï¼ˆ2025-09-25å‘å¸ƒï¼‰â­â­â­

> âœ… **è¯´æ˜**: æœ¬èŠ‚åˆ—å‡ºPostgreSQL 18**å®é™…å·²å®ç°å¹¶å‘å¸ƒçš„ç‰¹æ€§**ï¼Œæ‰€æœ‰å†…å®¹å‡å¯åœ¨PostgreSQL 18ä¸­ç›´æ¥ä½¿ç”¨ã€‚

### 2.1 å¼‚æ­¥I/Oå­ç³»ç»Ÿï¼ˆAsynchronous I/Oï¼‰

PostgreSQL 18å¼•å…¥äº†å…¨æ–°çš„å¼‚æ­¥I/Oå­ç³»ç»Ÿï¼Œæ˜¾è‘—æå‡äº†I/Oå¯†é›†å‹æ“ä½œçš„æ€§èƒ½ã€‚

**æŠ€æœ¯åŸç†**:

å¼‚æ­¥I/Oå…è®¸PostgreSQLåœ¨ç­‰å¾…ç£ç›˜I/Oæ“ä½œå®Œæˆæ—¶ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œè€Œä¸æ˜¯é˜»å¡ç­‰å¾…ã€‚è¿™å¯¹äºå‘é‡æ£€ç´¢ã€å¤§è¡¨æ‰«æç­‰I/Oå¯†é›†å‹æ“ä½œç‰¹åˆ«æœ‰æ•ˆã€‚

**æ€§èƒ½æå‡**:

- I/Oæ€§èƒ½æå‡2-3å€
- ç‰¹åˆ«é€‚ç”¨äºå‘é‡æ£€ç´¢åœºæ™¯
- å‡å°‘I/Oç­‰å¾…æ—¶é—´
- æå‡ç³»ç»Ÿæ•´ä½“ååé‡

**é…ç½®æ–¹æ³•**:

```sql
-- postgresql.confé…ç½®
effective_io_concurrency = 200   -- æœ‰æ•ˆI/Oå¹¶å‘æ•°ï¼ˆé»˜è®¤200ï¼‰
maintenance_io_concurrency = 10   -- ç»´æŠ¤I/Oå¹¶å‘æ•°ï¼ˆé»˜è®¤10ï¼‰

-- æŸ¥çœ‹I/Oç»Ÿè®¡ï¼ˆPostgreSQL 18æ–°å¢ï¼‰
SELECT * FROM pg_stat_io;

-- æŸ¥çœ‹å¼‚æ­¥I/Oä½¿ç”¨æƒ…å†µ
SELECT
    object,
    context,
    reads,
    writes,
    extends,
    fsyncs,
    read_time,
    write_time,
    sync_time
FROM pg_stat_io
ORDER BY reads DESC;
```

**ä½¿ç”¨åœºæ™¯**:

1. **å‘é‡æ£€ç´¢**

   ```sql
   -- pgvectorå‘é‡æ£€ç´¢å—ç›Šäºå¼‚æ­¥I/O
   SELECT id, content,
          1 - (embedding <=> query_vector) as similarity
   FROM documents
   ORDER BY embedding <=> query_vector
   LIMIT 100;
   -- PostgreSQL 18: å¼‚æ­¥I/Oæå‡æ€§èƒ½2-3å€
   ```

2. **å¤§è¡¨æ‰«æ**

   ```sql
   -- å¤§è¡¨å…¨è¡¨æ‰«æ
   SELECT COUNT(*) FROM large_table;
   -- PostgreSQL 18: å¼‚æ­¥é¢„è¯»æå‡æ‰«æé€Ÿåº¦
   ```

3. **ç´¢å¼•æ„å»º**

   ```sql
   -- åˆ›å»ºç´¢å¼•
   CREATE INDEX CONCURRENTLY idx_large ON large_table(column1);
   -- PostgreSQL 18: å¼‚æ­¥I/OåŠ é€Ÿç´¢å¼•æ„å»º
   ```

**æœ€ä½³å®è·µ**:

- æ ¹æ®å­˜å‚¨ç±»å‹è°ƒæ•´`effective_io_concurrency`
  - SSD: 200-300
  - NVMe: 300-500
  - HDD: 50-100
- ç›‘æ§`pg_stat_io`è§†å›¾äº†è§£I/Oæ¨¡å¼
- ç»“åˆ`shared_buffers`è°ƒä¼˜æ•´ä½“æ€§èƒ½

### 2.2 è™šæ‹Ÿç”Ÿæˆåˆ—ï¼ˆVirtual Generated Columnsï¼‰

PostgreSQL 18æ”¯æŒè™šæ‹Ÿç”Ÿæˆåˆ—ï¼Œå…è®¸å®šä¹‰åŸºäºè¡¨è¾¾å¼çš„åˆ—ï¼Œæ— éœ€å­˜å‚¨ç©ºé—´ã€‚

**è¯­æ³•**:

```sql
-- åˆ›å»ºåŒ…å«è™šæ‹Ÿç”Ÿæˆåˆ—çš„è¡¨
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    tax_rate DECIMAL(5,2) DEFAULT 0.20,
    price_with_tax DECIMAL(10,2) GENERATED ALWAYS AS (price * (1 + tax_rate)) STORED,  -- å­˜å‚¨ç”Ÿæˆåˆ—
    price_display TEXT GENERATED ALWAYS AS ('$' || price::TEXT) VIRTUAL  -- è™šæ‹Ÿç”Ÿæˆåˆ—ï¼ˆPostgreSQL 18ï¼‰
);

-- è™šæ‹Ÿç”Ÿæˆåˆ—ä¸å ç”¨å­˜å‚¨ç©ºé—´
-- å­˜å‚¨ç”Ÿæˆåˆ—å ç”¨å­˜å‚¨ç©ºé—´ä½†æŸ¥è¯¢æ›´å¿«
```

**ä¸å­˜å‚¨ç”Ÿæˆåˆ—å¯¹æ¯”**:

| ç‰¹æ€§ | å­˜å‚¨ç”Ÿæˆåˆ—ï¼ˆSTOREDï¼‰ | è™šæ‹Ÿç”Ÿæˆåˆ—ï¼ˆVIRTUALï¼‰ |
|------|---------------------|---------------------|
| å­˜å‚¨ç©ºé—´ | âœ… å ç”¨ | âŒ ä¸å ç”¨ |
| æŸ¥è¯¢æ€§èƒ½ | âœ… æ›´å¿«ï¼ˆå·²è®¡ç®—ï¼‰ | âš ï¸ æ¯æ¬¡è®¡ç®— |
| ç´¢å¼•æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒï¼ˆPostgreSQL 18ï¼‰ |
| æ›´æ–°æ€§èƒ½ | âš ï¸ å†™å…¥æ—¶è®¡ç®— | âœ… æ— å†™å…¥å¼€é”€ |

**ä½¿ç”¨åœºæ™¯**:

1. **è®¡ç®—å­—æ®µ**

   ```sql
   CREATE TABLE orders (
       id SERIAL PRIMARY KEY,
       quantity INTEGER,
       unit_price DECIMAL(10,2),
       total_price DECIMAL(10,2) GENERATED ALWAYS AS (quantity * unit_price) VIRTUAL
   );
   ```

2. **æ ¼å¼åŒ–æ˜¾ç¤º**

   ```sql
   CREATE TABLE users (
       id SERIAL PRIMARY KEY,
       first_name TEXT,
       last_name TEXT,
       full_name TEXT GENERATED ALWAYS AS (first_name || ' ' || last_name) VIRTUAL
   );
   ```

3. **ç´¢å¼•ä¼˜åŒ–**

   ```sql
   -- è™šæ‹Ÿç”Ÿæˆåˆ—å¯ä»¥åˆ›å»ºç´¢å¼•
   CREATE INDEX idx_full_name ON users(full_name);
   -- æŸ¥è¯¢æ—¶è‡ªåŠ¨ä½¿ç”¨ç´¢å¼•
   SELECT * FROM users WHERE full_name = 'John Doe';
   ```

**æ€§èƒ½è€ƒè™‘**:

- è™šæ‹Ÿç”Ÿæˆåˆ—æ¯æ¬¡æŸ¥è¯¢æ—¶è®¡ç®—ï¼Œé€‚åˆä¸é¢‘ç¹æŸ¥è¯¢çš„åœºæ™¯
- å­˜å‚¨ç”Ÿæˆåˆ—å†™å…¥æ—¶è®¡ç®—ï¼Œé€‚åˆé¢‘ç¹æŸ¥è¯¢çš„åœºæ™¯
- è™šæ‹Ÿç”Ÿæˆåˆ—å¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½

### 2.3 OAuth 2.0èº«ä»½éªŒè¯

PostgreSQL 18æ–°å¢OAuth 2.0èº«ä»½éªŒè¯æ”¯æŒï¼Œæä¾›æ›´å®‰å…¨çš„è®¤è¯æœºåˆ¶ã€‚

**é…ç½®æ–¹æ³•**:

```bash
# pg_hba.confé…ç½®
host    all             all             0.0.0.0/0               oauth2

# postgresql.confé…ç½®
oauth2.issuer = 'https://auth.example.com'
oauth2.client_id = 'postgresql-client'
oauth2.client_secret = 'your-secret-here'
oauth2.scope = 'openid profile'
oauth2.claim_mapping = 'email=username'
```

**ä½¿ç”¨åœºæ™¯**:

1. **ä¼ä¸šå•ç‚¹ç™»å½•ï¼ˆSSOï¼‰**
   - é›†æˆä¼ä¸šèº«ä»½æä¾›å•†ï¼ˆå¦‚Azure ADã€Oktaï¼‰
   - ç»Ÿä¸€èº«ä»½ç®¡ç†
   - ç®€åŒ–ç”¨æˆ·è®¤è¯æµç¨‹

2. **äº‘åŸç”Ÿéƒ¨ç½²**
   - ä¸äº‘æœåŠ¡æä¾›å•†èº«ä»½ç³»ç»Ÿé›†æˆ
   - æ”¯æŒå¤šç§Ÿæˆ·åœºæ™¯
   - å¢å¼ºå®‰å…¨æ€§

**å®‰å…¨æœ€ä½³å®è·µ**:

- ä½¿ç”¨HTTPSä¿æŠ¤OAuthä»¤ç‰Œä¼ è¾“
- å®šæœŸè½®æ¢client_secret
- é™åˆ¶OAuth scopeæƒé™
- ç›‘æ§è®¤è¯æ—¥å¿—

### 2.4 å¢é‡å¤‡ä»½å¢å¼º

PostgreSQL 18å¢å¼ºäº†å¢é‡å¤‡ä»½åŠŸèƒ½ï¼Œæ–°å¢WAL Summarizerè¿›ç¨‹æ”¯æŒæ›´é«˜æ•ˆçš„å¢é‡å¤‡ä»½ã€‚

**WAL Summarizerè¿›ç¨‹**:

```sql
-- å¯ç”¨WALæ±‡æ€»
-- postgresql.conf
wal_summarize = on              -- å¯ç”¨WALæ±‡æ€»
wal_summarize_keep_time = 1h   -- æ±‡æ€»ä¿ç•™æ—¶é—´

-- æŸ¥çœ‹WALæ±‡æ€»ç»Ÿè®¡
SELECT * FROM pg_stat_wal_summarizer;

-- æ‰§è¡Œå¢é‡å¤‡ä»½
pg_basebackup -D /backup/incremental --incremental
```

**æ€§èƒ½æ”¹è¿›**:

- å¢é‡å¤‡ä»½é€Ÿåº¦æå‡20%
- å‡å°‘å¤‡ä»½å­˜å‚¨ç©ºé—´
- æ”¯æŒæ›´ç»†ç²’åº¦çš„æ¢å¤ç‚¹

### 2.5 UUID v7æ”¯æŒ

PostgreSQL 18æ–°å¢UUID v7ç±»å‹æ”¯æŒï¼Œæä¾›æ—¶é—´æ’åºçš„UUIDç”Ÿæˆã€‚

```sql
-- ä½¿ç”¨UUID v7ï¼ˆæ—¶é—´æ’åºï¼‰
CREATE TABLE events (
    id UUID DEFAULT gen_random_uuid_v7() PRIMARY KEY,  -- PostgreSQL 18
    event_type TEXT,
    data JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- UUID v7ä¼˜åŠ¿ï¼š
-- 1. æ—¶é—´æ’åºï¼šæŒ‰ç”Ÿæˆæ—¶é—´è‡ªç„¶æ’åº
-- 2. ç´¢å¼•å‹å¥½ï¼šå‡å°‘ç´¢å¼•ç¢ç‰‡
-- 3. éšç§ä¿æŠ¤ï¼šä¸æ³„éœ²MACåœ°å€
```

### 2.6 BRINå¹¶è¡Œæ„å»º

PostgreSQL 18æ”¯æŒBRINç´¢å¼•çš„å¹¶è¡Œæ„å»ºï¼ŒåŠ é€Ÿå¤§è¡¨ç´¢å¼•åˆ›å»ºã€‚

```sql
-- BRINå¹¶è¡Œæ„å»º
CREATE INDEX CONCURRENTLY idx_brin_parallel
ON large_table USING brin (timestamp_column)
WITH (pages_per_range = 128);

-- PostgreSQL 18: æ”¯æŒå¹¶è¡Œæ„å»ºï¼Œé€Ÿåº¦æå‡2-3å€
```

### 2.7 INå­å¥B-Treeä¼˜åŒ–

PostgreSQL 18ä¼˜åŒ–äº†INå­å¥çš„B-Treeç´¢å¼•ä½¿ç”¨ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚

```sql
-- INå­å¥æŸ¥è¯¢ä¼˜åŒ–
SELECT * FROM products
WHERE category_id IN (1, 2, 3, 4, 5);

-- PostgreSQL 18: æ›´æ™ºèƒ½çš„ç´¢å¼•ä½¿ç”¨ï¼Œæ€§èƒ½æå‡10-30%
```

## ä¸‰ã€AIåŸç”Ÿé›†æˆæ¶æ„

### 3.1 ç†è®ºåŸºç¡€

#### 3.1.1 æ•°æ®åº“ä¸AIèåˆç†è®º

```sql
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] PostgreSQLæ ¸å¿ƒä¸æ”¯æŒæ­¤è¯­æ³•
-- è¿™æ˜¯ä¸€ä¸ªç†è®ºè®¾è®¡ï¼Œå±•ç¤ºæœªæ¥å¯èƒ½çš„æ¨¡å‹ç®¡ç†æ–¹å¼
-- å®é™…åº”ç”¨è¯·ä½¿ç”¨PL/Python + å¤–éƒ¨æ¨¡å‹æ–‡ä»¶ï¼Œå‚è€ƒ03.04-æœºå™¨å­¦ä¹ é›†æˆ.md

CREATE MODEL sentiment_analyzer (
    model_type = 'transformer',
    model_path = '/models/sentiment_v2.pt',
    input_schema = '{"text": "text"}',
    output_schema = '{"sentiment": "float", "confidence": "float"}'
);

-- ğŸ“š [æ¦‚å¿µè®¾è®¡] ai_inference()å‡½æ•°ä¸å­˜åœ¨äºPostgreSQLæ ¸å¿ƒ
-- å®é™…å®ç°æ–¹å¼ï¼š
-- 1. ä½¿ç”¨PL/Pythonå°è£…æ¨ç†é€»è¾‘
-- 2. ä½¿ç”¨FDWè°ƒç”¨å¤–éƒ¨æ¨ç†æœåŠ¡
-- 3. ä½¿ç”¨azure_aiæ‰©å±•ï¼ˆAzureç¯å¢ƒï¼‰

CREATE FUNCTION predict_sentiment(text_input TEXT)
RETURNS TABLE(sentiment FLOAT, confidence FLOAT)
AS $$
BEGIN
    RETURN QUERY
    SELECT * FROM ai_inference('sentiment_analyzer',
                              json_build_object('text', text_input));
END;
$$ LANGUAGE plpgsql;
```

#### 3.1.2 æ¨ç†å¼•æ“æ¶æ„

```rust
// Rustå®ç°çš„AIæ¨ç†å¼•æ“æ ¸å¿ƒ
#[derive(Debug, Clone)]
pub struct AIInferenceEngine {
    model_registry: HashMap<String, Box<dyn AIModel>>,
    inference_cache: LruCache<String, InferenceResult>,
    gpu_pool: Arc<Mutex<GpuResourcePool>>,
}

impl AIInferenceEngine {
    pub async fn inference(
        &self,
        model_name: &str,
        input_data: Value,
    ) -> Result<InferenceResult, AIError> {
        // 1. æ¨¡å‹åŠ è½½ä¸ç¼“å­˜
        let model = self.get_or_load_model(model_name).await?;

        // 2. è¾“å…¥é¢„å¤„ç†
        let processed_input = self.preprocess_input(input_data, &model)?;

        // 3. GPUèµ„æºåˆ†é…
        let gpu_context = self.gpu_pool.lock().await.allocate()?;

        // 4. æ¨¡å‹æ¨ç†
        let raw_output = model.inference(processed_input, gpu_context).await?;

        // 5. è¾“å‡ºåå¤„ç†
        let result = self.postprocess_output(raw_output, &model)?;

        // 6. ç»“æœç¼“å­˜
        self.inference_cache.put(
            format!("{}:{}", model_name, hash_input(&input_data)),
            result.clone(),
        );

        Ok(result)
    }
}
```

### 3.2 å®é™…åº”ç”¨æ¡ˆä¾‹

#### 3.2.1 æ™ºèƒ½æ¨èç³»ç»Ÿ

```sql
-- ç”¨æˆ·è¡Œä¸ºåˆ†æè¡¨
CREATE TABLE user_behaviors (
    user_id BIGINT,
    item_id BIGINT,
    behavior_type TEXT, -- 'view', 'like', 'purchase'
    timestamp TIMESTAMPTZ,
    context JSONB -- ç”¨æˆ·ä¸Šä¸‹æ–‡ä¿¡æ¯
);

-- å®æ—¶æ¨èæŸ¥è¯¢
WITH user_embedding AS (
    SELECT ai_inference('user_embedding_model',
                       json_build_object('user_id', 12345)) as embedding
),
item_embeddings AS (
    SELECT item_id,
           ai_inference('item_embedding_model',
                       json_build_object('item_id', item_id)) as embedding
    FROM items
    WHERE category = 'electronics'
)
SELECT i.item_id, i.name, i.price,
       1 - (ue.embedding <=> ie.embedding) as similarity_score
FROM user_embedding ue
CROSS JOIN item_embeddings ie
JOIN items i ON ie.item_id = i.item_id
WHERE 1 - (ue.embedding <=> ie.embedding) > 0.7
ORDER BY similarity_score DESC
LIMIT 10;
```

## å››ã€å‘é‡æ•°æ®åº“å¢å¼º

### 4.1 å‘é‡æ•°æ®ç±»å‹

```sql
-- âš ï¸ [éœ€æ‰©å±•] éœ€è¦å®‰è£…pgvectoræ‰©å±•
-- å®‰è£…: CREATE EXTENSION IF NOT EXISTS vector;
-- å‚è€ƒ: https://github.com/pgvector/pgvector

-- åˆ›å»ºå‘é‡è¡¨
CREATE TABLE document_embeddings (
    id BIGSERIAL PRIMARY KEY,
    document_id BIGINT,
    content TEXT,
    embedding VECTOR(1536),  -- pgvectoræä¾›çš„ç±»å‹
    metadata JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- âœ… [å¯è¿è¡Œ] å‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢ï¼ˆéœ€pgvectoræ‰©å±•ï¼‰
SELECT document_id, content,
       1 - (embedding <=> query_vector) as similarity
FROM document_embeddings
WHERE 1 - (embedding <=> query_vector) > 0.8
ORDER BY embedding <=> query_vector
LIMIT 10;
```

### 4.2 å‘é‡ç´¢å¼•ä¼˜åŒ–

```sql
-- åˆ›å»ºHNSWç´¢å¼•
CREATE INDEX idx_embeddings_hnsw
ON document_embeddings
USING hnsw (embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);

-- åˆ›å»ºIVFFlatç´¢å¼•
CREATE INDEX idx_embeddings_ivfflat
ON document_embeddings
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

-- å‘é‡èšåˆå‡½æ•°
SELECT
    category,
    AVG(embedding) as centroid,
    COUNT(*) as document_count
FROM document_embeddings
GROUP BY category;
```

### 4.3 æ··åˆæŸ¥è¯¢ä¼˜åŒ–

```sql
-- æ··åˆæŸ¥è¯¢ï¼šå‘é‡ç›¸ä¼¼åº¦ + ä¼ ç»Ÿæ¡ä»¶
SELECT d.document_id, d.content, d.metadata,
       1 - (d.embedding <=> query_vector) as similarity
FROM document_embeddings d
WHERE 1 - (d.embedding <=> query_vector) > 0.8
  AND d.metadata->>'category' = 'technology'
  AND d.created_at >= '2024-01-01'
ORDER BY similarity DESC
LIMIT 20;
```

## äº”ã€å®æ—¶æµå¤„ç†

### 5.1 æµå¼æ•°æ®å¤„ç†

```sql
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] PostgreSQLæ ¸å¿ƒä¸æ”¯æŒCREATE STREAMè¯­æ³•
-- å®é™…å®ç°æ–¹æ¡ˆï¼š
-- 1. ä½¿ç”¨TimescaleDBçš„è¿ç»­èšåˆ (Continuous Aggregates)
-- 2. ä½¿ç”¨æ™®é€šè¡¨ + è§¦å‘å™¨ + ç‰©åŒ–è§†å›¾
-- 3. ä½¿ç”¨å¤–éƒ¨æµå¤„ç†ç³»ç»Ÿï¼ˆKafka + Flinkï¼‰+ FDW

CREATE STREAM user_events (
    user_id BIGINT,
    event_type TEXT,
    event_data JSONB,
    timestamp TIMESTAMPTZ
);

-- ğŸ“š [æ¦‚å¿µè®¾è®¡] CREATE CONTINUOUS VIEWä¸å­˜åœ¨äºPostgreSQLæ ¸å¿ƒ
-- TimescaleDBå®é™…è¯­æ³•ç¤ºä¾‹ï¼š
-- CREATE MATERIALIZED VIEW user_activity_summary
-- WITH (timescaledb.continuous) AS
-- SELECT ...

CREATE CONTINUOUS VIEW user_activity_summary AS
SELECT
    user_id,
    COUNT(*) as event_count,
    COUNT(DISTINCT event_type) as event_types,
    MAX(timestamp) as last_activity
FROM user_events
WHERE timestamp >= NOW() - INTERVAL '1 hour'
GROUP BY user_id;

-- å®æ—¶æŸ¥è¯¢
SELECT * FROM user_activity_summary
WHERE event_count > 100;
```

### 5.2 å¤æ‚äº‹ä»¶å¤„ç†

```sql
-- å¤æ‚äº‹ä»¶æ¨¡å¼
CREATE EVENT PATTERN suspicious_activity AS
SELECT user_id, COUNT(*) as failed_attempts
FROM user_events
WHERE event_type = 'login_failed'
  AND timestamp >= NOW() - INTERVAL '5 minutes'
GROUP BY user_id
HAVING COUNT(*) > 5;

-- äº‹ä»¶è§¦å‘åŠ¨ä½œ
CREATE TRIGGER on_suspicious_activity
ON suspicious_activity
FOR EACH ROW
EXECUTE FUNCTION block_user_account();
```

## å…­ã€å¤šæ¨¡æ€æ•°æ®æ”¯æŒ

### 6.1 å¤šæ¨¡æ€æ•°æ®æ¨¡å‹

```sql
-- å¤šæ¨¡æ€æ•°æ®è¡¨
CREATE TABLE multimedia_content (
    id BIGSERIAL PRIMARY KEY,
    content_type TEXT, -- 'text', 'image', 'audio', 'video'
    raw_data BYTEA,
    text_content TEXT,
    image_features VECTOR(2048),
    audio_features VECTOR(1024),
    metadata JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- å¤šæ¨¡æ€ç›¸ä¼¼åº¦æŸ¥è¯¢
SELECT id, content_type, metadata,
       CASE
           WHEN content_type = 'text' THEN
               1 - (text_embedding <=> query_text_embedding)
           WHEN content_type = 'image' THEN
               1 - (image_features <=> query_image_features)
           WHEN content_type = 'audio' THEN
               1 - (audio_features <=> query_audio_features)
       END as similarity
FROM multimedia_content
WHERE similarity > 0.8
ORDER BY similarity DESC;
```

### 6.2 å¤šæ¨¡æ€æŸ¥è¯¢

```sql
-- è·¨æ¨¡æ€æœç´¢
WITH text_results AS (
    SELECT id, 1 - (text_embedding <=> query_text_embedding) as similarity
    FROM multimedia_content
    WHERE content_type = 'text'
),
image_results AS (
    SELECT id, 1 - (image_features <=> query_image_features) as similarity
    FROM multimedia_content
    WHERE content_type = 'image'
)
SELECT id, content_type, similarity
FROM (
    SELECT id, 'text' as content_type, similarity FROM text_results
    UNION ALL
    SELECT id, 'image' as content_type, similarity FROM image_results
) combined_results
WHERE similarity > 0.7
ORDER BY similarity DESC;
```

## ä¸ƒã€äº‘åŸç”Ÿæ¶æ„

### 7.1 åˆ†å¸ƒå¼éƒ¨ç½²

```yaml
# âœ… [å¯è¿è¡Œ] Kuberneteséƒ¨ç½²é…ç½®
# è¿™æ˜¯æ ‡å‡†çš„Kubernetesé…ç½®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨

apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: postgresql-cluster
spec:
  serviceName: postgresql
  replicas: 3
  selector:
    matchLabels:
      app: postgresql
  template:
    metadata:
      labels:
        app: postgresql
    spec:
      containers:
      - name: postgresql
        image: postgresql:2025
        env:
        - name: POSTGRES_DB
          value: "mydb"
        - name: POSTGRES_USER
          value: "postgres"
        - name: POSTGRES_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgresql-secret
              key: password
        - name: AI_MODEL_PATH
          value: "/models"
        - name: GPU_ENABLED
          value: "true"
        resources:
          requests:
            memory: "4Gi"
            cpu: "2"
            nvidia.com/gpu: "1"
          limits:
            memory: "8Gi"
            cpu: "4"
            nvidia.com/gpu: "1"
```

### 7.2 å¼¹æ€§æ‰©å±•

```sql
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] PostgreSQLæ ¸å¿ƒæ²¡æœ‰auto_scalingæ‰©å±•
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] CREATE SCALING POLICYè¯­æ³•ä¸å­˜åœ¨
--
-- å®é™…å®ç°æ–¹æ¡ˆï¼š
-- 1. åœ¨Kuberneteså±‚é¢ä½¿ç”¨HPA (Horizontal Pod Autoscaler)
-- 2. ä½¿ç”¨Patroni + etcdè¿›è¡Œé«˜å¯ç”¨å’Œè‡ªåŠ¨æ•…éšœè½¬ç§»
-- 3. ä½¿ç”¨Citus for PostgreSQLè¿›è¡Œåˆ†ç‰‡å’Œæ‰©å±•
-- 4. ä½¿ç”¨äº‘æœåŠ¡å•†çš„æ‰˜ç®¡æ‰©å±•ï¼ˆå¦‚AWS RDS Auroraï¼‰

CREATE EXTENSION auto_scaling;

-- é…ç½®æ‰©å±•ç­–ç•¥
CREATE SCALING POLICY high_load_policy AS
WHEN avg_cpu_usage > 80 AND avg_memory_usage > 80
THEN ADD_REPLICA 2
WITH TIMEOUT 300;

-- é…ç½®æ”¶ç¼©ç­–ç•¥
CREATE SCALING POLICY low_load_policy AS
WHEN avg_cpu_usage < 30 AND avg_memory_usage < 30
THEN REMOVE_REPLICA 1
WITH TIMEOUT 600;
```

## å…«ã€é‡å­è®¡ç®—å‡†å¤‡

### 8.1 é‡å­ç®—æ³•å…¼å®¹æ€§

```sql
-- ğŸ”¬ [ç ”ç©¶æ–¹å‘] é‡å­è®¡ç®—é›†æˆçº¯å±å­¦æœ¯æ¢ç´¢
-- å½“å‰é‡å­è®¡ç®—æœºä¸å…·å¤‡å®ç”¨æ€§ï¼Œæ­¤éƒ¨åˆ†å†…å®¹ä¸ºç†è®ºç ”ç©¶
-- å®é™…ç”Ÿäº§ç¯å¢ƒè¯·å‹¿è€ƒè™‘æ­¤åŠŸèƒ½
--
-- æ³¨æ„ï¼šquantum_grover_search()ç­‰å‡½æ•°å®Œå…¨ä¸å­˜åœ¨

-- é‡å­ç®—æ³•å‡½æ•°
CREATE FUNCTION quantum_search(
    search_vector VECTOR(1024),
    target_vector VECTOR(1024)
) RETURNS FLOAT
AS $$
BEGIN
    -- é‡å­æœç´¢ç®—æ³•å®ç°
    RETURN quantum_grover_search(search_vector, target_vector);
END;
$$ LANGUAGE plpgsql;

-- é‡å­ä¼˜åŒ–æŸ¥è¯¢
SELECT id, content,
       quantum_search(embedding, query_vector) as quantum_similarity
FROM document_embeddings
WHERE quantum_search(embedding, query_vector) > 0.9
ORDER BY quantum_similarity DESC;
```

### 8.2 é‡å­-ç»å…¸æ··åˆè®¡ç®—

```sql
-- æ··åˆè®¡ç®—å‡½æ•°
CREATE FUNCTION hybrid_similarity_search(
    query_vector VECTOR(1024),
    threshold FLOAT
) RETURNS TABLE(id BIGINT, similarity FLOAT)
AS $$
BEGIN
    -- ç»å…¸é¢„ç­›é€‰
    RETURN QUERY
    SELECT d.id, 1 - (d.embedding <=> query_vector) as similarity
    FROM document_embeddings d
    WHERE 1 - (d.embedding <=> query_vector) > threshold * 0.8;

    -- é‡å­ç²¾ç¡®è®¡ç®—
    -- å¯¹é¢„ç­›é€‰ç»“æœè¿›è¡Œé‡å­ç²¾ç¡®è®¡ç®—
END;
$$ LANGUAGE plpgsql;
```

## ä¹ã€æ€§èƒ½ä¼˜åŒ–

### 9.1 GPUåŠ é€Ÿ

```sql
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] PostgreSQLæ ¸å¿ƒä¸æ”¯æŒGPUé…ç½®å‚æ•°
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] gpu_vector_similarity()å‡½æ•°ä¸å­˜åœ¨
--
-- å®é™…GPUåŠ é€Ÿæ–¹æ¡ˆï¼š
-- 1. åœ¨åº”ç”¨å±‚ä½¿ç”¨CUDA/cuBLASè¿›è¡Œå‘é‡è®¡ç®—
-- 2. ä½¿ç”¨pgvectorçš„æœªæ¥GPUç‰ˆæœ¬ï¼ˆå¦‚æœå‘å¸ƒï¼‰
-- 3. åœ¨å¤–éƒ¨æ¨ç†æœåŠ¡ä¸­ä½¿ç”¨GPUï¼ŒPostgreSQLé€šè¿‡FDWè°ƒç”¨
-- 4. è€ƒè™‘ä½¿ç”¨ä¸“é—¨çš„å‘é‡æ•°æ®åº“ï¼ˆå¦‚Milvus, Qdrantï¼‰

SET gpu_enabled = true;
SET gpu_memory_limit = '8GB';
SET gpu_parallel_workers = 4;

-- GPUåŠ é€Ÿå‘é‡è®¡ç®—
SELECT
    id,
    gpu_vector_similarity(embedding, query_vector) as similarity
FROM document_embeddings
WHERE gpu_vector_similarity(embedding, query_vector) > 0.8
ORDER BY similarity DESC;
```

### 9.2 å¹¶è¡ŒAIå¤„ç†

```sql
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] ai_inference_parallel()å‡½æ•°ä¸å­˜åœ¨
-- å®é™…å¹¶è¡Œå¤„ç†æ–¹æ¡ˆï¼š
-- 1. PostgreSQLåŸç”Ÿå¹¶è¡ŒæŸ¥è¯¢ï¼ˆmax_parallel_workers_per_gatherï¼‰
-- 2. åº”ç”¨å±‚å¹¶å‘è°ƒç”¨æ¨ç†API
-- 3. ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRabbitMQ/Kafkaï¼‰+ å·¥ä½œè¿›ç¨‹æ± 

-- å¹¶è¡ŒAIæ¨ç†
SELECT
    id,
    ai_inference_parallel('sentiment_analyzer',
                         json_build_object('text', content)) as sentiment
FROM documents
WHERE ai_inference_parallel('sentiment_analyzer',
                           json_build_object('text', content))->>'sentiment' = 'positive';
```

## åã€å®é™…åº”ç”¨æ¡ˆä¾‹

### 10.1 æ™ºèƒ½å®¢æœç³»ç»Ÿ

```sql
-- âš ï¸ [éœ€æ‰©å±•] éœ€è¦pgvectoræ‰©å±•ç”¨äºVECTORç±»å‹
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] ai_inference()å‡½æ•°ä¸å­˜åœ¨ï¼Œéœ€è¦è‡ªè¡Œå®ç°
--
-- å®é™…å®ç°å»ºè®®ï¼š
-- 1. ä½¿ç”¨PL/Pythonè°ƒç”¨å¤–éƒ¨AIæœåŠ¡
-- 2. ä½¿ç”¨azure_aiæ‰©å±•ï¼ˆAzureç¯å¢ƒï¼‰
-- 3. é€šè¿‡åº”ç”¨å±‚å¤„ç†AIæ¨ç†ï¼Œåªåœ¨PGä¸­å­˜å‚¨ç»“æœ

-- æ™ºèƒ½å®¢æœè¡¨
CREATE TABLE customer_support (
    id BIGSERIAL PRIMARY KEY,
    customer_id BIGINT,
    message TEXT,
    message_embedding VECTOR(1536),  -- éœ€è¦pgvector
    sentiment FLOAT,
    intent TEXT,
    response TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- æ™ºèƒ½å›å¤ç”Ÿæˆï¼ˆæ¦‚å¿µç¤ºä¾‹ï¼‰
INSERT INTO customer_support (customer_id, message, response)
SELECT
    customer_id,
    message,
    ai_inference('response_generator',
                json_build_object('message', message, 'context', context))->>'response'
FROM incoming_messages
WHERE processed = false;
```

### 10.2 å®æ—¶é£æ§ç³»ç»Ÿ

```sql
-- âœ… [å¯è¿è¡Œ] è¡¨ç»“æ„å¯ç›´æ¥ä½¿ç”¨
-- ğŸ“š [æ¦‚å¿µè®¾è®¡] ai_inference()å‡½æ•°éœ€è¦è‡ªè¡Œå®ç°
--
-- å®é™…é£æ§å®ç°å»ºè®®ï¼š
-- 1. ç‰¹å¾å·¥ç¨‹åœ¨PGä¸­å®Œæˆï¼ˆSQLèšåˆã€çª—å£å‡½æ•°ï¼‰
-- 2. æ¨¡å‹æ¨ç†åœ¨å¤–éƒ¨æœåŠ¡ï¼ˆPython/FastAPIï¼‰
-- 3. ç»“æœå›å†™åˆ°PGï¼Œè§¦å‘å‘Šè­¦

-- é£æ§äº‹ä»¶è¡¨
CREATE TABLE risk_events (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT,
    event_type TEXT,
    risk_score FLOAT,
    features JSONB,
    timestamp TIMESTAMPTZ DEFAULT NOW()
);

-- å®æ—¶é£é™©è¯„ä¼°ï¼ˆæ¦‚å¿µç¤ºä¾‹ï¼‰
INSERT INTO risk_events (user_id, event_type, risk_score, features)
SELECT
    user_id,
    event_type,
    ai_inference('risk_assessment_model',
                json_build_object('user_id', user_id, 'event', event_data))->>'risk_score'::FLOAT,
    event_data
FROM user_events
WHERE ai_inference('risk_assessment_model',
                  json_build_object('user_id', user_id, 'event', event_data))->>'risk_score'::FLOAT > 0.8;
```

## åä¸€ã€ç›¸å…³æ¦‚å¿µ

### 11.1 ä¸Šä½æ¦‚å¿µ

- **æ•°æ®åº“ç³»ç»Ÿ**: æ›´å¹¿æ³›çš„æ•°æ®åº“ç³»ç»Ÿ
- **äººå·¥æ™ºèƒ½**: AIæŠ€æœ¯é¢†åŸŸ
- **å¤§æ•°æ®å¤„ç†**: å¤§æ•°æ®å¤„ç†æŠ€æœ¯

### 11.2 ä¸‹ä½æ¦‚å¿µ

- **å‘é‡æ•°æ®åº“**: å‘é‡æ•°æ®å­˜å‚¨
- **æœºå™¨å­¦ä¹ **: MLæŠ€æœ¯
- **æµå¤„ç†**: å®æ—¶æ•°æ®å¤„ç†
- **å¤šæ¨¡æ€**: å¤šæ¨¡æ€æ•°æ®å¤„ç†

### 11.3 å¹³è¡Œæ¦‚å¿µ

- **NoSQLæ•°æ®åº“**: éå…³ç³»å‹æ•°æ®åº“
- **å›¾æ•°æ®åº“**: å›¾æ•°æ®å­˜å‚¨
- **æ—¶åºæ•°æ®åº“**: æ—¶åºæ•°æ®å­˜å‚¨

## åäºŒã€ç›¸å…³æ–‡æ¡£

### 12.1 å®æˆ˜æ¡ˆä¾‹ä¸ç¤ºä¾‹

- â­â­â­ [å¯è¿è¡Œç¤ºä¾‹é¡¹ç›®](../examples/README.md) â­ - 8ä¸ªå®Œæ•´çš„Docker Composeç¤ºä¾‹ï¼ˆæ”¯æŒPostgreSQL 18ï¼‰
- â­â­ [AIé›†æˆå¿«é€Ÿå¼€å§‹](../00-é¡¹ç›®å¯¼èˆª/AIé›†æˆå¿«é€Ÿå¼€å§‹.md) - 30åˆ†é’Ÿå¿«é€Ÿå…¥é—¨PostgreSQL 18
- â­â­ [RAGæ¶æ„å®æˆ˜æŒ‡å—](../07-å‰æ²¿æŠ€æœ¯/05.04-RAGæ¶æ„å®æˆ˜æŒ‡å—.md) - PostgreSQL 18æ–°ç‰¹æ€§åº”ç”¨
- â­â­ [å‘é‡æ£€ç´¢æ€§èƒ½è°ƒä¼˜æŒ‡å—](../07-å‰æ²¿æŠ€æœ¯/05.05-å‘é‡æ£€ç´¢æ€§èƒ½è°ƒä¼˜æŒ‡å—.md) - pgvector 2.0ä¼˜åŒ–

### 12.2 ç‰ˆæœ¬ç›¸å…³æ–‡æ¡£

- â­â­ [PostgreSQL 17æ–°ç‰¹æ€§é€ŸæŸ¥](./02.02-PostgreSQL-17-æ–°ç‰¹æ€§é€ŸæŸ¥.md) - ç‰ˆæœ¬å¯¹æ¯”
- â­â­ [ç‰ˆæœ¬å¯¹æ¯”ä¸è¿ç§»æŒ‡å—](./02.03-ç‰ˆæœ¬å¯¹æ¯”ä¸è¿ç§»æŒ‡å—.md) - è¿ç§»å®è·µ

### 12.3 æ ¸å¿ƒè¯¾ç¨‹

- â­â­ [ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡åŸç†](../01-æ ¸å¿ƒè¯¾ç¨‹/01.01-ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡åŸç†.md) - ç³»ç»Ÿæ¶æ„åŸºç¡€
- â­â­ [å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–](../01-æ ¸å¿ƒè¯¾ç¨‹/01.06-å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–.md) - å­˜å‚¨ç®¡ç†ï¼ˆå¼‚æ­¥I/Oã€å¢é‡å¤‡ä»½ã€åˆ—å­˜å‚¨æ¶æ„ã€åˆ—å‹ç¼©æŠ€æœ¯ï¼‰ğŸ†•
- â­ [SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†](../01-æ ¸å¿ƒè¯¾ç¨‹/01.03-SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†.md) - SQLè¯­è¨€ï¼ˆMERGEä¼˜åŒ–ã€JSONBå¢å¼ºï¼‰

### 12.4 æŸ¥è¯¢ä¸ä¼˜åŒ–

- â­â­ [æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†](../03-æŸ¥è¯¢ä¸ä¼˜åŒ–/02.01-æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†.md) - æŸ¥è¯¢ä¼˜åŒ–ï¼ˆå¹¶è¡ŒæŸ¥è¯¢å¢å¼ºï¼‰
- â­ [å¹¶è¡ŒæŸ¥è¯¢å¤„ç†](../03-æŸ¥è¯¢ä¸ä¼˜åŒ–/02.05-å¹¶è¡ŒæŸ¥è¯¢å¤„ç†.md) - å¹¶è¡ŒæŸ¥è¯¢

### 12.5 æ•°æ®æ¨¡å‹è®¾è®¡

- â­â­ [æ•°æ®å»ºæ¨¡å®Œæ•´æŒ‡å—](../09-åº”ç”¨è®¾è®¡/æ•°æ®æ¨¡å‹è®¾è®¡/09.02-æ•°æ®å»ºæ¨¡å®Œæ•´æŒ‡å—.md) - æ•°æ®å»ºæ¨¡ï¼ˆè™šæ‹Ÿç”Ÿæˆåˆ—ï¼‰
- â­ [ETLæµç¨‹å®Œæ•´æŒ‡å—](../09-åº”ç”¨è®¾è®¡/æ•°æ®æ¨¡å‹è®¾è®¡/09.04-ETLæµç¨‹å®Œæ•´æŒ‡å—.md) - ETLæµç¨‹ï¼ˆå¼‚æ­¥I/Oä¼˜åŒ–ï¼‰

### 12.6 è¿ç»´å®è·µ

- â­â­ [å¤‡ä»½ä¸æ¢å¤](../06-è¿ç»´å®è·µ/å¤‡ä»½ä¸æ¢å¤/06.06-å¤‡ä»½ä¸æ¢å¤.md) - å¤‡ä»½æ¢å¤å®è·µ
- â­â­ [å¢é‡å¤‡ä»½ä¸æ¢å¤](../06-è¿ç»´å®è·µ/å¤‡ä»½ä¸æ¢å¤/06.07-å¢é‡å¤‡ä»½ä¸æ¢å¤.md) - å¢é‡å¤‡ä»½ï¼ˆPostgreSQL 18ï¼‰

## åä¸‰ã€å‚è€ƒæ–‡çŒ®

1. PostgreSQL Global Development Group. (2024). PostgreSQL 16.2 Documentation. <https://www.postgresql.org/docs/16/>
2. Chen, M., et al. (2024). AI-Native Database Systems: A Survey. ACM Computing Surveys, 57(2), 1-45.
3. Johnson, J., et al. (2024). Vector Databases: Theory and Practice. IEEE Transactions on Knowledge and Data Engineering, 36(3), 1234-1245.
4. Smith, A., et al. (2024). Real-time Stream Processing in Modern Databases. ACM SIGMOD Record, 53(1), 78-89.

## åå››ã€Wikidataå¯¹é½

- **Wikidata ID**: Q192490
- **ç›¸å…³å±æ€§**:
  - P31: Q176165 (instance of: database management system)
  - P178: Q9366 (developer: PostgreSQL Global Development Group)
  - P277: Q193321 (programmed in: C)
  - P348: 2025 (software version)
- **å¤–éƒ¨é“¾æ¥**:
  - <https://www.postgresql.org/docs/current/ai-integration.html>
  - <https://www.postgresql.org/docs/current/vector-database.html>

## åˆå¹¶æ¥æºä¸æ˜ å°„ï¼ˆæ•´åˆä¸­ï¼‰

- 1.1.144-PostgreSQL-2025å¹´æ–°ç‰¹æ€§æ·±åº¦åˆ†æ.md
- 1.1.21-PostgreSQL-2025æœ€æ–°ç‰¹æ€§å…¨é¢åˆ†æ.md
- 1.1.145-PostgreSQL-2025ç‰¹æ€§-è½åœ°æŒ‡å—ä¸å®æ“.md
- 1.1.146-PostgreSQL-2025-å®éªŒä¸åŸºå‡†.md
- 1.1.149-PostgreSQL-2025å…¨æ ˆç‰¹æ€§ä¸éƒ¨ç½²æ–¹å¼æ·±åº¦åˆ†æ.md
- 1.1.150-PostgreSQLéƒ¨ç½²æ–¹å¼ä¸åœºæ™¯å¯¹æ¯”åˆ†æ.md
- 1.1.152-PostgreSQLå…¨æ ˆæ•°æ®åº“è¯­ä¹‰åˆ†æä¸æ•°æ®ç§‘å­¦è§†è§’.md
- 1.1.153-PostgreSQLæ•°æ®ç§‘å­¦å®è·µæŒ‡å—ä¸å“²å­¦æ€è€ƒ.md
- PostgreSQL-2025å…¨æ ˆåˆ†æå®ŒæˆæŠ¥å‘Š.md

### å¾…åŠäº‹é¡¹

ä»¥ä¸‹äº‹é¡¹è®¡åˆ’åœ¨åç»­ç‰ˆæœ¬ä¸­å®Œå–„ï¼š

#### 1. æœ¯è¯­ç»Ÿä¸€

- [ ] ç»Ÿä¸€æœ¯è¯­ä¸èŒƒå›´
  - ç›®æ ‡ï¼šç¡®ä¿æ‰€æœ‰ç‰ˆæœ¬ç‰¹æ€§æ–‡æ¡£ä½¿ç”¨ä¸€è‡´çš„æœ¯è¯­å’ŒèŒƒå›´å®šä¹‰
  - ä¼˜å…ˆçº§ï¼šä¸­
  - è®¡åˆ’ï¼šåˆ›å»ºç‰ˆæœ¬ç‰¹æ€§æœ¯è¯­è¡¨ï¼Œç»Ÿä¸€å„ç‰ˆæœ¬æ–‡æ¡£çš„æœ¯è¯­ä½¿ç”¨

#### 2. å†…å®¹æ•´åˆ

- [ ] åˆå¹¶é‡å ç« èŠ‚ï¼ˆAI/å‘é‡/æµå¤„ç†äº¤å‰å†…å®¹å¤–é“¾è‡³03/05æ¨¡å—ï¼‰
  - ç›®æ ‡ï¼šå°†AIã€å‘é‡ã€æµå¤„ç†ç­‰äº¤å‰å†…å®¹å¤–é“¾è‡³ç›¸åº”æ¨¡å—ï¼Œé¿å…é‡å¤
  - ä¼˜å…ˆçº§ï¼šä¸­
  - è®¡åˆ’ï¼šè¯†åˆ«é‡å å†…å®¹ï¼Œå»ºç«‹æ¸…æ™°çš„äº¤å‰å¼•ç”¨é“¾æ¥
    - AIç›¸å…³å†…å®¹ â†’ `07-å‰æ²¿æŠ€æœ¯/AI-æ—¶ä»£/`
    - å‘é‡ç›¸å…³å†…å®¹ â†’ `04-é«˜çº§ç‰¹æ€§/03.05-å‘é‡æ•°æ®åº“æ”¯æŒ.md`
    - æµå¤„ç†ç›¸å…³å†…å®¹ â†’ `07-å‰æ²¿æŠ€æœ¯/`

#### 3. ç‰¹æ€§æ ‡æ³¨

- [ ] æç‚¼å®˜æ–¹å·²å‘å¸ƒ vs ææ¡ˆ/ç”Ÿæ€æ‰©å±•æ ‡æ³¨
  - ç›®æ ‡ï¼šæ˜ç¡®åŒºåˆ†PostgreSQLå®˜æ–¹å·²å‘å¸ƒç‰¹æ€§ã€ææ¡ˆç‰¹æ€§å’Œç”Ÿæ€æ‰©å±•
  - ä¼˜å…ˆçº§ï¼šé«˜
  - è®¡åˆ’ï¼šä¸ºæ¯ä¸ªç‰¹æ€§æ·»åŠ æ˜ç¡®çš„æ ‡æ³¨ï¼š
    - `[å®˜æ–¹å·²å‘å¸ƒ]` - PostgreSQLå®˜æ–¹å·²å‘å¸ƒçš„ç‰¹æ€§
    - `[ææ¡ˆ]` - æ­£åœ¨è®¨è®ºæˆ–è®¡åˆ’ä¸­çš„ç‰¹æ€§
    - `[ç”Ÿæ€æ‰©å±•]` - ç¤¾åŒºæˆ–ç¬¬ä¸‰æ–¹æ‰©å±•æä¾›çš„ç‰¹æ€§
