# RAG æ¶æ„è®¾è®¡

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥  
> **æŠ€æœ¯ç‰ˆæœ¬**: Neon v3.0+ / LangChain  
> **æ–‡æ¡£ç¼–å·**: 03-04-01

## ğŸ“‘ ç›®å½•

- [RAG æ¶æ„è®¾è®¡](#rag-æ¶æ„è®¾è®¡)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1 æŠ€æœ¯èƒŒæ™¯](#11-æŠ€æœ¯èƒŒæ™¯)
    - [1.2 æ¶æ„å®šä½](#12-æ¶æ„å®šä½)
  - [2. æ¶æ„è®¾è®¡](#2-æ¶æ„è®¾è®¡)
    - [2.1 æ•´ä½“æ¶æ„](#21-æ•´ä½“æ¶æ„)
    - [2.2 æ ¸å¿ƒç»„ä»¶](#22-æ ¸å¿ƒç»„ä»¶)
  - [3. æ•°æ®ç‰ˆæœ¬ç®¡ç†](#3-æ•°æ®ç‰ˆæœ¬ç®¡ç†)
    - [3.1 ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥](#31-ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥)
    - [3.2 åˆ†æ”¯ç®¡ç†](#32-åˆ†æ”¯ç®¡ç†)
  - [4. å®ç°ç»†èŠ‚](#4-å®ç°ç»†èŠ‚)
  - [5. æœ€ä½³å®è·µ](#5-æœ€ä½³å®è·µ)
  - [6. å‚è€ƒèµ„æ–™](#6-å‚è€ƒèµ„æ–™)

---

## 1. æ¦‚è¿°

### 1.1 æŠ€æœ¯èƒŒæ™¯

RAG (Retrieval-Augmented Generation) åº”ç”¨éœ€è¦ç®¡ç†ä¸åŒç‰ˆæœ¬çš„çŸ¥è¯†åº“æ•°æ®ï¼Œæ”¯æŒå®éªŒå’Œç‰ˆæœ¬å›æ»šã€‚

### 1.2 æ¶æ„å®šä½

RAG æ¶æ„è®¾è®¡åŸºäº Neon åˆ†æ”¯æŠ€æœ¯ï¼Œå®ç°çŸ¥è¯†åº“æ•°æ®çš„ç‰ˆæœ¬ç®¡ç†å’Œå®éªŒéš”ç¦»ã€‚

---

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         RAG åº”ç”¨å±‚                       â”‚
â”‚  LangChain | LlamaIndex | è‡ªå®šä¹‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Neon åˆ†æ”¯ç®¡ç†                     â”‚
â”‚  Main Branch | Experiment Branches      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PostgreSQL + pgvector              â”‚
â”‚  æ–‡æ¡£å­˜å‚¨ | å‘é‡ç´¢å¼• | å…ƒæ•°æ®ç®¡ç†         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç»„ä»¶

**1. ä¸»åˆ†æ”¯ (Main Branch)**:

- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„çŸ¥è¯†åº“
- ç¨³å®šçš„æ–‡æ¡£å’Œå‘é‡æ•°æ®
- å®šæœŸå¤‡ä»½å’Œç‰ˆæœ¬æ ‡è®°

**2. å®éªŒåˆ†æ”¯ (Experiment Branches)**:

- ç”¨äºæµ‹è¯•æ–°çš„æ–‡æ¡£é›†
- ç‹¬ç«‹çš„å‘é‡ç´¢å¼•
- æ”¯æŒå¿«é€Ÿåˆ›å»ºå’Œåˆ é™¤

**3. ç‰ˆæœ¬ç®¡ç†**:

- åŸºäº Git çš„ç‰ˆæœ¬æ§åˆ¶ç†å¿µ
- æ”¯æŒåˆ†æ”¯åˆå¹¶å’Œå›æ»š
- ç‰ˆæœ¬æ ‡ç­¾å’Œå¿«ç…§

---

## 3. æ•°æ®ç‰ˆæœ¬ç®¡ç†

### 3.1 ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

**ç‰ˆæœ¬å‘½å**:

```python
# ç‰ˆæœ¬å‘½åè§„èŒƒ
versions = {
    'main': 'ç”Ÿäº§ç‰ˆæœ¬',
    'v1.0.0': 'ç¨³å®šç‰ˆæœ¬',
    'experiment-001': 'å®éªŒç‰ˆæœ¬',
    'feature-new-docs': 'åŠŸèƒ½åˆ†æ”¯'
}
```

### 3.2 åˆ†æ”¯ç®¡ç†

**åˆ›å»ºå®éªŒåˆ†æ”¯**:

```python
from neon import NeonClient

client = NeonClient(api_key=API_KEY)

# åˆ›å»ºå®éªŒåˆ†æ”¯
branch = client.branches.create(
    project_id=PROJECT_ID,
    name='experiment-rag-v2',
    parent_id='main'
)

# ä½¿ç”¨åˆ†æ”¯æ•°æ®åº“
connection_string = branch.connection_string
```

---

## 4. å®ç°ç»†èŠ‚

**LangChain é›†æˆ**:

```python
from langchain.vectorstores import PGVector
from langchain.embeddings import OpenAIEmbeddings

# è¿æ¥åˆ°å®éªŒåˆ†æ”¯
CONNECTION_STRING = branch.connection_string

# åˆ›å»ºå‘é‡å­˜å‚¨
vectorstore = PGVector.from_documents(
    documents=documents,
    embedding=OpenAIEmbeddings(),
    connection_string=CONNECTION_STRING,
    collection_name='experiment_v2'
)

# æ‰§è¡Œ RAG æŸ¥è¯¢
retriever = vectorstore.as_retriever()
results = retriever.get_relevant_documents(query)
```

---

## 5. æœ€ä½³å®è·µ

1. **åˆ†æ”¯å‘½å**: ä½¿ç”¨æ¸…æ™°çš„å‘½åè§„èŒƒ
2. **ç‰ˆæœ¬ç®¡ç†**: å®šæœŸåˆ›å»ºç‰ˆæœ¬å¿«ç…§
3. **å®éªŒç®¡ç†**: åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„å®éªŒåˆ†æ”¯
4. **æ€§èƒ½ç›‘æ§**: ç›‘æ§ä¸åŒç‰ˆæœ¬çš„æ€§èƒ½æŒ‡æ ‡

---

## 6. å‚è€ƒèµ„æ–™

- [Neon æ¶æ„è¯¦è§£](../Neonå¹³å°/Neonæ¶æ„è¯¦è§£.md)
- [æ•°æ®ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥](./æ•°æ®ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥.md)
- [LangChain é›†æˆå®è·µ](./LangChainé›†æˆå®è·µ.md)

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥  
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
