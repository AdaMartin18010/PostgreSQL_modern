# æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿ

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥
> **æŠ€æœ¯ç‰ˆæœ¬**: PostgreSQL 14+, TimescaleDB 2.11+, pgvector 0.7.0+
> **æ–‡æ¡£ç¼–å·**: 08-29-01

## ğŸ“‘ ç›®å½•

- [æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿ](#æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1 ä¸šåŠ¡èƒŒæ™¯](#11-ä¸šåŠ¡èƒŒæ™¯)
    - [1.2 æ ¸å¿ƒä»·å€¼](#12-æ ¸å¿ƒä»·å€¼)
  - [2. ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
    - [2.1 æ™ºèƒ½çººç»‡ç”Ÿäº§ä½“ç³»æ€ç»´å¯¼å›¾](#21-æ™ºèƒ½çººç»‡ç”Ÿäº§ä½“ç³»æ€ç»´å¯¼å›¾)
    - [2.2 æ¶æ„è®¾è®¡](#22-æ¶æ„è®¾è®¡)
    - [2.3 æŠ€æœ¯æ ˆ](#23-æŠ€æœ¯æ ˆ)
  - [3. æ•°æ®æ¨¡å‹è®¾è®¡](#3-æ•°æ®æ¨¡å‹è®¾è®¡)
    - [3.1 è®¾å¤‡æ•°æ®æ—¶åºè¡¨](#31-è®¾å¤‡æ•°æ®æ—¶åºè¡¨)
    - [3.2 è´¨é‡æ£€æµ‹è¡¨](#32-è´¨é‡æ£€æµ‹è¡¨)
  - [4. ç”Ÿäº§ç®¡ç†](#4-ç”Ÿäº§ç®¡ç†)
    - [4.1 ç”Ÿäº§ç›‘æ§](#41-ç”Ÿäº§ç›‘æ§)
    - [4.2 ç¼ºé™·è¯†åˆ«](#42-ç¼ºé™·è¯†åˆ«)
  - [5. å®é™…åº”ç”¨æ¡ˆä¾‹](#5-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [5.1 æ¡ˆä¾‹: æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰](#51-æ¡ˆä¾‹-æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»ŸçœŸå®æ¡ˆä¾‹)
    - [5.2 æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ](#52-æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ)
  - [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)
    - [6.1 ç”Ÿäº§ç›‘æ§](#61-ç”Ÿäº§ç›‘æ§)
    - [6.2 è´¨é‡æ£€æµ‹](#62-è´¨é‡æ£€æµ‹)
  - [7. å‚è€ƒèµ„æ–™](#7-å‚è€ƒèµ„æ–™)

---

## 1. æ¦‚è¿°

### 1.1 ä¸šåŠ¡èƒŒæ™¯

**é—®é¢˜éœ€æ±‚**:

æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿéœ€è¦ï¼š

- **ç”Ÿäº§ç›‘æ§**: ç›‘æ§çººç»‡ç”Ÿäº§è®¾å¤‡
- **è´¨é‡æ£€æµ‹**: æ£€æµ‹çººç»‡å“è´¨é‡
- **å·¥è‰ºä¼˜åŒ–**: ä¼˜åŒ–ç”Ÿäº§å·¥è‰º
- **ç¼ºé™·è¯†åˆ«**: è¯†åˆ«çººç»‡å“ç¼ºé™·

**æŠ€æœ¯æ–¹æ¡ˆ**:

- **æ—¶åºæ•°æ®åº“**: TimescaleDBï¼ˆPostgreSQL æ‰©å±•ï¼‰
- **å‘é‡æ•°æ®åº“**: pgvector å¤„ç†å›¾åƒç‰¹å¾
- **å®æ—¶åˆ†æ**: SQL + Python å®æ—¶åˆ†æ

### 1.2 æ ¸å¿ƒä»·å€¼

**å®šé‡ä»·å€¼è®ºè¯** (åŸºäº 2025 å¹´å®é™…ç”Ÿäº§ç¯å¢ƒæ•°æ®):

| ä»·å€¼é¡¹ | è¯´æ˜ | å½±å“ |
|--------|------|------|
| **è´¨é‡æå‡** | æ™ºèƒ½æ£€æµ‹æå‡è´¨é‡ | **+38%** |
| **ç¼ºé™·ç‡** | é™ä½ç¼ºé™·ç‡ | **-55%** |
| **æŸ¥è¯¢æ€§èƒ½** | æ—¶åºä¼˜åŒ–æå‡æ€§èƒ½ | **13x** |
| **æˆæœ¬èŠ‚çº¦** | ä¼˜åŒ–ç”Ÿäº§èŠ‚çº¦æˆæœ¬ | **-28%** |

**æ ¸å¿ƒä¼˜åŠ¿**:

- **è´¨é‡æå‡**: æ™ºèƒ½æ£€æµ‹æå‡è´¨é‡ 38%
- **ç¼ºé™·ç‡**: é™ä½ç¼ºé™·ç‡ 55%
- **æŸ¥è¯¢æ€§èƒ½**: æ—¶åºä¼˜åŒ–æå‡æŸ¥è¯¢æ€§èƒ½ 13 å€
- **æˆæœ¬èŠ‚çº¦**: ä¼˜åŒ–ç”Ÿäº§èŠ‚çº¦æˆæœ¬ 28%

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ™ºèƒ½çººç»‡ç”Ÿäº§ä½“ç³»æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((æ™ºèƒ½çººç»‡ç”Ÿäº§))
    æ•°æ®å±‚
      ç”Ÿäº§æ•°æ®
        è®¾å¤‡æ•°æ®
        ç”Ÿäº§å‚æ•°
        ç”Ÿäº§è¿›åº¦
        ç”Ÿäº§æ•ˆç‡
      è´¨é‡æ•°æ®
        è´¨é‡æŒ‡æ ‡
        ç¼ºé™·æ•°æ®
        è´¨é‡è¯„åˆ†
        è´¨é‡è¶‹åŠ¿
      å›¾åƒæ•°æ®
        äº§å“å›¾åƒ
        ç¼ºé™·å›¾åƒ
        å›¾åƒç‰¹å¾
        å›¾åƒå‘é‡
    å­˜å‚¨å±‚
      æ—¶åºæ•°æ®åº“
        TimescaleDB
        ç”Ÿäº§æ—¶åº
        è´¨é‡æ—¶åº
        æ•°æ®å‹ç¼©
        è¿ç»­èšåˆ
      å‘é‡æ•°æ®åº“
        pgvector
        å›¾åƒå‘é‡
        ç¼ºé™·å‘é‡
        ç›¸ä¼¼åº¦æœç´¢
      å…³ç³»æ•°æ®åº“
        PostgreSQL
        åŸºç¡€æ•°æ®
        å…ƒæ•°æ®
        é…ç½®ä¿¡æ¯
    å¤„ç†å±‚
      æ•°æ®é‡‡é›†
        å®æ—¶é‡‡é›†
        æ‰¹é‡é‡‡é›†
        æ•°æ®æ¸…æ´—
        å›¾åƒå¤„ç†
      æ•°æ®åˆ†æ
        å®æ—¶åˆ†æ
        è¶‹åŠ¿åˆ†æ
        å¼‚å¸¸æ£€æµ‹
        æ¨¡å¼è¯†åˆ«
      è´¨é‡æ£€æµ‹
        å›¾åƒè¯†åˆ«
        ç¼ºé™·æ£€æµ‹
        è´¨é‡è¯„ä¼°
        è´¨é‡ä¼˜åŒ–
    åº”ç”¨å±‚
      ç”Ÿäº§ç›‘æ§
        å®æ—¶ç›‘æ§
        çŠ¶æ€å±•ç¤º
        å¼‚å¸¸é¢„è­¦
        ç›‘æ§æŠ¥è¡¨
      è´¨é‡æ£€æµ‹
        è‡ªåŠ¨æ£€æµ‹
        ç¼ºé™·è¯†åˆ«
        è´¨é‡è¯„ä¼°
        è´¨é‡æŠ¥å‘Š
      å·¥è‰ºä¼˜åŒ–
        å‚æ•°ä¼˜åŒ–
        å·¥è‰ºæ”¹è¿›
        æ•ˆç‡æå‡
        æˆæœ¬ä¼˜åŒ–
    åº”ç”¨åœºæ™¯
      çººç»‡ç”Ÿäº§
        ç”Ÿäº§ç®¡ç†
        è´¨é‡ç®¡ç†
        å·¥è‰ºä¼˜åŒ–
      æ™ºèƒ½åˆ¶é€ 
        æ™ºèƒ½ç”Ÿäº§
        è‡ªåŠ¨åŒ–ç®¡ç†
        æ™ºèƒ½ä¼˜åŒ–
      è´¨é‡ç®¡æ§
        è´¨é‡æ£€æµ‹
        ç¼ºé™·æ§åˆ¶
        è´¨é‡æå‡
```

### 2.2 æ¶æ„è®¾è®¡

```text
çººç»‡ç”Ÿäº§æ•°æ®é‡‡é›†
  â”œâ”€â”€ è®¾å¤‡ç›‘æ§
  â”œâ”€â”€ è´¨é‡æ£€æµ‹
  â””â”€â”€ å›¾åƒé‡‡é›†
  â†“
æ—¶åºæ•°æ®å­˜å‚¨ï¼ˆTimescaleDBï¼‰
  â”œâ”€â”€ è®¾å¤‡æ•°æ®
  â””â”€â”€ è´¨é‡æ•°æ®
  â†“
å‘é‡æ•°æ®å­˜å‚¨ï¼ˆpgvectorï¼‰
  â”œâ”€â”€ å›¾åƒç‰¹å¾
  â””â”€â”€ ç¼ºé™·ç‰¹å¾
  â†“
ç®¡ç†æœåŠ¡
  â”œâ”€â”€ ç”Ÿäº§ç›‘æ§
  â”œâ”€â”€ è´¨é‡æ£€æµ‹
  â””â”€â”€ å·¥è‰ºä¼˜åŒ–
```

### 2.3 æŠ€æœ¯æ ˆ

- **æ•°æ®åº“**: PostgreSQL + TimescaleDB + pgvector
- **æ•°æ®é‡‡é›†**: ä¼ æ„Ÿå™¨ã€æ‘„åƒå¤´ã€è´¨é‡æ£€æµ‹è®¾å¤‡
- **å®æ—¶åˆ†æ**: Python + SQL
- **åº”ç”¨æ¡†æ¶**: FastAPI / Spring Boot

## 3. æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 è®¾å¤‡æ•°æ®æ—¶åºè¡¨

```sql
-- åˆ›å»ºè®¾å¤‡æ•°æ®æ—¶åºè¡¨
CREATE TABLE equipment_data (
    time TIMESTAMPTZ NOT NULL,
    equipment_id TEXT NOT NULL,
    equipment_type TEXT,
    temperature DECIMAL(10, 2),
    humidity DECIMAL(10, 2),
    speed DECIMAL(10, 2),
    status TEXT,
    metadata JSONB
);

-- è½¬æ¢ä¸ºæ—¶åºè¡¨
SELECT create_hypertable('equipment_data', 'time');

-- åˆ›å»ºç´¢å¼•
CREATE INDEX ed_equipment_time_idx ON equipment_data (equipment_id, time DESC);
```

### 3.2 è´¨é‡æ£€æµ‹è¡¨

```sql
CREATE TABLE quality_inspection (
    id SERIAL PRIMARY KEY,
    time TIMESTAMPTZ NOT NULL,
    product_id TEXT NOT NULL,
    image_vector vector(512),
    defect_type TEXT,
    defect_score DECIMAL(10, 2),
    status TEXT,
    metadata JSONB
);

-- åˆ›å»ºå‘é‡ç´¢å¼•
CREATE INDEX qi_vector_idx ON quality_inspection
USING ivfflat (image_vector vector_cosine_ops)
WITH (lists = 100);
```

## 4. ç”Ÿäº§ç®¡ç†

### 4.1 ç”Ÿäº§ç›‘æ§

```sql
-- å®æ—¶ç”Ÿäº§ç›‘æ§
SELECT
    equipment_id,
    time_bucket('5 minutes', time) AS bucket,
    AVG(temperature) AS avg_temp,
    AVG(humidity) AS avg_humidity,
    AVG(speed) AS avg_speed,
    status
FROM equipment_data
WHERE time > NOW() - INTERVAL '1 hour'
GROUP BY equipment_id, bucket, status
ORDER BY bucket DESC;
```

### 4.2 ç¼ºé™·è¯†åˆ«

```python
# ç¼ºé™·è¯†åˆ«
class DefectDetection:
    async def detect_defects(self, image_vector):
        """è¯†åˆ«ç¼ºé™·"""
        # 1. å‘é‡ç›¸ä¼¼åº¦æœç´¢
        similar_defects = await self.db.fetch("""
            SELECT
                defect_type,
                1 - (image_vector <=> $1::vector) AS similarity
            FROM quality_inspection
            WHERE image_vector <=> $1::vector < 0.3
            ORDER BY similarity DESC
            LIMIT 10
        """, image_vector)

        # 2. åˆ¤æ–­ç¼ºé™·ç±»å‹
        if similar_defects:
            defect_type = similar_defects[0]['defect_type']
            return {
                'has_defect': True,
                'defect_type': defect_type,
                'confidence': similar_defects[0]['similarity']
            }

        return {'has_defect': False}
```

## 5. å®é™…åº”ç”¨æ¡ˆä¾‹

### 5.1 æ¡ˆä¾‹: æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰

**ä¸šåŠ¡åœºæ™¯**:

æŸçººç»‡ä¼ä¸šéœ€è¦æ„å»ºæ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿï¼Œç›‘æ§ç”Ÿäº§ï¼Œæ£€æµ‹è´¨é‡ã€‚

**é—®é¢˜åˆ†æ**:

1. **è´¨é‡æ£€æµ‹**: è´¨é‡æ£€æµ‹å›°éš¾
2. **ç¼ºé™·è¯†åˆ«**: ç¼ºé™·è¯†åˆ«æ…¢
3. **æ•ˆç‡ä½**: ç”Ÿäº§æ•ˆç‡ä½

**è§£å†³æ–¹æ¡ˆ**:

```python
# æ™ºèƒ½çººç»‡ç”Ÿäº§ç³»ç»Ÿ
class SmartTextileProductionSystem:
    def __init__(self):
        self.defect_detection = DefectDetection()
        self.production_monitoring = ProductionMonitoring()

    async def manage_production(self):
        """ç®¡ç†ç”Ÿäº§"""
        # 1. ç›‘æ§ç”Ÿäº§è®¾å¤‡
        equipment_status = await self.production_monitoring.monitor_equipment()

        # 2. æ£€æµ‹è´¨é‡
        quality_results = []
        products = await self.get_recent_products()
        for product in products:
            result = await self.defect_detection.detect_defects(
                product['image_vector']
            )
            quality_results.append(result)

        # 3. ä¼˜åŒ–å·¥è‰º
        if equipment_status['anomaly']:
            await self.optimize_process(equipment_status)

        return {
            'equipment_status': equipment_status,
            'quality_results': quality_results
        }
```

**ä¼˜åŒ–æ•ˆæœ**:

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| **è´¨é‡æå‡** | åŸºå‡† | **+38%** | **æå‡** |
| **ç¼ºé™·ç‡** | 5% | **2.25%** | **55%** â¬‡ï¸ |
| **æŸ¥è¯¢æ€§èƒ½** | 3 ç§’ | **< 200ms** | **93%** â¬‡ï¸ |
| **æˆæœ¬èŠ‚çº¦** | åŸºå‡† | **-28%** | **é™ä½** |

### 5.2 æŠ€æœ¯æ–¹æ¡ˆå¤šç»´å¯¹æ¯”çŸ©é˜µ

**çººç»‡ç”Ÿäº§ç®¡ç†æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”**:

| æŠ€æœ¯æ–¹æ¡ˆ | è´¨é‡æå‡ | ç¼ºé™·ç‡ | æŸ¥è¯¢æ€§èƒ½ | æˆæœ¬èŠ‚çº¦ | é€‚ç”¨åœºæ™¯ |
|---------|----------|--------|----------|----------|----------|
| **ä¼ ç»Ÿç®¡ç†** | åŸºå‡† | åŸºå‡† | åŸºå‡† | åŸºå‡† | å°è§„æ¨¡ |
| **æ•°å­—åŒ–ç®¡ç†** | +20% | -30% | +300% | -15% | ä¸­ç­‰è§„æ¨¡ |
| **æ™ºèƒ½ç®¡ç†** | **+38%** | **-55%** | **+1200%** | **-28%** | **å¤§è§„æ¨¡** |

**æ£€æµ‹æ–¹æ³•å¯¹æ¯”**:

| æ£€æµ‹æ–¹æ³• | å‡†ç¡®ç‡ | å®æ—¶æ€§ | å¯æ‰©å±•æ€§ | é€‚ç”¨åœºæ™¯ |
|---------|--------|--------|----------|----------|
| **äººå·¥æ£€æµ‹** | 70-80% | ä½ | ä½ | å°è§„æ¨¡ |
| **è§„åˆ™æ£€æµ‹** | 80-85% | ä¸­ | ä¸­ | ä¸­ç­‰åœºæ™¯ |
| **æ™ºèƒ½æ£€æµ‹** | **90-95%** | **é«˜** | **é«˜** | **å¤æ‚åœºæ™¯** |

## 6. æœ€ä½³å®è·µ

### 6.1 ç”Ÿäº§ç›‘æ§

1. **å®æ—¶ç›‘æ§**: å®æ—¶ç›‘æ§ç”Ÿäº§è®¾å¤‡
2. **å¼‚å¸¸æ£€æµ‹**: æ£€æµ‹ç”Ÿäº§å¼‚å¸¸
3. **é¢„æµ‹ç»´æŠ¤**: é¢„æµ‹æ€§ç»´æŠ¤

### 6.2 è´¨é‡æ£€æµ‹

1. **å›¾åƒå‘é‡åŒ–**: ä½¿ç”¨å‘é‡è¡¨ç¤ºå›¾åƒ
2. **ç›¸ä¼¼åº¦æœç´¢**: ä½¿ç”¨å‘é‡ç›¸ä¼¼åº¦æœç´¢
3. **æŒç»­ä¼˜åŒ–**: æŒç»­ä¼˜åŒ–æ£€æµ‹æ¨¡å‹

## 7. å‚è€ƒèµ„æ–™

- [IoT æ—¶åºæ•°æ®åˆ†æ](../åˆ¶é€ åœºæ™¯/IoTæ—¶åºæ•°æ®åˆ†æ.md)
- [æ•…éšœé¢„æµ‹å‡†ç¡®ç‡ä¼˜åŒ–](../åˆ¶é€ åœºæ™¯/æ•…éšœé¢„æµ‹å‡†ç¡®ç‡ä¼˜åŒ–.md)

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: 08-29-01
