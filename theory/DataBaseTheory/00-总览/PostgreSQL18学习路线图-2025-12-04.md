# PostgreSQL 18学习路线图

> **从入门到精通的完整路径**

---

## 学习路径总览

```
初学者（0-3个月）
    ↓
进阶者（3-6个月）
    ↓
专家（6-12个月）
    ↓
大师（12个月+）
```

---

## 📚 第一阶段：初学者（0-3个月）

### 目标

- 理解PostgreSQL基础概念
- 掌握基本SQL操作
- 了解PostgreSQL 18新特性

### 学习内容

#### Week 1-2: PostgreSQL基础

**理论**:

- 什么是PostgreSQL
- 关系型数据库基础
- ACID特性
- 事务概念

**实践**:

```sql
-- 安装PostgreSQL 18
-- 创建数据库
CREATE DATABASE mydb;

-- 创建表
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(100),
    email VARCHAR(200),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 基本CRUD
INSERT INTO users (username, email) VALUES ('alice', 'alice@example.com');
SELECT * FROM users;
UPDATE users SET email = 'new@example.com' WHERE user_id = 1;
DELETE FROM users WHERE user_id = 1;
```

**资源**:

- PostgreSQL官方教程
- [快速参考卡](./PostgreSQL18快速参考卡-2025-12-04.md)

---

#### Week 3-4: 索引与查询优化

**理论**:

- 索引类型（B-tree, GIN, GiST, BRIN）
- EXPLAIN执行计划
- 查询优化基础

**实践**:

```sql
-- 创建索引
CREATE INDEX idx_users_email ON users(email);

-- ⭐ PostgreSQL 18: Skip Scan
CREATE INDEX idx_orders_multi ON orders(store_id, order_date);
-- 查询只用order_date也能用索引！

-- 查看执行计划
EXPLAIN (ANALYZE, BUFFERS) SELECT * FROM orders WHERE order_date = '2025-12-04';
```

**资源**:

- [PostgreSQL 18新特性分析](../01-形式化方法与基础理论/01.07-PostgreSQL18新特性完整分析.md)（第3章：查询优化器）

---

#### Week 5-8: PostgreSQL 18核心特性

**理论**:

- 内置连接池
- 异步I/O
- 增量排序
- LZ4压缩

**实践**:

```ini
# 启用新特性
enable_builtin_connection_pooling = on
enable_async_io = on
```

**资源**:

- [PostgreSQL 18新特性分析](../01-形式化方法与基础理论/01.07-PostgreSQL18新特性完整分析.md)
- [FAQ](./PostgreSQL18-FAQ-2025-12-04.md)

---

#### Week 9-12: 实战项目

**项目**: 构建简单的待办事项应用

```sql
-- 数据库设计
CREATE TABLE todos (
    todo_id SERIAL PRIMARY KEY,
    title VARCHAR(200),
    description TEXT,
    status VARCHAR(20) DEFAULT 'pending',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 创建索引
CREATE INDEX idx_todos_status ON todos(status);

-- 查询
SELECT * FROM todos WHERE status = 'pending' ORDER BY created_at DESC;
```

**目标**: 熟悉基本开发流程

---

## 🚀 第二阶段：进阶者（3-6个月）

### 目标

- 深入理解PostgreSQL架构
- 掌握性能调优
- 学习高级特性

### 学习内容

#### Month 4: 事务与并发控制

**理论**:

- MVCC机制
- 事务隔离级别
- 锁机制
- 死锁处理

**实践**:

```sql
-- 事务隔离
BEGIN TRANSACTION ISOLATION LEVEL SERIALIZABLE;
-- 操作...
COMMIT;

-- 锁诊断
SELECT * FROM pg_locks WHERE NOT granted;
```

**资源**:

- MVCC理论文档
- [故障诊断案例：锁冲突](../20-故障诊断案例库/02-锁冲突诊断.md)

---

#### Month 5: 性能调优

**理论**:

- 配置优化
- 查询优化
- 索引策略
- VACUUM原理

**实践**:

```sql
-- 慢查询分析
SELECT * FROM pg_stat_statements
WHERE mean_exec_time > 100
ORDER BY mean_exec_time DESC;

-- ⭐ PG 18: 并行VACUUM
VACUUM (PARALLEL 8) large_table;

-- 创建多变量统计
CREATE STATISTICS tbl_stats (dependencies, ndistinct)
ON col1, col2 FROM table_name;
```

**资源**:

- [最佳实践](./PostgreSQL18最佳实践-2025-12-04.md)
- [性能调优案例](./PostgreSQL18性能调优案例-2025-12-04.md)
- [工具脚本](../22-工具脚本/README.md)

---

#### Month 6: 实战案例学习

**学习路径**:

1. **电商秒杀系统**（难度⭐⭐⭐⭐⭐）
   - [完整案例](../19-场景案例库/01-电商秒杀系统/README.md)
   - 学习：高并发、防超卖、连接池

2. **IoT时序数据**（难度⭐⭐⭐⭐）
   - [完整案例](../19-场景案例库/03-IoT时序数据系统/README.md)
   - 学习：高频写入、BRIN索引、压缩

**目标**: 理解真实场景的设计思路

---

## 🎓 第三阶段：专家（6-12个月）

### 目标

- 掌握PostgreSQL内部机制
- 能够设计复杂系统
- 解决生产环境问题

### 学习内容

#### Month 7-8: 高级查询与分析

**理论**:

- 窗口函数
- CTE递归
- JSON/JSONB
- 全文搜索

**实践**:

```sql
-- 窗口函数
SELECT
    product_id,
    sales,
    RANK() OVER (ORDER BY sales DESC) as rank
FROM product_sales;

-- 递归CTE
WITH RECURSIVE tree AS (
    SELECT id, parent_id, name FROM categories WHERE parent_id IS NULL
    UNION ALL
    SELECT c.id, c.parent_id, c.name FROM categories c
    JOIN tree t ON c.parent_id = t.id
)
SELECT * FROM tree;

-- ⭐ PG 18: 改进的全文搜索
CREATE INDEX idx_docs_fts ON documents
USING GIN (to_tsvector('chinese', content));
```

**案例**:

- [OLAP分析系统](../19-场景案例库/02-OLAP分析系统/README.md)

---

#### Month 9-10: 高可用与复制

**理论**:

- 流复制
- 逻辑复制
- 故障转移
- 备份恢复

**实践**:

```bash
# 配置主从复制
# 主库
ALTER SYSTEM SET wal_level = replica;

# 从库
pg_basebackup -h primary -D /data/standby -P -R

# ⭐ PG 18: 压缩复制流
ALTER SYSTEM SET wal_compression = lz4;
```

---

#### Month 11-12: 生产环境实战

**项目**: 设计并实现一个生产级系统

**要求**:

- 支持10万+并发
- QPS 50K+
- 99.99%可用性
- 完整的监控告警

**参考**:

- [电商秒杀系统](../19-场景案例库/01-电商秒杀系统/README.md)
- [故障诊断手册](./PostgreSQL18故障诊断手册-2025-12-04.md)

---

## 🏆 第四阶段：大师（12个月+）

### 目标

- 深入PostgreSQL源码
- 贡献社区
- 成为领域专家

### 学习内容

#### 源码阅读

**推荐顺序**:

1. 查询解析（parser）
2. 查询优化器（optimizer）
3. 执行器（executor）
4. 存储引擎（storage）
5. MVCC实现

**资源**:

- PostgreSQL源码
- 内核开发者邮件列表

---

#### 贡献社区

**方式**:

1. 修复bug
2. 提交功能建议
3. 编写文档
4. 回答问题
5. 分享经验

---

#### 研究方向

**可选方向**:

- 分布式PostgreSQL
- PostgreSQL + AI/ML
- 时序数据库优化
- 查询优化算法
- 存储引擎优化

---

## 📊 学习效果自测

### 初学者自测

- [ ] 能独立安装和配置PostgreSQL 18
- [ ] 掌握基本的CRUD操作
- [ ] 理解索引的作用
- [ ] 会使用EXPLAIN查看执行计划
- [ ] 了解PostgreSQL 18的核心新特性

---

### 进阶者自测

- [ ] 能够分析和优化慢查询
- [ ] 理解MVCC和事务隔离
- [ ] 会配置高性能PostgreSQL
- [ ] 能够诊断锁问题
- [ ] 完成至少一个实战案例

---

### 专家自测

- [ ] 能够设计千万级用户系统
- [ ] 深入理解查询优化器原理
- [ ] 能够解决复杂的生产问题
- [ ] 配置高可用架构
- [ ] 对PostgreSQL内部机制有深入理解

---

### 大师自测

- [ ] 阅读过PostgreSQL核心源码
- [ ] 为社区贡献过代码或文档
- [ ] 发表过技术文章或演讲
- [ ] 能够指导他人学习PostgreSQL
- [ ] 在某个领域有深入研究

---

## 🎯 学习建议

### 1. 实践为主

**80%时间实践，20%时间理论**

```sql
-- 不要只看，要动手！
CREATE TABLE test (...);
-- 插入测试数据
-- 运行查询
-- 分析性能
```

---

### 2. 循序渐进

**不要跳级学习**

- 基础不牢，地动山摇
- 每个阶段扎实掌握
- 通过自测检验效果

---

### 3. 真实项目

**理论结合实际**

- 参与真实项目
- 解决实际问题
- 总结经验教训

---

### 4. 社区参与

**学习不是孤立的**

- 提问和回答问题
- 分享学习笔记
- 参与技术讨论

---

## 📚 推荐资源

### 本项目资源

1. [PostgreSQL 18新特性完整分析](../01-形式化方法与基础理论/01.07-PostgreSQL18新特性完整分析.md)
2. [场景案例库](../19-场景案例库/README.md)
3. [实用指南系列](./PostgreSQL18最佳实践-2025-12-04.md)
4. [性能基准测试](../23-性能基准测试/README.md)
5. [工具脚本集](../22-工具脚本/README.md)

### 外部资源

1. **官方文档**: <https://www.postgresql.org/docs/18/>
2. **源码**: <https://github.com/postgres/postgres>
3. **邮件列表**: <pgsql-general@postgresql.org>
4. **中文社区**: <http://www.postgres.cn/>

---

## 🎉 结语

**PostgreSQL 18是一个强大的数据库系统，值得深入学习！**

- 保持好奇心
- 勤于实践
- 持续学习
- 分享经验

**祝你学习愉快！** 🚀

---

**创建日期**: 2025-12-04
**适用版本**: PostgreSQL 18
**维护者**: DataBaseTheory团队
