# AI工具集

## 元数据
- **创建日期**: 2025-12-04
- **工具数**: 6个实用工具

---

## 1. 知识抽取工具

```python
# 从文本提取实体和关系
from transformers import pipeline

class KnowledgeExtractor:
    """知识抽取工具"""

    def __init__(self):
        self.ner = pipeline("ner", model="dslim/bert-base-NER")

    def extract(self, text: str) -> Dict:
        """提取实体和关系"""
        entities = self.ner(text)

        return {
            'entities': entities,
            'text': text
        }

# 使用
extractor = KnowledgeExtractor()
result = extractor.extract("Apple Inc. was founded by Steve Jobs")
```

---

## 2. 向量索引构建工具

```python
# 批量构建向量索引
def build_vector_index(table: str, text_column: str, batch_size: int = 1000):
    """为文本列批量生成向量索引"""

    from sentence_transformers import SentenceTransformer
    model = SentenceTransformer('all-MiniLM-L6-v2')

    cursor.execute(f"SELECT id, {text_column} FROM {table}")

    batch = []
    for row in cursor:
        batch.append(row)

        if len(batch) >= batch_size:
            # 批量生成向量
            texts = [r[1] for r in batch]
            embeddings = model.encode(texts)

            # 批量更新
            for (id, _), emb in zip(batch, embeddings):
                cursor.execute(f"""
                    UPDATE {table}
                    SET embedding = %s
                    WHERE id = %s
                """, (emb.tolist(), id))

            conn.commit()
            batch = []
```

---

## 3. KBQA测试工具

```bash
#!/bin/bash
# 测试KBQA准确率

questions=(
    "有多少员工?"
    "张三在哪个部门?"
    "研发中心的Python工程师"
)

for q in "${questions[@]}"; do
    echo "问题: $q"
    curl -X POST http://localhost:8000/api/ask \
         -H "Content-Type: application/json" \
         -d "{\"question\": \"$q\"}"
    echo ""
done
```

---

**返回**: [AI知识库首页](./README.md)
