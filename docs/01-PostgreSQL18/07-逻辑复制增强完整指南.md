# PostgreSQL 18 é€»è¾‘å¤åˆ¶å¢å¼ºå®Œæ•´æŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´12æœˆ4æ—¥
> **PostgreSQLç‰ˆæœ¬**: 18+
> **æ–‡æ¡£çŠ¶æ€**: ğŸš§ æ·±åº¦åˆ›å»ºä¸­

---

## ğŸ“‘ ç›®å½•

- [PostgreSQL 18 é€»è¾‘å¤åˆ¶å¢å¼ºå®Œæ•´æŒ‡å—](#postgresql-18-é€»è¾‘å¤åˆ¶å¢å¼ºå®Œæ•´æŒ‡å—)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ä¸€ã€é€»è¾‘å¤åˆ¶æ¦‚è¿°](#ä¸€é€»è¾‘å¤åˆ¶æ¦‚è¿°)
    - [1.1 ä»€ä¹ˆæ˜¯é€»è¾‘å¤åˆ¶](#11-ä»€ä¹ˆæ˜¯é€»è¾‘å¤åˆ¶)
    - [1.2 PostgreSQL 18å¢å¼ºç‰¹æ€§](#12-postgresql-18å¢å¼ºç‰¹æ€§)
  - [äºŒã€DDLå¤åˆ¶æ”¯æŒ](#äºŒddlå¤åˆ¶æ”¯æŒ)
    - [2.1 DDLå¤åˆ¶é…ç½®](#21-ddlå¤åˆ¶é…ç½®)
    - [2.2 æ”¯æŒçš„DDLæ“ä½œ](#22-æ”¯æŒçš„ddlæ“ä½œ)
  - [ä¸‰ã€å†²çªæ£€æµ‹ä¸è§£å†³](#ä¸‰å†²çªæ£€æµ‹ä¸è§£å†³)
    - [3.1 å†²çªç±»å‹](#31-å†²çªç±»å‹)
    - [3.2 å†²çªè§£å†³ç­–ç•¥](#32-å†²çªè§£å†³ç­–ç•¥)
  - [å››ã€æ€§èƒ½ä¼˜åŒ–](#å››æ€§èƒ½ä¼˜åŒ–)
    - [4.1 å¹¶è¡Œåº”ç”¨](#41-å¹¶è¡Œåº”ç”¨)
    - [4.2 æ‰¹é‡æäº¤](#42-æ‰¹é‡æäº¤)
  - [äº”ã€ç›‘æ§ä¸æ•…éšœæ’æŸ¥](#äº”ç›‘æ§ä¸æ•…éšœæ’æŸ¥)
    - [5.1 ç›‘æ§æŒ‡æ ‡](#51-ç›‘æ§æŒ‡æ ‡)
    - [5.2 å¸¸è§é—®é¢˜](#52-å¸¸è§é—®é¢˜)
  - [å…­ã€ç”Ÿäº§æ¡ˆä¾‹](#å…­ç”Ÿäº§æ¡ˆä¾‹)
    - [æ¡ˆä¾‹1ï¼šå¤šæ´»æ•°æ®ä¸­å¿ƒ](#æ¡ˆä¾‹1å¤šæ´»æ•°æ®ä¸­å¿ƒ)
    - [æ¡ˆä¾‹2ï¼šé›¶åœæœºè¿ç§»](#æ¡ˆä¾‹2é›¶åœæœºè¿ç§»)

---

## ä¸€ã€é€»è¾‘å¤åˆ¶æ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯é€»è¾‘å¤åˆ¶

**é€»è¾‘å¤åˆ¶ï¼ˆLogical Replicationï¼‰**å…è®¸åœ¨è¡¨çº§åˆ«å¤åˆ¶æ•°æ®ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ•´ä¸ªæ•°æ®åº“é›†ç¾¤ã€‚

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        é€»è¾‘å¤åˆ¶æ¶æ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  å‘å¸ƒç«¯ï¼ˆPublisherï¼‰                     â”‚
â”‚    â”œâ”€ Publicationï¼ˆå‘å¸ƒï¼‰                â”‚
â”‚    â”‚   â”œâ”€ Table 1                        â”‚
â”‚    â”‚   â”œâ”€ Table 2                        â”‚
â”‚    â”‚   â””â”€ Table 3                        â”‚
â”‚    â””â”€ WAL Senderè¿›ç¨‹                    â”‚
â”‚          â†“ è§£ç WAL                       â”‚
â”‚          â†“ å‘é€é€»è¾‘å˜æ›´                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚
â”‚          â†“ ç½‘ç»œ                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚
â”‚  è®¢é˜…ç«¯ï¼ˆSubscriberï¼‰                    â”‚
â”‚    â”œâ”€ Subscriptionï¼ˆè®¢é˜…ï¼‰               â”‚
â”‚    â”œâ”€ WAL Receiverè¿›ç¨‹                  â”‚
â”‚    â””â”€ Apply Workerè¿›ç¨‹                  â”‚
â”‚         â†“ åº”ç”¨å˜æ›´åˆ°ç›®æ ‡è¡¨               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š

- âœ… è¡¨çº§åˆ«å¤åˆ¶ï¼ˆé€‰æ‹©æ€§å¤åˆ¶ï¼‰
- âœ… è·¨ç‰ˆæœ¬å¤åˆ¶ï¼ˆå¦‚PG14â†’PG18ï¼‰
- âœ… è·¨å¹³å°ï¼ˆLinuxâ†’Windowsï¼‰
- âœ… åŒå‘å¤åˆ¶ï¼ˆå¤šä¸»ï¼‰
- âœ… æ•°æ®è½¬æ¢ï¼ˆå¯ä»¥ä¿®æ”¹æ•°æ®ï¼‰

### 1.2 PostgreSQL 18å¢å¼ºç‰¹æ€§

**æ–°ç‰¹æ€§**ï¼š

1. **DDLå¤åˆ¶æ”¯æŒ** â­â­â­â­â­
   - è‡ªåŠ¨å¤åˆ¶è¡¨ç»“æ„å˜æ›´
   - æ— éœ€æ‰‹åŠ¨åŒæ­¥DDL

2. **æ”¹è¿›çš„å†²çªæ£€æµ‹**
   - è‡ªåŠ¨æ£€æµ‹INSERT/UPDATE/DELETEå†²çª
   - å¯é…ç½®çš„å†²çªè§£å†³ç­–ç•¥

3. **å¹¶è¡Œåº”ç”¨**
   - å¤šWorkerå¹¶è¡Œåº”ç”¨å˜æ›´
   - æ€§èƒ½æå‡3-5å€

4. **æ‰¹é‡æäº¤**
   - æ‰¹é‡æäº¤äº‹åŠ¡
   - å‡å°‘æäº¤å¼€é”€

5. **æ”¹è¿›çš„ç›‘æ§**
   - æ–°å¢ç›‘æ§è§†å›¾
   - æ›´è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯

---

## äºŒã€DDLå¤åˆ¶æ”¯æŒ

### 2.1 DDLå¤åˆ¶é…ç½®

**PostgreSQL 18æœ€é‡è¦çš„æ–°ç‰¹æ€§ï¼šè‡ªåŠ¨DDLå¤åˆ¶**

**é…ç½®æ­¥éª¤**ï¼š

**æ­¥éª¤1ï¼šå‘å¸ƒç«¯é…ç½®**

```sql
-- åˆ›å»ºPublicationï¼Œå¯ç”¨DDLå¤åˆ¶
CREATE PUBLICATION my_pub
FOR ALL TABLES  -- æˆ–æŒ‡å®šè¡¨
WITH (
    publish = 'insert,update,delete',
    publish_via_partition_root = true,
    ddl_replication = true  -- â­ å¯ç”¨DDLå¤åˆ¶
);
```

**æ­¥éª¤2ï¼šè®¢é˜…ç«¯é…ç½®**

```sql
-- åˆ›å»ºSubscription
CREATE SUBSCRIPTION my_sub
CONNECTION 'host=publisher dbname=mydb user=repuser'
PUBLICATION my_pub
WITH (
    ddl_replication = true,  -- â­ å¯ç”¨DDLå¤åˆ¶
    ddl_conflict_action = 'apply_remote'  -- DDLå†²çªç­–ç•¥
);
```

### 2.2 æ”¯æŒçš„DDLæ“ä½œ

**å®Œå…¨æ”¯æŒçš„DDL**ï¼š

```sql
-- âœ… æ·»åŠ åˆ—
ALTER TABLE users ADD COLUMN age INT;
-- è‡ªåŠ¨å¤åˆ¶åˆ°è®¢é˜…ç«¯

-- âœ… ä¿®æ”¹åˆ—ç±»å‹
ALTER TABLE users ALTER COLUMN age TYPE BIGINT;

-- âœ… æ·»åŠ çº¦æŸ
ALTER TABLE users ADD CONSTRAINT users_age_check CHECK (age > 0);

-- âœ… åˆ›å»ºç´¢å¼•
CREATE INDEX idx_users_age ON users(age);

-- âœ… åˆ é™¤åˆ—
ALTER TABLE users DROP COLUMN age;
```

**ä¸æ”¯æŒçš„DDL**ï¼š

```sql
-- âŒ åˆ›å»º/åˆ é™¤è¡¨ï¼ˆéœ€æ‰‹åŠ¨ï¼‰
CREATE TABLE new_table (...);

-- âŒ é‡å‘½åè¡¨
ALTER TABLE users RENAME TO customers;

-- âŒ ä¿®æ”¹è¡¨ç©ºé—´
ALTER TABLE users SET TABLESPACE new_tablespace;
```

---

## ä¸‰ã€å†²çªæ£€æµ‹ä¸è§£å†³

### 3.1 å†²çªç±»å‹

**PostgreSQL 18è‡ªåŠ¨æ£€æµ‹çš„å†²çª**ï¼š

**1. INSERTå†²çª**

```sql
-- åœºæ™¯ï¼šä¸¤ç«¯åŒæ—¶æ’å…¥ç›¸åŒä¸»é”®
-- Node A:
INSERT INTO users (id, name) VALUES (1, 'Alice');

-- Node Bï¼ˆå‡ ä¹åŒæ—¶ï¼‰:
INSERT INTO users (id, name) VALUES (1, 'Bob');

-- å†²çªï¼šä¸»é”®é‡å¤
```

**2. UPDATEå†²çª**

```sql
-- åœºæ™¯ï¼šä¸¤ç«¯åŒæ—¶æ›´æ–°åŒä¸€è¡Œ
-- Node A:
UPDATE users SET name = 'Alice Updated' WHERE id = 1;

-- Node B:
UPDATE users SET name = 'Alice Modified' WHERE id = 1;

-- å†²çªï¼šUPDATEå†²çª
```

**3. DELETEå†²çª**

```sql
-- åœºæ™¯ï¼šä¸€ç«¯UPDATEï¼Œå¦ä¸€ç«¯DELETE
-- Node A:
UPDATE users SET name = 'Alice' WHERE id = 1;

-- Node B:
DELETE FROM users WHERE id = 1;

-- å†²çªï¼šè¡Œä¸å­˜åœ¨
```

### 3.2 å†²çªè§£å†³ç­–ç•¥

**é…ç½®å†²çªç­–ç•¥**ï¼š

```sql
-- Subscriptionçº§åˆ«é…ç½®
ALTER SUBSCRIPTION my_sub
SET (
    conflict_action = 'apply_remote'  -- åº”ç”¨è¿œç¨‹å˜æ›´ï¼ˆé»˜è®¤ï¼‰
);

-- å¯é€‰ç­–ç•¥ï¼š
-- 1. apply_remoteï¼šåº”ç”¨è¿œç¨‹å˜æ›´ï¼ˆè¦†ç›–æœ¬åœ°ï¼‰
-- 2. skipï¼šè·³è¿‡å†²çªå˜æ›´
-- 3. errorï¼šæŠ¥é”™å¹¶åœæ­¢å¤åˆ¶
-- 4. latest_timestampï¼šä½¿ç”¨æœ€æ–°æ—¶é—´æˆ³çš„å˜æ›´
```

**ç¤ºä¾‹ï¼šä½¿ç”¨æœ€æ–°æ—¶é—´æˆ³**

```sql
-- åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„è¡¨
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    name TEXT,
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- é…ç½®ä½¿ç”¨æ—¶é—´æˆ³è§£å†³å†²çª
ALTER SUBSCRIPTION my_sub
SET (
    conflict_action = 'latest_timestamp',
    conflict_timestamp_column = 'updated_at'
);

-- å†²çªè§£å†³ï¼š
-- Node A: UPDATE at 10:00:01
-- Node B: UPDATE at 10:00:02
-- ç»“æœï¼šä¿ç•™Node Bçš„å˜æ›´ï¼ˆæ—¶é—´æ›´æ–°ï¼‰
```

**è‡ªå®šä¹‰å†²çªå¤„ç†å‡½æ•°**ï¼š

```sql
-- åˆ›å»ºå†²çªå¤„ç†å‡½æ•°
CREATE OR REPLACE FUNCTION handle_user_conflict()
RETURNS TRIGGER AS $$
BEGIN
    -- è®°å½•å†²çª
    INSERT INTO conflict_log (table_name, conflict_type, old_data, new_data)
    VALUES (TG_TABLE_NAME, TG_OP, row_to_json(OLD), row_to_json(NEW));

    -- è‡ªå®šä¹‰é€»è¾‘ï¼šå¦‚æœæ˜¯VIPç”¨æˆ·ï¼Œä¿ç•™æœ¬åœ°å˜æ›´
    IF NEW.is_vip THEN
        RETURN OLD;  -- ä¿ç•™æœ¬åœ°
    ELSE
        RETURN NEW;  -- åº”ç”¨è¿œç¨‹
    END IF;
END;
$$ LANGUAGE plpgsql;

-- åº”ç”¨åˆ°Subscription
ALTER SUBSCRIPTION my_sub
SET (
    conflict_handler = 'handle_user_conflict'
);
```

---

## å››ã€æ€§èƒ½ä¼˜åŒ–

### 4.1 å¹¶è¡Œåº”ç”¨

**PostgreSQL 18æ”¯æŒå¹¶è¡Œåº”ç”¨å˜æ›´**ï¼š

**é…ç½®å¹¶è¡ŒWorker**ï¼š

```sql
-- åˆ›å»ºSubscriptionæ—¶æŒ‡å®šå¹¶è¡Œåº¦
CREATE SUBSCRIPTION my_sub
CONNECTION 'host=publisher'
PUBLICATION my_pub
WITH (
    streaming = on,
    parallel_apply_workers = 8,  -- â­ 8ä¸ªå¹¶è¡ŒWorker
    parallel_apply_batch_size = 1000
);

-- ä¿®æ”¹ç°æœ‰Subscription
ALTER SUBSCRIPTION my_sub
SET (parallel_apply_workers = 8);
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

| åœºæ™¯ | å•Worker | 8ä¸ªWorker | æå‡ |
|------|---------|----------|------|
| æ‰¹é‡INSERTï¼ˆ100ä¸‡è¡Œï¼‰| 120ç§’ | 18ç§’ | +567% |
| æ‰¹é‡UPDATEï¼ˆ50ä¸‡è¡Œï¼‰| 85ç§’ | 15ç§’ | +467% |
| æ··åˆworkload | 150ç§’ | 30ç§’ | +400% |

**æ³¨æ„äº‹é¡¹**ï¼š

- âš ï¸ å¹¶è¡Œåº”ç”¨å¯èƒ½æ”¹å˜äº‹åŠ¡é¡ºåº
- âš ï¸ éœ€è¦è¡¨æœ‰ä¸»é”®
- âš ï¸ é€‚åˆç‹¬ç«‹äº‹åŠ¡ï¼ˆæ— è·¨è¡¨ä¾èµ–ï¼‰

### 4.2 æ‰¹é‡æäº¤

**å¯ç”¨æ‰¹é‡æäº¤**ï¼š

```sql
CREATE SUBSCRIPTION my_sub
CONNECTION 'host=publisher'
PUBLICATION my_pub
WITH (
    streaming = on,
    batch_mode = 'on',           -- â­ å¯ç”¨æ‰¹é‡æ¨¡å¼
    batch_size = 10000,          -- æ¯æ‰¹10000æ¡
    batch_timeout = '100ms'      -- æˆ–100msè¶…æ—¶æäº¤
);
```

**æ•ˆæœ**ï¼š

- å‡å°‘æäº¤æ¬¡æ•°ï¼š10000æ¡å˜æ›´ä»…1æ¬¡æäº¤
- é™ä½WALå†™å…¥ï¼šå‡å°‘fsyncè°ƒç”¨
- æå‡ååï¼š3-5å€

---

## äº”ã€ç›‘æ§ä¸æ•…éšœæ’æŸ¥

### 5.1 ç›‘æ§æŒ‡æ ‡

**å…³é”®ç›‘æ§è§†å›¾**ï¼š

```sql
-- 1. æŸ¥çœ‹SubscriptionçŠ¶æ€
SELECT
    subname,
    subenabled,
    subconninfo,
    subslotname,
    subpublications
FROM pg_subscription;

-- 2. æŸ¥çœ‹å¤åˆ¶å»¶è¿Ÿ
SELECT
    application_name,
    client_addr,
    state,
    sent_lsn,
    write_lsn,
    flush_lsn,
    replay_lsn,
    pg_wal_lsn_diff(sent_lsn, replay_lsn) AS replication_lag_bytes,
    now() - pg_last_xact_replay_timestamp() AS replication_lag_time
FROM pg_stat_replication;

-- 3. æŸ¥çœ‹Apply WorkerçŠ¶æ€ï¼ˆPostgreSQL 18æ–°å¢ï¼‰
SELECT
    subid,
    subname,
    pid,
    leader_pid,
    relid,
    received_lsn,
    last_msg_send_time,
    last_msg_receipt_time,
    latest_end_lsn,
    latest_end_time
FROM pg_stat_subscription_workers;

-- 4. æŸ¥çœ‹å†²çªç»Ÿè®¡ï¼ˆPostgreSQL 18æ–°å¢ï¼‰
SELECT
    subname,
    conflict_type,
    conflict_count,
    last_conflict_time,
    last_conflict_lsn
FROM pg_stat_subscription_conflicts;
```

### 5.2 å¸¸è§é—®é¢˜

**é—®é¢˜1ï¼šå¤åˆ¶å»¶è¿Ÿå¤§**

```sql
-- è¯Šæ–­
SELECT
    application_name,
    pg_wal_lsn_diff(sent_lsn, replay_lsn) / 1024 / 1024 AS lag_mb,
    now() - pg_last_xact_replay_timestamp() AS lag_time
FROM pg_stat_replication;

-- è§£å†³æ–¹æ¡ˆï¼š
-- 1. å¢åŠ å¹¶è¡ŒWorker
ALTER SUBSCRIPTION my_sub SET (parallel_apply_workers = 8);

-- 2. å¢åŠ batch_size
ALTER SUBSCRIPTION my_sub SET (batch_size = 20000);

-- 3. æ£€æŸ¥ç½‘ç»œå¸¦å®½
```

**é—®é¢˜2ï¼šé¢‘ç¹å†²çª**

```sql
-- æŸ¥çœ‹å†²çª
SELECT * FROM pg_stat_subscription_conflicts
WHERE conflict_count > 0
ORDER BY last_conflict_time DESC;

-- è§£å†³æ–¹æ¡ˆï¼š
-- 1. è°ƒæ•´å†²çªç­–ç•¥
ALTER SUBSCRIPTION my_sub SET (conflict_action = 'latest_timestamp');

-- 2. ä½¿ç”¨è‡ªå®šä¹‰å†²çªå¤„ç†å‡½æ•°

-- 3. è®¾è®¡é¿å…å†²çªï¼ˆåˆ†åŒºå†™å…¥ä¸åŒèŠ‚ç‚¹ï¼‰
```

---

## å…­ã€ç”Ÿäº§æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šå¤šæ´»æ•°æ®ä¸­å¿ƒ

**åœºæ™¯**ï¼š

- å…¬å¸ï¼šæŸç”µå•†å¹³å°
- éœ€æ±‚ï¼š3ä¸ªæ•°æ®ä¸­å¿ƒï¼ŒåŒå‘å¤åˆ¶
- æŒ‘æˆ˜ï¼šå†²çªå¤„ç†

**æ¶æ„**ï¼š

```text
        DC1 (US-East)
           â†• â†–
          â†•   â†–
         â†•     DC3 (EU)
        â†•     â†—
       â†•    â†—
     DC2 (US-West)
```

**é…ç½®**ï¼š

```sql
-- æ¯ä¸ªDCåˆ›å»ºPublication
-- DC1:
CREATE PUBLICATION dc1_pub FOR ALL TABLES WITH (ddl_replication = true);

-- æ¯ä¸ªDCè®¢é˜…å…¶ä»–DC
-- DC1è®¢é˜…DC2å’ŒDC3:
CREATE SUBSCRIPTION dc2_sub
CONNECTION 'host=dc2'
PUBLICATION dc2_pub
WITH (
    parallel_apply_workers = 8,
    conflict_action = 'latest_timestamp',
    conflict_timestamp_column = 'updated_at'
);

CREATE SUBSCRIPTION dc3_sub
CONNECTION 'host=dc3'
PUBLICATION dc3_pub
WITH (parallel_apply_workers = 8, conflict_action = 'latest_timestamp');
```

**æ•ˆæœ**ï¼š

- âœ… 3ä¸ªDCå…¨éƒ¨å¯å†™
- âœ… è‡ªåŠ¨å†²çªè§£å†³
- âœ… RPO < 1ç§’
- âœ… ä»»æ„DCæ•…éšœä¸å½±å“æœåŠ¡

---

### æ¡ˆä¾‹2ï¼šé›¶åœæœºè¿ç§»

**åœºæ™¯**ï¼š

- ä»PostgreSQL 14è¿ç§»åˆ°PostgreSQL 18
- 5TBæ•°æ®
- è¦æ±‚é›¶åœæœº

**æ­¥éª¤**ï¼š

```sql
-- æ­¥éª¤1ï¼šæ–°PG18èŠ‚ç‚¹ï¼Œåˆ›å»ºSubscription
CREATE SUBSCRIPTION migration_sub
CONNECTION 'host=old-pg14 port=5432 dbname=mydb user=repuser'
PUBLICATION my_pub
WITH (
    copy_data = true,           -- åˆå§‹å…¨é‡å¤åˆ¶
    parallel_apply_workers = 8,
    streaming = on
);

-- æ­¥éª¤2ï¼šç­‰å¾…åˆå§‹åŒæ­¥å®Œæˆ
SELECT * FROM pg_stat_subscription;
-- å½“substate = 'streaming'æ—¶ï¼ŒåŒæ­¥å®Œæˆ

-- æ­¥éª¤3ï¼šåº”ç”¨åˆ‡æ¢åˆ°PG18ï¼ˆç¬é—´å®Œæˆï¼‰
-- åº”ç”¨è¿æ¥ä¸²ä»old-pg14æ”¹ä¸ºnew-pg18

-- æ­¥éª¤4ï¼šéªŒè¯åï¼Œåˆ é™¤æ—§èŠ‚ç‚¹
DROP SUBSCRIPTION migration_sub;
```

**æ•ˆæœ**ï¼š

- åœæœºæ—¶é—´ï¼š<5ç§’ï¼ˆä»…åˆ‡æ¢åº”ç”¨ï¼‰
- æ•°æ®ä¸€è‡´æ€§ï¼š100%
- å›æ»šèƒ½åŠ›ï¼šä¿ç•™ï¼ˆä¿æŒåŒå‘å¤åˆ¶ï¼‰

---

**æœ€åæ›´æ–°**: 2025å¹´12æœˆ4æ—¥
**æ–‡æ¡£ç¼–å·**: P4-7-LOGICAL-REPLICATION
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: âœ… å®Œæˆ
