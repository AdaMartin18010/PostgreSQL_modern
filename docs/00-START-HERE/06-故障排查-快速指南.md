# ğŸ”§ æ•…éšœæ’æŸ¥æŒ‡å—ï¼šPostgreSQL 18 + AI é—®é¢˜è¯Šæ–­ä¸è§£å†³

> **æ›´æ–°æ—¥æœŸ**: 2025å¹´12æœˆ4æ—¥
> **é€‚ç”¨åœºæ™¯**: çº¿ä¸Šæ•…éšœã€æ€§èƒ½é—®é¢˜ã€ç³»ç»Ÿå¼‚å¸¸
> **ç´§æ€¥ç¨‹åº¦**: âš ï¸ å…³é”®å‚è€ƒæ–‡æ¡£

---

## ğŸš¨ ç´§æ€¥æ•…éšœå¤„ç†æµç¨‹

### 1åˆ†é’Ÿå¿«é€Ÿè¯Šæ–­

```bash
# 1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦è¿è¡Œ
pg_isready

# 2. æ£€æŸ¥æ´»è·ƒè¿æ¥
psql -c "SELECT count(*) FROM pg_stat_activity WHERE state = 'active';"

# 3. æ£€æŸ¥æ…¢æŸ¥è¯¢
psql -c "SELECT pid, query, now() - query_start AS duration
         FROM pg_stat_activity
         WHERE state = 'active' AND query_start < NOW() - INTERVAL '1 minute'
         ORDER BY duration DESC LIMIT 5;"

# 4. æ£€æŸ¥ç³»ç»Ÿèµ„æº
top -b -n 1 | head -20
df -h
```

---

## ğŸ“Š æ•…éšœåˆ†ç±»å†³ç­–æ ‘

```mermaid
graph TD
    Start[æ•…éšœå‘ç”Ÿ] --> Q1{æœåŠ¡å¯è®¿é—®?}

    Q1 -->|å¦| Down[æ•°æ®åº“å®•æœº]
    Q1 -->|æ˜¯| Q2{å“åº”æ…¢?}

    Down --> D1[æ£€æŸ¥è¿›ç¨‹]
    Down --> D2[æ£€æŸ¥æ—¥å¿—]
    Down --> D3[å°è¯•é‡å¯]

    Q2 -->|æ˜¯| Slow[æ€§èƒ½é—®é¢˜]
    Q2 -->|å¦| Q3{é”™è¯¯ä¿¡æ¯?}

    Slow --> S1[æŸ¥çœ‹æ…¢æŸ¥è¯¢]
    Slow --> S2[æ£€æŸ¥èµ„æº]
    Slow --> S3[åˆ†ææŸ¥è¯¢è®¡åˆ’]

    Q3 -->|æœ‰| Error[é”™è¯¯å¤„ç†]
    Q3 -->|æ— | Other[å…¶ä»–é—®é¢˜]

    Error --> E1[æŸ¥çœ‹é”™è¯¯æ—¥å¿—]
    Error --> E2[æ£€æŸ¥æƒé™]
    Error --> E3[æ£€æŸ¥é…ç½®]
```

---

## ğŸ”¥ å¸¸è§æ•…éšœåŠè§£å†³æ–¹æ¡ˆ

### æ•…éšœ1ï¼šæ•°æ®åº“æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š

```bash
$ sudo systemctl start postgresql
Job for postgresql.service failed...
```

**è¯Šæ–­æ­¥éª¤**ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**

    ```bash
    tail -100 /var/log/postgresql/postgresql-18-main.log
    ```

2. **å¸¸è§åŸå› åŠè§£å†³**

    **åŸå› Aï¼šç«¯å£è¢«å ç”¨**

    ```bash
    # æ£€æŸ¥ç«¯å£
    sudo lsof -i :5432

    # è§£å†³ï¼šæ€æ­»å ç”¨è¿›ç¨‹æˆ–æ›´æ”¹ç«¯å£
    sudo kill -9 <PID>
    # æˆ–ä¿®æ”¹ postgresql.conf
    port = 5433
    ```

    **åŸå› Bï¼šæ•°æ®ç›®å½•æƒé™é”™è¯¯**

    ```bash
    # æ£€æŸ¥æƒé™
    ls -la /var/lib/postgresql/18/main

    # è§£å†³ï¼šä¿®æ­£æƒé™
    sudo chown -R postgres:postgres /var/lib/postgresql/18/main
    sudo chmod 700 /var/lib/postgresql/18/main
    ```

    **åŸå› Cï¼šé…ç½®æ–‡ä»¶é”™è¯¯**

    ```bash
    # æ£€æŸ¥é…ç½®
    sudo -u postgres /usr/lib/postgresql/18/bin/postgres --config-file=/etc/postgresql/18/main/postgresql.conf -C config_file

    # è§£å†³ï¼šä¿®å¤é…ç½®é”™è¯¯
    sudo nano /etc/postgresql/18/main/postgresql.conf
    ```

    **åŸå› Dï¼šç£ç›˜ç©ºé—´ä¸è¶³**

    ```bash
    # æ£€æŸ¥ç£ç›˜ç©ºé—´
    df -h

    # è§£å†³ï¼šæ¸…ç†ç©ºé—´
    sudo -u postgres vacuumdb --all --full
    # æˆ–åˆ é™¤æ—§WALæ–‡ä»¶
    ```

---

### æ•…éšœ2ï¼šæŸ¥è¯¢ææ…¢

**ç—‡çŠ¶**ï¼š

- åŸæœ¬å‡ ç§’çš„æŸ¥è¯¢ç°åœ¨è¦å‡ åˆ†é’Ÿ
- ç”¨æˆ·åé¦ˆç³»ç»Ÿå¡é¡¿

**5æ­¥è¯Šæ–­æ³•**ï¼š

**æ­¥éª¤1ï¼šè¯†åˆ«æ…¢æŸ¥è¯¢**:

```sql
-- æŸ¥çœ‹å½“å‰æ‰§è¡Œçš„æ…¢æŸ¥è¯¢
SELECT pid, usename, query, now() - query_start AS duration
FROM pg_stat_activity
WHERE state = 'active' AND query_start < NOW() - INTERVAL '1 minute'
ORDER BY duration DESC;

-- æŸ¥çœ‹å†å²æ…¢æŸ¥è¯¢
SELECT query, calls, mean_exec_time, total_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;
```

**æ­¥éª¤2ï¼šåˆ†ææŸ¥è¯¢è®¡åˆ’**:

```sql
EXPLAIN (ANALYZE, BUFFERS, VERBOSE)
SELECT * FROM orders WHERE customer_id = 123;
```

**æ­¥éª¤3ï¼šæ£€æŸ¥ç´¢å¼•**:

```sql
-- æ£€æŸ¥æ˜¯å¦ç¼ºå°‘ç´¢å¼•ï¼ˆSeq Scanï¼‰
-- æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ
SELECT schemaname, tablename, indexname, idx_scan
FROM pg_stat_user_indexes
WHERE idx_scan < 100
ORDER BY idx_scan;
```

**æ­¥éª¤4ï¼šæ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯**:

```sql
-- æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯æ›´æ–°æ—¶é—´
SELECT schemaname, tablename, last_analyze, last_autoanalyze
FROM pg_stat_user_tables
WHERE last_analyze < NOW() - INTERVAL '7 days';

-- æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
ANALYZE table_name;
```

**æ­¥éª¤5ï¼šæ£€æŸ¥è¡¨è†¨èƒ€**:

```sql
-- æ£€æŸ¥æ­»å…ƒç»„
SELECT schemaname, tablename, n_dead_tup, n_live_tup,
       n_dead_tup::float / NULLIF(n_live_tup, 0) AS dead_ratio
FROM pg_stat_user_tables
WHERE n_dead_tup > 10000
ORDER BY n_dead_tup DESC;

-- æ¸…ç†
VACUUM ANALYZE table_name;
```

**å¸¸è§è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- è§£å†³æ–¹æ¡ˆAï¼šæ·»åŠ ç´¢å¼•
CREATE INDEX idx_orders_customer ON orders(customer_id);

-- è§£å†³æ–¹æ¡ˆBï¼šä¼˜åŒ–æŸ¥è¯¢
-- âŒ æ…¢
SELECT * FROM orders WHERE customer_id IN (SELECT id FROM customers WHERE active = true);

-- âœ… å¿«
SELECT o.* FROM orders o
JOIN customers c ON o.customer_id = c.id
WHERE c.active = true;

-- è§£å†³æ–¹æ¡ˆCï¼šå¢åŠ work_mem
SET work_mem = '256MB';

-- è§£å†³æ–¹æ¡ˆDï¼šä½¿ç”¨åˆ†åŒºè¡¨
-- å¯¹å¤§è¡¨è¿›è¡Œåˆ†åŒº
```

---

### æ•…éšœ3ï¼šå‘é‡æœç´¢æ€§èƒ½å·®

**ç—‡çŠ¶**ï¼š

- å‘é‡æœç´¢éœ€è¦å‡ ç§’é’Ÿ
- QPSå¾ˆä½

**è¯Šæ–­æ­¥éª¤**ï¼š

**æ­¥éª¤1ï¼šæ£€æŸ¥ç´¢å¼•**:

```sql
-- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨ç´¢å¼•
EXPLAIN ANALYZE
SELECT * FROM documents
ORDER BY embedding <=> '[0.1, 0.2, ...]'::vector
LIMIT 10;

-- åº”è¯¥çœ‹åˆ° "Index Scan using ... hnsw"
```

**æ­¥éª¤2ï¼šæ£€æŸ¥ç´¢å¼•å‚æ•°**:

```sql
-- æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯
SELECT indexname, indexdef
FROM pg_indexes
WHERE tablename = 'documents' AND indexdef LIKE '%hnsw%';
```

**æ­¥éª¤3ï¼šæ£€æŸ¥æ•°æ®é‡**:

```sql
SELECT COUNT(*) FROM documents;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- è§£å†³æ–¹æ¡ˆAï¼šåˆ›å»º/é‡å»ºç´¢å¼•
-- å°æ•°æ®é‡ï¼ˆ<10ä¸‡ï¼‰ï¼šä¸éœ€è¦ç´¢å¼•
-- ä¸­æ•°æ®é‡ï¼ˆ10ä¸‡-100ä¸‡ï¼‰ï¼šHNSW
CREATE INDEX ON documents USING hnsw (embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);

-- å¤§æ•°æ®é‡ï¼ˆ>100ä¸‡ï¼‰ï¼šIVFFlat
CREATE INDEX ON documents USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 1000);

-- è§£å†³æ–¹æ¡ˆBï¼šè°ƒæ•´æŸ¥è¯¢å‚æ•°
-- HNSW
SET hnsw.ef_search = 100;  -- é»˜è®¤40ï¼Œå¢åŠ æå‡ç²¾åº¦ä½†é™ä½é€Ÿåº¦

-- IVFFlat
SET ivfflat.probes = 10;  -- é»˜è®¤1ï¼Œå¢åŠ æå‡ç²¾åº¦ä½†é™ä½é€Ÿåº¦

-- è§£å†³æ–¹æ¡ˆCï¼šä½¿ç”¨è¿‡æ»¤æ¡ä»¶
SELECT * FROM documents
WHERE category = 'tech'  -- å…ˆè¿‡æ»¤
ORDER BY embedding <=> '[0.1, 0.2, ...]'::vector
LIMIT 10;

-- è§£å†³æ–¹æ¡ˆDï¼šå¢åŠ shared_buffers
ALTER SYSTEM SET shared_buffers = '8GB';
```

---

### æ•…éšœ4ï¼šè¿æ¥æ•°è€—å°½

**ç—‡çŠ¶**ï¼š

```text
FATAL: sorry, too many clients already
```

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- æ£€æŸ¥å½“å‰è¿æ¥æ•°
SELECT count(*) AS total_connections,
       count(*) FILTER (WHERE state = 'active') AS active,
       count(*) FILTER (WHERE state = 'idle') AS idle,
       count(*) FILTER (WHERE state = 'idle in transaction') AS idle_in_transaction
FROM pg_stat_activity;

-- æ£€æŸ¥æœ€å¤§è¿æ¥æ•°
SHOW max_connections;

-- æ£€æŸ¥é•¿æ—¶é—´idleè¿æ¥
SELECT pid, usename, application_name, client_addr, state,
       now() - state_change AS idle_time
FROM pg_stat_activity
WHERE state = 'idle' AND state_change < NOW() - INTERVAL '1 hour'
ORDER BY idle_time DESC;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- è§£å†³æ–¹æ¡ˆAï¼šå¢åŠ æœ€å¤§è¿æ¥æ•°ï¼ˆæ²»æ ‡ï¼‰
ALTER SYSTEM SET max_connections = 500;
-- é‡å¯ç”Ÿæ•ˆ

-- è§£å†³æ–¹æ¡ˆBï¼šä½¿ç”¨è¿æ¥æ± ï¼ˆæ²»æœ¬ï¼Œæ¨èï¼‰
```

**PgBounceré…ç½®**ï¼š

```ini
[databases]
mydb = host=localhost port=5432 dbname=mydb

[pgbouncer]
pool_mode = transaction
max_client_conn = 1000
default_pool_size = 20
reserve_pool_size = 5
reserve_pool_timeout = 3
```

```sql
-- è§£å†³æ–¹æ¡ˆCï¼šæ€æ­»é•¿æ—¶é—´idleè¿æ¥
SELECT pg_terminate_backend(pid)
FROM pg_stat_activity
WHERE state = 'idle' AND state_change < NOW() - INTERVAL '1 hour';

-- è§£å†³æ–¹æ¡ˆDï¼šè®¾ç½®idleè¶…æ—¶
ALTER SYSTEM SET idle_in_transaction_session_timeout = '5min';
```

---

### æ•…éšœ5ï¼šå†…å­˜ä¸è¶³ï¼ˆOOMï¼‰

**ç—‡çŠ¶**ï¼š

```bash
Out of memory: Kill process <PID> (postgres)
```

**è¯Šæ–­æ­¥éª¤**ï¼š

```bash
# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h
ps aux | grep postgres | awk '{sum+=$6} END {print sum/1024 " MB"}'

# æ£€æŸ¥é…ç½®
psql -c "SHOW shared_buffers;"
psql -c "SHOW work_mem;"
psql -c "SHOW maintenance_work_mem;"
```

```sql
-- æ£€æŸ¥å¤§æŸ¥è¯¢
SELECT pid, usename, query, now() - query_start AS duration,
       pg_size_pretty(pg_backend_memory_contexts_total_bytes(pid)) AS mem_usage
FROM pg_stat_activity
WHERE state = 'active'
ORDER BY pg_backend_memory_contexts_total_bytes(pid) DESC;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- è§£å†³æ–¹æ¡ˆAï¼šå‡å°‘work_mem
ALTER SYSTEM SET work_mem = '64MB';  -- é»˜è®¤4MBï¼Œä¸è¦è®¾å¤ªå¤§

-- è§£å†³æ–¹æ¡ˆBï¼šä¼˜åŒ–æŸ¥è¯¢
-- é¿å…å¤§é‡æ’åºã€JOIN

-- è§£å†³æ–¹æ¡ˆCï¼šä½¿ç”¨æµå¼å¤„ç†
```

```python
# Pythonæµå¼å¤„ç†
cur = conn.cursor('cursor_name')
cur.execute("SELECT * FROM large_table")
for row in cur:
    process(row)  # é€è¡Œå¤„ç†
```

```sql
-- è§£å†³æ–¹æ¡ˆDï¼šå¢åŠ ç‰©ç†å†…å­˜
-- æˆ–ä½¿ç”¨swapï¼ˆä¸æ¨èï¼‰
```

---

### æ•…éšœ6ï¼šç£ç›˜ç©ºé—´ä¸è¶³

**ç—‡çŠ¶**ï¼š

```text
ERROR: could not extend file ... No space left on device
```

**è¯Šæ–­æ­¥éª¤**ï¼š

```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥æ•°æ®åº“å¤§å°
psql -c "SELECT pg_size_pretty(pg_database_size(current_database()));"

# æ£€æŸ¥å¤§è¡¨
psql -c "SELECT schemaname, tablename,
                pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
         FROM pg_tables
         WHERE schemaname = 'public'
         ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC
         LIMIT 10;"

# æ£€æŸ¥WALæ–‡ä»¶
du -sh /var/lib/postgresql/18/main/pg_wal/
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# è§£å†³æ–¹æ¡ˆAï¼šæ¸…ç†WALæ–‡ä»¶
# æ£€æŸ¥WALé…ç½®
psql -c "SHOW wal_keep_size;"
psql -c "SHOW max_wal_size;"

# å¼ºåˆ¶checkpoint
psql -c "CHECKPOINT;"

# è§£å†³æ–¹æ¡ˆBï¼šVACUUM FULL
psql -c "VACUUM FULL table_name;"

# è§£å†³æ–¹æ¡ˆCï¼šåˆ é™¤æ—§æ•°æ®
psql -c "DELETE FROM logs WHERE created_at < NOW() - INTERVAL '90 days';"
psql -c "VACUUM ANALYZE logs;"

# è§£å†³æ–¹æ¡ˆDï¼šå½’æ¡£æ—§æ•°æ®
# å¯¼å‡ºåˆ°æ–‡ä»¶æˆ–å¦ä¸€ä¸ªæ•°æ®åº“

# è§£å†³æ–¹æ¡ˆEï¼šæ‰©å®¹ç£ç›˜
# æ·»åŠ æ–°ç£ç›˜å¹¶è¿ç§»æ•°æ®ç›®å½•
```

---

### æ•…éšœ7ï¼šå¤åˆ¶å»¶è¿Ÿ

**ç—‡çŠ¶**ï¼š

- ä»åº“æ•°æ®å»¶è¿Ÿ
- ä¸»ä»æ•°æ®ä¸ä¸€è‡´

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- ä¸»åº“æŸ¥çœ‹å¤åˆ¶çŠ¶æ€
SELECT client_addr, state, sent_lsn, write_lsn, flush_lsn, replay_lsn,
       pg_wal_lsn_diff(sent_lsn, replay_lsn) AS replication_lag_bytes
FROM pg_stat_replication;

-- ä»åº“æŸ¥çœ‹å»¶è¿Ÿ
SELECT now() - pg_last_xact_replay_timestamp() AS replication_delay;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- è§£å†³æ–¹æ¡ˆAï¼šä¼˜åŒ–ç½‘ç»œ
-- æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ
ping <slave_ip>

-- è§£å†³æ–¹æ¡ˆBï¼šå‡å°‘ä¸»åº“å†™å…¥å‹åŠ›
-- æ‰¹é‡æ“ä½œã€å‡å°‘ä¸å¿…è¦çš„æ›´æ–°

-- è§£å†³æ–¹æ¡ˆCï¼šè°ƒæ•´WALå‚æ•°
ALTER SYSTEM SET wal_sender_timeout = '60s';
ALTER SYSTEM SET wal_receiver_status_interval = '10s';

-- è§£å†³æ–¹æ¡ˆDï¼šå¢åŠ ä»åº“èµ„æº
-- CPUã€å†…å­˜ã€ç£ç›˜IO

-- è§£å†³æ–¹æ¡ˆEï¼šä½¿ç”¨åŒæ­¥å¤åˆ¶
ALTER SYSTEM SET synchronous_commit = 'on';
ALTER SYSTEM SET synchronous_standby_names = 'standby1';
```

---

## ğŸ” è¯Šæ–­å·¥å…·ç®±

### 1. pg_stat_activityï¼ˆæ´»è·ƒä¼šè¯ï¼‰

```sql
-- å½“å‰æ´»è·ƒæŸ¥è¯¢
SELECT pid, usename, application_name, client_addr,
       state, query, now() - query_start AS duration
FROM pg_stat_activity
WHERE state != 'idle'
ORDER BY duration DESC;

-- é•¿æ—¶é—´ç­‰å¾…çš„æŸ¥è¯¢
SELECT pid, wait_event_type, wait_event, query
FROM pg_stat_activity
WHERE wait_event IS NOT NULL;

-- æ€æ­»æ…¢æŸ¥è¯¢
SELECT pg_terminate_backend(pid)
FROM pg_stat_activity
WHERE query_start < NOW() - INTERVAL '5 minutes'
  AND state = 'active';
```

### 2. pg_stat_statementsï¼ˆæ…¢æŸ¥è¯¢ç»Ÿè®¡ï¼‰

```sql
-- Top 10æ…¢æŸ¥è¯¢
SELECT query, calls, mean_exec_time, total_exec_time,
       stddev_exec_time, min_exec_time, max_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;

-- Top 10è€—æ—¶æŸ¥è¯¢
SELECT query, calls, mean_exec_time, total_exec_time
FROM pg_stat_statements
ORDER BY total_exec_time DESC
LIMIT 10;

-- é‡ç½®ç»Ÿè®¡
SELECT pg_stat_statements_reset();
```

### 3. EXPLAIN ANALYZEï¼ˆæŸ¥è¯¢è®¡åˆ’ï¼‰

```sql
EXPLAIN (ANALYZE, BUFFERS, VERBOSE, FORMAT JSON)
SELECT * FROM orders WHERE customer_id = 123;
```

### 4. é”ç›‘æ§

```sql
-- æŸ¥çœ‹é”ç­‰å¾…
SELECT l.pid, a.usename, a.query, l.mode, l.granted
FROM pg_locks l
JOIN pg_stat_activity a ON l.pid = a.pid
WHERE NOT l.granted
ORDER BY a.query_start;

-- æŸ¥çœ‹é˜»å¡é“¾
SELECT blocking.pid AS blocking_pid,
       blocking.query AS blocking_query,
       blocked.pid AS blocked_pid,
       blocked.query AS blocked_query
FROM pg_stat_activity blocked
JOIN pg_locks blocked_locks ON blocked.pid = blocked_locks.pid
JOIN pg_locks blocking_locks ON blocked_locks.locktype = blocking_locks.locktype
JOIN pg_stat_activity blocking ON blocking.pid = blocking_locks.pid
WHERE NOT blocked_locks.granted AND blocking_locks.granted;
```

---

## ğŸ“‹ é¢„é˜²æ€§ç»´æŠ¤æ¸…å•

### æ—¥å¸¸æ£€æŸ¥ï¼ˆæ¯å¤©ï¼‰

- [ ] æ£€æŸ¥æ…¢æŸ¥è¯¢æ—¥å¿—
- [ ] æ£€æŸ¥é”™è¯¯æ—¥å¿—
- [ ] æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼ˆ>20%å‰©ä½™ï¼‰
- [ ] æ£€æŸ¥è¿æ¥æ•°ï¼ˆ<80%ï¼‰
- [ ] æ£€æŸ¥å¤åˆ¶å»¶è¿Ÿï¼ˆ<10ç§’ï¼‰

### æ¯å‘¨æ£€æŸ¥

- [ ] æ£€æŸ¥è¡¨è†¨èƒ€
- [ ] æ£€æŸ¥æœªä½¿ç”¨çš„ç´¢å¼•
- [ ] æ£€æŸ¥é•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡
- [ ] æ£€æŸ¥é”ç­‰å¾…
- [ ] æ‰§è¡ŒVACUUM ANALYZE

### æ¯æœˆæ£€æŸ¥

- [ ] å®¡æŸ¥æ…¢æŸ¥è¯¢ä¼˜åŒ–æ•ˆæœ
- [ ] æ£€æŸ¥å¤‡ä»½æœ‰æ•ˆæ€§
- [ ] æµ‹è¯•æ¢å¤æµç¨‹
- [ ] å®¡æŸ¥å®‰å…¨æ—¥å¿—
- [ ] æ›´æ–°ç»Ÿè®¡ä¿¡æ¯

---

**é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹æ­¤æŒ‡å—ï¼** ğŸ”§

---

**æœ€åæ›´æ–°**: 2025å¹´12æœˆ4æ—¥
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: TROUBLESHOOTING-2025-12
