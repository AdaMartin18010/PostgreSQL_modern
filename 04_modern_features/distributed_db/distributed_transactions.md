# 分布式事务与幂等补偿

## 协议

- 2PC/3PC：提交/回滚路径、阻塞与协调者失败恢复
- Per-shard 原子性与全局一致性：写入路由与重试语义

## 实践

- 幂等键与去重表；Outbox/事务消息；补偿与重放
- 隔离级别在跨分片下的取舍（读写路由、一致读）
