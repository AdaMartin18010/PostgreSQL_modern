# PostgreSQL 16 → 17 版本差异与迁移注意（骨架）

> 仅为迁移规划骨架；请以官方发行说明为准并据实校验。

## 主要改动（示意）

- SQL/执行器：排序/并行/计划改进（以发行说明对齐）
- 逻辑复制：过滤/列表/冲突处理增强（以发行说明对齐）
- 日志：jsonlog/配置权限改进（以发行说明对齐）
- 压缩：WAL 压缩（LZ4/ZSTD）策略与影响（以发行说明对齐）

## 迁移前检查

- 扩展兼容性：pgvector/TimescaleDB/PostGIS/Citus 的目标版本支持矩阵
- 配置差异：参数新增/弃用/默认值变化
- 行为差异：SQL/权限/日志格式差异对现有作业的影响
- 备份校验：基础备份 + PITR 演练

## 迁移路径

- 原地升级 vs 逻辑迁移（pg_dump/pg_restore、逻辑复制）
- 突变风险控制：灰度、读写分离、回退窗口
- 回滚预案：保持旧集群可回切；验证数据一致性

## 迁移后验证

- 基线对照：TPS、P95/P99、热点 SQL、锁等待、WAL 指标
- 任务与作业：备份/ETL/报表/CDC 验证

## 参考

- 官方发行说明：`https://www.postgresql.org/docs/release/`
- 各扩展 Releases：见 `00_overview/README.md`
