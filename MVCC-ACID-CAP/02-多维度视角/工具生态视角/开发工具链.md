# å¼€å‘å·¥å…·é“¾

> **æ–‡æ¡£ç¼–å·**: TOOLS-DEV-TOOLCHAIN-001
> **ä¸»é¢˜**: Rustå¼€å‘å·¥å…·é“¾ä¸PostgreSQL MVCCå¼€å‘
> **ç‰ˆæœ¬**: PostgreSQL 17 & 18
> **ç›¸å…³æ–‡æ¡£**:
>
> - [Rustæµ‹è¯•å·¥å…·ä¸MVCC](Rustæµ‹è¯•å·¥å…·ä¸MVCC.md)
> - [Rustè°ƒè¯•å·¥å…·](Rustè°ƒè¯•å·¥å…·.md)
> - [ä»£ç è´¨é‡å·¥å…·](ä»£ç è´¨é‡å·¥å…·.md)

---

## ğŸ“‘ ç›®å½•

- [å¼€å‘å·¥å…·é“¾](#å¼€å‘å·¥å…·é“¾)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ğŸ“‹ æ¦‚è¿°](#-æ¦‚è¿°)
  - [ğŸ”§ ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼€å‘å·¥å…·](#-ç¬¬ä¸€éƒ¨åˆ†å¼€å‘å·¥å…·)
    - [1.1 Cargo](#11-cargo)
      - [1.1.1 Cargoä½¿ç”¨](#111-cargoä½¿ç”¨)
    - [1.2 rustup](#12-rustup)
      - [1.2.1 rustupä½¿ç”¨](#121-rustupä½¿ç”¨)
    - [1.3 IDEå·¥å…·](#13-ideå·¥å…·)
      - [1.3.1 IDEé…ç½®](#131-ideé…ç½®)
  - [ğŸ“Š ç¬¬äºŒéƒ¨åˆ†ï¼šMVCCå¼€å‘å·¥å…·](#-ç¬¬äºŒéƒ¨åˆ†mvccå¼€å‘å·¥å…·)
    - [2.1 æ•°æ®åº“å·¥å…·](#21-æ•°æ®åº“å·¥å…·)
      - [2.1.1 å·¥å…·é€‰æ‹©](#211-å·¥å…·é€‰æ‹©)
    - [2.2 è°ƒè¯•å·¥å…·](#22-è°ƒè¯•å·¥å…·)
      - [2.2.1 è°ƒè¯•å·¥å…·é€‰æ‹©](#221-è°ƒè¯•å·¥å…·é€‰æ‹©)
  - [âš¡ ç¬¬ä¸‰éƒ¨åˆ†ï¼šå·¥å…·é“¾é›†æˆ](#-ç¬¬ä¸‰éƒ¨åˆ†å·¥å…·é“¾é›†æˆ)
    - [3.1 å·¥å…·é…ç½®](#31-å·¥å…·é…ç½®)
      - [3.1.1 é…ç½®æ–¹æ³•](#311-é…ç½®æ–¹æ³•)
    - [3.2 å·¥ä½œæµé›†æˆ](#32-å·¥ä½œæµé›†æˆ)
      - [3.2.1 å·¥ä½œæµé…ç½®](#321-å·¥ä½œæµé…ç½®)
  - [ğŸ¯ ç¬¬å››éƒ¨åˆ†ï¼šæœ€ä½³å®è·µ](#-ç¬¬å››éƒ¨åˆ†æœ€ä½³å®è·µ)
    - [4.1 å·¥å…·é€‰æ‹©](#41-å·¥å…·é€‰æ‹©)
      - [4.1.1 é€‰æ‹©æŒ‡å—](#411-é€‰æ‹©æŒ‡å—)
    - [4.2 å·¥å…·ç»´æŠ¤](#42-å·¥å…·ç»´æŠ¤)
      - [4.2.1 ç»´æŠ¤æ–¹æ³•](#421-ç»´æŠ¤æ–¹æ³•)
  - [ğŸ“ æ€»ç»“](#-æ€»ç»“)

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜Rustå¼€å‘å·¥å…·é“¾åœ¨PostgreSQL MVCCå¼€å‘ä¸­çš„åº”ç”¨ï¼ŒåŒ…æ‹¬å¼€å‘å·¥å…·ã€MVCCå¼€å‘å·¥å…·ã€å·¥å…·é“¾é›†æˆå’Œæœ€ä½³å®è·µã€‚

**æ ¸å¿ƒå†…å®¹**ï¼š

- å¼€å‘å·¥å…·ï¼ˆCargoã€rustupã€IDEå·¥å…·ï¼‰
- MVCCå¼€å‘å·¥å…·ï¼ˆæ•°æ®åº“å·¥å…·ã€è°ƒè¯•å·¥å…·ï¼‰
- å·¥å…·é“¾é›†æˆï¼ˆå·¥å…·é…ç½®ã€å·¥ä½œæµé›†æˆï¼‰
- æœ€ä½³å®è·µï¼ˆå·¥å…·é€‰æ‹©ã€å·¥å…·ç»´æŠ¤ï¼‰

**ç›®æ ‡è¯»è€…**ï¼š

- Rustå¼€å‘è€…
- å¼€å‘å·¥å…·ä½¿ç”¨è€…
- ç³»ç»Ÿæ¶æ„å¸ˆ

---

## ğŸ”§ ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼€å‘å·¥å…·

### 1.1 Cargo

#### 1.1.1 Cargoä½¿ç”¨

```bash
# åˆ›å»ºæ–°é¡¹ç›®
cargo new my_project

# æ„å»ºé¡¹ç›®
cargo build

# è¿è¡Œé¡¹ç›®
cargo run

# è¿è¡Œæµ‹è¯•
cargo test

# æ·»åŠ ä¾èµ–
cargo add sqlx --features postgres
```

### 1.2 rustup

#### 1.2.1 rustupä½¿ç”¨

```bash
# å®‰è£…rustup
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# å®‰è£…å·¥å…·é“¾
rustup install stable
rustup install nightly

# è®¾ç½®é»˜è®¤å·¥å…·é“¾
rustup default stable

# å®‰è£…ç»„ä»¶
rustup component add clippy rustfmt
```

### 1.3 IDEå·¥å…·

#### 1.3.1 IDEé…ç½®

```json
// VS Codeé…ç½®
{
    "rust-analyzer.checkOnSave.command": "clippy",
    "rust-analyzer.checkOnSave.allTargets": true,
    "rust-analyzer.cargo.features": "all"
}
```

---

## ğŸ“Š ç¬¬äºŒéƒ¨åˆ†ï¼šMVCCå¼€å‘å·¥å…·

### 2.1 æ•°æ®åº“å·¥å…·

#### 2.1.1 å·¥å…·é€‰æ‹©

```rust
// PostgreSQLå¼€å‘å·¥å…·ï¼š
// 1. psqlï¼šå‘½ä»¤è¡Œå·¥å…·
// 2. pgAdminï¼šå›¾å½¢ç•Œé¢å·¥å…·
// 3. DBeaverï¼šè·¨å¹³å°å·¥å…·
// 4. sqlx-cliï¼šRustä¸“ç”¨å·¥å…·
```

### 2.2 è°ƒè¯•å·¥å…·

#### 2.2.1 è°ƒè¯•å·¥å…·é€‰æ‹©

```rust
// è°ƒè¯•å·¥å…·é€‰æ‹©ï¼š
// 1. GDBï¼šLinuxç¯å¢ƒ
// 2. LLDBï¼šmacOSç¯å¢ƒ
// 3. VS Codeï¼šè·¨å¹³å°
```

---

## âš¡ ç¬¬ä¸‰éƒ¨åˆ†ï¼šå·¥å…·é“¾é›†æˆ

### 3.1 å·¥å…·é…ç½®

#### 3.1.1 é…ç½®æ–¹æ³•

```toml
# Cargo.tomlé…ç½®
[package]
name = "my_project"
version = "0.1.0"
edition = "2021"

[dependencies]
sqlx = { version = "0.7", features = ["postgres", "runtime-tokio-native-tls"] }
tokio = { version = "1", features = ["full"] }

[dev-dependencies]
sqlx = { version = "0.7", features = ["postgres", "runtime-tokio-native-tls", "migrate"] }
```

### 3.2 å·¥ä½œæµé›†æˆ

#### 3.2.1 å·¥ä½œæµé…ç½®

```yaml
# å¼€å‘å·¥ä½œæµï¼š
# 1. ç¼–å†™ä»£ç 
# 2. è¿è¡Œæµ‹è¯•
# 3. ä»£ç æ ¼å¼åŒ–
# 4. ä»£ç è´¨é‡æ£€æŸ¥
# 5. æäº¤ä»£ç 
```

---

## ğŸ¯ ç¬¬å››éƒ¨åˆ†ï¼šæœ€ä½³å®è·µ

### 4.1 å·¥å…·é€‰æ‹©

#### 4.1.1 é€‰æ‹©æŒ‡å—

```rust
// å·¥å…·é€‰æ‹©æŒ‡å—ï¼š
// 1. æ ¹æ®å¹³å°é€‰æ‹©å·¥å…·
// 2. æ ¹æ®éœ€æ±‚é€‰æ‹©å·¥å…·
// 3. è€ƒè™‘å·¥å…·é›†æˆ
// 4. è€ƒè™‘å›¢é˜Ÿåä½œ
```

### 4.2 å·¥å…·ç»´æŠ¤

#### 4.2.1 ç»´æŠ¤æ–¹æ³•

```rust
// å·¥å…·ç»´æŠ¤æ–¹æ³•ï¼š
// 1. å®šæœŸæ›´æ–°å·¥å…·
// 2. ä¿æŒå·¥å…·é…ç½®åŒæ­¥
// 3. æ–‡æ¡£åŒ–å·¥å…·ä½¿ç”¨
// 4. å›¢é˜ŸåŸ¹è®­
```

---

## ğŸ“ æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†Rustå¼€å‘å·¥å…·é“¾åœ¨PostgreSQL MVCCå¼€å‘ä¸­çš„åº”ç”¨ã€‚

**æ ¸å¿ƒè¦ç‚¹**ï¼š

1. **å¼€å‘å·¥å…·**ï¼š
   - Cargoã€rustupã€IDEå·¥å…·

2. **MVCCå¼€å‘å·¥å…·**ï¼š
   - æ•°æ®åº“å·¥å…·ã€è°ƒè¯•å·¥å…·

3. **å·¥å…·é“¾é›†æˆ**ï¼š
   - å·¥å…·é…ç½®ã€å·¥ä½œæµé›†æˆ

4. **æœ€ä½³å®è·µ**ï¼š
   - å·¥å…·é€‰æ‹©ã€å·¥å…·ç»´æŠ¤

**ä¸‹ä¸€æ­¥**ï¼š

- å®Œå–„å·¥å…·ä½¿ç”¨æ¡ˆä¾‹
- æ·»åŠ æ›´å¤šå·¥å…·é…ç½®
- å®Œå–„å·¥å…·é“¾æ–‡æ¡£

---

**æœ€åæ›´æ–°**: 2024å¹´
**ç»´æŠ¤çŠ¶æ€**: âœ… æŒç»­æ›´æ–°
