# 案例8：知识图谱问答系统 - 需求分析

## 业务背景

企业知识库问答系统，基于Apache AGE知识图谱：

- **领域**: 技术文档、产品手册
- **规模**: 100万实体，500万关系
- **查询**: 自然语言问答，多跳推理
- **响应时间**: <2秒

---

## 技术需求

### 1. 知识图谱存储

**实体类型**:

```cypher
// 文档实体
(:Document {id, title, content})

// 概念实体
(:Concept {id, name, description})

// 人员实体
(:Person {id, name, role})

// 产品实体
(:Product {id, name, version})
```

**关系类型**:

```cypher
// 文档-概念
(:Document)-[:MENTIONS]->(:Concept)

// 概念-概念
(:Concept)-[:RELATED_TO]->(:Concept)
(:Concept)-[:IS_A]->(:Concept)

// 概念-产品
(:Concept)-[:USED_IN]->(:Product)
```

---

### 2. 问答能力

**问题类型**:

| 类型 | 示例 | 难度 |
|------|------|------|
| 实体查询 | "什么是PostgreSQL?" | ⭐ |
| 关系查询 | "哪些产品使用了MVCC?" | ⭐⭐ |
| 多跳推理 | "与MVCC相关的所有技术?" | ⭐⭐⭐ |
| 聚合查询 | "有多少文档提到了索引?" | ⭐⭐ |

---

### 3. NL2Cypher

**流程**:

```text
自然语言问题
    → LLM解析
    → Cypher查询
    → 图查询执行
    → 结果后处理
    → 自然语言答案
```

**示例**:

```
Q: "PostgreSQL中有哪些索引类型?"

Cypher:
MATCH (p:Concept {name: 'PostgreSQL'})-[:HAS_INDEX]->(idx:IndexType)
RETURN idx.name

A: "B-Tree, GIN, GiST, BRIN, Hash"
```

---

## 性能要求

| 指标 | 目标 |
|------|------|
| 单跳查询 | <100ms |
| 多跳查询（3跳） | <500ms |
| 复杂推理 | <2s |
| 并发查询 | 100 QPS |

---

## PostgreSQL 18 + Apache AGE特性

✅ **Apache AGE 1.5+**: 图数据库扩展
✅ **递归CTE优化**: 多跳查询性能
✅ **并行查询**: 图遍历并行化
✅ **JSONB优化**: 实体属性存储

---

**返回**: [案例8主页](./README.md)
