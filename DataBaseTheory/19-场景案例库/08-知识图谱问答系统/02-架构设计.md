# 案例8：知识图谱问答系统 - 架构设计

## 总体架构

```text
┌────────────────────────────────────────────────────┐
│          知识图谱问答系统架构                       │
├────────────────────────────────────────────────────┤
│                                                      │
│  [用户问题] → [NL2Cypher] → [图查询] → [答案生成] │
│                    │             │                  │
│                 [LLM]      [PostgreSQL + AGE]      │
│                              ├─ 图数据              │
│                              └─ 向量索引            │
│                                                      │
│  [知识抽取] → [实体识别] → [关系抽取] → [图构建]  │
│                    │                                │
│               [NER Model]                           │
│                                                      │
└────────────────────────────────────────────────────┘
```

---

## 核心模块

### 1. 知识抽取

```python
文档 → 分句 → NER → 关系抽取 → 三元组
    ↓
(:Entity)-[:Relation]->(:Entity)
```

### 2. NL2Cypher

```text
问题分类 → 模板匹配 / LLM生成
    ↓
Cypher查询
    ↓
执行 + 结果解析
```

### 3. 多跳推理

```cypher
// 1跳
MATCH (a)-[r]->(b)

// 多跳（可变长度）
MATCH (a)-[*1..3]->(b)

// 带过滤
MATCH path = (a)-[*1..3]-(b)
WHERE all(r IN relationships(path) WHERE type(r) IN ['RELATED_TO', 'IS_A'])
```

---

**返回**: [案例8主页](./README.md)
