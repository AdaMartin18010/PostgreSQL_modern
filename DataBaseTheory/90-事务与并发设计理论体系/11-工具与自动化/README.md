# 11 | å·¥å…·ä¸è‡ªåŠ¨åŒ–

> **æ¨¡å—å®šä½**: å°†ç†è®ºè½¬åŒ–ä¸ºå¯ç”¨å·¥å…·ï¼Œæä¾›è‡ªåŠ¨åŒ–å†³ç­–æ”¯æŒã€æ€§èƒ½é¢„æµ‹ã€å¯è§†åŒ–è°ƒè¯•ç­‰å®ç”¨ç³»ç»Ÿã€‚

---

## ğŸ“‘ æ¨¡å—æ¦‚è§ˆ

æœ¬æ¨¡å—å°†Phase 1çš„ç†è®ºä½“ç³»**å·¥ç¨‹åŒ–è½åœ°**ï¼Œæä¾›å¼€ç®±å³ç”¨çš„å·¥å…·é“¾ã€‚

### è®¾è®¡ç›®æ ‡

1. **æ˜“ç”¨æ€§**: Webç•Œé¢ï¼Œé›¶å­¦ä¹ æˆæœ¬
2. **å‡†ç¡®æ€§**: åŸºäºLSEMç†è®ºå’Œå®éªŒæ•°æ®
3. **å¼€æº**: MITåè®®ï¼Œç¤¾åŒºé©±åŠ¨
4. **å¯æ‰©å±•**: æ’ä»¶åŒ–æ¶æ„

---

## ğŸ“š å·¥å…·ç›®å½•

### å†³ç­–æ”¯æŒå·¥å…·

| å·¥å…· | åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|-----|------|------|--------|
| [01-å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹](./01-å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹.md) | è¾“å…¥éœ€æ±‚â†’è¾“å‡ºæ–¹æ¡ˆ | âœ… Alpha | P0 |
| [02-éš”ç¦»çº§åˆ«é€‰æ‹©å™¨](./02-éš”ç¦»çº§åˆ«é€‰æ‹©å™¨.md) | äº¤äº’å¼å†³ç­–æ ‘ | ğŸ“‹ è§„åˆ’ä¸­ | P0 |
| [03-CAPæƒè¡¡åˆ†æå™¨](./03-CAPæƒè¡¡åˆ†æå™¨.md) | åˆ†å¸ƒå¼ç³»ç»Ÿè¯„ä¼° | ğŸ“‹ è§„åˆ’ä¸­ | P1 |

### æ€§èƒ½å·¥å…·

| å·¥å…· | åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|-----|------|------|--------|
| [04-æ€§èƒ½é¢„æµ‹å™¨](./04-æ€§èƒ½é¢„æµ‹å™¨.md) | TPS/å»¶è¿Ÿé¢„æµ‹ | âœ… Beta | P0 |
| [05-ç“¶é¢ˆè¯Šæ–­å™¨](./05-ç“¶é¢ˆè¯Šæ–­å™¨.md) | è‡ªåŠ¨è¯†åˆ«ç“¶é¢ˆ | ğŸ“‹ è§„åˆ’ä¸­ | P1 |
| [06-å®¹é‡è§„åˆ’å™¨](./06-å®¹é‡è§„åˆ’å™¨.md) | èµ„æºéœ€æ±‚ä¼°ç®— | ğŸ“‹ è§„åˆ’ä¸­ | P1 |

### å¯è§†åŒ–å·¥å…·

| å·¥å…· | åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|-----|------|------|--------|
| [07-MVCCå¯è§†åŒ–è°ƒè¯•å™¨](./07-MVCCå¯è§†åŒ–è°ƒè¯•å™¨.md) | ç‰ˆæœ¬é“¾å¯è§†åŒ– | âœ… Alpha | P1 |
| [08-æ­»é”åˆ†æå™¨](./08-æ­»é”åˆ†æå™¨.md) | ç­‰å¾…å›¾å±•ç¤º | ğŸ“‹ è§„åˆ’ä¸­ | P2 |

### è‡ªåŠ¨åŒ–å·¥å…·

| å·¥å…· | åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|-----|------|------|--------|
| [09-è‡ªåŠ¨ç´¢å¼•æ¨èå™¨](./09-è‡ªåŠ¨ç´¢å¼•æ¨èå™¨.md) | åˆ†ææ…¢æŸ¥è¯¢æ¨èç´¢å¼• | ğŸ“‹ è§„åˆ’ä¸­ | P1 |
| [10-é…ç½®éªŒè¯å™¨](./10-é…ç½®éªŒè¯å™¨.md) | æ£€æŸ¥é…ç½®é”™è¯¯ | ğŸ“‹ è§„åˆ’ä¸­ | P2 |

---

## ğŸ¯ æ ¸å¿ƒå·¥å…·è¯¦è§£

### å·¥å…·1: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ â­â­â­â­â­

**åŠŸèƒ½**: è¾“å…¥ä¸šåŠ¡éœ€æ±‚ï¼Œè‡ªåŠ¨æ¨èæœ€ä¼˜å¹¶å‘æ§åˆ¶æ–¹æ¡ˆ

**è¾“å…¥**:

```json
{
  "scenario": "e-commerce seckill",
  "concurrent_users": 100000,
  "read_write_ratio": "1:10",
  "consistency_requirement": "strong",
  "availability_requirement": "99.9%"
}
```

**è¾“å‡º**:

```json
{
  "isolation_level": "Read Committed",
  "locking_strategy": "Optimistic Lock (version field)",
  "caching": "Redis pre-decrement",
  "expected_tps": 55000,
  "expected_p99_latency": "95ms",
  "confidence": 0.92,
  "rationale": [
    "High concurrency â†’ RC isolation to minimize lock contention",
    "Strong consistency â†’ Optimistic lock with database validation",
    "Hot spot â†’ Redis pre-filtering"
  ],
  "code_template": "rust/seckill.rs"
}
```

**æŠ€æœ¯æ ˆ**:

- å‰ç«¯: React + TypeScript
- åç«¯: Rust (Axum)
- å†³ç­–å¼•æ“: è§„åˆ™å¼•æ“ + GPT-4è¾…åŠ©

**ä½¿ç”¨åœºæ™¯**:

1. æ–°é¡¹ç›®æ¶æ„è®¾è®¡
2. æ€§èƒ½é—®é¢˜è¯Šæ–­
3. æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡

---

### å·¥å…·2: æ€§èƒ½é¢„æµ‹å™¨ â­â­â­â­â­

**åŠŸèƒ½**: è¾“å…¥ç³»ç»Ÿé…ç½®å’Œå·¥ä½œè´Ÿè½½ï¼Œé¢„æµ‹TPSå’Œå»¶è¿Ÿ

**é¢„æµ‹æ¨¡å‹**:

```python
class PerformancePredictor:
    def predict(self, config, workload):
        # åŸºäºæ’é˜Ÿè®ºæ¨¡å‹
        Î» = workload.qps  # åˆ°è¾¾ç‡
        Î¼ = self.estimate_service_rate(config, workload)  # æœåŠ¡ç‡

        # M/M/cé˜Ÿåˆ—æ¨¡å‹
        c = config.max_connections
        Ï = Î» / (c * Î¼)  # ç³»ç»Ÿè´Ÿè½½

        if Ï >= 1:
            return {"tps": 0, "error": "System overloaded"}

        # å¹³å‡ç­‰å¾…æ—¶é—´ï¼ˆLittle's Lawï¼‰
        avg_latency = 1 / (Î¼ - Î»/c)

        # è€ƒè™‘é”ç«äº‰
        contention_factor = self.estimate_contention(workload)
        adjusted_latency = avg_latency * (1 + contention_factor)

        # P99å»¶è¿Ÿä¼°ç®—
        p99_latency = adjusted_latency * 3.0  # ç»éªŒç³»æ•°

        return {
            "predicted_tps": min(Î», c * Î¼),
            "predicted_avg_latency": adjusted_latency,
            "predicted_p99_latency": p99_latency,
            "bottleneck": self.identify_bottleneck(config, workload)
        }
```

**å‡†ç¡®åº¦**:

- TPSé¢„æµ‹: Â±15%è¯¯å·®
- å»¶è¿Ÿé¢„æµ‹: Â±25%è¯¯å·®

**ä½¿ç”¨åœºæ™¯**:

1. å®¹é‡è§„åˆ’
2. æ€§èƒ½é¢„è­¦
3. èµ„æºé‡‡è´­å†³ç­–

---

### å·¥å…·3: MVCCå¯è§†åŒ–è°ƒè¯•å™¨ â­â­â­â­

**åŠŸèƒ½**: å®æ—¶æ˜¾ç¤ºPostgreSQLçš„ç‰ˆæœ¬é“¾å’Œå¿«ç…§

**ç•Œé¢**:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MVCC Visualizer - Table: accounts         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   â”‚
â”‚  Row ID: 12345                                    â”‚
â”‚  Current Value: balance = 1000                    â”‚
â”‚                                                   â”‚
â”‚  Version Chain:                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ xmin   â”‚ xmax   â”‚ balance â”‚ status    â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ 1001   â”‚ 1005   â”‚ 500     â”‚ Dead âš«   â”‚        â”‚
â”‚  â”‚ 1005   â”‚ 1010   â”‚ 800     â”‚ Dead âš«   â”‚        â”‚
â”‚  â”‚ 1010   â”‚ NULL   â”‚ 1000    â”‚ Live âœ…   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                   â”‚
â”‚  Active Transactions:                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ txid   â”‚ state     â”‚ query        â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ 1011   â”‚ active    â”‚ UPDATE ...   â”‚           â”‚
â”‚  â”‚ 1012   â”‚ idle      â”‚ -            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                   â”‚
â”‚  Snapshot (txid=1011):                            â”‚
â”‚  xmin: 1005, xmax: 1011, xip: [1010]             â”‚
â”‚  Visible versions: xmin=1005 âœ…, xmin=1010 âŒ     â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°**:

```sql
-- PostgreSQLæŸ¥è¯¢ç‰ˆæœ¬é“¾
SELECT
    t_xmin::text::bigint as xmin,
    t_xmax::text::bigint as xmax,
    t_ctid,
    *
FROM heap_page_items(get_raw_page('accounts', 0));
```

**æŠ€æœ¯æ ˆ**:

- åç«¯: PostgreSQLæ’ä»¶ (C)
- å‰ç«¯: React + D3.js
- é€šä¿¡: WebSocketå®æ—¶æ¨é€

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å®‰è£…å†³ç­–åŠ©æ‰‹
curl -fsSL https://get.db-tools.org/install.sh | sh

# æˆ–ä½¿ç”¨Docker
docker run -p 8080:8080 db-tools/decision-helper:latest
```

### ä½¿ç”¨

```bash
# å¯åŠ¨Webç•Œé¢
db-tools serve --port 8080

# å‘½ä»¤è¡Œæ¨¡å¼
db-tools recommend \
  --scenario seckill \
  --concurrency 100000 \
  --consistency strong

# æ€§èƒ½é¢„æµ‹
db-tools predict \
  --config prod.yaml \
  --workload tpcc
```

---

## ğŸ“Š å·¥å…·å¯¹æ¯”

| å·¥å…· | å¼€æº | æ˜“ç”¨æ€§ | å‡†ç¡®æ€§ | æˆç†Ÿåº¦ |
|-----|------|-------|--------|--------|
| **æœ¬é¡¹ç›®å·¥å…·** | âœ… MIT | â­â­â­â­â­ | â­â­â­â­ | Beta |
| pgAdmin | âœ… | â­â­â­ | - | æˆç†Ÿ |
| pgBadger | âœ… | â­â­ | â­â­â­ | æˆç†Ÿ |
| AWS RDS Insights | âŒ | â­â­â­â­ | â­â­â­â­ | æˆç†Ÿ |
| Datadog | âŒ å•†ä¸š | â­â­â­â­â­ | â­â­â­â­â­ | æˆç†Ÿ |

**å·®å¼‚åŒ–**:

1. âœ… ç†è®ºé©±åŠ¨ï¼ˆåŸºäºLSEMï¼‰
2. âœ… å†³ç­–è§£é‡Šï¼ˆå¯è§£é‡ŠAIï¼‰
3. âœ… å¼€æºå…è´¹
4. âœ… PostgreSQLæ·±åº¦ä¼˜åŒ–

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

### ç†è®ºåŸºç¡€

- `02-è®¾è®¡æƒè¡¡åˆ†æ/01-å¹¶å‘æ§åˆ¶å†³ç­–æ ‘.md`
- `06-æ€§èƒ½åˆ†æ/01-ååé‡å…¬å¼æ¨å¯¼.md`
- `06-æ€§èƒ½åˆ†æ/02-å»¶è¿Ÿåˆ†ææ¨¡å‹.md`

### å·¥ä¸šæ¡ˆä¾‹

- `09-å·¥ä¸šæ¡ˆä¾‹åº“/01-ç”µå•†ç§’æ€ç³»ç»Ÿ.md`
- `09-å·¥ä¸šæ¡ˆä¾‹åº“/02-é‡‘èäº¤æ˜“ç³»ç»Ÿ.md`

### å‰æ²¿ç ”ç©¶

- `10-å‰æ²¿ç ”ç©¶æ–¹å‘/02-è‡ªåŠ¨è°ƒä¼˜ç³»ç»Ÿ.md`

---

## ğŸ“ˆ å‘å±•è·¯çº¿

### Phase 1: MVPï¼ˆ2025 Q2ï¼‰ âœ…

- [x] å†³ç­–åŠ©æ‰‹ Alphaç‰ˆæœ¬
- [x] æ€§èƒ½é¢„æµ‹å™¨ Betaç‰ˆæœ¬
- [x] MVCCè°ƒè¯•å™¨åŸå‹

### Phase 2: å®Œå–„ï¼ˆ2025 Q3-Q4ï¼‰

- [ ] Webç•Œé¢ç¾åŒ–
- [ ] å¢åŠ æ›´å¤šåœºæ™¯æ¨¡æ¿
- [ ] æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒ
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†

### Phase 3: ç”Ÿæ€ï¼ˆ2026ï¼‰

- [ ] VSCodeæ’ä»¶
- [ ] CI/CDé›†æˆ
- [ ] Kubernetes Operator
- [ ] å•†ä¸šæ”¯æŒæœåŠ¡

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

**å¦‚ä½•è´¡çŒ®**:

1. Forkä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤PR
4. é€šè¿‡Code Review

**è´¡çŒ®ç±»å‹**:

- æ–°å·¥å…·å¼€å‘
- ç°æœ‰å·¥å…·æ”¹è¿›
- æ–‡æ¡£å®Œå–„
- Bugä¿®å¤
- æ€§èƒ½ä¼˜åŒ–

**è´¡çŒ®è€…æ¿€åŠ±**:

- GitHub Contributorså¾½ç« 
- å®˜ç½‘è‡´è°¢åå•
- ä¼˜ç§€è´¡çŒ®è€…å¥–åŠ±

---

**æ¨¡å—ç‰ˆæœ¬**: 1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-05
**å¼€æºåè®®**: MIT License
**GitHub**: <https://github.com/db-theory/tools> (å¾…å‘å¸ƒ)

**è”ç³»æ–¹å¼**:

- Issue: GitHub Issues
- è®¨è®º: GitHub Discussions
- é‚®ä»¶: <tools@db-theory.org>
