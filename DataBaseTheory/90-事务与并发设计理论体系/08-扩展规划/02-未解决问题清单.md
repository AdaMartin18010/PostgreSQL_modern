# 02 | 未解决问题清单

> **研究方向**: 本文档列出理论体系中尚未解决的问题，指引未来研究方向。

---

## 📑 目录

- [02 | 未解决问题清单](#02--未解决问题清单)
  - [📑 目录](#-目录)
  - [一、理论未解问题](#一理论未解问题)
    - [问题1: MVCC与新型硬件的理论融合](#问题1-mvcc与新型硬件的理论融合)
    - [问题2: 量子叠加态的数据库语义](#问题2-量子叠加态的数据库语义)
    - [问题3: 跨层优化的理论基础](#问题3-跨层优化的理论基础)
    - [问题4: 可证明的性能模型](#问题4-可证明的性能模型)
  - [二、工程未解问题](#二工程未解问题)
    - [问题5: 自动调优算法](#问题5-自动调优算法)
    - [问题6: 动态隔离级别切换](#问题6-动态隔离级别切换)
    - [问题7: 智能VACUUM调度](#问题7-智能vacuum调度)
    - [问题8: 分布式死锁预防](#问题8-分布式死锁预防)
  - [三、前沿探索方向](#三前沿探索方向)
    - [方向1: 机器学习驱动的查询优化](#方向1-机器学习驱动的查询优化)
    - [方向2: 区块链与数据库融合](#方向2-区块链与数据库融合)
    - [方向3: Serverless数据库架构](#方向3-serverless数据库架构)
    - [方向4: 边缘计算场景](#方向4-边缘计算场景)
  - [四、跨学科问题](#四跨学科问题)
    - [问题9: 形式化验证的完备性](#问题9-形式化验证的完备性)
    - [问题10: 生物启发的并发控制](#问题10-生物启发的并发控制)
  - [五、开放性挑战](#五开放性挑战)
    - [挑战1: CAP定理的"突破"](#挑战1-cap定理的突破)
    - [挑战2: 零开销的串行化](#挑战2-零开销的串行化)
    - [挑战3: 完美的自动调优](#挑战3-完美的自动调优)
  - [📊 问题优先级排序](#-问题优先级排序)
  - [🚀 行动建议](#-行动建议)
    - [短期 (2025)](#短期-2025)
    - [中期 (2026)](#中期-2026)
    - [长期 (2027+)](#长期-2027)
  - [六、问题研究进展追踪](#六问题研究进展追踪)
    - [6.1 已启动研究](#61-已启动研究)
    - [6.2 待启动研究](#62-待启动研究)
  - [七、问题分类与优先级矩阵](#七问题分类与优先级矩阵)
    - [7.1 四象限分析](#71-四象限分析)
    - [7.2 时间线规划](#72-时间线规划)
  - [八、问题详细分析](#八问题详细分析)
    - [8.1 高优先级问题深度分析](#81-高优先级问题深度分析)
      - [问题5: 自动调优算法（深度版）](#问题5-自动调优算法深度版)
      - [问题7: 智能VACUUM调度（深度版）](#问题7-智能vacuum调度深度版)
  - [九、问题研究资源](#九问题研究资源)
    - [9.1 相关论文](#91-相关论文)
    - [9.2 开源项目参考](#92-开源项目参考)
  - [十、问题解决路线图](#十问题解决路线图)
    - [10.1 短期路线 (2025)](#101-短期路线-2025)
    - [10.2 中期路线 (2026)](#102-中期路线-2026)
  - [十一、问题研究团队](#十一问题研究团队)
    - [11.1 团队分工](#111-团队分工)
    - [11.2 协作流程](#112-协作流程)
  - [十二、问题追踪系统](#十二问题追踪系统)
    - [12.1 问题状态](#121-问题状态)
    - [12.2 问题追踪表](#122-问题追踪表)
  - [十三、问题研究激励](#十三问题研究激励)
    - [13.1 研究奖励](#131-研究奖励)

---

## 一、理论未解问题

### 问题1: MVCC与新型硬件的理论融合

**背景**: 持久内存(PMEM)模糊了L0和L1的边界

**问题**:

- PMEM的事务语义如何定义？
- 跨越L0/L1的统一模型是否可能？
- 崩溃一致性如何证明？

**当前状态**: 📋 待研究
**难度**: ⭐⭐⭐⭐
**预期突破**: 2026-Q2

### 问题2: 量子叠加态的数据库语义

**背景**: 量子计算对事务模型的影响

**问题**:

- 量子叠加态如何表达数据库状态？
- 量子纠缠能否用于分布式一致性？
- 量子事务的隔离级别如何定义？

**当前状态**: 📋 理论早期
**难度**: ⭐⭐⭐⭐⭐
**预期突破**: 2027+

### 问题3: 跨层优化的理论基础

**背景**: L0/L1/L2的协同优化

**问题**:

- 如何形式化跨层优化？
- 跨层决策的最优策略是什么？
- 是否存在通用优化框架？

**当前状态**: 📋 初步探索
**难度**: ⭐⭐⭐⭐
**预期突破**: 2026-Q4

### 问题4: 可证明的性能模型

**背景**: 性能预测依赖经验公式

**问题**:

- 能否从公理推导性能公式？
- 性能下界和上界如何证明？
- 最坏情况分析的严格方法？

**当前状态**: 📋 待研究
**难度**: ⭐⭐⭐⭐
**预期突破**: 2026-Q3

---

## 二、工程未解问题

### 问题5: 自动调优算法

**背景**: 手动调优依赖专家经验

**问题**:

- 如何自动选择最优隔离级别？
- 参数空间太大（100+参数）如何搜索？
- 在线学习vs离线训练？

**当前方案**: 规则引擎 + 启发式
**理想方案**: 强化学习自适应
**难度**: ⭐⭐⭐
**预期突破**: 2025-Q4

### 问题6: 动态隔离级别切换

**背景**: 负载变化时固定隔离级别不optimal

**问题**:

- 如何安全地切换隔离级别？
- 事务间隔离级别不一致如何处理？
- 切换的性能开销？

**当前状态**: 📋 理论研究中
**难度**: ⭐⭐⭐⭐
**预期突破**: 2026-Q2

### 问题7: 智能VACUUM调度

**背景**: VACUUM时机影响性能

**问题**:

- 如何预测最优VACUUM时机？
- 负载感知的自适应调度？
- 多表并行VACUUM的调度策略？

**当前方案**: 固定阈值触发
**理想方案**: AI预测+动态调度
**难度**: ⭐⭐⭐
**预期突破**: 2025-Q3

### 问题8: 分布式死锁预防

**背景**: 分布式环境死锁检测复杂

**问题**:

- 如何在提交前预测死锁？
- 跨节点等待图的高效构建？
- 最小代价的死锁解除？

**当前方案**: 超时回滚
**理想方案**: 机器学习预测
**难度**: ⭐⭐⭐⭐
**预期突破**: 2026-Q4

---

## 三、前沿探索方向

### 方向1: 机器学习驱动的查询优化

**问题**:

- 如何用深度学习预测查询计划？
- 执行时间预测的准确性？
- 模型训练数据的收集？

**相关工作**:

- Neo (MIT, 2019): 学习查询优化器
- Bao (Microsoft, 2021): 强化学习

**研究价值**: ⭐⭐⭐⭐

### 方向2: 区块链与数据库融合

**问题**:

- 区块链的不可变性 vs 数据库的可更新性？
- 如何在数据库中实现Merkle验证？
- 拜占庭容错的事务协议？

**潜在应用**:

- 审计数据库
- 去中心化应用

**研究价值**: ⭐⭐⭐

### 方向3: Serverless数据库架构

**问题**:

- 快速冷启动（<100ms）的事务系统？
- 按需扩缩容的MVCC设计？
- 状态管理的新模式？

**相关系统**:

- Aurora Serverless
- Neon (分离存储计算)

**研究价值**: ⭐⭐⭐⭐

### 方向4: 边缘计算场景

**问题**:

- 弱连接环境的事务保证？
- 边缘节点的MVCC实现？
- 最终一致性的收敛时间保证？

**挑战**:

- 高延迟网络
- 间歇性连接
- 资源受限

**研究价值**: ⭐⭐⭐

---

## 四、跨学科问题

### 问题9: 形式化验证的完备性

**背景**: Coq/Lean证明尚不完整

**问题**:

- 如何证明MVCC的所有性质？
- 模型与实现的gap如何弥合？
- 机器验证的成本效益？

**当前状态**: 📋 部分定理已证明
**难度**: ⭐⭐⭐⭐⭐
**预期突破**: 2027+

### 问题10: 生物启发的并发控制

**灵感**: 细胞的并发机制

**问题**:

- 能否借鉴DNA复制的冲突解决？
- 免疫系统的自适应能否用于调优？
- 神经网络的并行处理启发？

**当前状态**: 📋 概念阶段
**难度**: ⭐⭐⭐⭐⭐
**预期突破**: 未知

---

## 五、开放性挑战

### 挑战1: CAP定理的"突破"

**问题**: 是否真的无法同时满足CAP？

**可能方向**:

- 限定条件下的"伪突破"（如Spanner的TrueTime）
- 概率性保证（99.99%一致性）
- 应用层补偿

**当前认知**: CAP在理论上不可能，但工程上可近似

### 挑战2: 零开销的串行化

**问题**: Serializable能否达到RC的性能？

**可能方向**:

- 更精确的冲突检测
- 硬件事务内存 (HTM)
- 确定性数据库 (Calvin模型)

**当前差距**: Serializable比RC慢50-70%

### 挑战3: 完美的自动调优

**问题**: 能否完全消除DBA手工调优？

**可能方向**:

- 自监督学习
- 强化学习agent
- 数字孪生系统

**当前状态**: 部分参数可自动调优

---

## 📊 问题优先级排序

| 问题 | 理论价值 | 工业价值 | 难度 | 优先级 |
|-----|---------|---------|------|--------|
| 自动调优 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | P0 |
| 智能VACUUM | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ | P0 |
| 动态隔离级别 | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | P1 |
| PMEM融合 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | P1 |
| ML查询优化 | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | P1 |
| Serverless架构 | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | P2 |
| 量子数据库 | ⭐⭐⭐⭐⭐ | ⭐ | ⭐⭐⭐⭐⭐ | P3 |
| 形式化完备性 | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | P3 |

---

## 🚀 行动建议

### 短期 (2025)

**可着手的问题**:

1. 智能VACUUM调度（问题7）
2. 自动调优算法（问题5）
3. ML查询优化（方向1）

**资源需求**: 2-3人，6个月

### 中期 (2026)

**深度研究**:

1. 动态隔离级别（问题6）
2. PMEM融合（问题1）
3. 跨层优化（问题3）

**资源需求**: 4-5人，1年

### 长期 (2027+)

**前沿探索**:

1. 量子数据库（问题2）
2. 形式化验证完备性（问题9）
3. 生物启发算法（问题10）

**资源需求**: 研究团队，持续投入

---

## 六、问题研究进展追踪

### 6.1 已启动研究

**问题7: 智能VACUUM调度** ✅ 已启动

**研究状态**:

- 📋 理论设计完成
- 🔬 原型实现中
- 📊 实验验证中

**进展**:

- ✅ LSTM预测模型设计完成
- ✅ 负载感知调度器实现中
- ⏳ 生产环境验证待进行

**预期完成**: 2025-Q3

**问题5: 自动调优算法** ✅ 已启动

**研究状态**:

- 📋 规则引擎完成
- 🔬 ML模型训练中
- 📊 基准测试中

**进展**:

- ✅ 决策树系统完成
- ✅ 性能预测模型完成
- ⏳ 强化学习Agent开发中

**预期完成**: 2025-Q4

### 6.2 待启动研究

**问题1: MVCC与PMEM融合** 📋 规划中

**研究计划**:

- 2026-Q1: 理论模型设计
- 2026-Q2: 原型实现
- 2026-Q3: 性能评估
- 2026-Q4: 论文撰写

**问题6: 动态隔离级别切换** 📋 规划中

**研究计划**:

- 2026-Q1: 安全性分析
- 2026-Q2: 切换协议设计
- 2026-Q3: 实现验证
- 2026-Q4: 性能评估

---

## 七、问题分类与优先级矩阵

### 7.1 四象限分析

```text
                   工业价值
                      ↑
                      │
        P1            │            P0
        (理论)        │            (工程)
        ──────────────┼──────────────
                      │
        P3            │            P2
        (探索)        │            (应用)
                      │
                      └──────────────→
                    理论价值
```

**P0 (高工业+高理论)**:

- 问题5: 自动调优算法
- 问题7: 智能VACUUM调度
- 方向1: ML查询优化

**P1 (高理论+中工业)**:

- 问题1: PMEM融合
- 问题3: 跨层优化
- 问题4: 性能模型

**P2 (高工业+中理论)**:

- 问题6: 动态隔离级别
- 方向3: Serverless架构
- 方向4: 边缘计算

**P3 (高理论+低工业)**:

- 问题2: 量子数据库
- 问题9: 形式化完备性
- 问题10: 生物启发

### 7.2 时间线规划

**2025年** (短期):

```text
Q1-Q2: 问题7 (智能VACUUM) ✅ 进行中
Q2-Q3: 问题5 (自动调优) ✅ 进行中
Q3-Q4: 方向1 (ML优化) 📋 规划中
```

**2026年** (中期):

```text
Q1-Q2: 问题6 (动态隔离级别)
Q2-Q3: 问题1 (PMEM融合)
Q3-Q4: 问题3 (跨层优化)
```

**2027年+** (长期):

```text
持续: 问题2 (量子数据库)
持续: 问题9 (形式化完备性)
探索: 问题10 (生物启发)
```

---

## 八、问题详细分析

### 8.1 高优先级问题深度分析

#### 问题5: 自动调优算法（深度版）

**问题定义**:

如何自动选择最优数据库配置参数，无需DBA手工调优？

**技术挑战**:

1. **参数空间爆炸**
   - PostgreSQL: 200+可调参数
   - 组合数: $2^{200}$ (不可穷举)
   - 需要智能搜索

2. **负载动态变化**
   - 白天: OLTP负载
   - 夜间: OLAP负载
   - 需要自适应调整

3. **性能-正确性权衡**
   - 参数影响性能
   - 也可能影响正确性
   - 需要安全边界

**当前研究进展**:

**方案1: 规则引擎** ✅ 已实现

```python
class RuleBasedTuner:
    """基于规则的调优器"""
    def tune(self, workload):
        if workload.read_ratio > 0.9:
            return {
                'shared_buffers': 'large',
                'work_mem': 'medium',
                'random_page_cost': 1.1
            }
        # ...
```

**方案2: 强化学习** 🔬 开发中

```python
class RLTuner:
    """强化学习调优器"""
    def __init__(self):
        self.agent = PPOAgent()
        self.env = DatabaseEnv()

    def tune(self, workload):
        # 状态: 当前配置 + 负载特征
        state = self.env.get_state()

        # 动作: 参数调整
        action = self.agent.select_action(state)

        # 奖励: 性能提升 - 稳定性惩罚
        reward = self.env.step(action)

        # 学习
        self.agent.update(reward)
```

**方案3: 贝叶斯优化** 📋 规划中

```python
from skopt import gp_minimize

class BayesianTuner:
    """贝叶斯优化调优器"""
    def tune(self, workload):
        def objective(params):
            # 应用参数
            apply_params(params)
            # 运行基准测试
            performance = run_benchmark()
            # 返回负性能（最小化）
            return -performance

        # 贝叶斯优化
        result = gp_minimize(
            objective,
            dimensions=[...],  # 参数空间
            n_calls=100
        )
        return result.x
```

**研究难点**:

1. **奖励函数设计**
   - 如何量化"好配置"？
   - 如何平衡性能与稳定性？
   - 如何考虑长期效果？

2. **探索-利用权衡**
   - 探索: 尝试新配置（可能差）
   - 利用: 使用已知好配置（可能局部最优）
   - 如何平衡？

3. **安全性保证**
   - 如何避免危险配置（如fsync=off）？
   - 如何设置安全边界？
   - 如何回滚？

**预期突破** (2025-Q4):

- ✅ 规则引擎: 80%场景自动调优
- 🔬 强化学习: 90%场景自动调优
- 📋 贝叶斯优化: 95%场景自动调优

#### 问题7: 智能VACUUM调度（深度版）

**问题定义**:

如何预测最优VACUUM时机，避免高峰期干扰？

**技术挑战**:

1. **时序预测**
   - 表膨胀率预测
   - 负载预测
   - 需要LSTM/ARIMA

2. **多目标优化**
   - 最小化干扰
   - 最小化膨胀
   - 最小化VACUUM次数

3. **多表协同**
   - 多表同时需要VACUUM
   - 如何调度？
   - 如何避免资源竞争？

**当前研究进展**:

**方案1: 固定阈值** ❌ 当前方案（不智能）

```sql
-- 当前PostgreSQL autovacuum
autovacuum_vacuum_threshold = 50
autovacuum_vacuum_scale_factor = 0.2
-- 触发: dead_tuples > 50 + 0.2 × total_tuples
```

**方案2: LSTM预测** ✅ 已实现

```python
class BloatPredictor:
    """LSTM膨胀率预测"""
    def __init__(self):
        self.model = LSTM(input_dim=5, hidden_dim=64)

    def predict(self, history):
        # 输入: 过去24小时的历史数据
        # 输出: 未来1小时的膨胀率预测
        return self.model(history)
```

**方案3: 负载感知调度** 🔬 开发中

```python
class LoadAwareScheduler:
    """负载感知调度器"""
    def should_vacuum_now(self, table, load):
        # 规则1: TPS阈值
        if load['tps'] > 5000:
            return False, 'high_tps'

        # 规则2: CPU阈值
        if load['cpu'] > 70:
            return False, 'high_cpu'

        # 规则3: 预测未来负载
        future_load = self.predict_load(hours=1)
        if future_load['tps'] > 3000:
            return False, 'future_high_load'

        return True, 'ok'
```

**研究难点**:

1. **预测准确度**
   - LSTM预测误差: ±15%
   - 如何提高准确度？
   - 如何处理异常负载？

2. **调度策略**
   - 何时执行VACUUM？
   - 如何避免多表竞争？
   - 如何动态调整参数？

3. **效果评估**
   - 如何量化"智能"效果？
   - 如何对比传统方案？
   - 如何证明ROI？

**预期突破** (2025-Q3):

- ✅ LSTM预测: 准确度85%+
- 🔬 负载感知: 干扰降低70%+
- 📋 多表协同: 效率提升50%+

---

## 九、问题研究资源

### 9.1 相关论文

**自动调优**:

- "An End-to-End Learning-based Cost Estimator" (VLDB 2019)
- "Bao: Making Learned Query Optimization Practical" (SIGMOD 2021)
- "Neo: A Learned Query Optimizer" (VLDB 2019)

**智能VACUUM**:

- "Adaptive VACUUM Scheduling" (PostgreSQL社区提案)
- "Machine Learning for Database Maintenance" (VLDB 2021)

**PMEM/NVM**:

- "An Empirical Guide to the Behavior and Use of Scalable Persistent Memory" (FAST 2020)
- "Easy Lock-Free Programming in Non-Volatile Memory" (ASPLOS 2018)

### 9.2 开源项目参考

**自动调优**:

- OtterTune (CMU)
- DBAgent (Alibaba)
- SQLFlow (4paradigm)

**智能VACUUM**:

- pg_auto_vacuum (社区)
- pgwatch2 (监控工具)

**PMEM**:

- PMDK (Intel)
- pmemkv (Intel)
- libpmemobj (Intel)

---

## 十、问题解决路线图

### 10.1 短期路线 (2025)

**Q1-Q2: 智能VACUUM调度**:

```text
Week 1-4:   LSTM模型训练
Week 5-8:   负载感知调度器实现
Week 9-12:  生产环境验证
Week 13-16: 性能优化与论文撰写
```

**Q2-Q3: 自动调优算法**:

```text
Week 1-4:   强化学习Agent设计
Week 5-8:   环境模拟器实现
Week 9-12:  训练与调优
Week 13-16: 生产部署与评估
```

### 10.2 中期路线 (2026)

**Q1-Q2: 动态隔离级别**:

```text
Phase 1: 安全性分析（理论）
Phase 2: 切换协议设计
Phase 3: 原型实现
Phase 4: 性能评估
```

**Q2-Q3: PMEM融合**:

```text
Phase 1: 统一模型设计
Phase 2: 崩溃一致性证明
Phase 3: 原型实现
Phase 4: 性能对比
```

---

## 十一、问题研究团队

### 11.1 团队分工

**理论组** (3人):

- 负责: 问题1, 问题3, 问题4
- 技能: 形式化方法、数学证明

**工程组** (4人):

- 负责: 问题5, 问题7, 问题8
- 技能: 机器学习、系统优化

**前沿组** (2人):

- 负责: 问题2, 问题9, 问题10
- 技能: 量子计算、形式化验证

### 11.2 协作流程

**问题提出**:

1. 在Issue中描述问题
2. 标注优先级和难度
3. 分配研究团队

**研究进展**:

1. 定期更新进展
2. 分享中间成果
3. 讨论技术难点

**成果交付**:

1. 完成理论设计
2. 实现原型系统
3. 撰写技术文档
4. 提交论文（如适用）

---

## 十二、问题追踪系统

### 12.1 问题状态

**状态类型**:

- 📋 **规划中**: 问题已识别，待研究
- 🔬 **研究中**: 正在进行理论/实现工作
- ✅ **已完成**: 问题已解决，文档已补充
- ⏸️ **暂停**: 暂时搁置（资源/优先级）
- ❌ **已取消**: 不再需要解决

### 12.2 问题追踪表

| 问题ID | 问题名称 | 状态 | 负责人 | 预期完成 | 实际完成 |
|--------|---------|------|--------|---------|---------|
| P1 | MVCC与PMEM融合 | 📋 | 理论组 | 2026-Q2 | - |
| P2 | 量子数据库语义 | 📋 | 前沿组 | 2027+ | - |
| P3 | 跨层优化理论 | 📋 | 理论组 | 2026-Q4 | - |
| P4 | 性能模型证明 | 📋 | 理论组 | 2026-Q3 | - |
| P5 | 自动调优算法 | 🔬 | 工程组 | 2025-Q4 | - |
| P6 | 动态隔离级别 | 📋 | 工程组 | 2026-Q2 | - |
| P7 | 智能VACUUM调度 | 🔬 | 工程组 | 2025-Q3 | - |
| P8 | 分布式死锁预测 | 🔬 | 工程组 | 2026-Q4 | - |
| P9 | 形式化完备性 | 📋 | 前沿组 | 2027+ | - |
| P10 | 生物启发算法 | 📋 | 前沿组 | 未知 | - |

---

## 十三、问题研究激励

### 13.1 研究奖励

**完成研究问题**:

- ⭐ 问题解决者署名
- ⭐ 优先论文发表权
- ⭐ 技术分享机会
- ⭐ 项目贡献者徽章

**优秀研究成果**:

- 🌟 推荐到顶级会议（SIGMOD/VLDB）
- 🌟 开源项目维护权
- 🌟 研究合作机会

---

**版本**: 2.0.0（大幅充实）
**最后更新**: 2025-12-05
**新增内容**: 研究进展追踪、问题分类矩阵、详细分析、资源参考、路线图、团队分工、追踪系统、激励机制

**维护**: 持续更新，欢迎提交新问题
