# æ•°æ®åº“æ•°æ®ç¼–æ’æ¨¡å‹-ç¼–æ’æ²»ç†ä¸åˆè§„æ€§çš„å½¢å¼åŒ–

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: âœ… å†…å®¹å·²å®Œæˆ

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®åº“æ•°æ®ç¼–æ’æ¨¡å‹-ç¼–æ’æ²»ç†ä¸åˆè§„æ€§çš„å½¢å¼åŒ–](#æ•°æ®åº“æ•°æ®ç¼–æ’æ¨¡å‹-ç¼–æ’æ²»ç†ä¸åˆè§„æ€§çš„å½¢å¼åŒ–)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 æ•°æ®åº“æ•°æ®ç¼–æ’æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°](#10-æ•°æ®åº“æ•°æ®ç¼–æ’æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 æ²»ç†ç­–ç•¥](#21-æ²»ç†ç­–ç•¥)
    - [2.2 åˆè§„æ€§æ£€æŸ¥](#22-åˆè§„æ€§æ£€æŸ¥)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 æ²»ç†å½¢å¼åŒ–](#31-æ²»ç†å½¢å¼åŒ–)
  - [4. å®šç†ä¸è¯æ˜](#4-å®šç†ä¸è¯æ˜)
    - [4.1 æ²»ç†ç­–ç•¥ä¸€è‡´æ€§å®šç†](#41-æ²»ç†ç­–ç•¥ä¸€è‡´æ€§å®šç†)
    - [4.2 åˆè§„æ€§å®¡è®¡å®Œå¤‡æ€§å®šç†](#42-åˆè§„æ€§å®¡è®¡å®Œå¤‡æ€§å®šç†)
  - [5. å®é™…åº”ç”¨](#5-å®é™…åº”ç”¨)
    - [5.1 PostgreSQL 18ç¼–æ’æ²»ç†å®ç°](#51-postgresql-18ç¼–æ’æ²»ç†å®ç°)
      - [5.1.1 æ²»ç†ç³»ç»Ÿ](#511-æ²»ç†ç³»ç»Ÿ)
    - [5.2 å®é™…åº”ç”¨åœºæ™¯](#52-å®é™…åº”ç”¨åœºæ™¯)
      - [åœºæ™¯1ï¼šç­–ç•¥å®šä¹‰ä¸æ‰§è¡Œ](#åœºæ™¯1ç­–ç•¥å®šä¹‰ä¸æ‰§è¡Œ)
      - [åœºæ™¯2ï¼šåˆè§„æ€§å®¡è®¡](#åœºæ™¯2åˆè§„æ€§å®¡è®¡)
  - [6. ç›¸å…³æ–‡æ¡£](#6-ç›¸å…³æ–‡æ¡£)
    - [5.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#51-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
    - [6.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®](#61-æ ¸å¿ƒç†è®ºæ–‡çŒ®)
    - [6.2 PostgreSQLå®ç°ç›¸å…³](#62-postgresqlå®ç°ç›¸å…³)
    - [6.3 ç›¸å…³æ–‡æ¡£](#63-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 æ•°æ®åº“æ•°æ®ç¼–æ’æ¨¡å‹å·¥ä½œåŸç†æ¦‚è¿°

**ç¼–æ’æ²»ç†**ï¼š

ç¼–æ’æ²»ç†é€šè¿‡åˆè§„æ€§æ£€æŸ¥æ¥ç®¡ç†ç¼–æ’ç”Ÿå‘½å‘¨æœŸã€‚

**æ²»ç†æ¨¡å‹æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((ç¼–æ’æ²»ç†))
    æ²»ç†ç­–ç•¥
      ç­–ç•¥å®šä¹‰
      ç­–ç•¥æ‰§è¡Œ
      ç­–ç•¥ç›‘æ§
    åˆè§„æ€§æ£€æŸ¥
      æ³•è§„åˆè§„
      æ ‡å‡†åˆè§„
      å†…éƒ¨åˆè§„
    æ²»ç†æµç¨‹
      å®¡æ‰¹æµç¨‹
      å˜æ›´ç®¡ç†
      å®¡è®¡è¿½è¸ª
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **æ²»ç†ç­–ç•¥**ï¼šç­–ç•¥å®šä¹‰å’Œæ‰§è¡Œ
- **åˆè§„æ€§æ£€æŸ¥**ï¼šåˆè§„æ€§éªŒè¯
- **å®é™…åº”ç”¨**ï¼šæ²»ç†ç³»ç»Ÿ

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 æ²»ç†ç­–ç•¥

**ç­–ç•¥æ¨¡å‹**ï¼š

```haskell
-- æ²»ç†ç­–ç•¥
data GovernancePolicy = GovernancePolicy {
    rules :: [Rule],
    enforcement :: Enforcement
}
```

### 2.2 åˆè§„æ€§æ£€æŸ¥

**åˆè§„æ€§ç±»å‹**ï¼š

| ç±»å‹ | å®šä¹‰ | æ£€æŸ¥æ–¹æ³• | ä¼˜å…ˆçº§ |
|------|------|---------|--------|
| **æ³•è§„** | æ³•å¾‹è¦æ±‚ | è§„åˆ™åŒ¹é… | â­â­â­â­â­ æœ€é«˜ |
| **æ ‡å‡†** | è¡Œä¸šæ ‡å‡† | æ ‡å‡†æ£€æŸ¥ | â­â­â­â­ é«˜ |
| **å†…éƒ¨** | å†…éƒ¨æ”¿ç­– | ç­–ç•¥éªŒè¯ | â­â­â­ ä¸­ |

### 2.3 æ²»ç†ç­–ç•¥é€‰æ‹©å†³ç­–æ ‘

```mermaid
flowchart TD
    A[é€‰æ‹©æ²»ç†ç­–ç•¥] --> B{åˆè§„æ€§ç±»å‹?}
    B -->|æ³•è§„åˆè§„| C{æ³•è§„ç±»å‹?}
    B -->|æ ‡å‡†åˆè§„| D{æ ‡å‡†ç±»å‹?}
    B -->|å†…éƒ¨åˆè§„| E[å†…éƒ¨ç­–ç•¥]

    C -->|GDPR| F[æ•°æ®éšç§ç­–ç•¥<br/>GDPRåˆè§„]
    C -->|HIPAA| G[åŒ»ç–—æ•°æ®ç­–ç•¥<br/>HIPAAåˆè§„]
    C -->|SOX| H[è´¢åŠ¡æ•°æ®ç­–ç•¥<br/>SOXåˆè§„]

    D -->|ISO 27001| I[ä¿¡æ¯å®‰å…¨ç­–ç•¥<br/>ISO 27001]
    D -->|ISO 9001| J[è´¨é‡ç®¡ç†ç­–ç•¥<br/>ISO 9001]

    E --> K{ç­–ç•¥ç±»å‹?}
    K -->|è®¿é—®æ§åˆ¶| L[è®¿é—®æ§åˆ¶ç­–ç•¥]
    K -->|æ•°æ®è´¨é‡| M[æ•°æ®è´¨é‡ç­–ç•¥]
    K -->|å®¡è®¡| N[å®¡è®¡ç­–ç•¥]

    F --> O[PostgreSQL 18<br/>RLS + å®¡è®¡]
    G --> O
    I --> O
    L --> O

    style A fill:#FFD700
    style F fill:#90EE90
    style I fill:#87CEEB
    style L fill:#FFA500
```

### 2.4 æ²»ç†ç­–ç•¥å¯¹æ¯”çŸ©é˜µ

| ç»´åº¦ | æ³•è§„åˆè§„ | æ ‡å‡†åˆè§„ | å†…éƒ¨åˆè§„ | ç»¼åˆæ²»ç† |
|------|---------|---------|---------|---------|
| **å¼ºåˆ¶æ€§** | â­â­â­â­â­ æ³•å¾‹å¼ºåˆ¶ | â­â­â­â­ è¡Œä¸šè¦æ±‚ | â­â­â­ å†…éƒ¨è¦æ±‚ | â­â­â­â­â­ ç»¼åˆ |
| **æ£€æŸ¥é¢‘ç‡** | â­â­â­â­â­ å®æ—¶ | â­â­â­â­ å®šæœŸ | â­â­â­ æŒ‰éœ€ | â­â­â­â­â­ å®æ—¶+å®šæœŸ |
| **å®¡è®¡è¦æ±‚** | â­â­â­â­â­ ä¸¥æ ¼ | â­â­â­â­ é«˜ | â­â­â­ ä¸­ | â­â­â­â­â­ æœ€ä¸¥æ ¼ |
| **å®ç°å¤æ‚åº¦** | â­â­â­ ä¸­ | â­â­â­ ä¸­ | â­â­â­â­ ä½ | â­â­ é«˜ |
| **æˆæœ¬** | â­â­â­ ä¸­ | â­â­â­ ä¸­ | â­â­â­â­ ä½ | â­â­ é«˜ |
| **é£é™©ç­‰çº§** | â­â­â­â­â­ æœ€é«˜ | â­â­â­â­ é«˜ | â­â­â­ ä¸­ | â­â­â­â­â­ æœ€é«˜ |
| **PostgreSQLæ”¯æŒ** | âœ… RLS + å®¡è®¡ | âœ… ç­–ç•¥å¼•æ“ | âœ… è‡ªå®šä¹‰ç­–ç•¥ | âœ… ç»„åˆä½¿ç”¨ |
| **é€‚ç”¨åœºæ™¯** | å—ç›‘ç®¡è¡Œä¸š | è®¤è¯è¦æ±‚ | ä¼ä¸šè§„èŒƒ | å…¨é¢æ²»ç† |

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 æ²»ç†å½¢å¼åŒ–

**æ²»ç†**ï¼š

```haskell
-- æ²»ç†å½¢å¼åŒ–
Governance = (P, C, E)
where
    P = policy set
    C = compliance checker: Policy Ã— Action â†’ Bool
    E = enforcement mechanism: Policy Ã— Action â†’ Action'

-- åˆè§„æ€§æ£€æŸ¥
checkCompliance :: Policy -> Action -> Bool
checkCompliance policy action =
    all (satisfies policy) (requirements action)

-- ç­–ç•¥æ‰§è¡Œ
enforcePolicy :: Policy -> Action -> Action
enforcePolicy policy action =
    if checkCompliance policy action then
        action
    else
        reject(action)
```

---

## 4. å®šç†ä¸è¯æ˜

### 4.1 æ²»ç†ç­–ç•¥ä¸€è‡´æ€§å®šç†

**å®šç†1ï¼ˆæ²»ç†ç­–ç•¥ä¸€è‡´æ€§ï¼‰**ï¼š

ç¼–æ’æ²»ç†ç­–ç•¥åœ¨æ•´ä¸ªç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸€è‡´æ€§ï¼Œå³æ‰€æœ‰ç¼–æ’æ“ä½œéƒ½éµå¾ªé¢„å®šä¹‰çš„æ²»ç†è§„åˆ™å’Œæ ‡å‡†ï¼Œä»è€Œç¡®ä¿æ•°æ®å¤„ç†çš„è§„èŒƒæ€§å’Œå¯æ§æ€§ã€‚

**å½¢å¼åŒ–è¡¨è¿°**ï¼š

è®¾æ²»ç†ç³»ç»ŸGovernance = (P, C, E)ï¼Œç­–ç•¥é›†åˆPï¼Œåˆè§„æ€§æ£€æŸ¥å™¨Cï¼Œæ‰§è¡Œæœºåˆ¶Eã€‚å¯¹äºä»»æ„æ“ä½œactionï¼Œå¦‚æœå­˜åœ¨ç­–ç•¥p âˆˆ Pï¼Œåˆ™ï¼š

```text
âˆ€ action: enforcePolicy(p, action) = action' âˆ§ compliant(action')
```

**è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šç­–ç•¥é›†åˆå®šä¹‰å’Œä¸€è‡´æ€§**ï¼š

- è®¾æ²»ç†ç³»ç»ŸGovernance = (P, C, E)ï¼Œå…¶ä¸­ï¼š
  - Pæ˜¯ç­–ç•¥é›†åˆï¼ŒP = {pâ‚, pâ‚‚, ..., pâ‚™}
  - Cæ˜¯åˆè§„æ€§æ£€æŸ¥å™¨ï¼ŒC: P Ã— Action â†’ Bool
  - Eæ˜¯æ‰§è¡Œæœºåˆ¶ï¼ŒE: P Ã— Action â†’ Action'
- ç­–ç•¥ä¸€è‡´æ€§ï¼šå¯¹äºä»»æ„ç­–ç•¥p âˆˆ Pï¼Œåœ¨æ•´ä¸ªç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸­ï¼š
  - ç­–ç•¥å®šä¹‰ä¸å˜ï¼špçš„å®šä¹‰åœ¨æ—¶é—´tâ‚å’Œtâ‚‚ç›¸åŒï¼ˆtâ‚ < tâ‚‚ï¼‰
  - ç­–ç•¥æ— æ­§ä¹‰ï¼špçš„å®šä¹‰æ˜ç¡®ï¼Œä¸å­˜åœ¨è§£é‡Šå†²çª
  - ç­–ç•¥å¯æ‰§è¡Œï¼špå¯ä»¥è¢«åˆè§„æ€§æ£€æŸ¥å™¨Cæ­£ç¡®è¯„ä¼°

**æ­¥éª¤2ï¼šåˆè§„æ€§æ£€æŸ¥å™¨æ­£ç¡®æ€§**ï¼š

- åˆè§„æ€§æ£€æŸ¥å™¨C: P Ã— Action â†’ Boolæ»¡è¶³ï¼š
  - å¯¹äºç­–ç•¥på’Œæ“ä½œactionï¼ŒC(p, action) = trueå½“ä¸”ä»…å½“actionæ»¡è¶³ç­–ç•¥pçš„æ‰€æœ‰è¦æ±‚
  - æ£€æŸ¥å™¨æ˜¯ç¡®å®šæ€§çš„ï¼šç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡º
  - æ£€æŸ¥å™¨æ˜¯å®Œå¤‡çš„ï¼šèƒ½å¤Ÿæ£€æŸ¥ç­–ç•¥pçš„æ‰€æœ‰è¦æ±‚

**æ­¥éª¤3ï¼šæ‰§è¡Œæœºåˆ¶å®Œæ•´æ€§**ï¼š

- æ‰§è¡Œæœºåˆ¶E: P Ã— Action â†’ Action'æ»¡è¶³ï¼š
  - å¯¹äºä»»æ„æ“ä½œactionï¼Œå¦‚æœC(p, action) = trueï¼Œåˆ™E(p, action) = actionï¼ˆæ“ä½œé€šè¿‡ï¼‰
  - å¦‚æœC(p, action) = falseï¼Œåˆ™E(p, action) = reject(action)æˆ–correct(action)ï¼ˆæ“ä½œè¢«æ‹’ç»æˆ–ä¿®æ­£ï¼‰
  - æ‰€æœ‰æ“ä½œéƒ½ç»è¿‡åˆè§„æ€§æ£€æŸ¥ï¼šä¸å­˜åœ¨ç»•è¿‡æ£€æŸ¥çš„æ“ä½œ

**æ­¥éª¤4ï¼šç­–ç•¥æ‰§è¡Œä¸€è‡´æ€§**ï¼š

- å¯¹äºä»»æ„æ“ä½œactionå’Œç­–ç•¥p âˆˆ Pï¼š
  - æ“ä½œç»è¿‡åˆè§„æ€§æ£€æŸ¥ï¼šC(p, action)è¢«è°ƒç”¨
  - æ ¹æ®æ£€æŸ¥ç»“æœæ‰§è¡Œï¼šå¦‚æœC(p, action) = trueï¼Œåˆ™actionè¢«æ‰§è¡Œï¼›å¦åˆ™è¢«æ‹’ç»æˆ–ä¿®æ­£
  - æ‰§è¡Œåçš„æ“ä½œaction'æ»¡è¶³ï¼šcompliant(action') = true

**æ­¥éª¤5ï¼šç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸€è‡´æ€§**ï¼š

- åœ¨æ•´ä¸ªç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸­ï¼š
  - ç­–ç•¥é›†åˆPä¿æŒç¨³å®šï¼ˆç­–ç•¥å˜æ›´é€šè¿‡æ­£å¼æµç¨‹ï¼‰
  - åˆè§„æ€§æ£€æŸ¥å™¨Cä¿æŒæ­£ç¡®æ€§
  - æ‰§è¡Œæœºåˆ¶Eä¿æŒå®Œæ•´æ€§
  - å› æ­¤ï¼Œæ‰€æœ‰æ“ä½œéƒ½éµå¾ªä¸€è‡´çš„æ²»ç†ç­–ç•¥

**æ­¥éª¤6ï¼šç»“è®º**ï¼š

- æ²»ç†ç­–ç•¥ä¸€è‡´æ€§å®šç†å¾—è¯
- ç³»ç»Ÿé€šè¿‡ä¸€è‡´çš„ç­–ç•¥ã€æ­£ç¡®çš„æ£€æŸ¥å’Œå®Œæ•´çš„æ‰§è¡Œæœºåˆ¶ï¼Œç¡®ä¿æ‰€æœ‰æ“ä½œéƒ½ç¬¦åˆæ²»ç†è¦æ±‚

**è¯æ˜æ ‘**ï¼š

```mermaid
graph TD
    A[æ²»ç†ç­–ç•¥ä¸€è‡´æ€§å®šç†] --> B[æ­¥éª¤1: ç­–ç•¥é›†åˆå®šä¹‰å’Œä¸€è‡´æ€§]
    A --> C[æ­¥éª¤2: åˆè§„æ€§æ£€æŸ¥å™¨æ­£ç¡®æ€§]
    A --> D[æ­¥éª¤3: æ‰§è¡Œæœºåˆ¶å®Œæ•´æ€§]
    A --> E[æ­¥éª¤4: ç­–ç•¥æ‰§è¡Œä¸€è‡´æ€§]
    A --> F[æ­¥éª¤5: ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸€è‡´æ€§]
    A --> G[æ­¥éª¤6: ç»“è®º]

    B --> B1[ç­–ç•¥å®šä¹‰ä¸å˜]
    B --> B2[ç­–ç•¥æ— æ­§ä¹‰]
    B --> B3[ç­–ç•¥å¯æ‰§è¡Œ]

    C --> C1[æ£€æŸ¥å™¨æ­£ç¡®æ€§]
    C --> C2[æ£€æŸ¥å™¨ç¡®å®šæ€§]
    C --> C3[æ£€æŸ¥å™¨å®Œå¤‡æ€§]

    D --> D1[é€šè¿‡æ“ä½œæ‰§è¡Œ]
    D --> D2[æ‹’ç»/ä¿®æ­£æ“ä½œ]
    D --> D3[æ£€æŸ¥å®Œæ•´æ€§]

    E --> E1[æ“ä½œæ£€æŸ¥]
    E --> E2[ç»“æœæ‰§è¡Œ]
    E --> E3[åˆè§„æ€§ä¿è¯]

    F --> F1[ç­–ç•¥ç¨³å®šæ€§]
    F --> F2[æ£€æŸ¥å™¨æ­£ç¡®æ€§]
    F --> F3[æ‰§è¡Œå®Œæ•´æ€§]

    G --> G1[ç­–ç•¥ä¸€è‡´æ€§]
    G --> G2[å®šç†å¾—è¯]

    style A fill:#FFD700
    style G2 fill:#90EE90
```

### 4.2 åˆè§„æ€§å®¡è®¡å®Œå¤‡æ€§å®šç†

**å®šç†2ï¼ˆåˆè§„æ€§å®¡è®¡å®Œå¤‡æ€§ï¼‰**ï¼š

åˆè§„æ€§å®¡è®¡æœºåˆ¶æ˜¯å®Œå¤‡çš„ï¼Œå³æ‰€æœ‰ç¼–æ’æ“ä½œéƒ½è¢«è®°å½•å’Œå®¡è®¡ï¼Œèƒ½å¤Ÿè¿½è¸ªåˆ°ä»»ä½•è¿è§„è¡Œä¸ºï¼Œå¹¶æ”¯æŒåç»­çš„åˆè§„æ€§åˆ†æå’ŒæŠ¥å‘Šã€‚

**å½¢å¼åŒ–è¡¨è¿°**ï¼š

è®¾å®¡è®¡ç³»ç»ŸAuditï¼Œæ“ä½œé›†åˆActionsã€‚åˆ™ï¼š

```text
âˆ€ action âˆˆ Actions: âˆƒ audit_record âˆˆ Audit âˆ§ complete(audit_record, action)
```

**è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šå®¡è®¡ç³»ç»Ÿå®šä¹‰**ï¼š

- è®¾å®¡è®¡ç³»ç»ŸAuditï¼Œæ“ä½œé›†åˆActionsï¼Œå®¡è®¡è®°å½•é›†åˆAuditRecords
- å®¡è®¡å‡½æ•°audit: Actions â†’ AuditRecordsï¼Œå°†æ“ä½œæ˜ å°„åˆ°å®¡è®¡è®°å½•
- å®Œå¤‡æ€§å‡½æ•°complete: AuditRecords Ã— Actions â†’ Boolï¼Œåˆ¤æ–­å®¡è®¡è®°å½•æ˜¯å¦å®Œæ•´è®°å½•æ“ä½œ

**æ­¥éª¤2ï¼šå®¡è®¡è®°å½•å®Œæ•´æ€§**ï¼š

- å¯¹äºä»»æ„æ“ä½œaction âˆˆ Actionsï¼š
  - å­˜åœ¨å®¡è®¡è®°å½•audit_record = audit(action)
  - å®¡è®¡è®°å½•åŒ…å«æ“ä½œçš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼š
    - æ“ä½œç±»å‹ã€æ“ä½œæ—¶é—´ã€æ“ä½œè€…
    - æ“ä½œå¯¹è±¡ã€æ“ä½œç»“æœ
    - æ“ä½œä¸Šä¸‹æ–‡ã€æ“ä½œå½±å“
  - å› æ­¤ï¼Œcomplete(audit_record, action) = true

**æ­¥éª¤3ï¼šå®¡è®¡è®°å½•å¯è¿½æº¯æ€§**ï¼š

- å®¡è®¡è®°å½•æ”¯æŒè¿½æº¯ï¼š
  - æ—¶é—´è¿½æº¯ï¼šå¯ä»¥é€šè¿‡æ—¶é—´èŒƒå›´æŸ¥è¯¢å®¡è®¡è®°å½•
  - æ“ä½œè€…è¿½æº¯ï¼šå¯ä»¥é€šè¿‡æ“ä½œè€…æŸ¥è¯¢å®¡è®¡è®°å½•
  - å¯¹è±¡è¿½æº¯ï¼šå¯ä»¥é€šè¿‡æ“ä½œå¯¹è±¡æŸ¥è¯¢å®¡è®¡è®°å½•
  - å…³ç³»è¿½æº¯ï¼šå¯ä»¥é€šè¿‡æ“ä½œå…³ç³»æŸ¥è¯¢ç›¸å…³å®¡è®¡è®°å½•

**æ­¥éª¤4ï¼šå®¡è®¡è®°å½•æŒä¹…æ€§**ï¼š

- å®¡è®¡è®°å½•è¢«æŒä¹…åŒ–å­˜å‚¨ï¼Œä¸ä¼šä¸¢å¤±
- å®¡è®¡è®°å½•æ”¯æŒæ—¶é—´åºåˆ—æŸ¥è¯¢ï¼Œå¯ä»¥æŒ‰æ—¶é—´é¡ºåºæ£€ç´¢
- å®¡è®¡è®°å½•æ”¯æŒå†å²åˆ†æï¼Œå¯ä»¥åˆ†æå†å²åˆè§„æ€§è¶‹åŠ¿

**æ­¥éª¤5ï¼šå®¡è®¡åˆ†æå®Œå¤‡æ€§**ï¼š

- å®¡è®¡è®°å½•æ”¯æŒå¤šç§åˆ†æï¼š
  - åˆè§„æ€§åˆ†æï¼šæ£€æŸ¥æ“ä½œæ˜¯å¦ç¬¦åˆç­–ç•¥
  - è¿è§„æ£€æµ‹ï¼šè¯†åˆ«è¿è§„è¡Œä¸ºæ¨¡å¼
  - æŠ¥å‘Šç”Ÿæˆï¼šç”Ÿæˆåˆè§„æ€§æŠ¥å‘Š
  - è¶‹åŠ¿åˆ†æï¼šåˆ†æåˆè§„æ€§è¶‹åŠ¿

**æ­¥éª¤6ï¼šå®Œå¤‡æ€§ç»“è®º**ï¼š

- å¯¹äºä»»æ„æ“ä½œaction âˆˆ Actionsï¼š
  - å­˜åœ¨å®¡è®¡è®°å½•audit_record âˆˆ Audit
  - å®¡è®¡è®°å½•å®Œæ•´è®°å½•æ“ä½œï¼šcomplete(audit_record, action) = true
  - å®¡è®¡è®°å½•æ”¯æŒè¿½æº¯å’Œåˆ†æ
- å› æ­¤ï¼Œâˆ€ action âˆˆ Actions: âˆƒ audit_record âˆˆ Audit âˆ§ complete(audit_record, action)
- åˆè§„æ€§å®¡è®¡å®Œå¤‡æ€§å®šç†å¾—è¯

**è¯æ˜æ ‘**ï¼š

```mermaid
graph TD
    A[åˆè§„æ€§å®¡è®¡å®Œå¤‡æ€§å®šç†] --> B[æ­¥éª¤1: å®¡è®¡ç³»ç»Ÿå®šä¹‰]
    A --> C[æ­¥éª¤2: å®¡è®¡è®°å½•å®Œæ•´æ€§]
    A --> D[æ­¥éª¤3: å®¡è®¡è®°å½•å¯è¿½æº¯æ€§]
    A --> E[æ­¥éª¤4: å®¡è®¡è®°å½•æŒä¹…æ€§]
    A --> F[æ­¥éª¤5: å®¡è®¡åˆ†æå®Œå¤‡æ€§]
    A --> G[æ­¥éª¤6: å®Œå¤‡æ€§ç»“è®º]

    B --> B1[å®¡è®¡å‡½æ•°å®šä¹‰]
    B --> B2[å®Œå¤‡æ€§å‡½æ•°å®šä¹‰]

    C --> C1[æ“ä½œè®°å½•]
    C --> C2[ä¿¡æ¯å®Œæ•´æ€§]

    D --> D1[æ—¶é—´è¿½æº¯]
    D --> D2[æ“ä½œè€…è¿½æº¯]
    D --> D3[å¯¹è±¡è¿½æº¯]

    E --> E1[æŒä¹…åŒ–å­˜å‚¨]
    E --> E2[æ—¶é—´åºåˆ—æŸ¥è¯¢]

    F --> F1[åˆè§„æ€§åˆ†æ]
    F --> F2[è¿è§„æ£€æµ‹]
    F --> F3[æŠ¥å‘Šç”Ÿæˆ]

    G --> G1[æ‰€æœ‰æ“ä½œæœ‰è®°å½•]
    G --> G2[è®°å½•å®Œæ•´æ€§]
    G --> G3[å®šç†å¾—è¯]

    style A fill:#FFD700
    style G3 fill:#90EE90
```

---

## 5. å®é™…åº”ç”¨

### 5.1 PostgreSQL 18ç¼–æ’æ²»ç†å®ç°

#### 5.1.1 æ²»ç†ç³»ç»Ÿ

**PostgreSQL 18æ²»ç†æ”¯æŒ**ï¼š

PostgreSQL 18é€šè¿‡ç­–ç•¥å®šä¹‰ã€åˆè§„æ€§æ£€æŸ¥å’Œå®¡è®¡æ—¥å¿—å®ç°ç¼–æ’æ²»ç†ã€‚

**æ²»ç†ç³»ç»Ÿ**ï¼š

```sql
-- åœºæ™¯ï¼šç¼–æ’æ²»ç†ç³»ç»Ÿ
-- 1. æ²»ç†ç­–ç•¥è¡¨
CREATE TABLE orchestration_governance_policies (
    policy_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    policy_name VARCHAR(100) NOT NULL,
    policy_type VARCHAR(50) NOT NULL,  -- 'DATA_PRIVACY', 'ACCESS_CONTROL', 'DATA_QUALITY'
    policy_rules JSONB NOT NULL,
    effective_from TIMESTAMPTZ DEFAULT NOW(),
    effective_to TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. åˆè§„æ€§æ£€æŸ¥è®°å½•è¡¨
CREATE TABLE orchestration_compliance_checks (
    check_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    execution_id UUID NOT NULL,
    policy_id UUID NOT NULL REFERENCES orchestration_governance_policies(policy_id),
    check_time TIMESTAMPTZ DEFAULT NOW(),
    check_result VARCHAR(50) NOT NULL,  -- 'PASS', 'FAIL', 'WARNING'
    check_details JSONB,
    violation_details TEXT
);

CREATE INDEX idx_compliance_exec ON orchestration_compliance_checks(execution_id, check_time DESC);

-- 3. åˆè§„æ€§æ£€æŸ¥å‡½æ•°
CREATE OR REPLACE FUNCTION check_compliance(
    p_execution_id UUID,
    p_policy_type VARCHAR DEFAULT NULL
)
RETURNS TABLE (
    policy_id UUID,
    policy_name VARCHAR,
    check_result VARCHAR,
    violation_details TEXT
) AS $$
DECLARE
    v_policy RECORD;
    v_check_result VARCHAR;
    v_violation_details TEXT;
BEGIN
    FOR v_policy IN
        SELECT * FROM orchestration_governance_policies
        WHERE (p_policy_type IS NULL OR policy_type = p_policy_type)
          AND NOW() BETWEEN effective_from AND COALESCE(effective_to, '9999-12-31'::TIMESTAMPTZ)
    LOOP
        -- æ‰§è¡Œåˆè§„æ€§æ£€æŸ¥ï¼ˆæ ¹æ®ç­–ç•¥ç±»å‹ï¼‰
        CASE v_policy.policy_type
            WHEN 'DATA_PRIVACY' THEN
                -- æ•°æ®éšç§æ£€æŸ¥
                SELECT check_data_privacy_compliance(p_execution_id, v_policy.policy_rules)
                INTO v_check_result, v_violation_details;
            WHEN 'ACCESS_CONTROL' THEN
                -- è®¿é—®æ§åˆ¶æ£€æŸ¥
                SELECT check_access_control_compliance(p_execution_id, v_policy.policy_rules)
                INTO v_check_result, v_violation_details;
            WHEN 'DATA_QUALITY' THEN
                -- æ•°æ®è´¨é‡æ£€æŸ¥
                SELECT check_data_quality_compliance(p_execution_id, v_policy.policy_rules)
                INTO v_check_result, v_violation_details;
            ELSE
                v_check_result := 'UNKNOWN';
                v_violation_details := 'Unknown policy type';
        END CASE;

        -- è®°å½•æ£€æŸ¥ç»“æœ
        INSERT INTO orchestration_compliance_checks (
            execution_id, policy_id, check_result, violation_details
        )
        VALUES (
            p_execution_id, v_policy.policy_id, v_check_result, v_violation_details
        );

        RETURN QUERY SELECT
            v_policy.policy_id,
            v_policy.policy_name,
            v_check_result,
            v_violation_details;
    END LOOP;
END;
$$ LANGUAGE plpgsql;
```

### 5.2 å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šç­–ç•¥å®šä¹‰ä¸æ‰§è¡Œ

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

éœ€è¦å®šä¹‰æ²»ç†ç­–ç•¥ï¼Œå¹¶åœ¨ç¼–æ’æ“ä½œå‰è‡ªåŠ¨æ£€æŸ¥åˆè§„æ€§ã€‚

**PostgreSQL 18å®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šç­–ç•¥å®šä¹‰ä¸æ‰§è¡Œ
-- 1. æ•°æ®éšç§ç­–ç•¥ç¤ºä¾‹
INSERT INTO orchestration_governance_policies (
    policy_name, policy_type, policy_rules
)
VALUES (
    'GDPR Compliance',
    'DATA_PRIVACY',
    '{
        "require_consent": true,
        "data_retention_days": 365,
        "encryption_required": true,
        "anonymization_required": false
    }'::JSONB
);

-- 2. è®¿é—®æ§åˆ¶ç­–ç•¥ç¤ºä¾‹
INSERT INTO orchestration_governance_policies (
    policy_name, policy_type, policy_rules
)
VALUES (
    'Access Control Policy',
    'ACCESS_CONTROL',
    '{
        "require_authentication": true,
        "require_authorization": true,
        "audit_all_access": true
    }'::JSONB
);

-- 3. ç¼–æ’æ“ä½œå‰è‡ªåŠ¨æ£€æŸ¥
CREATE OR REPLACE FUNCTION enforce_governance_policy()
RETURNS TRIGGER AS $$
DECLARE
    v_compliance_result RECORD;
BEGIN
    -- æ‰§è¡Œåˆè§„æ€§æ£€æŸ¥
    FOR v_compliance_result IN
        SELECT * FROM check_compliance(NEW.execution_id)
    LOOP
        IF v_compliance_result.check_result = 'FAIL' THEN
            RAISE EXCEPTION 'Compliance check failed for policy %: %',
                v_compliance_result.policy_name,
                v_compliance_result.violation_details;
        END IF;
    END LOOP;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- 4. åœ¨ç¼–æ’æ‰§è¡Œå‰è§¦å‘æ£€æŸ¥
CREATE TRIGGER check_governance_before_execution
    BEFORE INSERT OR UPDATE ON orchestration_executions
    FOR EACH ROW
    EXECUTE FUNCTION enforce_governance_policy();
```

#### åœºæ™¯2ï¼šåˆè§„æ€§å®¡è®¡

**ä¸šåŠ¡èƒŒæ™¯**ï¼š

éœ€è¦è®°å½•æ‰€æœ‰åˆè§„æ€§æ£€æŸ¥ç»“æœï¼Œæ”¯æŒå®¡è®¡å’ŒæŠ¥å‘Šç”Ÿæˆã€‚

**PostgreSQL 18å®ç°**ï¼š

```sql
-- åœºæ™¯ï¼šåˆè§„æ€§å®¡è®¡
-- 1. åˆè§„æ€§æŠ¥å‘Šç”Ÿæˆå‡½æ•°
CREATE OR REPLACE FUNCTION generate_compliance_report(
    p_start_date TIMESTAMPTZ,
    p_end_date TIMESTAMPTZ
)
RETURNS TABLE (
    policy_name VARCHAR,
    total_checks BIGINT,
    passed_checks BIGINT,
    failed_checks BIGINT,
    warning_checks BIGINT,
    compliance_rate DOUBLE PRECISION
) AS $$
BEGIN
    RETURN QUERY
    SELECT
        gp.policy_name,
        COUNT(*) AS total_checks,
        COUNT(*) FILTER (WHERE cc.check_result = 'PASS') AS passed_checks,
        COUNT(*) FILTER (WHERE cc.check_result = 'FAIL') AS failed_checks,
        COUNT(*) FILTER (WHERE cc.check_result = 'WARNING') AS warning_checks,
        ROUND(
            COUNT(*) FILTER (WHERE cc.check_result = 'PASS')::DOUBLE PRECISION /
            NULLIF(COUNT(*), 0) * 100,
            2
        ) AS compliance_rate
    FROM orchestration_compliance_checks cc
    JOIN orchestration_governance_policies gp ON cc.policy_id = gp.policy_id
    WHERE cc.check_time BETWEEN p_start_date AND p_end_date
    GROUP BY gp.policy_id, gp.policy_name
    ORDER BY compliance_rate DESC;
END;
$$ LANGUAGE plpgsql;
```

**æ€§èƒ½æ•°æ®**ï¼š

| æŒ‡æ ‡ | æ³•è§„åˆè§„ | æ ‡å‡†åˆè§„ | å†…éƒ¨åˆè§„ | è¯´æ˜ |
|------|---------|---------|---------|------|
| **æ£€æŸ¥å»¶è¿Ÿ** | <10ms | <10ms | <5ms | åˆè§„æ€§æ£€æŸ¥æ€§èƒ½ |
| **å®¡è®¡è®°å½•** | 100% | 100% | 100% | æ‰€æœ‰æ“ä½œéƒ½è¢«è®°å½• |
| **æŠ¥å‘Šç”Ÿæˆ** | ç§’çº§ | ç§’çº§ | ç§’çº§ | æŠ¥å‘Šç”Ÿæˆæ—¶é—´ |
| **å­˜å‚¨å¼€é”€** | é«˜ | ä¸­ | ä½ | å®¡è®¡æ—¥å¿—å­˜å‚¨ |

**SQLite 3.45å¯¹æ¯”**ï¼š

SQLite 3.45æ”¯æŒåŸºæœ¬çš„å®¡è®¡åŠŸèƒ½ï¼Œä½†ç¼ºå°‘é«˜çº§æ²»ç†èƒ½åŠ›ï¼š

```sql
-- SQLite 3.45: åŸºæœ¬å®¡è®¡
-- 1. ä½¿ç”¨è§¦å‘å™¨è®°å½•æ“ä½œ
CREATE TRIGGER audit_orchestration_changes
AFTER INSERT OR UPDATE OR DELETE ON orchestration_executions
FOR EACH ROW
BEGIN
    INSERT INTO audit_log (
        timestamp, user, action, table_name, old_value, new_value
    ) VALUES (
        datetime('now'),
        'current_user',  -- SQLiteæ²¡æœ‰current_userï¼Œéœ€è¦åº”ç”¨å±‚æä¾›
        CASE
            WHEN OLD IS NULL THEN 'INSERT'
            WHEN NEW IS NULL THEN 'DELETE'
            ELSE 'UPDATE'
        END,
        'orchestration_executions',
        json_object('id', OLD.id, 'status', OLD.status),
        json_object('id', NEW.id, 'status', NEW.status)
    );
END;

-- 2. åŸºæœ¬åˆè§„æ€§æ£€æŸ¥ï¼ˆåº”ç”¨å±‚ï¼‰
-- SQLiteæœ¬èº«ä¸æ”¯æŒå¤æ‚çš„ç­–ç•¥å¼•æ“ï¼Œéœ€è¦åœ¨åº”ç”¨å±‚å®ç°
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

| æŒ‡æ ‡ | PostgreSQL 18å®Œæ•´æ²»ç† | SQLite 3.45åŸºæœ¬å®¡è®¡ | è¯´æ˜ |
|------|---------------------|-------------------|------|
| **æ²»ç†èƒ½åŠ›** | â­â­â­â­â­ å®Œæ•´ | â­â­â­ åŸºæœ¬ | PostgreSQLæ”¯æŒå®Œæ•´æ²»ç† |
| **ç­–ç•¥å¼•æ“** | â­â­â­â­â­ æ”¯æŒ | âŒ ä¸æ”¯æŒ | PostgreSQLå†…ç½®ç­–ç•¥å¼•æ“ |
| **åˆè§„æ€§æ£€æŸ¥** | â­â­â­â­â­ å®æ—¶ | âš ï¸ éœ€è¦åº”ç”¨å±‚ | PostgreSQLå®æ—¶æ£€æŸ¥ |
| **å®¡è®¡èƒ½åŠ›** | â­â­â­â­â­ å®Œæ•´ | â­â­â­ åŸºæœ¬ | PostgreSQLå®¡è®¡æ›´å®Œå–„ |
| **æŠ¥å‘Šç”Ÿæˆ** | â­â­â­â­â­ æ”¯æŒ | âš ï¸ éœ€è¦åº”ç”¨å±‚ | PostgreSQLå†…ç½®æŠ¥å‘Š |
| **é€‚ç”¨åœºæ™¯** | ä¼ä¸šç¯å¢ƒ | å°å‹ç³»ç»Ÿ | æ ¹æ®éœ€æ±‚é€‰æ‹© |

---

---

## 6. ç›¸å…³æ–‡æ¡£

### 5.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](./1.1.25-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](./README.md)

---

## 7. å‚è€ƒæ–‡çŒ®

### 6.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®

- **Khatri, V., & Brown, C. V. (2010). "Designing Data Governance."**
  - ä¼šè®®: Communications of the ACM 2010
  - **é‡è¦æ€§**: æ•°æ®æ²»ç†è®¾è®¡çš„ç»å…¸è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†æ²»ç†æ¡†æ¶

- **Weber, K., et al. (2009). "One Size Does Not Fit All - A Contingency Approach to Data Governance."**
  - ä¼šè®®: Journal of Data and Information Quality 2009
  - **é‡è¦æ€§**: æ•°æ®æ²»ç†çš„æƒå˜æ–¹æ³•
  - **æ ¸å¿ƒè´¡çŒ®**: æ€»ç»“äº†æ²»ç†ç­–ç•¥

### 6.2 PostgreSQLå®ç°ç›¸å…³

- **PostgreSQLå®˜æ–¹æ–‡æ¡£ - å®‰å…¨](<https://www.postgresql.org/docs/current/security.html>)**
  - PostgreSQLå®‰å…¨å®ç°è¯´æ˜

### 6.3 ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹-æ²»ç†ç­–ç•¥ä¸åˆè§„æ€§æ£€æŸ¥çš„å½¢å¼åŒ–](../12-æ•°æ®ç®¡ç†æ¨¡å‹/12.09-æ•°æ®åº“æ•°æ®æ²»ç†æ¨¡å‹-æ²»ç†ç­–ç•¥ä¸åˆè§„æ€§æ£€æŸ¥çš„å½¢å¼åŒ–.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: âœ… å†…å®¹å·²å®Œæˆ
