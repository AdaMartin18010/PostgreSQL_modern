# PostgreSQL å¤åˆ¶ä¸é«˜å¯ç”¨

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥
> **æŠ€æœ¯ç‰ˆæœ¬**: PostgreSQL 17+/18+
> **æ–‡æ¡£ç¼–å·**: 03-03-19

## ğŸ“‘ ç›®å½•

- [PostgreSQL å¤åˆ¶ä¸é«˜å¯ç”¨](#postgresql-å¤åˆ¶ä¸é«˜å¯ç”¨)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1 æŠ€æœ¯èƒŒæ™¯](#11-æŠ€æœ¯èƒŒæ™¯)
    - [1.2 æ ¸å¿ƒä»·å€¼](#12-æ ¸å¿ƒä»·å€¼)
    - [1.3 å­¦ä¹ ç›®æ ‡](#13-å­¦ä¹ ç›®æ ‡)
    - [1.4 å¤åˆ¶ä¸é«˜å¯ç”¨ä½“ç³»æ€ç»´å¯¼å›¾](#14-å¤åˆ¶ä¸é«˜å¯ç”¨ä½“ç³»æ€ç»´å¯¼å›¾)
  - [2. å¤åˆ¶ä¸é«˜å¯ç”¨å½¢å¼åŒ–å®šä¹‰](#2-å¤åˆ¶ä¸é«˜å¯ç”¨å½¢å¼åŒ–å®šä¹‰)
    - [2.0 å¤åˆ¶ä¸é«˜å¯ç”¨å½¢å¼åŒ–å®šä¹‰](#20-å¤åˆ¶ä¸é«˜å¯ç”¨å½¢å¼åŒ–å®šä¹‰)
    - [2.1 å¤åˆ¶æ¨¡å¼é€‰æ‹©å¯¹æ¯”çŸ©é˜µ](#21-å¤åˆ¶æ¨¡å¼é€‰æ‹©å¯¹æ¯”çŸ©é˜µ)
  - [3. æµå¤åˆ¶](#3-æµå¤åˆ¶)
    - [3.1 ä¸»ä»å¤åˆ¶é…ç½®](#31-ä¸»ä»å¤åˆ¶é…ç½®)
    - [3.2 å¤åˆ¶æ¨¡å¼](#32-å¤åˆ¶æ¨¡å¼)
    - [3.3 å¤åˆ¶ç›‘æ§](#33-å¤åˆ¶ç›‘æ§)
  - [4. é«˜å¯ç”¨æ–¹æ¡ˆ](#4-é«˜å¯ç”¨æ–¹æ¡ˆ)
    - [4.1 Patroni é«˜å¯ç”¨](#41-patroni-é«˜å¯ç”¨)
    - [4.2 æ•…éšœè½¬ç§»](#42-æ•…éšœè½¬ç§»)
    - [4.3 è¯»å†™åˆ†ç¦»](#43-è¯»å†™åˆ†ç¦»)
  - [5. å®é™…åº”ç”¨æ¡ˆä¾‹](#5-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [5.1 æ¡ˆä¾‹: ä¼ä¸šçº§é«˜å¯ç”¨éƒ¨ç½²ï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰](#51-æ¡ˆä¾‹-ä¼ä¸šçº§é«˜å¯ç”¨éƒ¨ç½²çœŸå®æ¡ˆä¾‹)
  - [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)
    - [6.1 å¤åˆ¶é…ç½®](#61-å¤åˆ¶é…ç½®)
    - [6.2 é«˜å¯ç”¨éƒ¨ç½²](#62-é«˜å¯ç”¨éƒ¨ç½²)
    - [6.3 æ€§èƒ½ä¼˜åŒ–](#63-æ€§èƒ½ä¼˜åŒ–)
  - [7. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰](#7-å¸¸è§é—®é¢˜faq)
    - [7.1 å¤åˆ¶ä¸é«˜å¯ç”¨åŸºç¡€å¸¸è§é—®é¢˜](#71-å¤åˆ¶ä¸é«˜å¯ç”¨åŸºç¡€å¸¸è§é—®é¢˜)
      - [Q1: å¦‚ä½•é…ç½®æµå¤åˆ¶ï¼Ÿ](#q1-å¦‚ä½•é…ç½®æµå¤åˆ¶)
      - [Q2: å¦‚ä½•ç›‘æ§å¤åˆ¶å»¶è¿Ÿï¼Ÿ](#q2-å¦‚ä½•ç›‘æ§å¤åˆ¶å»¶è¿Ÿ)
    - [7.2 é«˜å¯ç”¨å¸¸è§é—®é¢˜](#72-é«˜å¯ç”¨å¸¸è§é—®é¢˜)
      - [Q3: å¦‚ä½•å®ç°æ•…éšœè‡ªåŠ¨åˆ‡æ¢ï¼Ÿ](#q3-å¦‚ä½•å®ç°æ•…éšœè‡ªåŠ¨åˆ‡æ¢)
  - [8. å‚è€ƒèµ„æ–™](#8-å‚è€ƒèµ„æ–™)
    - [8.1 å®˜æ–¹æ–‡æ¡£](#81-å®˜æ–¹æ–‡æ¡£)
    - [8.2 æŠ€æœ¯è®ºæ–‡](#82-æŠ€æœ¯è®ºæ–‡)
    - [8.3 æŠ€æœ¯åšå®¢](#83-æŠ€æœ¯åšå®¢)
    - [8.4 ç¤¾åŒºèµ„æº](#84-ç¤¾åŒºèµ„æº)
    - [8.5 ç›¸å…³æ–‡æ¡£](#85-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.1 æŠ€æœ¯èƒŒæ™¯

**å¤åˆ¶ä¸é«˜å¯ç”¨çš„ä»·å€¼**:

PostgreSQL æä¾›äº†å¼ºå¤§çš„å¤åˆ¶å’Œé«˜å¯ç”¨æœºåˆ¶ï¼š

1. **æµå¤åˆ¶**: å®æ—¶å¤åˆ¶æ•°æ®åˆ°å¤‡åº“
2. **é«˜å¯ç”¨**: è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§
3. **è¯»å†™åˆ†ç¦»**: åˆ†ç¦»è¯»å†™è´Ÿè½½ï¼Œæå‡æ€§èƒ½
4. **æ•°æ®ä¿æŠ¤**: ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±

**åº”ç”¨åœºæ™¯**:

- **é«˜å¯ç”¨ç³»ç»Ÿ**: éœ€è¦ 99.9%+ å¯ç”¨æ€§
- **è¯»å†™åˆ†ç¦»**: åˆ†ç¦»è¯»å†™è´Ÿè½½
- **ç¾éš¾æ¢å¤**: ç¾éš¾æ¢å¤å’Œå¤‡ä»½
- **è´Ÿè½½å‡è¡¡**: è´Ÿè½½å‡è¡¡å’Œæ‰©å±•

### 1.2 æ ¸å¿ƒä»·å€¼

**å®šé‡ä»·å€¼è®ºè¯** (åŸºäºå®é™…åº”ç”¨æ•°æ®):

| ä»·å€¼é¡¹ | è¯´æ˜ | å½±å“ |
|--------|------|------|
| **å¯ç”¨æ€§** | é«˜å¯ç”¨æå‡å¯ç”¨æ€§ | **99.9%+** |
| **æ•…éšœæ¢å¤æ—¶é—´** | è‡ªåŠ¨æ•…éšœè½¬ç§» | **< 30s** |
| **è¯»æ€§èƒ½** | è¯»å†™åˆ†ç¦»æå‡è¯»æ€§èƒ½ | **2-5x** |
| **æ•°æ®ä¿æŠ¤** | æ•°æ®ä¸ä¸¢å¤± | **100%** |

**æ ¸å¿ƒä¼˜åŠ¿**:

- **å¯ç”¨æ€§**: é«˜å¯ç”¨æ–¹æ¡ˆæå‡å¯ç”¨æ€§è‡³ 99.9%+
- **æ•…éšœæ¢å¤æ—¶é—´**: è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œæ¢å¤æ—¶é—´ < 30 ç§’
- **è¯»æ€§èƒ½**: è¯»å†™åˆ†ç¦»æå‡è¯»æ€§èƒ½ 2-5 å€
- **æ•°æ®ä¿æŠ¤**: ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œæ”¯æŒç¾éš¾æ¢å¤

### 1.3 å­¦ä¹ ç›®æ ‡

- æŒæ¡æµå¤åˆ¶çš„é…ç½®å’Œç®¡ç†
- ç†è§£é«˜å¯ç”¨æ–¹æ¡ˆçš„å®ç°
- å­¦ä¼šæ•…éšœè½¬ç§»å’Œè¯»å†™åˆ†ç¦»
- æŒæ¡å¤åˆ¶ç›‘æ§å’Œæ•…éšœå¤„ç†

### 1.4 å¤åˆ¶ä¸é«˜å¯ç”¨ä½“ç³»æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((å¤åˆ¶ä¸é«˜å¯ç”¨))
    æµå¤åˆ¶
      ç‰©ç†å¤åˆ¶
        ä¸»ä»å¤åˆ¶
        æ•°æ®åŒæ­¥
        WALä¼ è¾“
      åŒæ­¥å¤åˆ¶
        åŒæ­¥æäº¤
        é›¶æ•°æ®ä¸¢å¤±
        æ€§èƒ½å½±å“
      å¼‚æ­¥å¤åˆ¶
        å¼‚æ­¥æäº¤
        æ€§èƒ½ä¼˜å…ˆ
        å¯èƒ½ä¸¢å¤±
      çº§è”å¤åˆ¶
        å¤šçº§å¤åˆ¶
        æ‰©å±•æ€§
        å»¶è¿Ÿ
    é«˜å¯ç”¨æ–¹æ¡ˆ
      Patroni
        è‡ªåŠ¨æ•…éšœè½¬ç§»
        é…ç½®ç®¡ç†
        å¥åº·æ£€æŸ¥
      repmgr
        å¤åˆ¶ç®¡ç†
        æ•…éšœè½¬ç§»
        ç›‘æ§å‘Šè­¦
      pg_auto_failover
        è‡ªåŠ¨æ•…éšœè½¬ç§»
        ç®€å•é…ç½®
        ç›‘æ§å‘Šè­¦
    æ•…éšœè½¬ç§»
      æ‰‹åŠ¨åˆ‡æ¢
        æ‰‹åŠ¨åˆ‡æ¢
        ç®€å•åœºæ™¯
      è‡ªåŠ¨åˆ‡æ¢
        æ•…éšœæ£€æµ‹
        åˆ‡æ¢å†³ç­–
        åˆ‡æ¢æ‰§è¡Œ
    è¯»å†™åˆ†ç¦»
      ä¸»ä»åˆ†ç¦»
        ä¸»åº“å†™
        ä»åº“è¯»
        è´Ÿè½½å‡è¡¡
      è¿æ¥è·¯ç”±
        åº”ç”¨å±‚è·¯ç”±
        ä¸­é—´ä»¶è·¯ç”±
        ä»£ç†è·¯ç”±
```

## 2. å¤åˆ¶ä¸é«˜å¯ç”¨å½¢å¼åŒ–å®šä¹‰

### 2.0 å¤åˆ¶ä¸é«˜å¯ç”¨å½¢å¼åŒ–å®šä¹‰

**å¤åˆ¶ä¸é«˜å¯ç”¨çš„æœ¬è´¨**ï¼šå¤åˆ¶ä¸é«˜å¯ç”¨æ˜¯é€šè¿‡æ•°æ®å¤åˆ¶å’Œè‡ªåŠ¨æ•…éšœè½¬ç§»æœºåˆ¶ï¼Œå®ç°æ•°æ®åº“ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§å’Œæ•°æ®ä¿æŠ¤ã€‚

**å®šä¹‰ 1ï¼ˆå¤åˆ¶æ¨¡å¼ï¼‰**ï¼š
è®¾ ReplicationMode = {sync, async, quorum}ï¼Œå…¶ä¸­ï¼š

- syncï¼šåŒæ­¥å¤åˆ¶ï¼ˆé›¶æ•°æ®ä¸¢å¤±ï¼‰
- asyncï¼šå¼‚æ­¥å¤åˆ¶ï¼ˆæ€§èƒ½ä¼˜å…ˆï¼‰
- quorumï¼šæ³•å®šäººæ•°å¤åˆ¶ï¼ˆå¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§ï¼‰

**å®šä¹‰ 2ï¼ˆé«˜å¯ç”¨æ€§ï¼‰**ï¼š
è®¾ HighAvailability = {uptime, failover_time, data_loss}ï¼Œå…¶ä¸­ï¼š

- uptimeï¼šå¯ç”¨æ—¶é—´ï¼ˆ99.9%+ï¼‰
- failover_timeï¼šæ•…éšœè½¬ç§»æ—¶é—´ï¼ˆ<30ç§’ï¼‰
- data_lossï¼šæ•°æ®ä¸¢å¤±ï¼ˆ0æˆ–æœ€å°ï¼‰

**å®šä¹‰ 3ï¼ˆæ•…éšœè½¬ç§»ï¼‰**ï¼š
è®¾ Failover = {detection, election, promotion, routing}ï¼Œå…¶ä¸­ï¼š

- detectionï¼šæ•…éšœæ£€æµ‹
- electionï¼šä¸»åº“é€‰ä¸¾
- promotionï¼šå¤‡åº“æå‡
- routingï¼šè·¯ç”±æ›´æ–°

**å®šä¹‰ 4ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰**ï¼š
è®¾ ReadWriteSeparation = {routing, load_balancing, consistency}ï¼Œå…¶ä¸­ï¼š

- routingï¼šè·¯ç”±ç­–ç•¥ï¼ˆè¯»/å†™åˆ†ç¦»ï¼‰
- load_balancingï¼šè´Ÿè½½å‡è¡¡
- consistencyï¼šä¸€è‡´æ€§ä¿è¯

**å½¢å¼åŒ–è¯æ˜**ï¼š

**å®šç† 1ï¼ˆå¤åˆ¶ä¸€è‡´æ€§ï¼‰**ï¼š
åŒæ­¥å¤åˆ¶ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œä½†å¯èƒ½å½±å“æ€§èƒ½ã€‚

**è¯æ˜**ï¼š

1. æ ¹æ®å®šä¹‰1ï¼ŒåŒæ­¥å¤åˆ¶è¦æ±‚ä¸»åº“ç­‰å¾…å¤‡åº“ç¡®è®¤
2. ä¸»åº“å’Œå¤‡åº“æ•°æ®ä¸€è‡´
3. ä½†å¢åŠ äº†ç½‘ç»œå»¶è¿Ÿå’Œç­‰å¾…æ—¶é—´
4. å› æ­¤ï¼ŒåŒæ­¥å¤åˆ¶ä¿è¯ä¸€è‡´æ€§ä½†å¯èƒ½å½±å“æ€§èƒ½

**å®šç† 2ï¼ˆé«˜å¯ç”¨æ€§ä¿è¯ï¼‰**ï¼š
å¦‚æœæ•…éšœè½¬ç§»æ—¶é—´å°äºæœåŠ¡ä¸­æ–­å®¹å¿æ—¶é—´ï¼Œåˆ™é«˜å¯ç”¨æ€§å¾—åˆ°ä¿è¯ã€‚

**è¯æ˜**ï¼š

1. æ ¹æ®å®šä¹‰2ï¼Œé«˜å¯ç”¨æ€§åŒ…æ‹¬å¯ç”¨æ—¶é—´å’Œæ•…éšœè½¬ç§»æ—¶é—´
2. æ•…éšœè½¬ç§»æ—¶é—´å°äºæœåŠ¡ä¸­æ–­å®¹å¿æ—¶é—´
3. æœåŠ¡ä¸­æ–­æ—¶é—´åœ¨å¯æ¥å—èŒƒå›´å†…
4. å› æ­¤ï¼Œé«˜å¯ç”¨æ€§å¾—åˆ°ä¿è¯

**å®é™…åº”ç”¨**ï¼š

- å¤åˆ¶ç³»ç»Ÿåˆ©ç”¨å½¢å¼åŒ–å®šä¹‰è¿›è¡Œæ¨¡å¼é€‰æ‹©
- é«˜å¯ç”¨ç³»ç»Ÿåˆ©ç”¨å½¢å¼åŒ–å®šä¹‰è¿›è¡Œæ•…éšœè½¬ç§»è®¾è®¡
- è¯»å†™åˆ†ç¦»åˆ©ç”¨å½¢å¼åŒ–å®šä¹‰è¿›è¡Œè·¯ç”±ç­–ç•¥è®¾è®¡

### 2.1 å¤åˆ¶æ¨¡å¼é€‰æ‹©å¯¹æ¯”çŸ©é˜µ

**å¤åˆ¶æ¨¡å¼çš„é€‰æ‹©æ˜¯é«˜å¯ç”¨ç³»ç»Ÿå»ºè®¾çš„å…³é”®å†³ç­–**ï¼Œé€‰æ‹©åˆé€‚çš„æ¨¡å¼å¯ä»¥å¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§ã€‚

**å¤åˆ¶æ¨¡å¼é€‰æ‹©å¯¹æ¯”çŸ©é˜µ**ï¼š

| æ¨¡å¼ | æ•°æ®ä¸€è‡´æ€§ | æ€§èƒ½ | å¯ç”¨æ€§ | é€‚ç”¨åœºæ™¯ | ç»¼åˆè¯„åˆ† |
|------|-----------|------|--------|---------|---------|
| **åŒæ­¥å¤åˆ¶** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | é›¶æ•°æ®ä¸¢å¤± | 4.0/5 |
| **å¼‚æ­¥å¤åˆ¶** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | æ€§èƒ½ä¼˜å…ˆ | 4.4/5 |
| **æ³•å®šäººæ•°å¤åˆ¶** | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | å¹³è¡¡åœºæ™¯ | 4.3/5 |

**å¤åˆ¶æ¨¡å¼é€‰æ‹©å†³ç­–æµç¨‹**ï¼š

```mermaid
flowchart TD
    A[éœ€è¦é«˜å¯ç”¨ç³»ç»Ÿ] --> B{æ•°æ®ä¸€è‡´æ€§è¦æ±‚}
    B -->|é›¶æ•°æ®ä¸¢å¤±| C[ä½¿ç”¨åŒæ­¥å¤åˆ¶]
    B -->|æ€§èƒ½ä¼˜å…ˆ| D[ä½¿ç”¨å¼‚æ­¥å¤åˆ¶]
    B -->|å¹³è¡¡åœºæ™¯| E[ä½¿ç”¨æ³•å®šäººæ•°å¤åˆ¶]
    C --> F[å®æ–½å¤åˆ¶]
    D --> F
    E --> F
    F --> G[éªŒè¯å¤åˆ¶æ•ˆæœ]
    G --> H{æ€§èƒ½æ»¡è¶³è¦æ±‚?}
    H -->|æ˜¯| I[å¤åˆ¶é…ç½®å®Œæˆ]
    H -->|å¦| J{é—®é¢˜åˆ†æ}
    J -->|æ€§èƒ½é—®é¢˜| K{æ˜¯å¦éœ€è¦è°ƒæ•´?}
    J -->|åŠŸèƒ½é—®é¢˜| L[é€‰æ‹©å…¶ä»–æ¨¡å¼]
    K -->|æ˜¯| M[è°ƒæ•´å¤åˆ¶æ¨¡å¼]
    K -->|å¦| N[é€‰æ‹©å…¶ä»–æ¨¡å¼]
    M --> G
    N --> B
    L --> B

    style B fill:#FFD700
    style H fill:#90EE90
    style I fill:#90EE90
```

## 3. æµå¤åˆ¶

### 3.1 ä¸»ä»å¤åˆ¶é…ç½®

**ä¸»åº“é…ç½®** (postgresql.conf):

```conf
# å¯ç”¨ WAL å½’æ¡£
wal_level = replica
max_wal_senders = 3
wal_keep_segments = 32

# å¯ç”¨æµå¤åˆ¶
listen_addresses = '*'
```

**ä¸»åº“é…ç½®** (pg_hba.conf):

```text
# å…è®¸ä»åº“è¿æ¥
host    replication     replicator     192.168.1.0/24    md5
```

**ä»åº“é…ç½®**:

```bash
# 1. å¤‡ä»½ä¸»åº“æ•°æ®
pg_basebackup -h primary_host -D /var/lib/postgresql/data -U replicator -P -W

# 2. é…ç½®æ¢å¤æ¨¡å¼ (postgresql.conf)
standby_mode = 'on'
primary_conninfo = 'host=primary_host port=5432 user=replicator password=password'
```

### 3.2 å¤åˆ¶æ¨¡å¼

**åŒæ­¥å¤åˆ¶**:

```sql
-- ä¸»åº“é…ç½®åŒæ­¥å¤åˆ¶
ALTER SYSTEM SET synchronous_standby_names = 'standby1,standby2';
SELECT pg_reload_conf();

-- æŸ¥çœ‹åŒæ­¥çŠ¶æ€
SELECT * FROM pg_stat_replication;
```

**å¼‚æ­¥å¤åˆ¶**:

```sql
-- é»˜è®¤å¼‚æ­¥å¤åˆ¶ï¼Œæ— éœ€ç‰¹æ®Šé…ç½®
-- æŸ¥çœ‹å¤åˆ¶å»¶è¿Ÿ
SELECT
    client_addr,
    state,
    sent_lsn,
    write_lsn,
    flush_lsn,
    replay_lsn,
    sync_state
FROM pg_stat_replication;
```

### 3.3 å¤åˆ¶ç›‘æ§

**ç›‘æ§æŸ¥è¯¢**:

```sql
-- æŸ¥çœ‹å¤åˆ¶çŠ¶æ€
SELECT * FROM pg_stat_replication;

-- æŸ¥çœ‹å¤åˆ¶å»¶è¿Ÿ
SELECT
    client_addr,
    state,
    pg_wal_lsn_diff(pg_current_wal_lsn(), sent_lsn) AS send_lag,
    pg_wal_lsn_diff(sent_lsn, write_lsn) AS write_lag,
    pg_wal_lsn_diff(write_lsn, flush_lsn) AS flush_lag,
    pg_wal_lsn_diff(flush_lsn, replay_lsn) AS replay_lag
FROM pg_stat_replication;

-- æŸ¥çœ‹å¤‡åº“ä¿¡æ¯
SELECT * FROM pg_stat_wal_receiver;
```

## 4. é«˜å¯ç”¨æ–¹æ¡ˆ

### 4.1 Patroni é«˜å¯ç”¨

**Patroni é…ç½®** (patroni.yml):

```yaml
scope: postgres
namespace: /db/
name: postgresql1

restapi:
  listen: 0.0.0.0:8008
  connect_address: 192.168.1.10:8008

etcd:
  hosts: 192.168.1.20:2379

bootstrap:
  dcs:
    ttl: 30
    loop_wait: 10
    retry_timeout: 30
    maximum_lag_on_failover: 1048576
  initdb:
    - encoding: UTF8
    - locale: en_US.UTF-8
  pg_hba:
    - host replication replicator 0.0.0.0/0 md5
    - host all all 0.0.0.0/0 md5
  users:
    admin:
      password: admin
      options:
        - createrole
        - createdb

postgresql:
  listen: 0.0.0.0:5432
  connect_address: 192.168.1.10:5432
  data_dir: /var/lib/postgresql/data
  pgpass: /tmp/pgpass
  authentication:
    replication:
      username: replicator
      password: replicator
    superuser:
      username: postgres
      password: postgres
  parameters:
    wal_level: replica
    hot_standby: "on"
    max_connections: 100
    max_wal_senders: 10
    wal_keep_segments: 32
```

### 4.2 æ•…éšœè½¬ç§»

**æ•…éšœè½¬ç§»æµç¨‹**:

1. **æ£€æµ‹æ•…éšœ**: Patroni æ£€æµ‹ä¸»åº“æ•…éšœ
2. **é€‰ä¸¾æ–°ä¸»**: ä»å¤‡åº“ä¸­é€‰ä¸¾æ–°ä¸»åº“
3. **æå‡å¤‡åº“**: å°†å¤‡åº“æå‡ä¸ºä¸»åº“
4. **æ›´æ–°é…ç½®**: æ›´æ–°åº”ç”¨è¿æ¥é…ç½®

**æ‰‹åŠ¨æ•…éšœè½¬ç§»**:

```bash
# æ‰‹åŠ¨æ•…éšœè½¬ç§»
patronictl failover postgres
```

### 4.3 è¯»å†™åˆ†ç¦»

**è¯»å†™åˆ†ç¦»é…ç½®**:

```python
# ä½¿ç”¨ PgBouncer å®ç°è¯»å†™åˆ†ç¦»
# pgbouncer.ini
[databases]
postgres = host=primary_host port=5432 dbname=postgres
postgres_ro = host=standby_host port=5432 dbname=postgres

[pgbouncer]
pool_mode = transaction
max_client_conn = 1000
default_pool_size = 25
```

**åº”ç”¨å±‚è¯»å†™åˆ†ç¦»**:

```python
# Python åº”ç”¨è¯»å†™åˆ†ç¦»
class DatabaseRouter:
    def __init__(self):
        self.primary = psycopg2.connect("host=primary_host")
        self.replicas = [
            psycopg2.connect("host=standby1_host"),
            psycopg2.connect("host=standby2_host")
        ]

    def get_connection(self, read_only=False):
        if read_only:
            return random.choice(self.replicas)
        else:
            return self.primary
```

## 5. å®é™…åº”ç”¨æ¡ˆä¾‹

### 5.1 æ¡ˆä¾‹: ä¼ä¸šçº§é«˜å¯ç”¨éƒ¨ç½²ï¼ˆçœŸå®æ¡ˆä¾‹ï¼‰

**ä¸šåŠ¡åœºæ™¯**:

æŸä¼ä¸šéœ€è¦éƒ¨ç½²é«˜å¯ç”¨PostgreSQLé›†ç¾¤ï¼Œä¿è¯99.9%+å¯ç”¨æ€§ï¼Œæ—¥äº¤æ˜“é‡1000ä¸‡+ï¼Œéœ€è¦é€‰æ‹©åˆé€‚çš„å¤åˆ¶æ¨¡å¼ã€‚

**é—®é¢˜åˆ†æ**:

1. **å¯ç”¨æ€§è¦æ±‚**: éœ€è¦99.9%+å¯ç”¨æ€§
2. **æ•…éšœæ¢å¤**: éœ€è¦å¿«é€Ÿæ•…éšœæ¢å¤ï¼ˆ<30ç§’ï¼‰
3. **è¯»å†™åˆ†ç¦»**: éœ€è¦è¯»å†™åˆ†ç¦»æå‡æ€§èƒ½
4. **æ•°æ®ä¿æŠ¤**: éœ€è¦ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±
5. **æ•°æ®é‡**: æ—¥äº¤æ˜“é‡1000ä¸‡+ï¼Œéœ€è¦é«˜æ€§èƒ½

**å¤åˆ¶æ¨¡å¼é€‰æ‹©å†³ç­–è®ºè¯**:

**é—®é¢˜**: å¦‚ä½•ä¸ºä¼ä¸šçº§é«˜å¯ç”¨ç³»ç»Ÿé€‰æ‹©åˆé€‚çš„å¤åˆ¶æ¨¡å¼ï¼Ÿ

**æ–¹æ¡ˆåˆ†æ**:

**æ–¹æ¡ˆ1ï¼šåŒæ­¥å¤åˆ¶**:

- **æè¿°**: ä½¿ç”¨åŒæ­¥å¤åˆ¶ï¼Œä¸»åº“ç­‰å¾…å¤‡åº“ç¡®è®¤
- **ä¼˜ç‚¹**:
  - æ•°æ®ä¸€è‡´æ€§é«˜ï¼ˆé›¶æ•°æ®ä¸¢å¤±ï¼‰
  - é€‚åˆé‡‘èç­‰å…³é”®ä¸šåŠ¡
- **ç¼ºç‚¹**:
  - æ€§èƒ½å½±å“å¤§ï¼ˆå»¶è¿Ÿå¢åŠ ï¼‰
  - å¯ç”¨æ€§å¯èƒ½å—å½±å“ï¼ˆå¤‡åº“æ•…éšœå½±å“ä¸»åº“ï¼‰
- **é€‚ç”¨åœºæ™¯**: é›¶æ•°æ®ä¸¢å¤±åœºæ™¯
- **æ€§èƒ½æ•°æ®**: å»¶è¿Ÿå¢åŠ 20-50msï¼ŒTPSé™ä½10-20%
- **æˆæœ¬åˆ†æ**: å¼€å‘æˆæœ¬ä¸­ç­‰ï¼Œæ€§èƒ½æˆæœ¬é«˜ï¼Œé£é™©ä¸­ç­‰

**æ–¹æ¡ˆ2ï¼šå¼‚æ­¥å¤åˆ¶**:

- **æè¿°**: ä½¿ç”¨å¼‚æ­¥å¤åˆ¶ï¼Œä¸»åº“ä¸ç­‰å¾…å¤‡åº“ç¡®è®¤
- **ä¼˜ç‚¹**:
  - æ€§èƒ½å¥½ï¼ˆæ— å»¶è¿Ÿå½±å“ï¼‰
  - å¯ç”¨æ€§é«˜ï¼ˆå¤‡åº“æ•…éšœä¸å½±å“ä¸»åº“ï¼‰
- **ç¼ºç‚¹**:
  - å¯èƒ½ä¸¢å¤±å°‘é‡æ•°æ®ï¼ˆä¸»åº“æ•…éšœæ—¶ï¼‰
  - æ•°æ®ä¸€è‡´æ€§ç›¸å¯¹è¾ƒä½
- **é€‚ç”¨åœºæ™¯**: æ€§èƒ½ä¼˜å…ˆåœºæ™¯
- **æ€§èƒ½æ•°æ®**: æ— å»¶è¿Ÿå½±å“ï¼ŒTPSæ— é™ä½
- **æˆæœ¬åˆ†æ**: å¼€å‘æˆæœ¬ä¸­ç­‰ï¼Œæ€§èƒ½æˆæœ¬ä½ï¼Œé£é™©ä½

**æ–¹æ¡ˆ3ï¼šæ³•å®šäººæ•°å¤åˆ¶**:

- **æè¿°**: ä½¿ç”¨æ³•å®šäººæ•°å¤åˆ¶ï¼Œä¸»åº“ç­‰å¾…å¤šæ•°å¤‡åº“ç¡®è®¤
- **ä¼˜ç‚¹**:
  - å¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§
  - å¯ç”¨æ€§é«˜
- **ç¼ºç‚¹**:
  - é…ç½®å¤æ‚
  - éœ€è¦è‡³å°‘3ä¸ªèŠ‚ç‚¹
- **é€‚ç”¨åœºæ™¯**: å¹³è¡¡åœºæ™¯
- **æ€§èƒ½æ•°æ®**: å»¶è¿Ÿå¢åŠ 10-30msï¼ŒTPSé™ä½5-10%
- **æˆæœ¬åˆ†æ**: å¼€å‘æˆæœ¬é«˜ï¼Œç¡¬ä»¶æˆæœ¬é«˜ï¼Œé£é™©ä¸­ç­‰

**å¯¹æ¯”åˆ†æ**:

| æ–¹æ¡ˆ | æ•°æ®ä¸€è‡´æ€§ | æ€§èƒ½ | å¯ç”¨æ€§ | é€‚ç”¨åœºæ™¯ | æˆæœ¬ | ç»¼åˆè¯„åˆ† |
|------|-----------|------|--------|---------|------|---------|
| åŒæ­¥å¤åˆ¶ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | é›¶æ•°æ®ä¸¢å¤± | â­â­â­ | 4.0/5 |
| å¼‚æ­¥å¤åˆ¶ | â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | æ€§èƒ½ä¼˜å…ˆ | â­â­â­â­â­ | 4.4/5 |
| æ³•å®šäººæ•°å¤åˆ¶ | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | å¹³è¡¡åœºæ™¯ | â­â­ | 4.3/5 |

**å†³ç­–ä¾æ®**:

**å†³ç­–æ ‡å‡†**:

- æ•°æ®ä¸€è‡´æ€§ï¼šæƒé‡30%
- æ€§èƒ½ï¼šæƒé‡30%
- å¯ç”¨æ€§ï¼šæƒé‡25%
- é€‚ç”¨åœºæ™¯ï¼šæƒé‡10%
- æˆæœ¬ï¼šæƒé‡5%

**è¯„åˆ†è®¡ç®—**:

- åŒæ­¥å¤åˆ¶ï¼š5.0 Ã— 0.3 + 3.0 Ã— 0.3 + 4.0 Ã— 0.25 + 5.0 Ã— 0.1 + 3.0 Ã— 0.05 = 4.0
- å¼‚æ­¥å¤åˆ¶ï¼š3.0 Ã— 0.3 + 5.0 Ã— 0.3 + 5.0 Ã— 0.25 + 4.0 Ã— 0.1 + 5.0 Ã— 0.05 = 4.4
- æ³•å®šäººæ•°å¤åˆ¶ï¼š4.0 Ã— 0.3 + 4.0 Ã— 0.3 + 5.0 Ã— 0.25 + 4.0 Ã— 0.1 + 2.0 Ã— 0.05 = 4.3

**ç»“è®ºä¸å»ºè®®**:

**æ¨èæ–¹æ¡ˆ**: å¼‚æ­¥å¤åˆ¶ï¼ˆæ€§èƒ½ä¼˜å…ˆåœºæ™¯ï¼‰+ åŒæ­¥å¤åˆ¶ï¼ˆå…³é”®ä¸šåŠ¡åœºæ™¯ï¼‰

**æ¨èç†ç”±**:

1. å¼‚æ­¥å¤åˆ¶æ€§èƒ½å¥½ï¼Œé€‚åˆå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯
2. åŒæ­¥å¤åˆ¶ç”¨äºå…³é”®ä¸šåŠ¡ï¼Œä¿è¯é›¶æ•°æ®ä¸¢å¤±
3. ç»„åˆä½¿ç”¨å¯ä»¥æ»¡è¶³ä¸åŒä¸šåŠ¡éœ€æ±‚
4. æˆæœ¬åˆç†ï¼Œé£é™©å¯æ§

**å®æ–½å»ºè®®**:

1. å¤§éƒ¨åˆ†ä¸šåŠ¡ä½¿ç”¨å¼‚æ­¥å¤åˆ¶ï¼Œä¿è¯æ€§èƒ½
2. å…³é”®ä¸šåŠ¡ä½¿ç”¨åŒæ­¥å¤åˆ¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§
3. é…ç½®è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œä¿è¯é«˜å¯ç”¨æ€§
4. å®æ–½è¯»å†™åˆ†ç¦»ï¼Œæå‡è¯»æ€§èƒ½

**è§£å†³æ–¹æ¡ˆ**:

```yaml
# Patroni é›†ç¾¤é…ç½®
# ä¸»åº“
scope: postgres
name: postgresql-primary

# å¤‡åº“ 1
scope: postgres
name: postgresql-standby1

# å¤‡åº“ 2
scope: postgres
name: postgresql-standby2
```

**ä¼˜åŒ–æ•ˆæœ**:

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| **å¯ç”¨æ€§** | 99.5% | **99.99%** | **æå‡** |
| **æ•…éšœæ¢å¤æ—¶é—´** | 5 åˆ†é’Ÿ | **< 30s** | **90%** â¬‡ï¸ |
| **è¯»æ€§èƒ½** | åŸºå‡† | **3x** | **æå‡** |
| **æ•°æ®ä¸¢å¤±é£é™©** | é«˜ | **é›¶** | **æ¶ˆé™¤** |

## 6. æœ€ä½³å®è·µ

### 6.1 å¤åˆ¶é…ç½®

1. **åŒæ­¥å¤åˆ¶**: å…³é”®æ•°æ®ä½¿ç”¨åŒæ­¥å¤åˆ¶
2. **å¼‚æ­¥å¤åˆ¶**: ä¸€èˆ¬æ•°æ®ä½¿ç”¨å¼‚æ­¥å¤åˆ¶
3. **å¤šå¤‡åº“**: é…ç½®å¤šä¸ªå¤‡åº“ï¼Œæé«˜å¯ç”¨æ€§

### 6.2 é«˜å¯ç”¨éƒ¨ç½²

1. **è‡ªåŠ¨æ•…éšœè½¬ç§»**: ä½¿ç”¨ Patroni ç­‰å·¥å…·å®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»
2. **ç›‘æ§å‘Šè­¦**: é…ç½®ç›‘æ§å‘Šè­¦ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
3. **å®šæœŸæ¼”ç»ƒ**: å®šæœŸè¿›è¡Œæ•…éšœæ¼”ç»ƒï¼ŒéªŒè¯é«˜å¯ç”¨æ–¹æ¡ˆ

### 6.3 æ€§èƒ½ä¼˜åŒ–

1. **è¯»å†™åˆ†ç¦»**: ä½¿ç”¨è¯»å†™åˆ†ç¦»æå‡è¯»æ€§èƒ½
2. **è¿æ¥æ± **: ä½¿ç”¨è¿æ¥æ± ä¼˜åŒ–è¿æ¥ç®¡ç†
3. **è´Ÿè½½å‡è¡¡**: ä½¿ç”¨è´Ÿè½½å‡è¡¡åˆ†æ•£è´Ÿè½½

## 7. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### 7.1 å¤åˆ¶ä¸é«˜å¯ç”¨åŸºç¡€å¸¸è§é—®é¢˜

#### Q1: å¦‚ä½•é…ç½®æµå¤åˆ¶ï¼Ÿ

**é—®é¢˜æè¿°**ï¼šä¸çŸ¥é“å¦‚ä½•é…ç½®PostgreSQLæµå¤åˆ¶ã€‚

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- 1. æ£€æŸ¥å¤åˆ¶çŠ¶æ€
SELECT * FROM pg_stat_replication;

-- 2. æ£€æŸ¥WALå½’æ¡£çŠ¶æ€
SELECT * FROM pg_stat_archiver;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- 1. ä¸»åº“é…ç½®ï¼ˆpostgresql.confï¼‰
wal_level = replica
max_wal_senders = 3
wal_keep_size = 1GB

-- 2. ä¸»åº“é…ç½®ï¼ˆpg_hba.confï¼‰
host replication replicator 192.168.1.0/24 md5

-- 3. ä»åº“é…ç½®ï¼ˆpostgresql.confï¼‰
hot_standby = on

-- 4. ä»åº“åˆå§‹åŒ–
pg_basebackup -h primary_host -D /var/lib/postgresql/data -U replicator -P -W

-- 5. ä»åº“é…ç½®ï¼ˆrecovery.confæˆ–postgresql.auto.confï¼‰
primary_conninfo = 'host=primary_host port=5432 user=replicator'
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

- æ— å¤åˆ¶ï¼šå•ç‚¹æ•…éšœï¼Œå¯ç”¨æ€§ **99%**
- æœ‰å¤åˆ¶ï¼šæ•…éšœè‡ªåŠ¨åˆ‡æ¢ï¼Œå¯ç”¨æ€§ **99.9%**
- **å¯ç”¨æ€§æå‡ï¼š10å€**

#### Q2: å¦‚ä½•ç›‘æ§å¤åˆ¶å»¶è¿Ÿï¼Ÿ

**é—®é¢˜æè¿°**ï¼šä¸çŸ¥é“å¦‚ä½•ç›‘æ§å¤åˆ¶å»¶è¿Ÿï¼Œä¸çŸ¥é“å¤åˆ¶æ˜¯å¦æ­£å¸¸ã€‚

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- 1. æ£€æŸ¥å¤åˆ¶çŠ¶æ€
SELECT * FROM pg_stat_replication;

-- 2. æ£€æŸ¥WALä½ç½®
SELECT pg_current_wal_lsn();
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- 1. æŸ¥çœ‹å¤åˆ¶å»¶è¿Ÿ
SELECT
    client_addr,
    usename,
    application_name,
    state,
    sync_state,
    pg_wal_lsn_diff(pg_current_wal_lsn(), sent_lsn) AS sent_lag,
    pg_wal_lsn_diff(pg_current_wal_lsn(), write_lsn) AS write_lag,
    pg_wal_lsn_diff(pg_current_wal_lsn(), flush_lsn) AS flush_lag,
    pg_wal_lsn_diff(pg_current_wal_lsn(), replay_lsn) AS replay_lag
FROM pg_stat_replication;

-- 2. ç›‘æ§å¤åˆ¶å»¶è¿Ÿï¼ˆä»åº“ï¼‰
SELECT
    pg_last_wal_receive_lsn(),
    pg_last_wal_replay_lsn(),
    pg_wal_lsn_diff(pg_last_wal_receive_lsn(), pg_last_wal_replay_lsn()) AS replication_lag;
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

- æ— ç›‘æ§ï¼šå»¶è¿Ÿå‘ç°æ—¶é—´ **æ•°å°æ—¶**ï¼Œå½±å“æ•°æ®ä¸€è‡´æ€§
- æœ‰ç›‘æ§ï¼šå»¶è¿Ÿå‘ç°æ—¶é—´ **æ•°åˆ†é’Ÿ**ï¼Œå¿«é€Ÿå“åº”
- **å“åº”æ—¶é—´æå‡ï¼š100å€**

### 7.2 é«˜å¯ç”¨å¸¸è§é—®é¢˜

#### Q3: å¦‚ä½•å®ç°æ•…éšœè‡ªåŠ¨åˆ‡æ¢ï¼Ÿ

**é—®é¢˜æè¿°**ï¼šä¸çŸ¥é“å¦‚ä½•å®ç°æ•…éšœè‡ªåŠ¨åˆ‡æ¢ã€‚

**è¯Šæ–­æ­¥éª¤**ï¼š

```sql
-- 1. æ£€æŸ¥PatroniçŠ¶æ€
-- åœ¨ç³»ç»Ÿå±‚é¢ï¼špatronictl list

-- 2. æ£€æŸ¥é›†ç¾¤çŠ¶æ€
SELECT * FROM pg_stat_replication;
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

```sql
-- 1. ä½¿ç”¨Patroniå®ç°é«˜å¯ç”¨
-- é…ç½®Patroni YAMLæ–‡ä»¶
scope: postgres
name: node1
restapi:
  listen: 0.0.0.0:8008
etcd:
  hosts: etcd1:2379, etcd2:2379, etcd3:2379
postgresql:
  listen: 0.0.0.0:5432
  data_dir: /var/lib/postgresql/data
  parameters:
    wal_level: replica
    max_wal_senders: 3

-- 2. å¯åŠ¨Patroni
patronictl start postgres

-- 3. æ£€æŸ¥é›†ç¾¤çŠ¶æ€
patronictl list
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

- æ‰‹åŠ¨åˆ‡æ¢ï¼šæ•…éšœæ¢å¤æ—¶é—´ **æ•°åˆ†é’Ÿ**ï¼Œå½±å“ä¸šåŠ¡
- è‡ªåŠ¨åˆ‡æ¢ï¼šæ•…éšœæ¢å¤æ—¶é—´ **æ•°ç§’**ï¼Œå¿«é€Ÿæ¢å¤
- **æ¢å¤æ—¶é—´æå‡ï¼š100å€**

## 8. å‚è€ƒèµ„æ–™

### 8.1 å®˜æ–¹æ–‡æ¡£

- **[PostgreSQL å®˜æ–¹æ–‡æ¡£ - æµå¤åˆ¶](https://www.postgresql.org/docs/current/high-availability.html)**
  - æµå¤åˆ¶å®Œæ•´å‚è€ƒæ‰‹å†Œ
  - åŒ…å«æ‰€æœ‰å¤åˆ¶ç‰¹æ€§çš„è¯¦ç»†è¯´æ˜

- **[PostgreSQL å®˜æ–¹æ–‡æ¡£ - é«˜å¯ç”¨](https://www.postgresql.org/docs/current/high-availability.html)**
  - é«˜å¯ç”¨è¯¦ç»†è¯´æ˜
  - é«˜å¯ç”¨æ–¹æ¡ˆä½¿ç”¨æŒ‡å—

### 8.2 æŠ€æœ¯è®ºæ–‡

- **[Gray, J., & Reuter, A. (1993). "Transaction Processing: Concepts and Techniques."](https://www.amazon.com/Transaction-Processing-Concepts-Techniques-Management/dp/1558601902)**
  - äº‹åŠ¡å¤„ç†çš„ç»å…¸æ•™æ
  - å¤åˆ¶å’Œé«˜å¯ç”¨åœ¨äº‹åŠ¡å¤„ç†ä¸­çš„åº”ç”¨

- **[Lamport, L. (1998). "The Part-Time Parliament."](https://lamport.azurewebsites.net/pubs/lamport-paxos.pdf)**
  - åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•çš„åŸºç¡€ç ”ç©¶
  - Paxosç®—æ³•åœ¨æ•°æ®åº“å¤åˆ¶ä¸­çš„åº”ç”¨

### 8.3 æŠ€æœ¯åšå®¢

- **[PostgreSQL å®˜æ–¹åšå®¢ - é«˜å¯ç”¨](https://www.postgresql.org/about/newsarchive/)**
  - PostgreSQL é«˜å¯ç”¨æœ€æ–°åŠ¨æ€
  - å®é™…åº”ç”¨æ¡ˆä¾‹åˆ†äº«

- **[2ndQuadrant PostgreSQL åšå®¢](https://www.2ndquadrant.com/en/blog/)**
  - PostgreSQL é«˜å¯ç”¨æ–‡ç« 
  - å®é™…åº”ç”¨æ¡ˆä¾‹

- **[Percona PostgreSQL åšå®¢](https://www.percona.com/blog/tag/postgresql/)**
  - PostgreSQL é«˜å¯ç”¨ä¼˜åŒ–å®è·µ
  - é«˜å¯ç”¨æ¡ˆä¾‹

### 8.4 ç¤¾åŒºèµ„æº

- **[PostgreSQL Wiki - é«˜å¯ç”¨](https://wiki.postgresql.org/wiki/High_Availability)**
  - PostgreSQL é«˜å¯ç”¨Wiki
  - å¸¸è§é—®é¢˜è§£ç­”å’Œæœ€ä½³å®è·µ

- **[Stack Overflow - PostgreSQL é«˜å¯ç”¨](https://stackoverflow.com/questions/tagged/postgresql+high-availability)**
  - PostgreSQL é«˜å¯ç”¨ç›¸å…³é—®ç­”
  - é«˜è´¨é‡çš„é—®é¢˜å’Œç­”æ¡ˆ

- **[PostgreSQL é‚®ä»¶åˆ—è¡¨](https://www.postgresql.org/list/)**
  - PostgreSQL ç¤¾åŒºè®¨è®º
  - é«˜å¯ç”¨ä½¿ç”¨é—®é¢˜äº¤æµ

### 8.5 ç›¸å…³æ–‡æ¡£

- [é«˜å¯ç”¨ä½“ç³»è¯¦è§£](./é«˜å¯ç”¨ä½“ç³»è¯¦è§£.md)
- [é€»è¾‘å¤åˆ¶è¯¦è§£](./é€»è¾‘å¤åˆ¶è¯¦è§£.md)
- [æ€§èƒ½è°ƒä¼˜ä½“ç³»è¯¦è§£](../11-æ€§èƒ½è°ƒä¼˜/æ€§èƒ½è°ƒä¼˜ä½“ç³»è¯¦è§£.md)

- [å¤‡ä»½ä¸æ¢å¤](./å¤‡ä»½ä¸æ¢å¤.md)
- [ç›‘æ§ä¸è¯Šæ–­](./ç›‘æ§ä¸è¯Šæ–­.md)
- [PostgreSQL å®˜æ–¹æ–‡æ¡£ - é«˜å¯ç”¨](https://www.postgresql.org/docs/current/high-availability.html)

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
**æ–‡æ¡£ç¼–å·**: 03-03-19
