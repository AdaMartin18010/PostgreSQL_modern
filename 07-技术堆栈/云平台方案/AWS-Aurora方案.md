# 7.3.1 AWS Aurora æ–¹æ¡ˆ

> **æ›´æ–°æ—¶é—´**: 2025 å¹´ 11 æœˆ 1 æ—¥  
> **æŠ€æœ¯ç‰ˆæœ¬**: Aurora PostgreSQL 15+  
> **æ–‡æ¡£ç¼–å·**: 07-03-01

## ğŸ“‘ ç›®å½•

- [7.3.1 AWS Aurora æ–¹æ¡ˆ](#731-aws-aurora-æ–¹æ¡ˆ)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1 æŠ€æœ¯èƒŒæ™¯](#11-æŠ€æœ¯èƒŒæ™¯)
    - [1.2 æ–¹æ¡ˆå®šä½](#12-æ–¹æ¡ˆå®šä½)
    - [1.3 æ ¸å¿ƒä»·å€¼](#13-æ ¸å¿ƒä»·å€¼)
  - [2. æ¶æ„è®¾è®¡](#2-æ¶æ„è®¾è®¡)
    - [2.1 æ•´ä½“æ¶æ„](#21-æ•´ä½“æ¶æ„)
    - [2.2 å­˜å‚¨æ¶æ„](#22-å­˜å‚¨æ¶æ„)
    - [2.3 è®¡ç®—æ¶æ„](#23-è®¡ç®—æ¶æ„)
  - [3. éƒ¨ç½²é…ç½®](#3-éƒ¨ç½²é…ç½®)
    - [3.1 é›†ç¾¤åˆ›å»º](#31-é›†ç¾¤åˆ›å»º)
    - [3.2 å‚æ•°é…ç½®](#32-å‚æ•°é…ç½®)
    - [3.3 æ‰©å±•å®‰è£…](#33-æ‰©å±•å®‰è£…)
  - [4. æ€§èƒ½ä¼˜åŒ–](#4-æ€§èƒ½ä¼˜åŒ–)
    - [4.1 è¯»å†™åˆ†ç¦»](#41-è¯»å†™åˆ†ç¦»)
    - [4.2 è¿æ¥æ± ](#42-è¿æ¥æ± )
    - [4.3 ç¼“å­˜ç­–ç•¥](#43-ç¼“å­˜ç­–ç•¥)
  - [5. é«˜å¯ç”¨é…ç½®](#5-é«˜å¯ç”¨é…ç½®)
    - [5.1 å¤šå¯ç”¨åŒºéƒ¨ç½²](#51-å¤šå¯ç”¨åŒºéƒ¨ç½²)
    - [5.2 è‡ªåŠ¨æ•…éšœè½¬ç§»](#52-è‡ªåŠ¨æ•…éšœè½¬ç§»)
    - [5.3 å¤‡ä»½æ¢å¤](#53-å¤‡ä»½æ¢å¤)
  - [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)
    - [6.1 éƒ¨ç½²å»ºè®®](#61-éƒ¨ç½²å»ºè®®)
    - [6.2 è¿ç»´å»ºè®®](#62-è¿ç»´å»ºè®®)
  - [7. å‚è€ƒèµ„æ–™](#7-å‚è€ƒèµ„æ–™)

---

## 1. æ¦‚è¿°

### 1.1 æŠ€æœ¯èƒŒæ™¯

**é—®é¢˜éœ€æ±‚**:

AWS Aurora æ˜¯ AWS æä¾›çš„äº‘åŸç”Ÿæ•°æ®åº“æœåŠ¡ï¼ŒåŸºäº PostgreSQLï¼Œæä¾›é«˜å¯ç”¨ã€é«˜æ€§èƒ½å’Œè‡ªåŠ¨æ‰©å±•èƒ½åŠ›ã€‚

**æŠ€æœ¯æ¼”è¿›**:

1. **2014 å¹´**: Aurora MySQL å‘å¸ƒ
2. **2017 å¹´**: Aurora PostgreSQL å‘å¸ƒ
3. **2020 å¹´**: æ”¯æŒ Serverless v2
4. **2025 å¹´**: æ”¯æŒ pgvector å’Œæ›´å¤šæ‰©å±•

### 1.2 æ–¹æ¡ˆå®šä½

AWS Aurora æ–¹æ¡ˆæä¾›åœ¨ AWS å¹³å°ä¸Šä½¿ç”¨ Aurora PostgreSQL çš„å®Œæ•´æ–¹æ¡ˆï¼Œæ”¯æŒå‘é‡æœç´¢å’Œ AI åº”ç”¨ã€‚

### 1.3 æ ¸å¿ƒä»·å€¼

- **é«˜å¯ç”¨æ€§**: 99.99% å¯ç”¨æ€§ä¿è¯
- **è‡ªåŠ¨æ‰©å±•**: è‡ªåŠ¨æ‰©å±•è®¡ç®—å’Œå­˜å‚¨
- **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–çš„è¯»å†™æ€§èƒ½
- **æˆæœ¬ä¼˜åŒ–**: æŒ‰éœ€ä»˜è´¹ï¼Œæˆæœ¬ä¼˜åŒ–

---

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Application Layer                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Aurora Cluster                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Writer Instance (Primary)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Reader Instance 1 (Replica)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Reader Instance 2 (Replica)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Storage Layer (6 Replicas)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å­˜å‚¨æ¶æ„

**å­˜å‚¨ç‰¹ç‚¹**:

- **å…±äº«å­˜å‚¨**: æ‰€æœ‰å®ä¾‹å…±äº«å­˜å‚¨
- **è‡ªåŠ¨æ‰©å±•**: å­˜å‚¨è‡ªåŠ¨æ‰©å±•åˆ° 128TB
- **6 å‰¯æœ¬**: æ•°æ®è‡ªåŠ¨å¤åˆ¶åˆ° 6 ä¸ªå‰¯æœ¬

### 2.3 è®¡ç®—æ¶æ„

**è®¡ç®—ç‰¹ç‚¹**:

- **è¯»å†™åˆ†ç¦»**: è¯»å†™åˆ†ç¦»æ¶æ„
- **è‡ªåŠ¨æ‰©å±•**: è®¡ç®—èµ„æºè‡ªåŠ¨æ‰©å±•
- **Serverless**: æ”¯æŒ Serverless æ¨¡å¼

---

## 3. éƒ¨ç½²é…ç½®

### 3.1 é›†ç¾¤åˆ›å»º

**AWS CLI åˆ›å»º**:

```bash
aws rds create-db-cluster \
    --db-cluster-identifier my-aurora-cluster \
    --engine aurora-postgresql \
    --engine-version 15.4 \
    --master-username admin \
    --master-user-password mypassword \
    --database-name mydb
```

**Terraform é…ç½®**:

```hcl
resource "aws_rds_cluster" "aurora" {
  cluster_identifier      = "my-aurora-cluster"
  engine                  = "aurora-postgresql"
  engine_version          = "15.4"
  database_name           = "mydb"
  master_username         = "admin"
  master_password         = var.db_password
  
  db_subnet_group_name    = aws_db_subnet_group.aurora.name
  vpc_security_group_ids  = [aws_security_group.aurora.id]
  
  backup_retention_period = 7
  preferred_backup_window = "03:00-04:00"
}
```

### 3.2 å‚æ•°é…ç½®

**å‚æ•°ç»„é…ç½®**:

```bash
# åˆ›å»ºå‚æ•°ç»„
aws rds create-db-cluster-parameter-group \
    --db-cluster-parameter-group-name my-aurora-params \
    --db-parameter-group-family aurora-postgresql15 \
    --description "Aurora PostgreSQL parameters"

# è®¾ç½®å‚æ•°
aws rds modify-db-cluster-parameter-group \
    --db-cluster-parameter-group-name my-aurora-params \
    --parameters "ParameterName=shared_preload_libraries,ParameterValue=pgvector,ApplyMethod=requires-reboot"
```

### 3.3 æ‰©å±•å®‰è£…

**å®‰è£… pgvector**:

```sql
-- åœ¨ Aurora ä¸­å®‰è£… pgvector
CREATE EXTENSION IF NOT EXISTS vector;

-- éªŒè¯å®‰è£…
SELECT * FROM pg_extension WHERE extname = 'vector';
```

---

## 4. æ€§èƒ½ä¼˜åŒ–

### 4.1 è¯»å†™åˆ†ç¦»

**è¯»å†™åˆ†ç¦»é…ç½®**:

```python
from sqlalchemy import create_engine

# å†™è¿æ¥ï¼ˆä¸»å®ä¾‹ï¼‰
write_engine = create_engine(
    "postgresql://user:pass@aurora-cluster.cluster-xxx.us-east-1.rds.amazonaws.com:5432/mydb"
)

# è¯»è¿æ¥ï¼ˆåªè¯»å‰¯æœ¬ï¼‰
read_engine = create_engine(
    "postgresql://user:pass@aurora-cluster.cluster-ro-xxx.us-east-1.rds.amazonaws.com:5432/mydb"
)
```

### 4.2 è¿æ¥æ± 

**è¿æ¥æ± é…ç½®**:

```python
from sqlalchemy.pool import QueuePool

engine = create_engine(
    connection_string,
    poolclass=QueuePool,
    pool_size=10,
    max_overflow=20,
    pool_pre_ping=True
)
```

### 4.3 ç¼“å­˜ç­–ç•¥

**ç¼“å­˜é…ç½®**:

- **æŸ¥è¯¢ç¼“å­˜**: ä½¿ç”¨ ElastiCache ç¼“å­˜æŸ¥è¯¢ç»“æœ
- **è¿æ¥ç¼“å­˜**: ä½¿ç”¨ RDS Proxy ç®¡ç†è¿æ¥
- **åº”ç”¨ç¼“å­˜**: åº”ç”¨å±‚ç¼“å­˜

---

## 5. é«˜å¯ç”¨é…ç½®

### 5.1 å¤šå¯ç”¨åŒºéƒ¨ç½²

**å¤šå¯ç”¨åŒºé…ç½®**:

```bash
aws rds create-db-instance \
    --db-instance-identifier my-aurora-instance-1 \
    --db-cluster-identifier my-aurora-cluster \
    --db-instance-class db.r6g.large \
    --engine aurora-postgresql \
    --availability-zone us-east-1a \
    --multi-az
```

### 5.2 è‡ªåŠ¨æ•…éšœè½¬ç§»

**æ•…éšœè½¬ç§»**:

- **è‡ªåŠ¨åˆ‡æ¢**: ä¸»å®ä¾‹æ•…éšœè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨å®ä¾‹
- **RTO**: æ•…éšœè½¬ç§»æ—¶é—´ < 60 ç§’
- **æ•°æ®ä¿æŠ¤**: é›¶æ•°æ®ä¸¢å¤±

### 5.3 å¤‡ä»½æ¢å¤

**å¤‡ä»½é…ç½®**:

- **è‡ªåŠ¨å¤‡ä»½**: è‡ªåŠ¨æ¯æ—¥å¤‡ä»½
- **å¿«ç…§å¤‡ä»½**: æ‰‹åŠ¨åˆ›å»ºå¿«ç…§
- **æ—¶é—´ç‚¹æ¢å¤**: æ”¯æŒæ—¶é—´ç‚¹æ¢å¤

---

## 6. æœ€ä½³å®è·µ

### 6.1 éƒ¨ç½²å»ºè®®

- **å¤šå¯ç”¨åŒº**: ä½¿ç”¨å¤šå¯ç”¨åŒºéƒ¨ç½²
- **å‚æ•°ä¼˜åŒ–**: ä¼˜åŒ–æ•°æ®åº“å‚æ•°
- **ç›‘æ§å‘Šè­¦**: è®¾ç½® CloudWatch å‘Šè­¦

### 6.2 è¿ç»´å»ºè®®

- **å®šæœŸå¤‡ä»½**: å®šæœŸåˆ›å»ºå¿«ç…§
- **æ€§èƒ½ç›‘æ§**: ç›‘æ§æ•°æ®åº“æ€§èƒ½
- **æˆæœ¬ä¼˜åŒ–**: ä½¿ç”¨ Reserved Instances

---

## 7. å‚è€ƒèµ„æ–™

- [AWS Aurora æ–‡æ¡£](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/)
- [Aurora PostgreSQL æœ€ä½³å®è·µ](https://aws.amazon.com/rds/aurora/postgresql-features/)

---

**æœ€åæ›´æ–°**: 2025 å¹´ 11 æœˆ 1 æ—¥  
**ç»´æŠ¤è€…**: PostgreSQL Modern Team
