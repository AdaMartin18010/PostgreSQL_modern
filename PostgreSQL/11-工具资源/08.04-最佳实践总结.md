# 08.04-最佳实践总结

## 建模

- 选择恰当的数据类型（范围/数组/JSONB/枚举）；
- 主外键与唯一约束完善，必要时用排他约束；
- 分区按时间/范围设计，确保裁剪生效；
- 高频路径冗余列 + 表达式索引。

## 查询

- 避免 `SELECT *`，仅取所需列；
- 结合 `EXPLAIN (ANALYZE, BUFFERS)` 校验计划与基数；
- 连接顺序受统计影响，保持统计新鲜；
- 窗口函数保证排序唯一性。

## 并发

- 短事务、幂等重试，避免长时间持锁；
- 热点拆分与队列化；
- 需要可串行化时优先使用 SSI；
- 谨慎使用 `SKIP LOCKED`，配合监控。

## 运维

- 自动化 `VACUUM/ANALYZE` 基线；
- 监控连接/命中率/WAL/检查点/Autovacuum；
- 备份策略：全量 + WAL 归档 + 演练；
- 版本与参数变更先预生产灰度验证。

## 安全

- RLS 与最小权限；
- 加密（传输/静态），敏感数据脱敏；
- 审计与告警留痕。

## 交叉引用

### 相关文档

#### 核心课程

- ⭐⭐ [关系数据模型与理论](../01-核心课程/01.02-关系数据模型与理论.md) - 数据建模理论
- ⭐⭐ [SQL语言规范与标准](../01-核心课程/01.03-SQL语言规范与标准.md) - SQL语言基础
- ⭐⭐ [并发控制与MVCC机制](../01-核心课程/01.05-并发控制与MVCC机制.md) - 并发控制

#### 查询与优化

- ⭐⭐ [查询优化器原理](../03-查询与优化/02.01-查询优化器原理.md) - 查询优化
- ⭐⭐ [执行计划与性能调优](../03-查询与优化/02.04-执行计划与性能调优.md) - 性能调优

#### 部署架构

- ⭐⭐ [性能调优实践](../05-部署架构/单机部署/05.02-性能调优实践.md) - 性能优化

#### 运维实践

- ⭐⭐⭐ [监控与诊断](../06-运维实践/监控与诊断/06.01-监控与诊断.md) - 监控诊断
- ⭐⭐⭐ [备份与恢复](../06-运维实践/备份与恢复/06.06-备份与恢复.md) - 备份恢复

#### 高级特性

- ⭐⭐ [安全机制与访问控制](../04-高级特性/03.02-安全机制与访问控制.md) - 安全实践
