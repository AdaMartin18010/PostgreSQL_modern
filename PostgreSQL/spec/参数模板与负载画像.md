# 参数模板与负载画像

对齐：`04.06-性能调优实践.md`

## 1. 负载画像

- OLTP：短事务、高并发、延迟敏感；
- OLAP：长查询、吞吐优先、并行友好；
- 混合：读写分离、分析跑只读副本。

## 2. 通用硬件基线（示例）

- 内存 64–256GB、NVMe SSD、千兆/万兆网络。

## 3. 参数模板（示例，需按环境校准）

```text
[通用]
shared_buffers = 25%RAM
effective_cache_size = 75%RAM
work_mem = 16MB
maintenance_work_mem = 1GB
checkpoint_timeout = 15min
max_wal_size = 8GB
checkpoint_completion_target = 0.8
random_page_cost = 1.2   # SSD
effective_io_concurrency = 256

[OLTP]
jit = off
max_parallel_workers_per_gather = 0-2
synchronous_commit = on

[OLAP]
jit = on
max_parallel_workers_per_gather = 2-4
work_mem = 128MB

[维护/膨胀控制]
autovacuum_vacuum_scale_factor = 0.02-0.1
autovacuum_vacuum_threshold = 1000
wal_compression = on
```

## 4. 版本差异提示

- PG15/16/17 对并行、JIT、TOAST/压缩、检查点等优化不同；以发行说明校准。
