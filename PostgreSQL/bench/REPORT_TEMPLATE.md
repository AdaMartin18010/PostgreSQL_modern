# 基准测试报告模板

> **最后更新**: 2025-11-12

---

## 📋 测试信息

### 基本信息

- **测试名称**:
- **测试日期**:
- **测试人员**:
- **测试目的**:
- **测试版本**: PostgreSQL

---

## 🖥️ 测试环境

### 硬件配置

- **CPU**:
  - 型号:
  - 核心数:
  - 频率:
- **内存**:
  - 总容量:
  - 类型:
- **存储**:
  - 类型: (HDD/SSD/NVMe)
  - 容量:
  - IOPS:
- **网络**:
  - 带宽:
  - 延迟:

### 软件环境

- **操作系统**:
  - 发行版:
  - 内核版本:
- **PostgreSQL**:
  - 版本:
  - 编译选项:
- **扩展**:
  - pgvector:
  - 其他:

---

## ⚙️ PostgreSQL 配置

### 关键参数

```sql
-- 记录关键配置参数
SELECT name, setting, unit, context
FROM pg_settings
WHERE name IN (
    'shared_buffers',
    'work_mem',
    'maintenance_work_mem',
    'effective_cache_size',
    'max_connections',
    'max_parallel_workers',
    'max_parallel_workers_per_gather',
    'checkpoint_timeout',
    'max_wal_size',
    'wal_buffers'
)
ORDER BY name;
```

| 参数 | 值 | 备注 |
|------|-----|------|
| shared_buffers | | |
| work_mem | | |
| maintenance_work_mem | | |
| effective_cache_size | | |
| max_connections | | |
| max_parallel_workers | | |
| max_parallel_workers_per_gather | | |
| checkpoint_timeout | | |
| max_wal_size | | |
| wal_buffers | | |

---

## 📊 测试数据

### 数据规模

- **数据库大小**:
- **表数量**:
- **总行数**:
- **索引数量**:
- **索引大小**:

### 数据分布

- **数据分布类型**: (均匀/Zipf/其他)
- **热点数据比例**:
- **其他特征**:

---

## 🧪 测试方法

### 测试场景

- **场景描述**:
- **测试脚本**:
- **并发数**:
- **测试时长**:
- **其他参数**:

### 测试步骤

1.
2.
3.

---

## 📈 测试结果

### 性能指标

| 指标 | 值 | 单位 | 备注 |
|------|-----|------|------|
| TPS | | tps | |
| 平均延迟 | | ms | |
| TP50 | | ms | |
| TP95 | | ms | |
| TP99 | | ms | |
| TP99.9 | | ms | |
| 延迟标准差 | | ms | |
| 事务总数 | | | |
| 错误数 | | | |
| 错误率 | | % | |

### 系统资源

| 资源 | 平均使用率 | 峰值使用率 | 备注 |
|------|-----------|-----------|------|
| CPU | | % | |
| 内存 | | % | |
| IO 读取 | | MB/s | |
| IO 写入 | | MB/s | |
| 网络带宽 | | MB/s | |

### PostgreSQL 指标

| 指标 | 值 | 备注 |
|------|-----|------|
| 活跃连接数 | | |
| 缓存命中率 | | % |
| 索引扫描率 | | % |
| WAL 生成速率 | | MB/s |
| 检查点频率 | | /min |

---

## 📉 延迟分布

### 延迟分位数

```
TP50:   XX ms
TP95:   XX ms
TP99:   XX ms
TP99.9: XX ms
```

### 延迟直方图（可选）

```
[0-10ms]:    XX%
[10-50ms]:   XX%
[50-100ms]:  XX%
[100-200ms]: XX%
[200ms+]:    XX%
```

---

## 🔍 详细分析

### 查询性能分析

#### Top 10 慢查询

| 排名 | 查询ID | 调用次数 | 平均时间(ms) | 总时间(ms) | 查询预览 |
|------|--------|---------|------------|-----------|---------|
| 1 | | | | | |
| 2 | | | | | |
| ... | | | | | |

### 索引使用分析

| 表名 | 索引名 | 扫描次数 | 命中率 | 索引大小 |
|------|--------|---------|--------|---------|
| | | | % | |
| | | | % | |

### 等待事件分析

| 等待事件类型 | 等待事件 | 等待次数 | 总等待时间(s) |
|------------|---------|---------|--------------|
| | | | |
| | | | |

---

## 📊 对比分析（如适用）

### 配置对比

| 配置 | TPS | TP95(ms) | 缓存命中率(%) | 备注 |
|------|-----|----------|--------------|------|
| 基线配置 | | | | |
| 配置A | | | | |
| 配置B | | | | |

### 版本对比

| PostgreSQL版本 | TPS | TP95(ms) | 备注 |
|---------------|-----|----------|------|
| 16.x | | | |
| 17.x | | | |
| 18.x | | | |

---

## 💡 关键发现

### 性能亮点

1.
2.
3.

### 性能瓶颈

1.
2.
3.

### 异常情况

1.
2.
3.

---

## 🎯 优化建议

### 配置优化

1.
2.
3.

### 查询优化

1.
2.
3.

### 索引优化

1.
2.
3.

---

## 📎 附件

### 测试脚本

- 测试脚本文件:
- 自定义脚本:

### 监控数据

- 系统监控日志:
- pgbench 输出日志:
- 延迟日志:

### 其他

- 查询计划:
- 配置文件:
- 其他相关文件:

---

## ✅ 验证与确认

### 测试验证

- [ ] 测试环境符合要求
- [ ] 测试数据已准备
- [ ] 测试脚本已验证
- [ ] 监控工具已运行
- [ ] 结果数据已收集

### 结果确认

- [ ] 性能指标已记录
- [ ] 系统资源已记录
- [ ] 对比分析已完成
- [ ] 优化建议已提出
- [ ] 报告已审核

---

## 📝 备注

---

**报告生成时间**:
**报告版本**: v1.0
