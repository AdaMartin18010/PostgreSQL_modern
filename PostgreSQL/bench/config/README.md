# åŸºå‡†æµ‹è¯•é…ç½®æ–‡ä»¶

> **æœ€åæ›´æ–°**: 2025-11-12

---

## ğŸ“‹ é…ç½®æ–‡ä»¶è¯´æ˜

### benchmark_config.example.json

åŸºå‡†æµ‹è¯•é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼Œç”¨äºå®šä¹‰æµ‹è¯•å‚æ•°å’Œé€‰é¡¹ã€‚

**é…ç½®é¡¹è¯´æ˜**ï¼š

#### database

æ•°æ®åº“è¿æ¥é…ç½®ï¼š

```json
{
  "name": "pgbench_test",    // æ•°æ®åº“åç§°
  "host": "localhost",        // ä¸»æœºåœ°å€
  "port": 5432,               // ç«¯å£
  "user": "postgres"          // ç”¨æˆ·å
}
```

#### test_data

æµ‹è¯•æ•°æ®é…ç½®ï¼š

```json
{
  "scale_factor": 100,        // æ•°æ®è§„æ¨¡å› å­
  "description": "çº¦ 1000 ä¸‡è¡Œæ•°æ®"
}
```

#### benchmark

åŸºå‡†æµ‹è¯•å‚æ•°ï¼š

```json
{
  "clients": [8, 16, 32, 64], // å¹¶å‘æ•°åˆ—è¡¨
  "threads": 32,              // å·¥ä½œçº¿ç¨‹æ•°
  "duration": 300,            // æµ‹è¯•æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰
  "warmup_duration": 60       // é¢„çƒ­æ—¶é—´ï¼ˆç§’ï¼‰
}
```

#### tests

æµ‹è¯•åœºæ™¯åˆ—è¡¨ï¼š

```json
{
  "name": "baseline",         // æµ‹è¯•åç§°
  "description": "æ ‡å‡† TPC-B æµ‹è¯•",
  "enabled": true,            // æ˜¯å¦å¯ç”¨
  "options": []               // pgbench é€‰é¡¹
}
```

#### monitoring

ç›‘æ§é…ç½®ï¼š

```json
{
  "enabled": true,            // æ˜¯å¦å¯ç”¨ç›‘æ§
  "interval": 1,              // é‡‡æ ·é—´éš”ï¼ˆç§’ï¼‰
  "output_prefix": "monitor"  // è¾“å‡ºæ–‡ä»¶å‰ç¼€
}
```

#### output

è¾“å‡ºé…ç½®ï¼š

```json
{
  "directory": "./results",   // è¾“å‡ºç›®å½•
  "include_timestamp": true,  // æ˜¯å¦åŒ…å«æ—¶é—´æˆ³
  "analyze_latency": true,    // æ˜¯å¦åˆ†æå»¶è¿Ÿ
  "extract_metrics": true     // æ˜¯å¦æå–æŒ‡æ ‡
}
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¤åˆ¶é…ç½®æ–‡ä»¶

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp config/benchmark_config.example.json config/benchmark_config.json

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config/benchmark_config.json
```

### 2. ä½¿ç”¨é…ç½®æ–‡ä»¶è¿è¡Œæµ‹è¯•

**æ³¨æ„**: å½“å‰ç‰ˆæœ¬çš„è‡ªåŠ¨åŒ–è„šæœ¬æš‚ä¸æ”¯æŒç›´æ¥è¯»å– JSON é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡æˆ–ä¿®æ”¹è„šæœ¬å‚æ•°ã€‚

**æœªæ¥è®¡åˆ’**: æ·»åŠ é…ç½®æ–‡ä»¶è§£æåŠŸèƒ½ã€‚

---

## ğŸ“‹ é…ç½®æ–‡ä»¶ç¤ºä¾‹

### å¼€å‘ç¯å¢ƒé…ç½®

**benchmark_config.dev.json** - å¿«é€ŸéªŒè¯é…ç½®

- å°è§„æ¨¡æ•°æ®ï¼ˆscale factor = 10ï¼‰
- çŸ­æµ‹è¯•æ—¶é•¿ï¼ˆ60 ç§’ï¼‰
- ä½å¹¶å‘ï¼ˆ8-16 å®¢æˆ·ç«¯ï¼‰
- ç¦ç”¨ç›‘æ§ï¼ˆåŠ å¿«æµ‹è¯•é€Ÿåº¦ï¼‰

**é€‚ç”¨åœºæ™¯**: å¼€å‘é˜¶æ®µå¿«é€ŸéªŒè¯é…ç½®å˜æ›´

### ç”Ÿäº§ç¯å¢ƒé…ç½®

**benchmark_config.prod.json** - å®Œæ•´æ€§èƒ½æµ‹è¯•é…ç½®

- å¤§è§„æ¨¡æ•°æ®ï¼ˆscale factor = 1000ï¼‰
- é•¿æµ‹è¯•æ—¶é•¿ï¼ˆ600 ç§’ï¼‰
- é«˜å¹¶å‘ï¼ˆ32-256 å®¢æˆ·ç«¯ï¼‰
- å®Œæ•´ç›‘æ§å’Œåˆ†æ

**é€‚ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒæ€§èƒ½è¯„ä¼°å’Œè°ƒä¼˜

### è‡ªå®šä¹‰é…ç½®

å¤åˆ¶ `benchmark_config.example.json` å¹¶æ ¹æ®éœ€æ±‚ä¿®æ”¹ï¼š

```bash
cp config/benchmark_config.example.json config/benchmark_config.custom.json
# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config/benchmark_config.custom.json
```

---

## ğŸ’¡ é…ç½®å»ºè®®

### å¼€å‘ç¯å¢ƒ

```json
{
  "test_data": {
    "scale_factor": 10
  },
  "benchmark": {
    "clients": [8, 16],
    "duration": 60
  }
}
```

### ç”Ÿäº§ç¯å¢ƒæ¨¡æ‹Ÿ

```json
{
  "test_data": {
    "scale_factor": 1000
  },
  "benchmark": {
    "clients": [32, 64, 128],
    "duration": 600
  }
}
```

---

## ğŸ“š ç›¸å…³èµ„æº

- **è‡ªåŠ¨åŒ–è„šæœ¬**: `../tools/run_benchmark_suite.sh`
- **åŸºå‡†æµ‹è¯•æŒ‡å—**: `../README.md`
