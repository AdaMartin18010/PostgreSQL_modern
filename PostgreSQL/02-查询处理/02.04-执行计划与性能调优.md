# PostgreSQLæ‰§è¡Œè®¡åˆ’ä¸æ€§èƒ½è°ƒä¼˜å®Œæ•´æŒ‡å—

> **ç‰ˆæœ¬**: v3.0
> **æœ€åæ›´æ–°**: 2025-01-15
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **éš¾åº¦**: â­â­â­â­
> **åº”ç”¨åœºæ™¯**: æ‰§è¡Œè®¡åˆ’åˆ†æã€æ€§èƒ½è°ƒä¼˜ã€æŸ¥è¯¢ä¼˜åŒ–ã€ç³»ç»Ÿä¼˜åŒ–
> ğŸ†• **PostgreSQL 18æ€§èƒ½æ”¹è¿›**: å¤æ‚æŸ¥è¯¢æ€§èƒ½æå‡30-40%ã€æ›´å‡†ç¡®çš„æ‰§è¡Œè®¡åˆ’ä¼°ç®—ã€æ”¹è¿›çš„EXPLAINåˆ†æã€å¼‚æ­¥I/Oæå‡I/Oå¯†é›†å‹æŸ¥è¯¢æ€§èƒ½2-3å€

---

## ğŸ“‘ ç›®å½•

- [PostgreSQLæ‰§è¡Œè®¡åˆ’ä¸æ€§èƒ½è°ƒä¼˜å®Œæ•´æŒ‡å—](#postgresqlæ‰§è¡Œè®¡åˆ’ä¸æ€§èƒ½è°ƒä¼˜å®Œæ•´æŒ‡å—)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ğŸ“Š æ€ç»´å¯¼å›¾](#-æ€ç»´å¯¼å›¾)
  - [ä¸€ã€å®šä¹‰ä¸å½¢å¼åŒ–](#ä¸€å®šä¹‰ä¸å½¢å¼åŒ–)
    - [1.1 æ¦‚å¿µå®šä¹‰](#11-æ¦‚å¿µå®šä¹‰)
    - [1.2 å½¢å¼åŒ–å®šä¹‰](#12-å½¢å¼åŒ–å®šä¹‰)
    - [1.3 æ ¸å¿ƒå±æ€§](#13-æ ¸å¿ƒå±æ€§)
  - [äºŒã€çŸ¥è¯†çŸ©é˜µå¯¹æ¯”](#äºŒçŸ¥è¯†çŸ©é˜µå¯¹æ¯”)
    - [2.1 æ‰§è¡Œè®¡åˆ’èŠ‚ç‚¹ç±»å‹å¯¹æ¯”](#21-æ‰§è¡Œè®¡åˆ’èŠ‚ç‚¹ç±»å‹å¯¹æ¯”)
    - [2.2 æ€§èƒ½è°ƒä¼˜æ–¹æ³•å¯¹æ¯”](#22-æ€§èƒ½è°ƒä¼˜æ–¹æ³•å¯¹æ¯”)
  - [ä¸‰ã€ç†è®ºåŸºç¡€](#ä¸‰ç†è®ºåŸºç¡€)
    - [3.1 æ‰§è¡Œè®¡åˆ’ç†è®º](#31-æ‰§è¡Œè®¡åˆ’ç†è®º)
    - [3.2 æ€§èƒ½è°ƒä¼˜ç†è®º](#32-æ€§èƒ½è°ƒä¼˜ç†è®º)
  - [å››ã€æ‰§è¡Œè®¡åˆ’åˆ†æ](#å››æ‰§è¡Œè®¡åˆ’åˆ†æ)
    - [4.1 åŸºæœ¬æ‰§è¡Œè®¡åˆ’](#41-åŸºæœ¬æ‰§è¡Œè®¡åˆ’)
    - [4.2 æ‰§è¡Œè®¡åˆ’èŠ‚ç‚¹ç±»å‹](#42-æ‰§è¡Œè®¡åˆ’èŠ‚ç‚¹ç±»å‹)
    - [4.3 æ‰§è¡Œè®¡åˆ’ç»Ÿè®¡ä¿¡æ¯](#43-æ‰§è¡Œè®¡åˆ’ç»Ÿè®¡ä¿¡æ¯)
  - [äº”ã€æ€§èƒ½ç›‘æ§](#äº”æ€§èƒ½ç›‘æ§)
    - [5.1 æŸ¥è¯¢æ€§èƒ½ç›‘æ§](#51-æŸ¥è¯¢æ€§èƒ½ç›‘æ§)
    - [5.2 ç³»ç»Ÿæ€§èƒ½ç›‘æ§](#52-ç³»ç»Ÿæ€§èƒ½ç›‘æ§)
    - [5.3 I/Oæ€§èƒ½ç›‘æ§](#53-ioæ€§èƒ½ç›‘æ§)
  - [å…­ã€æ€§èƒ½è°ƒä¼˜ç­–ç•¥](#å…­æ€§èƒ½è°ƒä¼˜ç­–ç•¥)
    - [6.1 æŸ¥è¯¢ä¼˜åŒ–](#61-æŸ¥è¯¢ä¼˜åŒ–)
    - [6.2 ç³»ç»Ÿå‚æ•°è°ƒä¼˜](#62-ç³»ç»Ÿå‚æ•°è°ƒä¼˜)
    - [6.3 å¹¶å‘å‚æ•°è°ƒä¼˜](#63-å¹¶å‘å‚æ•°è°ƒä¼˜)
    - [6.4 åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ– ğŸ†•](#64-åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–-)
      - [6.4.1. åˆ—é€‰æ‹©ä¼˜åŒ–](#641-åˆ—é€‰æ‹©ä¼˜åŒ–)
      - [6.4.2. èšåˆæŸ¥è¯¢ä¼˜åŒ–](#642-èšåˆæŸ¥è¯¢ä¼˜åŒ–)
      - [6.4.3. è¿‡æ»¤æ¡ä»¶ä¼˜åŒ–](#643-è¿‡æ»¤æ¡ä»¶ä¼˜åŒ–)
      - [6.4.4. æ··åˆå­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–](#644-æ··åˆå­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–)
  - [ä¸ƒã€æ€§èƒ½åˆ†æå·¥å…·](#ä¸ƒæ€§èƒ½åˆ†æå·¥å…·)
    - [7.1 æ‰§è¡Œè®¡åˆ’åˆ†æ](#71-æ‰§è¡Œè®¡åˆ’åˆ†æ)
    - [7.2 æ€§èƒ½åŸºå‡†æµ‹è¯•](#72-æ€§èƒ½åŸºå‡†æµ‹è¯•)
    - [7.3 æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿](#73-æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿)
  - [å…«ã€å®é™…åº”ç”¨æ¡ˆä¾‹](#å…«å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [8.1 æ…¢æŸ¥è¯¢ä¼˜åŒ–](#81-æ…¢æŸ¥è¯¢ä¼˜åŒ–)
    - [8.2 æ‰¹é‡æ“ä½œä¼˜åŒ–](#82-æ‰¹é‡æ“ä½œä¼˜åŒ–)
    - [8.3 åˆ†åŒºè¡¨æ€§èƒ½ä¼˜åŒ–](#83-åˆ†åŒºè¡¨æ€§èƒ½ä¼˜åŒ–)
  - [ä¹ã€æ€§èƒ½è°ƒä¼˜æœ€ä½³å®è·µ](#ä¹æ€§èƒ½è°ƒä¼˜æœ€ä½³å®è·µ)
    - [9.1 ç´¢å¼•ä¼˜åŒ–ç­–ç•¥](#91-ç´¢å¼•ä¼˜åŒ–ç­–ç•¥)
    - [9.2 æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥](#92-æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥)
    - [9.3 ç³»ç»Ÿé…ç½®ä¼˜åŒ–](#93-ç³»ç»Ÿé…ç½®ä¼˜åŒ–)
  - [åã€ç›¸å…³æ¦‚å¿µ](#åç›¸å…³æ¦‚å¿µ)
    - [10.1 ä¸Šä½æ¦‚å¿µ](#101-ä¸Šä½æ¦‚å¿µ)
    - [10.2 ä¸‹ä½æ¦‚å¿µ](#102-ä¸‹ä½æ¦‚å¿µ)
    - [10.3 å¹³è¡Œæ¦‚å¿µ](#103-å¹³è¡Œæ¦‚å¿µ)
  - [åä¸€ã€å‚è€ƒèµ„æº](#åä¸€å‚è€ƒèµ„æº)
    - [11.1 ç›¸å…³æ–‡æ¡£](#111-ç›¸å…³æ–‡æ¡£)
    - [11.2 å‚è€ƒæ–‡çŒ®](#112-å‚è€ƒæ–‡çŒ®)
    - [11.3 Wikidataå¯¹é½](#113-wikidataå¯¹é½)

---

## ğŸ“Š æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((æ‰§è¡Œè®¡åˆ’ä¸æ€§èƒ½è°ƒä¼˜))
    ç†è®ºåŸºç¡€
      æ‰§è¡Œè®¡åˆ’ç†è®º
      æ€§èƒ½è°ƒä¼˜ç†è®º
    æ‰§è¡Œè®¡åˆ’åˆ†æ
      åŸºæœ¬æ‰§è¡Œè®¡åˆ’
      èŠ‚ç‚¹ç±»å‹
      ç»Ÿè®¡ä¿¡æ¯
    æ€§èƒ½ç›‘æ§
      æŸ¥è¯¢æ€§èƒ½
      ç³»ç»Ÿæ€§èƒ½
      I/Oæ€§èƒ½
    æ€§èƒ½è°ƒä¼˜ç­–ç•¥
      æŸ¥è¯¢ä¼˜åŒ–
      ç³»ç»Ÿå‚æ•°
      å¹¶å‘å‚æ•°
    æ€§èƒ½åˆ†æå·¥å…·
      æ‰§è¡Œè®¡åˆ’åˆ†æ
      åŸºå‡†æµ‹è¯•
      ç›‘æ§ä»ªè¡¨æ¿
    å®é™…åº”ç”¨
      æ…¢æŸ¥è¯¢ä¼˜åŒ–
      æ‰¹é‡æ“ä½œ
      åˆ†åŒºè¡¨ä¼˜åŒ–
    æœ€ä½³å®è·µ
      ç´¢å¼•ä¼˜åŒ–
      æŸ¥è¯¢ä¼˜åŒ–
      ç³»ç»Ÿé…ç½®
```

---

## ä¸€ã€å®šä¹‰ä¸å½¢å¼åŒ–

### 1.1 æ¦‚å¿µå®šä¹‰

**ä¸­æ–‡å®šä¹‰**: æ‰§è¡Œè®¡åˆ’æ˜¯æ•°æ®åº“ç³»ç»Ÿå°†æŸ¥è¯¢è½¬æ¢ä¸ºå…·ä½“æ‰§è¡Œæ­¥éª¤çš„è¯¦ç»†æ–¹æ¡ˆï¼Œæ€§èƒ½è°ƒä¼˜æ˜¯é€šè¿‡åˆ†ææ‰§è¡Œè®¡åˆ’å’Œç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡æ¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½çš„è¿‡ç¨‹ã€‚

**English Definition**: An execution plan is a detailed scheme that transforms queries into specific execution steps in database systems. Performance tuning is the process of optimizing query performance by analyzing execution plans and system performance metrics.

### 1.2 å½¢å¼åŒ–å®šä¹‰

```latex
% æ•°å­¦ç¬¦å·å®šä¹‰
\newcommand{\plan}{\mathcal{P}}
\newcommand{\node}{\mathcal{N}}
\newcommand{\cost}{\mathcal{C}}
\newcommand{\time}{\mathcal{T}}

% æ‰§è¡Œè®¡åˆ’çš„å½¢å¼åŒ–å®šä¹‰
\plan = \{n_1, n_2, \ldots, n_k\}

å…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹ n_i = (type_i, cost_i, time_i, rows_i, width_i) è¡¨ç¤ºï¼š
- type_i: æ“ä½œç±»å‹
- cost_i: æ‰§è¡Œä»£ä»·
- time_i: æ‰§è¡Œæ—¶é—´
- rows_i: è¾“å‡ºè¡Œæ•°
- width_i: è¡Œå®½åº¦
```

### 1.3 æ ¸å¿ƒå±æ€§

- **å‡†ç¡®æ€§**: æ‰§è¡Œè®¡åˆ’åæ˜ çœŸå®æ‰§è¡Œè¿‡ç¨‹
- **å¯è¯»æ€§**: æ‰§è¡Œè®¡åˆ’æ˜“äºç†è§£å’Œåˆ†æ
- **å¯ä¼˜åŒ–æ€§**: æ”¯æŒæ€§èƒ½è°ƒä¼˜å’Œä¼˜åŒ–
- **å¯é¢„æµ‹æ€§**: èƒ½å¤Ÿé¢„æµ‹æ‰§è¡Œæ€§èƒ½

---

## äºŒã€çŸ¥è¯†çŸ©é˜µå¯¹æ¯”

### 2.1 æ‰§è¡Œè®¡åˆ’èŠ‚ç‚¹ç±»å‹å¯¹æ¯”

| èŠ‚ç‚¹ç±»å‹ | æ“ä½œ | é€‚ç”¨åœºæ™¯ | æ€§èƒ½ç‰¹ç‚¹ | ä¼˜åŒ–å»ºè®® |
|---------|------|---------|---------|---------|
| Seq Scan | é¡ºåºæ‰«æ | å°è¡¨ã€å…¨è¡¨æ‰«æ | ä½ | æ·»åŠ ç´¢å¼• |
| Index Scan | ç´¢å¼•æ‰«æ | ç­‰å€¼æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ | é«˜ | ä¼˜åŒ–ç´¢å¼• |
| Index Only Scan | ä»…ç´¢å¼•æ‰«æ | è¦†ç›–ç´¢å¼•æŸ¥è¯¢ | æé«˜ | åˆ›å»ºè¦†ç›–ç´¢å¼• |
| Bitmap Index Scan | ä½å›¾ç´¢å¼•æ‰«æ | å¤šæ¡ä»¶æŸ¥è¯¢ | ä¸­ | ä¼˜åŒ–æ¡ä»¶ |
| Hash Join | å“ˆå¸Œè¿æ¥ | ç­‰å€¼è¿æ¥ã€å¤§è¡¨ | é«˜ | è°ƒæ•´work_mem |
| Nested Loop | åµŒå¥—å¾ªç¯ | å°è¡¨è¿æ¥ | ä¸­ | ä¼˜åŒ–è¿æ¥é¡ºåº |
| Merge Join | å½’å¹¶è¿æ¥ | æœ‰åºæ•°æ®è¿æ¥ | é«˜ | ç¡®ä¿æ•°æ®æœ‰åº |
| Sort | æ’åº | ORDER BY | ä¸­ | ä½¿ç”¨ç´¢å¼•æ’åº |
| Aggregate | èšåˆ | GROUP BY | ä¸­ | ä¼˜åŒ–åˆ†ç»„åˆ— |

### 2.2 æ€§èƒ½è°ƒä¼˜æ–¹æ³•å¯¹æ¯”

| è°ƒä¼˜æ–¹æ³• | é€‚ç”¨åœºæ™¯ | æ•ˆæœ | å®æ–½éš¾åº¦ | é£é™© |
|---------|---------|------|---------|------|
| ç´¢å¼•ä¼˜åŒ– | æŸ¥è¯¢æ…¢ | é«˜ | ä½ | ä½ |
| æŸ¥è¯¢é‡å†™ | å¤æ‚æŸ¥è¯¢ | ä¸­-é«˜ | ä¸­ | ä½ |
| å‚æ•°è°ƒä¼˜ | ç³»ç»Ÿçº§æ€§èƒ½ | ä¸­ | ä¸­ | ä¸­ |
| åˆ†åŒºè¡¨ | å¤§è¡¨æŸ¥è¯¢ | é«˜ | é«˜ | ä¸­ |
| ç‰©åŒ–è§†å›¾ | å¤æ‚èšåˆ | é«˜ | ä¸­ | ä½ |
| å¹¶è¡ŒæŸ¥è¯¢ | å¤§æ•°æ®é‡ | é«˜ | ä½ | ä½ |

---

## ä¸‰ã€ç†è®ºåŸºç¡€

### 3.1 æ‰§è¡Œè®¡åˆ’ç†è®º

```latex
\begin{theorem}[æ‰§è¡Œè®¡åˆ’æ­£ç¡®æ€§]
æ‰§è¡Œè®¡åˆ’Pæ­£ç¡®æ‰§è¡ŒæŸ¥è¯¢Qï¼Œå½“ä¸”ä»…å½“ï¼š
1. è¯­ä¹‰ç­‰ä»·æ€§ï¼š\text{result}(P) = \text{result}(Q)
2. ä»£ä»·æœ€ä¼˜æ€§ï¼š\cost(P) = \min_{P' \in \mathcal{P}(Q)} \cost(P')
3. æ—¶é—´å¯è¡Œæ€§ï¼š\time(P) \leq \text{timeout}
\end{theorem}
```

### 3.2 æ€§èƒ½è°ƒä¼˜ç†è®º

```latex
\begin{theorem}[æ€§èƒ½è°ƒä¼˜æœ€ä¼˜åŒ–]
æ€§èƒ½è°ƒä¼˜çš„ç›®æ ‡æ˜¯ï¼š
\min_{\text{config}} \sum_{i=1}^{n} \time(\query_i, \text{config})

å…¶ä¸­configæ˜¯ç³»ç»Ÿé…ç½®å‚æ•°ï¼Œquery_iæ˜¯æŸ¥è¯¢é›†åˆã€‚
\end{theorem}
```

---

## å››ã€æ‰§è¡Œè®¡åˆ’åˆ†æ

### 4.1 åŸºæœ¬æ‰§è¡Œè®¡åˆ’

```sql
-- åŸºæœ¬æ‰§è¡Œè®¡åˆ’
EXPLAIN SELECT * FROM employees WHERE emp_id = 1001;

-- è¯¦ç»†æ‰§è¡Œè®¡åˆ’
EXPLAIN (ANALYZE, BUFFERS, VERBOSE)
SELECT e.name, d.dept_name, e.salary
FROM employees e
JOIN departments d ON e.dept_id = d.dept_id
WHERE e.salary > 50000;

-- æ‰§è¡Œè®¡åˆ’æ ¼å¼
EXPLAIN (FORMAT JSON)
SELECT * FROM employees WHERE dept_id = 1;
```

### 4.2 æ‰§è¡Œè®¡åˆ’èŠ‚ç‚¹ç±»å‹

```sql
-- æ‰«æèŠ‚ç‚¹
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees;  -- Seq Scan

EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees WHERE emp_id = 1001;  -- Index Scan

EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees WHERE dept_id = 1 AND salary > 50000;  -- Bitmap Scan

-- è¿æ¥èŠ‚ç‚¹
EXPLAIN (ANALYZE, BUFFERS)
SELECT e.name, d.dept_name
FROM employees e, departments d
WHERE e.dept_id = d.dept_id;  -- Nested Loop

EXPLAIN (ANALYZE, BUFFERS)
SELECT e.name, d.dept_name
FROM employees e
JOIN departments d ON e.dept_id = d.dept_id;  -- Hash Join

-- èšåˆèŠ‚ç‚¹
EXPLAIN (ANALYZE, BUFFERS)
SELECT dept_id, COUNT(*), AVG(salary)
FROM employees
GROUP BY dept_id;  -- Hash Aggregate
```

### 4.3 æ‰§è¡Œè®¡åˆ’ç»Ÿè®¡ä¿¡æ¯

```sql
-- æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ç»Ÿè®¡
EXPLAIN (ANALYZE, BUFFERS, TIMING, VERBOSE)
SELECT e.name, d.dept_name, e.salary
FROM employees e
JOIN departments d ON e.dept_id = d.dept_id
WHERE e.salary > 50000
ORDER BY e.salary DESC;

-- æ‰§è¡Œè®¡åˆ’æˆæœ¬åˆ†æ
EXPLAIN (COSTS, BUFFERS)
SELECT * FROM employees WHERE dept_id = 1;
```

---

## äº”ã€æ€§èƒ½ç›‘æ§

### 5.1 æŸ¥è¯¢æ€§èƒ½ç›‘æ§

```sql
-- æŸ¥çœ‹å½“å‰æ´»åŠ¨æŸ¥è¯¢
SELECT
    pid,
    usename,
    application_name,
    client_addr,
    backend_start,
    state,
    query_start,
    state_change,
    query
FROM pg_stat_activity
WHERE state = 'active'
ORDER BY query_start;

-- æŸ¥çœ‹æŸ¥è¯¢ç»Ÿè®¡
SELECT
    query,
    calls,
    total_time,
    mean_time,
    stddev_time,
    rows,
    100.0 * shared_blks_hit / nullif(shared_blks_hit + shared_blks_read, 0) AS hit_percent
FROM pg_stat_statements
ORDER BY total_time DESC
LIMIT 10;
```

### 5.2 ç³»ç»Ÿæ€§èƒ½ç›‘æ§

```sql
-- æ•°æ®åº“æ€§èƒ½ç»Ÿè®¡
SELECT
    datname,
    numbackends,
    xact_commit,
    xact_rollback,
    blks_read,
    blks_hit,
    tup_returned,
    tup_fetched,
    tup_inserted,
    tup_updated,
    tup_deleted
FROM pg_stat_database
WHERE datname = current_database();

-- è¡¨æ€§èƒ½ç»Ÿè®¡
SELECT
    schemaname,
    tablename,
    seq_scan,
    seq_tup_read,
    idx_scan,
    idx_tup_fetch,
    n_tup_ins,
    n_tup_upd,
    n_tup_del,
    n_live_tup,
    n_dead_tup
FROM pg_stat_user_tables
ORDER BY seq_scan DESC;
```

### 5.3 I/Oæ€§èƒ½ç›‘æ§

```sql
-- I/Oç»Ÿè®¡ä¿¡æ¯
SELECT
    schemaname,
    tablename,
    heap_blks_read,
    heap_blks_hit,
    idx_blks_read,
    idx_blks_hit,
    toast_blks_read,
    toast_blks_hit,
    tidx_blks_read,
    tidx_blks_hit
FROM pg_statio_user_tables
ORDER BY heap_blks_read + heap_blks_hit DESC;

-- ç¼“å†²åŒºå‘½ä¸­ç‡
SELECT
    round(100.0 * sum(blks_hit) / (sum(blks_hit) + sum(blks_read)), 2) as hit_ratio
FROM pg_stat_database;
```

---

## å…­ã€æ€§èƒ½è°ƒä¼˜ç­–ç•¥

### 6.1 æŸ¥è¯¢ä¼˜åŒ–

```sql
-- æŸ¥è¯¢é‡å†™ä¼˜åŒ–
-- ä¼˜åŒ–å‰
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees
WHERE emp_id IN (
    SELECT emp_id FROM employees WHERE salary > 50000
);

-- ä¼˜åŒ–å
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees
WHERE salary > 50000;

-- ç´¢å¼•ä¼˜åŒ–
CREATE INDEX idx_emp_salary ON employees (salary);
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees WHERE salary > 50000;

-- å¤åˆç´¢å¼•ä¼˜åŒ–
CREATE INDEX idx_emp_dept_salary ON employees (dept_id, salary);
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees WHERE dept_id = 1 AND salary > 50000;
```

### 6.2 ç³»ç»Ÿå‚æ•°è°ƒä¼˜

```sql
-- å†…å­˜å‚æ•°è°ƒä¼˜
SHOW shared_buffers;
SHOW work_mem;
SHOW maintenance_work_mem;
SHOW effective_cache_size;

-- è®¾ç½®å†…å­˜å‚æ•°
SET shared_buffers = '256MB';
SET work_mem = '4MB';
SET maintenance_work_mem = '64MB';
SET effective_cache_size = '1GB';

-- æ£€æŸ¥ç‚¹å‚æ•°è°ƒä¼˜
SHOW checkpoint_timeout;
SHOW max_wal_size;
SHOW min_wal_size;
SHOW checkpoint_completion_target;

-- è®¾ç½®æ£€æŸ¥ç‚¹å‚æ•°
SET checkpoint_timeout = '15min';
SET max_wal_size = '1GB';
SET min_wal_size = '80MB';
SET checkpoint_completion_target = 0.9;
```

### 6.3 å¹¶å‘å‚æ•°è°ƒä¼˜

```sql
-- å¹¶å‘å‚æ•°
SHOW max_connections;
SHOW max_prepared_transactions;
SHOW max_locks_per_transaction;
SHOW max_pred_locks_per_transaction;

-- è®¾ç½®å¹¶å‘å‚æ•°
SET max_connections = 100;
SET max_prepared_transactions = 0;
SET max_locks_per_transaction = 64;
SET max_pred_locks_per_transaction = 64;
```

### 6.4 åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ– ğŸ†•

**åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–æ¦‚è¿°**ï¼š

åˆ—å­˜å‚¨é€šè¿‡åˆ—å¼å¸ƒå±€å’Œå‹ç¼©æŠ€æœ¯ï¼Œåœ¨OLAPåœºæ™¯ä¸‹æä¾›æ¯”è¡Œå­˜å‚¨æ›´é«˜æ•ˆçš„æŸ¥è¯¢æ€§èƒ½ã€‚ä¼˜åŒ–åˆ—å­˜å‚¨æŸ¥è¯¢éœ€è¦ç†è§£åˆ—å­˜å‚¨çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚

**åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥**ï¼š

#### 6.4.1. åˆ—é€‰æ‹©ä¼˜åŒ–

```sql
-- âœ… ä¼˜åŒ–ï¼šåªæŸ¥è¯¢éœ€è¦çš„åˆ—
-- åˆ—å­˜å‚¨ä¼˜åŠ¿ï¼šåªæ‰«æéœ€è¦çš„åˆ—ï¼ŒI/Oå‡å°‘50-90%
EXPLAIN (ANALYZE, BUFFERS)
SELECT product_id, SUM(amount), SUM(quantity)
FROM sales_columnar
WHERE sale_date BETWEEN '2023-01-01' AND '2023-12-31'
GROUP BY product_id;

-- âŒ ä¸ä¼˜åŒ–ï¼šæŸ¥è¯¢æ‰€æœ‰åˆ—
-- åˆ—å­˜å‚¨ä¼˜åŠ¿ä¸æ˜æ˜¾ï¼Œç”šè‡³å¯èƒ½æ›´æ…¢
EXPLAIN (ANALYZE, BUFFERS)
SELECT *
FROM sales_columnar
WHERE sale_date BETWEEN '2023-01-01' AND '2023-12-31';
```

#### 6.4.2. èšåˆæŸ¥è¯¢ä¼˜åŒ–

```sql
-- âœ… ä¼˜åŒ–ï¼šåˆ—å­˜å‚¨é€‚åˆèšåˆæŸ¥è¯¢
-- åˆ—æ•°æ®å¯æ‰¹é‡å¤„ç†ï¼Œèšåˆæ€§èƒ½æå‡10-100å€
EXPLAIN (ANALYZE, BUFFERS)
SELECT
    date_id,
    product_id,
    COUNT(*) as sale_count,
    SUM(amount) as total_amount,
    AVG(amount) as avg_amount,
    MAX(amount) as max_amount,
    MIN(amount) as min_amount
FROM sales_columnar
WHERE sale_date >= '2023-01-01'
GROUP BY date_id, product_id
ORDER BY total_amount DESC;

-- æ€§èƒ½å¯¹æ¯”ï¼š
-- è¡Œå­˜å‚¨ï¼šå…¨è¡¨æ‰«æï¼Œæ’åºï¼Œèšåˆï¼Œè€—æ—¶ï¼š10-30ç§’
-- åˆ—å­˜å‚¨ï¼šåˆ—æ‰«æï¼Œæ‰¹é‡èšåˆï¼Œè€—æ—¶ï¼š1-3ç§’
-- æ€§èƒ½æå‡ï¼š5-10å€
```

#### 6.4.3. è¿‡æ»¤æ¡ä»¶ä¼˜åŒ–

```sql
-- âœ… ä¼˜åŒ–ï¼šåœ¨åˆ—å­˜å‚¨ä¸Šä½¿ç”¨è¿‡æ»¤æ¡ä»¶
-- åˆ—å­˜å‚¨æ”¯æŒåˆ—çº§è¿‡æ»¤ï¼Œå‡å°‘I/O
EXPLAIN (ANALYZE, BUFFERS)
SELECT product_id, SUM(amount)
FROM sales_columnar
WHERE sale_date BETWEEN '2023-01-01' AND '2023-12-31'
  AND amount > 1000  -- åˆ—çº§è¿‡æ»¤
  AND quantity > 10  -- åˆ—çº§è¿‡æ»¤
GROUP BY product_id;

-- åˆ—å­˜å‚¨è¿‡æ»¤ä¼˜åŠ¿ï¼š
-- 1. åˆ—çº§è¿‡æ»¤ï¼šåªè¯»å–æ»¡è¶³æ¡ä»¶çš„åˆ—æ•°æ®
-- 2. å‹ç¼©è¿‡æ»¤ï¼šåœ¨å‹ç¼©æ•°æ®ä¸Šç›´æ¥è¿‡æ»¤
-- 3. å‘é‡åŒ–è¿‡æ»¤ï¼šæ‰¹é‡å¤„ç†ï¼ŒSIMDä¼˜åŒ–
```

#### 6.4.4. æ··åˆå­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–

```sql
-- æ··åˆå­˜å‚¨æ¶æ„æŸ¥è¯¢ä¼˜åŒ–
-- çƒ­æ•°æ®ï¼ˆæœ€è¿‘3ä¸ªæœˆï¼‰â†’ è¡Œå­˜å‚¨è¡¨
-- å†·æ•°æ®ï¼ˆ12ä¸ªæœˆ+ï¼‰â†’ åˆ—å­˜å‚¨è¡¨

-- æŸ¥è¯¢æœ€è¿‘æ•°æ®ï¼ˆä½¿ç”¨è¡Œå­˜å‚¨ï¼‰
EXPLAIN (ANALYZE, BUFFERS)
SELECT product_id, SUM(amount)
FROM sales  -- è¡Œå­˜å‚¨è¡¨
WHERE sale_date >= CURRENT_DATE - INTERVAL '3 months'
GROUP BY product_id;

-- æŸ¥è¯¢å†å²æ•°æ®ï¼ˆä½¿ç”¨åˆ—å­˜å‚¨ï¼‰
EXPLAIN (ANALYZE, BUFFERS)
SELECT product_id, SUM(amount)
FROM sales_columnar  -- åˆ—å­˜å‚¨è¡¨
WHERE sale_date < CURRENT_DATE - INTERVAL '12 months'
GROUP BY product_id;

-- è·¨æ—¶é—´æ®µæŸ¥è¯¢ï¼ˆUNION ALLï¼‰
EXPLAIN (ANALYZE, BUFFERS)
SELECT product_id, SUM(amount) as total_amount
FROM (
    SELECT product_id, amount
    FROM sales
    WHERE sale_date >= CURRENT_DATE - INTERVAL '3 months'
    UNION ALL
    SELECT product_id, amount
    FROM sales_columnar
    WHERE sale_date < CURRENT_DATE - INTERVAL '3 months'
      AND sale_date >= CURRENT_DATE - INTERVAL '12 months'
) combined
GROUP BY product_id;
```

**åˆ—å­˜å‚¨æ‰§è¡Œè®¡åˆ’åˆ†æ**ï¼š

```sql
-- åˆ—å­˜å‚¨æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
EXPLAIN (ANALYZE, BUFFERS, VERBOSE)
SELECT
    product_id,
    SUM(amount) as total_amount,
    COUNT(*) as sale_count
FROM sales_columnar
WHERE sale_date BETWEEN '2023-01-01' AND '2023-12-31'
GROUP BY product_id
ORDER BY total_amount DESC
LIMIT 100;

-- æ‰§è¡Œè®¡åˆ’ç‰¹ç‚¹ï¼š
-- 1. Foreign Scan on sales_columnarï¼šåˆ—å­˜å‚¨æ‰«æ
-- 2. åªæ‰«æéœ€è¦çš„åˆ—ï¼šproduct_id, amount, sale_date
-- 3. åˆ—çº§è¿‡æ»¤ï¼šåœ¨åˆ—å­˜å‚¨ä¸Šç›´æ¥è¿‡æ»¤
-- 4. æ‰¹é‡èšåˆï¼šåˆ—æ•°æ®æ‰¹é‡å¤„ç†
-- 5. I/Oå‡å°‘ï¼šåªè¯»å–éœ€è¦çš„åˆ—æ•°æ®å—
```

**åˆ—å­˜å‚¨æ€§èƒ½ç›‘æ§**ï¼š

```sql
-- åˆ—å­˜å‚¨æŸ¥è¯¢æ€§èƒ½ç›‘æ§
CREATE OR REPLACE VIEW columnar_query_performance AS
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) as table_size,
    seq_scan,
    seq_tup_read,
    idx_scan,
    idx_tup_fetch,
    n_tup_ins,
    n_tup_upd,
    n_tup_del
FROM pg_stat_user_tables
WHERE tablename LIKE '%columnar%'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- æŸ¥çœ‹åˆ—å­˜å‚¨æŸ¥è¯¢ç»Ÿè®¡
SELECT * FROM columnar_query_performance;
```

**åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ–æœ€ä½³å®è·µ**ï¼š

1. **æŸ¥è¯¢æ¨¡å¼åŒ¹é…**ï¼š
   - âœ… åªæŸ¥è¯¢éƒ¨åˆ†åˆ—
   - âœ… å¤§é‡èšåˆæ“ä½œ
   - âœ… åˆ—çº§è¿‡æ»¤
   - âŒ æŸ¥è¯¢æ‰€æœ‰åˆ—
   - âŒ é¢‘ç¹æ›´æ–°

2. **å‹ç¼©ç®—æ³•é€‰æ‹©**ï¼š
   - `pglz`ï¼šå¹³è¡¡å‹ç¼©ç‡å’Œé€Ÿåº¦
   - `lz4`ï¼šæœ€å¿«å‹ç¼©é€Ÿåº¦
   - `zstd`ï¼šæœ€é«˜å‹ç¼©ç‡

3. **æ¡å¸¦è¡Œæ•°é…ç½®**ï¼š
   - é»˜è®¤ï¼š150000è¡Œ
   - å¤§æ•°æ®ï¼šå¢åŠ æ¡å¸¦è¡Œæ•°
   - å°æ•°æ®ï¼šå‡å°‘æ¡å¸¦è¡Œæ•°

4. **æ··åˆå­˜å‚¨ç­–ç•¥**ï¼š
   - çƒ­æ•°æ®ï¼šè¡Œå­˜å‚¨ï¼ˆæ”¯æŒæ›´æ–°ï¼‰
   - å†·æ•°æ®ï¼šåˆ—å­˜å‚¨ï¼ˆåªè¯»åˆ†æï¼‰

---

## ä¸ƒã€æ€§èƒ½åˆ†æå·¥å…·

### 7.1 æ‰§è¡Œè®¡åˆ’åˆ†æ

```sql
-- åˆ›å»ºæ‰§è¡Œè®¡åˆ’åˆ†æå‡½æ•°
CREATE OR REPLACE FUNCTION analyze_execution_plan(query_text text)
RETURNS TABLE(
    node_type text,
    cost_start numeric,
    cost_total numeric,
    actual_time numeric,
    rows_estimated bigint,
    rows_actual bigint,
    width_estimated integer
) AS $$
BEGIN
    RETURN QUERY
    EXECUTE format('EXPLAIN (ANALYZE, BUFFERS, FORMAT JSON) %s', query_text);
END;
$$ LANGUAGE plpgsql;

-- ä½¿ç”¨æ‰§è¡Œè®¡åˆ’åˆ†æ
SELECT * FROM analyze_execution_plan('SELECT * FROM employees WHERE salary > 50000');
```

### 7.2 æ€§èƒ½åŸºå‡†æµ‹è¯•

```sql
-- åˆ›å»ºæ€§èƒ½æµ‹è¯•å‡½æ•°
CREATE OR REPLACE FUNCTION benchmark_query(query_text text, iterations integer DEFAULT 10)
RETURNS TABLE(
    iteration integer,
    execution_time numeric,
    rows_returned bigint
) AS $$
DECLARE
    i integer;
    start_time timestamp;
    end_time timestamp;
    result_rows bigint;
BEGIN
    FOR i IN 1..iterations LOOP
        start_time := clock_timestamp();
        EXECUTE format('SELECT COUNT(*) FROM (%s) t', query_text) INTO result_rows;
        end_time := clock_timestamp();

        RETURN QUERY SELECT
            i,
            EXTRACT(EPOCH FROM (end_time - start_time)) * 1000,
            result_rows;
    END LOOP;
END;
$$ LANGUAGE plpgsql;

-- ä½¿ç”¨æ€§èƒ½æµ‹è¯•
SELECT * FROM benchmark_query('SELECT * FROM employees WHERE salary > 50000', 5);
```

### 7.3 æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿

```sql
-- åˆ›å»ºæ€§èƒ½ç›‘æ§è§†å›¾
CREATE OR REPLACE VIEW performance_dashboard AS
SELECT
    'Database' as metric_type,
    datname as metric_name,
    round(100.0 * blks_hit / (blks_hit + blks_read), 2) as hit_ratio,
    tup_returned + tup_fetched + tup_inserted + tup_updated + tup_deleted as total_operations
FROM pg_stat_database
WHERE datname = current_database()

UNION ALL

SELECT
    'Table' as metric_type,
    tablename as metric_name,
    round(100.0 * heap_blks_hit / (heap_blks_hit + heap_blks_read), 2) as hit_ratio,
    n_live_tup as total_operations
FROM pg_stat_user_tables
ORDER BY metric_type, hit_ratio DESC;

-- æŸ¥çœ‹æ€§èƒ½ä»ªè¡¨æ¿
SELECT * FROM performance_dashboard;
```

---

## å…«ã€å®é™…åº”ç”¨æ¡ˆä¾‹

### 8.1 æ…¢æŸ¥è¯¢ä¼˜åŒ–

```sql
-- è¯†åˆ«æ…¢æŸ¥è¯¢
SELECT
    query,
    calls,
    total_time,
    mean_time,
    stddev_time,
    rows,
    100.0 * shared_blks_hit / nullif(shared_blks_hit + shared_blks_read, 0) AS hit_percent
FROM pg_stat_statements
WHERE mean_time > 1000  -- å¹³å‡æ‰§è¡Œæ—¶é—´è¶…è¿‡1ç§’
ORDER BY mean_time DESC
LIMIT 10;

-- ä¼˜åŒ–æ…¢æŸ¥è¯¢
-- åŸå§‹æŸ¥è¯¢
EXPLAIN (ANALYZE, BUFFERS)
SELECT e.name, d.dept_name, p.project_name
FROM employees e
JOIN departments d ON e.dept_id = d.dept_id
JOIN projects p ON e.emp_id = p.manager_id
WHERE e.salary > 50000 AND d.budget > 1000000;

-- åˆ›å»ºä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_emp_salary ON employees (salary);
CREATE INDEX idx_dept_budget ON departments (budget);
CREATE INDEX idx_proj_manager ON projects (manager_id);

-- ä¼˜åŒ–åæŸ¥è¯¢
EXPLAIN (ANALYZE, BUFFERS)
SELECT e.name, d.dept_name, p.project_name
FROM employees e
JOIN departments d ON e.dept_id = d.dept_id
JOIN projects p ON e.emp_id = p.manager_id
WHERE e.salary > 50000 AND d.budget > 1000000;
```

### 8.2 æ‰¹é‡æ“ä½œä¼˜åŒ–

```sql
-- æ‰¹é‡æ’å…¥ä¼˜åŒ–
-- ä¼˜åŒ–å‰
DO $$
DECLARE
    i integer;
BEGIN
    FOR i IN 1..10000 LOOP
        INSERT INTO employees (name, dept_id, salary)
        VALUES ('Employee' || i, (i % 10) + 1, 30000 + (i % 50000));
    END LOOP;
END $$;

-- ä¼˜åŒ–å
INSERT INTO employees (name, dept_id, salary)
SELECT
    'Employee' || generate_series(1, 10000),
    (generate_series(1, 10000) % 10) + 1,
    30000 + (generate_series(1, 10000) % 50000);

-- æ‰¹é‡æ›´æ–°ä¼˜åŒ–
-- ä¼˜åŒ–å‰
UPDATE employees SET salary = salary * 1.1 WHERE dept_id = 1;
UPDATE employees SET salary = salary * 1.1 WHERE dept_id = 2;
UPDATE employees SET salary = salary * 1.1 WHERE dept_id = 3;

-- ä¼˜åŒ–å
UPDATE employees SET salary = salary * 1.1 WHERE dept_id IN (1, 2, 3);
```

### 8.3 åˆ†åŒºè¡¨æ€§èƒ½ä¼˜åŒ–

```sql
-- åˆ†åŒºè¡¨æ€§èƒ½ä¼˜åŒ–
CREATE TABLE sales (
    id BIGSERIAL,
    sale_date DATE,
    amount DECIMAL(10,2),
    customer_id INTEGER
) PARTITION BY RANGE (sale_date);

-- åˆ›å»ºåˆ†åŒº
CREATE TABLE sales_2023 PARTITION OF sales
FOR VALUES FROM ('2023-01-01') TO ('2024-01-01');

CREATE TABLE sales_2024 PARTITION OF sales
FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');

-- åˆ†åŒºæŸ¥è¯¢ä¼˜åŒ–
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM sales WHERE sale_date >= '2024-01-01' AND sale_date < '2024-02-01';

-- åˆ†åŒºè£å‰ª
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM sales WHERE sale_date BETWEEN '2024-01-01' AND '2024-12-31';
```

---

## ä¹ã€æ€§èƒ½è°ƒä¼˜æœ€ä½³å®è·µ

### 9.1 ç´¢å¼•ä¼˜åŒ–ç­–ç•¥

```sql
-- ç´¢å¼•ä¼˜åŒ–ç­–ç•¥
-- 1. åˆ†ææŸ¥è¯¢æ¨¡å¼
SELECT
    schemaname,
    tablename,
    attname,
    n_distinct,
    correlation
FROM pg_stats
WHERE schemaname = 'public'
ORDER BY tablename, attname;

-- 2. åˆ›å»ºå¤åˆç´¢å¼•
CREATE INDEX idx_emp_optimized ON employees (dept_id, salary, hire_date);

-- 3. ç›‘æ§ç´¢å¼•ä½¿ç”¨
SELECT
    schemaname,
    tablename,
    indexname,
    idx_scan,
    idx_tup_read,
    idx_tup_fetch
FROM pg_stat_user_indexes
WHERE idx_scan = 0;  -- æœªä½¿ç”¨çš„ç´¢å¼•
```

### 9.2 æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥

```sql
-- æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥
-- 1. ä½¿ç”¨é€‚å½“çš„JOINç±»å‹
EXPLAIN (ANALYZE, BUFFERS)
SELECT e.name, d.dept_name
FROM employees e
INNER JOIN departments d ON e.dept_id = d.dept_id;

-- 2. é¿å…SELECT *
EXPLAIN (ANALYZE, BUFFERS)
SELECT emp_id, name, salary FROM employees WHERE dept_id = 1;

-- 3. ä½¿ç”¨LIMITé™åˆ¶ç»“æœé›†
EXPLAIN (ANALYZE, BUFFERS)
SELECT * FROM employees ORDER BY salary DESC LIMIT 10;
```

### 9.3 ç³»ç»Ÿé…ç½®ä¼˜åŒ–

```sql
-- ç³»ç»Ÿé…ç½®ä¼˜åŒ–
-- 1. å†…å­˜é…ç½®
ALTER SYSTEM SET shared_buffers = '256MB';
ALTER SYSTEM SET work_mem = '4MB';
ALTER SYSTEM SET maintenance_work_mem = '64MB';

-- 2. æ£€æŸ¥ç‚¹é…ç½®
ALTER SYSTEM SET checkpoint_timeout = '15min';
ALTER SYSTEM SET max_wal_size = '1GB';
ALTER SYSTEM SET checkpoint_completion_target = 0.9;

-- 3. å¹¶å‘é…ç½®
ALTER SYSTEM SET max_connections = 100;
ALTER SYSTEM SET max_prepared_transactions = 0;

-- é‡æ–°åŠ è½½é…ç½®
SELECT pg_reload_conf();
```

---

## åã€ç›¸å…³æ¦‚å¿µ

### 10.1 ä¸Šä½æ¦‚å¿µ

- **æŸ¥è¯¢ä¼˜åŒ–**: æ›´å¹¿æ³›çš„æŸ¥è¯¢ä¼˜åŒ–æœºåˆ¶
- **æ€§èƒ½ç®¡ç†**: ç³»ç»Ÿæ€§èƒ½ç®¡ç†
- **æ•°æ®åº“è°ƒä¼˜**: æ•°æ®åº“æ€§èƒ½è°ƒä¼˜

### 10.2 ä¸‹ä½æ¦‚å¿µ

- **æ‰§è¡Œè®¡åˆ’**: æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
- **æ€§èƒ½ç›‘æ§**: æ€§èƒ½ç›‘æ§æœºåˆ¶
- **ç´¢å¼•ä¼˜åŒ–**: ç´¢å¼•æ€§èƒ½ä¼˜åŒ–
- **æŸ¥è¯¢é‡å†™**: æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯

### 10.3 å¹³è¡Œæ¦‚å¿µ

- **åŸºå‡†æµ‹è¯•**: æ€§èƒ½åŸºå‡†æµ‹è¯•
- **è´Ÿè½½æµ‹è¯•**: ç³»ç»Ÿè´Ÿè½½æµ‹è¯•
- **å®¹é‡è§„åˆ’**: ç³»ç»Ÿå®¹é‡è§„åˆ’
- **åˆ—å­˜å‚¨**: åˆ—å¼å­˜å‚¨æ¶æ„ï¼ˆcstore_fdwã€Citusåˆ—å­˜å‚¨ï¼‰ğŸ†•
- **è¡Œå­˜å‚¨**: è¡Œå¼å­˜å‚¨æ¶æ„ï¼ˆPostgreSQLåŸç”Ÿï¼‰ğŸ†•

---

## åä¸€ã€å‚è€ƒèµ„æº

### 11.1 ç›¸å…³æ–‡æ¡£

- [æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†](./02.01-æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†.md) - æŸ¥è¯¢ä¼˜åŒ–ç†è®ºåŸºç¡€
- [ç´¢å¼•ç»“æ„ä¸ä¼˜åŒ–](./02.02-ç´¢å¼•ç»“æ„ä¸ä¼˜åŒ–.md) - ç´¢å¼•ä¼˜åŒ–å®è·µã€åˆ—å­˜å‚¨ç´¢å¼•ä¼˜åŒ– ğŸ†•
- [ç»Ÿè®¡ä¿¡æ¯ä¸ä»£ä»·æ¨¡å‹](./02.03-ç»Ÿè®¡ä¿¡æ¯ä¸ä»£ä»·æ¨¡å‹.md) - ç»Ÿè®¡ä¿¡æ¯ç®¡ç†
- [å¹¶è¡ŒæŸ¥è¯¢å¤„ç†](./02.05-å¹¶è¡ŒæŸ¥è¯¢å¤„ç†.md) - å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–
- [å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–](../01-æ ¸å¿ƒåŸºç¡€/01.06-å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–.md) - åˆ—å­˜å‚¨æ¶æ„åˆ†æã€åˆ—å‹ç¼©æŠ€æœ¯è¯¦è§£ ğŸ†•
- [æ‰©å±•ç³»ç»Ÿä¸æ’ä»¶å¼€å‘](../03-é«˜çº§ç‰¹æ€§/03.01-æ‰©å±•ç³»ç»Ÿä¸æ’ä»¶å¼€å‘.md) - åˆ—å­˜å‚¨æ‰©å±•ï¼ˆcstore_fdwï¼‰ğŸ†•
- [æ•°æ®ä»“åº“å®è·µæ¡ˆä¾‹](../12-å…¨é¢ä½¿ç”¨åˆ†æ/09-å®è·µæ¡ˆä¾‹/09.05-æ•°æ®ä»“åº“å®è·µæ¡ˆä¾‹.md) - åˆ—å­˜å‚¨å®è·µ ğŸ†•
- [æ€§èƒ½ç¼–ç¨‹æŠ€å·§](../12-å…¨é¢ä½¿ç”¨åˆ†æ/01-ç¨‹åºå‘˜è§†è§’/01.05-æ€§èƒ½ç¼–ç¨‹æŠ€å·§.md) - åˆ—å­˜å‚¨æŸ¥è¯¢ä¼˜åŒ– ğŸ†•
- [æ€§èƒ½è°ƒä¼˜å®è·µ](../04-éƒ¨ç½²è¿ç»´/04.06-æ€§èƒ½è°ƒä¼˜å®è·µ.md) - ç³»ç»Ÿæ€§èƒ½è°ƒä¼˜

### 11.2 å‚è€ƒæ–‡çŒ®

1. PostgreSQL Global Development Group. (2025). PostgreSQL 18 Documentation. <https://www.postgresql.org/docs/18/>
2. Selinger, P. G., et al. (1979). Access path selection in a relational database management system. ACM SIGMOD Record, 8(2), 23-34.
3. Graefe, G. (1995). The Cascades framework for query optimization. IEEE Data Engineering Bulletin, 18(3), 19-29.
4. Ioannidis, Y. E. (1996). Query optimization. ACM Computing Surveys, 28(1), 121-123.
5. PostgreSQL Global Development Group. (2024). PostgreSQL 17 Documentation. <https://www.postgresql.org/docs/17/>

### 11.3 Wikidataå¯¹é½

- **Wikidata ID**: Q192490
- **ç›¸å…³å±æ€§**:
  - P31: Q176165 (instance of: database management system)
  - P178: Q9366 (developer: PostgreSQL Global Development Group)
  - P277: Q193321 (programmed in: C)
  - P348: 18.0 (software version)
- **å¤–éƒ¨é“¾æ¥**:
  - <https://www.postgresql.org/docs/current/using-explain.html>
  - <https://www.postgresql.org/docs/current/monitoring-stats.html>
