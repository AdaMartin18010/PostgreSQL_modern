# å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—-ç§‘å¾·å®šç†ä¸å¯è¡¨è¾¾æ€§

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„

---

## ğŸ“‹ ç›®å½•

- [å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—-ç§‘å¾·å®šç†ä¸å¯è¡¨è¾¾æ€§](#å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—-ç§‘å¾·å®šç†ä¸å¯è¡¨è¾¾æ€§)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—å·¥ä½œåŸç†æ¦‚è¿°](#10-å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 å…³ç³»ä»£æ•°æ“ä½œ](#21-å…³ç³»ä»£æ•°æ“ä½œ)
    - [2.2 å…³ç³»æ¼”ç®—](#22-å…³ç³»æ¼”ç®—)
    - [2.3 è½¬æ¢ç®—æ³•](#23-è½¬æ¢ç®—æ³•)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 å…³ç³»ä»£æ•°å½¢å¼åŒ–](#31-å…³ç³»ä»£æ•°å½¢å¼åŒ–)
    - [3.2 å…³ç³»æ¼”ç®—å½¢å¼åŒ–](#32-å…³ç³»æ¼”ç®—å½¢å¼åŒ–)
    - [3.3 ç­‰ä»·æ€§å®šä¹‰](#33-ç­‰ä»·æ€§å®šä¹‰)
  - [4. å®šç†ä¸è¯æ˜](#4-å®šç†ä¸è¯æ˜)
    - [4.1 Coddå®šç†](#41-coddå®šç†)
    - [4.2 å®‰å…¨è¡¨è¾¾å¼](#42-å®‰å…¨è¡¨è¾¾å¼)
  - [5. å®é™…åº”ç”¨](#5-å®é™…åº”ç”¨)
    - [5.1 SQLå®ç°](#51-sqlå®ç°)
    - [5.2 æŸ¥è¯¢ä¼˜åŒ–](#52-æŸ¥è¯¢ä¼˜åŒ–)
    - [5.3 PostgreSQLæŸ¥è¯¢è§„åˆ’](#53-postgresqlæŸ¥è¯¢è§„åˆ’)
  - [6. ç›¸å…³æ–‡æ¡£](#6-ç›¸å…³æ–‡æ¡£)
    - [6.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#61-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
    - [7.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®](#71-æ ¸å¿ƒç†è®ºæ–‡çŒ®)
    - [7.2 å…³ç³»æ¼”ç®—ç›¸å…³](#72-å…³ç³»æ¼”ç®—ç›¸å…³)
    - [7.3 ç›¸å…³æ–‡æ¡£](#73-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—å·¥ä½œåŸç†æ¦‚è¿°

**Coddå®šç†**ï¼š

Coddå®šç†æ˜¯å…³ç³»æ•°æ®åº“ç†è®ºçš„åŸºçŸ³ï¼Œå®ƒè¯æ˜äº†å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—åœ¨è¡¨è¾¾èƒ½åŠ›ä¸Šçš„ç­‰ä»·æ€§ã€‚æœ¬æ–‡æ¡£æä¾›Coddå®šç†çš„å®Œæ•´è¯æ˜ã€‚

**æŸ¥è¯¢è¯­è¨€åˆ†ç±»æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((æŸ¥è¯¢è¯­è¨€))
    å…³ç³»ä»£æ•°
      é€‰æ‹© Ïƒ
      æŠ•å½± Ï€
      å¹¶ âˆª
      å·® -
      ç¬›å¡å°”ç§¯ Ã—
      è¿æ¥ â‹ˆ
      é™¤ Ã·
    å…³ç³»æ¼”ç®—
      å…ƒç»„å…³ç³»æ¼”ç®—
        å­˜åœ¨é‡è¯ âˆƒ
        å…¨ç§°é‡è¯ âˆ€
        é€»è¾‘è¿æ¥è¯
      åŸŸå…³ç³»æ¼”ç®—
        åŸŸå˜é‡
        åŸŸè¡¨è¾¾å¼
    SQL
      åŸºäºå…³ç³»ä»£æ•°
      åŸºäºå…³ç³»æ¼”ç®—
      æ‰©å±•ç‰¹æ€§
```

**å…³ç³»ä»£æ•° vs å…³ç³»æ¼”ç®—å¯¹æ¯”çŸ©é˜µ**ï¼š

| ç»´åº¦ | å…³ç³»ä»£æ•° | å…³ç³»æ¼”ç®— |
|------|---------|---------|
| **è¡¨ç¤ºæ–¹å¼** | è¿‡ç¨‹å¼ | å£°æ˜å¼ |
| **æ“ä½œç¬¦** | é›†åˆè¿ç®— | é€»è¾‘å…¬å¼ |
| **è¡¨è¾¾èƒ½åŠ›** | ç­‰ä»· | ç­‰ä»· |
| **å¯è¯»æ€§** | ä¸­ç­‰ | é«˜ |
| **å®ç°éš¾åº¦** | ä¸­ç­‰ | è¾ƒé«˜ |
| **ä¼˜åŒ–éš¾åº¦** | ä¸­ç­‰ | è¾ƒé«˜ |

**Coddå®šç†è¯æ˜ç»“æ„å›¾**ï¼š

```mermaid
graph TD
    A[Coddå®šç†] --> B[å…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—]
    A --> C[å…³ç³»æ¼”ç®— âŠ† å…³ç³»ä»£æ•°]
    B --> D[æ„é€ è½¬æ¢ç®—æ³•]
    C --> E[æ„é€ è½¬æ¢ç®—æ³•]
    D --> F[è¯æ˜ç­‰ä»·æ€§]
    E --> F
    F --> G[å®šç†å¾—è¯]

    style A fill:#FFD700
    style G fill:#90EE90
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **å…³ç³»ä»£æ•°**ï¼šå…³ç³»ä»£æ•°çš„åŸºæœ¬æ“ä½œå’Œè¯­ä¹‰
- **å…³ç³»æ¼”ç®—**ï¼šå…ƒç»„å…³ç³»æ¼”ç®—å’ŒåŸŸå…³ç³»æ¼”ç®—
- **Coddå®šç†**ï¼šå…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—ç­‰ä»·æ€§çš„ä¸¥æ ¼è¯æ˜
- **å®é™…åº”ç”¨**ï¼šCoddå®šç†åœ¨SQLå®ç°ä¸­çš„åº”ç”¨

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 å…³ç³»ä»£æ•°æ“ä½œ

**å…³ç³»ä»£æ•°åŸºæœ¬æ“ä½œ**ï¼š

```haskell
-- å…³ç³»ä»£æ•°æ“ä½œ
data RelationalAlgebra =
    Select Condition Relation
  | Project [Attribute] Relation
  | Union Relation Relation
  | Difference Relation Relation
  | CartesianProduct Relation Relation
  | Join Condition Relation Relation
  | Division Relation Relation
```

**å…³ç³»ä»£æ•°æ“ä½œå±‚æ¬¡å›¾**ï¼š

```mermaid
graph TD
    A[å…³ç³»ä»£æ•°] --> B[åŸºæœ¬æ“ä½œ]
    A --> C[å¯¼å‡ºæ“ä½œ]
    B --> D[é€‰æ‹© Ïƒ]
    B --> E[æŠ•å½± Ï€]
    B --> F[å¹¶ âˆª]
    B --> G[å·® -]
    B --> H[ç¬›å¡å°”ç§¯ Ã—]
    C --> I[è¿æ¥ â‹ˆ]
    C --> J[é™¤ Ã·]
    C --> K[äº¤ âˆ©]
    I --> L[ç­‰å€¼è¿æ¥]
    I --> M[è‡ªç„¶è¿æ¥]
    I --> N[å¤–è¿æ¥]

    style A fill:#FFD700
    style B fill:#90EE90
    style C fill:#87CEEB
```

### 2.2 å…³ç³»æ¼”ç®—

**å…ƒç»„å…³ç³»æ¼”ç®—**ï¼š

```haskell
-- å…ƒç»„å…³ç³»æ¼”ç®—
data TupleCalculus =
    TupleVariable String
  | RelationName String
  | Condition TupleCalculus
  | Exists String TupleCalculus
  | ForAll String TupleCalculus
  | And TupleCalculus TupleCalculus
  | Or TupleCalculus TupleCalculus
  | Not TupleCalculus
```

**å…³ç³»æ¼”ç®—è¡¨è¾¾å¼æ ‘**ï¼š

```mermaid
graph TD
    A[å…³ç³»æ¼”ç®—è¡¨è¾¾å¼] --> B[åŸå­å…¬å¼]
    A --> C[é€»è¾‘è¿æ¥]
    A --> D[é‡è¯]
    B --> E[å…³ç³»æˆå‘˜]
    B --> F[æ¯”è¾ƒè¿ç®—]
    C --> G[AND]
    C --> H[OR]
    C --> I[NOT]
    D --> J[âˆƒ å­˜åœ¨]
    D --> K[âˆ€ å…¨ç§°]

    style A fill:#FFD700
    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#87CEEB
```

### 2.3 è½¬æ¢ç®—æ³•

**å…³ç³»ä»£æ•°åˆ°å…³ç³»æ¼”ç®—è½¬æ¢å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[å…³ç³»ä»£æ•°è¡¨è¾¾å¼] --> B{æ“ä½œç±»å‹}
    B -->|é€‰æ‹©| C[è½¬æ¢ä¸ºæ¡ä»¶å…¬å¼]
    B -->|æŠ•å½±| D[è½¬æ¢ä¸ºå­˜åœ¨é‡è¯]
    B -->|å¹¶| E[è½¬æ¢ä¸ºOR]
    B -->|å·®| F[è½¬æ¢ä¸ºAND NOT]
    B -->|è¿æ¥| G[è½¬æ¢ä¸ºANDæ¡ä»¶]
    C --> H[å…³ç³»æ¼”ç®—è¡¨è¾¾å¼]
    D --> H
    E --> H
    F --> H
    G --> H

    style A fill:#FFD700
    style H fill:#90EE90
```

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 å…³ç³»ä»£æ•°å½¢å¼åŒ–

**å…³ç³»ä»£æ•°è¯­ä¹‰**ï¼š

```haskell
-- å…³ç³»ä»£æ•°è¯­ä¹‰
âŸ¦Â·âŸ§ : RelationalAlgebra â†’ Database â†’ Relation

âŸ¦Select cond RâŸ§(DB) = {t | t âˆˆ âŸ¦RâŸ§(DB), âŸ¦condâŸ§(t) = TRUE}
âŸ¦Project attrs RâŸ§(DB) = {t[attrs] | t âˆˆ âŸ¦RâŸ§(DB)}
âŸ¦Union R1 R2âŸ§(DB) = âŸ¦R1âŸ§(DB) âˆª âŸ¦R2âŸ§(DB)
âŸ¦Difference R1 R2âŸ§(DB) = âŸ¦R1âŸ§(DB) - âŸ¦R2âŸ§(DB)
âŸ¦CartesianProduct R1 R2âŸ§(DB) = âŸ¦R1âŸ§(DB) Ã— âŸ¦R2âŸ§(DB)
```

### 3.2 å…³ç³»æ¼”ç®—å½¢å¼åŒ–

**å…ƒç»„å…³ç³»æ¼”ç®—è¯­ä¹‰**ï¼š

```haskell
-- å…ƒç»„å…³ç³»æ¼”ç®—è¯­ä¹‰
âŸ¦Â·âŸ§ : TupleCalculus â†’ Database â†’ Relation

âŸ¦{t | Ï†(t)}âŸ§(DB) = {t | âŸ¦Ï†âŸ§(DB, t) = TRUE}
```

### 3.3 ç­‰ä»·æ€§å®šä¹‰

**è¡¨è¾¾ç­‰ä»·**ï¼š

```haskell
-- å…³ç³»ä»£æ•°è¡¨è¾¾å¼Eå’Œå…³ç³»æ¼”ç®—è¡¨è¾¾å¼Fç­‰ä»·
E â‰¡ F iff forall DB: âŸ¦EâŸ§(DB) = âŸ¦FâŸ§(DB)
```

---

## 4. å®šç†ä¸è¯æ˜

### 4.1 Coddå®šç†

**å®šç†ï¼ˆCoddå®šç†ï¼‰**ï¼šå…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—åœ¨è¡¨è¾¾èƒ½åŠ›ä¸Šç­‰ä»·ã€‚

**è¯æ˜ç»“æ„**ï¼š

```mermaid
graph TD
    A[Coddå®šç†] --> B[æ–¹å‘1: RA âŠ† TRC]
    A --> C[æ–¹å‘2: TRC âŠ† RA]
    B --> D[å¯¹æ¯ä¸ªRAæ“ä½œæ„é€ TRCè¡¨è¾¾å¼]
    C --> E[å¯¹æ¯ä¸ªTRCå…¬å¼æ„é€ RAè¡¨è¾¾å¼]
    D --> F[è¯æ˜è¯­ä¹‰ç­‰ä»·]
    E --> F
    F --> G[å®šç†å¾—è¯]

    style A fill:#FFD700
    style G fill:#90EE90
```

**è¯æ˜æ­¥éª¤**ï¼š

1. **æ–¹å‘1ï¼šå…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—**
   - å¯¹æ¯ä¸ªå…³ç³»ä»£æ•°æ“ä½œï¼Œæ„é€ ç­‰ä»·çš„å…³ç³»æ¼”ç®—è¡¨è¾¾å¼
   - é€‰æ‹©ï¼š{t | t âˆˆ R âˆ§ cond(t)}
   - æŠ•å½±ï¼š{t[attrs] | t âˆˆ R}
   - å¹¶ï¼š{t | t âˆˆ R1 âˆ¨ t âˆˆ R2}
   - å·®ï¼š{t | t âˆˆ R1 âˆ§ t âˆ‰ R2}
   - ç¬›å¡å°”ç§¯ï¼š{t1 âˆª t2 | t1 âˆˆ R1 âˆ§ t2 âˆˆ R2}

2. **æ–¹å‘2ï¼šå…³ç³»æ¼”ç®— âŠ† å…³ç³»ä»£æ•°**
   - å¯¹æ¯ä¸ªå…³ç³»æ¼”ç®—å…¬å¼ï¼Œæ„é€ ç­‰ä»·çš„å…³ç³»ä»£æ•°è¡¨è¾¾å¼
   - åŸå­å…¬å¼ï¼šç›´æ¥å¯¹åº”å…³ç³»
   - é€»è¾‘è¿æ¥ï¼šå¯¹åº”å…³ç³»ä»£æ•°æ“ä½œ
   - é‡è¯ï¼šé€šè¿‡å…³ç³»ä»£æ•°æ“ä½œå®ç°

### 4.2 å®‰å…¨è¡¨è¾¾å¼

**å®‰å…¨è¡¨è¾¾å¼å®šä¹‰**ï¼š

å…³ç³»æ¼”ç®—è¡¨è¾¾å¼æ˜¯å®‰å…¨çš„ï¼Œå½“ä¸”ä»…å½“ç»“æœå…³ç³»æ˜¯æœ‰é™çš„ã€‚

**å®‰å…¨è¡¨è¾¾å¼åˆ¤å®šå†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[å…³ç³»æ¼”ç®—è¡¨è¾¾å¼] --> B{åŒ…å«å¦å®š?}
    B -->|æ˜¯| C{å¦å®šä½œç”¨åŸŸå—é™?}
    B -->|å¦| D[å®‰å…¨]
    C -->|æ˜¯| D
    C -->|å¦| E[ä¸å®‰å…¨]
    D --> F[å¯è½¬æ¢ä¸ºå…³ç³»ä»£æ•°]
    E --> G[æ— æ³•è½¬æ¢]

    style A fill:#FFD700
    style D fill:#90EE90
    style E fill:#FF6B6B
    style F fill:#87CEEB
```

---

## 5. å®é™…åº”ç”¨

### 5.1 SQLå®ç°

**SQLåŸºäºå…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—**ï¼š

```sql
-- å…³ç³»ä»£æ•°: é€‰æ‹© + æŠ•å½±
SELECT name, age
FROM students
WHERE age > 18;

-- å¯¹åº”å…³ç³»æ¼”ç®—: {t[name, age] | t âˆˆ students âˆ§ t.age > 18}

-- å…³ç³»ä»£æ•°: è¿æ¥
SELECT s.name, c.course_name
FROM students s
JOIN enrollments e ON s.id = e.student_id
JOIN courses c ON e.course_id = c.id;

-- å¯¹åº”å…³ç³»æ¼”ç®—: {t[s.name, c.course_name] |
--                  s âˆˆ students âˆ§ e âˆˆ enrollments âˆ§ c âˆˆ courses âˆ§
--                  s.id = e.student_id âˆ§ e.course_id = c.id}
```

### 5.2 æŸ¥è¯¢ä¼˜åŒ–

**åŸºäºå…³ç³»ä»£æ•°çš„ä¼˜åŒ–**ï¼š

```sql
-- åŸå§‹æŸ¥è¯¢ï¼ˆå…³ç³»æ¼”ç®—é£æ ¼ï¼‰
SELECT * FROM orders o
WHERE EXISTS (
    SELECT 1 FROM customers c
    WHERE c.id = o.customer_id AND c.city = 'NYC'
);

-- ä¼˜åŒ–ä¸ºå…³ç³»ä»£æ•°ï¼ˆè¿æ¥ï¼‰
SELECT o.*
FROM orders o
JOIN customers c ON o.customer_id = c.id
WHERE c.city = 'NYC';
```

### 5.3 PostgreSQLæŸ¥è¯¢è§„åˆ’

**æŸ¥è¯¢è§„åˆ’å™¨ä½¿ç”¨å…³ç³»ä»£æ•°**ï¼š

```sql
-- PostgreSQLæŸ¥è¯¢è§„åˆ’å™¨å°†SQLè½¬æ¢ä¸ºå…³ç³»ä»£æ•°
EXPLAIN (ANALYZE, BUFFERS, VERBOSE)
SELECT s.name, COUNT(e.id) as course_count
FROM students s
LEFT JOIN enrollments e ON s.id = e.student_id
GROUP BY s.id, s.name;

-- è§„åˆ’å™¨ä¼šï¼š
-- 1. å°†SQLè§£æä¸ºå…³ç³»ä»£æ•°æ ‘
-- 2. åº”ç”¨å…³ç³»ä»£æ•°ç­‰ä»·å˜æ¢ä¼˜åŒ–
-- 3. é€‰æ‹©æœ€ä¼˜æ‰§è¡Œè®¡åˆ’
```

---

## 6. ç›¸å…³æ–‡æ¡£

### 6.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [æŸ¥è¯¢è¯­è¨€çš„å½¢å¼è¯­ä¹‰ä¸ç­‰ä»·å¾‹](../01-å½¢å¼åŒ–æ–¹æ³•ä¸åŸºç¡€ç†è®º/01.06-æŸ¥è¯¢è¯­è¨€çš„å½¢å¼è¯­ä¹‰ä¸ç­‰ä»·å¾‹.md)
- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](../01-å½¢å¼åŒ–æ–¹æ³•ä¸åŸºç¡€ç†è®º/01.05-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

## 7. å‚è€ƒæ–‡çŒ®

### 7.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®

- **Codd, E. F. (1972). "Relational Completeness of Data Base Sublanguages."**
  - ä¼šè®®: Database Systems, Courant Computer Science Symposia 1972
  - **é‡è¦æ€§**: Coddå®šç†çš„åŸå§‹è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—çš„ç­‰ä»·æ€§å®šç†

- **Codd, E. F. (1970). "A Relational Model of Data for Large Shared Data Banks."**
  - ä¼šè®®: Communications of the ACM 1970
  - **é‡è¦æ€§**: å…³ç³»æ¨¡å‹çš„å¥ åŸºæ€§è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†å…³ç³»æ¨¡å‹å’Œå…³ç³»ä»£æ•°

### 7.2 å…³ç³»æ¼”ç®—ç›¸å…³

- **Abiteboul, S., et al. (1995). "Foundations of Databases."**
  - å‡ºç‰ˆç¤¾: Addison-Wesley
  - **é‡è¦æ€§**: æ•°æ®åº“ç†è®ºçš„ç»å…¸æ•™æ
  - **æ ¸å¿ƒè´¡çŒ®**: è¯¦ç»†é˜è¿°äº†å…³ç³»æ¼”ç®—å’ŒCoddå®šç†

### 7.3 ç›¸å…³æ–‡æ¡£

- [æŸ¥è¯¢è¯­è¨€çš„å½¢å¼è¯­ä¹‰ä¸ç­‰ä»·å¾‹](../01-å½¢å¼åŒ–æ–¹æ³•ä¸åŸºç¡€ç†è®º/01.06-æŸ¥è¯¢è¯­è¨€çš„å½¢å¼è¯­ä¹‰ä¸ç­‰ä»·å¾‹.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„
