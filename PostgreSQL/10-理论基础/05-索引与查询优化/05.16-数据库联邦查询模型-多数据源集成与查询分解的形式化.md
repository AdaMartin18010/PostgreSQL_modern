# æ•°æ®åº“è”é‚¦æŸ¥è¯¢æ¨¡å‹-å¤šæ•°æ®æºé›†æˆä¸æŸ¥è¯¢åˆ†è§£çš„å½¢å¼åŒ–

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®åº“è”é‚¦æŸ¥è¯¢æ¨¡å‹-å¤šæ•°æ®æºé›†æˆä¸æŸ¥è¯¢åˆ†è§£çš„å½¢å¼åŒ–](#æ•°æ®åº“è”é‚¦æŸ¥è¯¢æ¨¡å‹-å¤šæ•°æ®æºé›†æˆä¸æŸ¥è¯¢åˆ†è§£çš„å½¢å¼åŒ–)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 æ•°æ®åº“è”é‚¦æŸ¥è¯¢å·¥ä½œåŸç†æ¦‚è¿°](#10-æ•°æ®åº“è”é‚¦æŸ¥è¯¢å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 æŸ¥è¯¢åˆ†è§£](#21-æŸ¥è¯¢åˆ†è§£)
    - [2.2 ç»“æœåˆå¹¶](#22-ç»“æœåˆå¹¶)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 è”é‚¦æŸ¥è¯¢å½¢å¼åŒ–](#31-è”é‚¦æŸ¥è¯¢å½¢å¼åŒ–)
  - [4. å®é™…åº”ç”¨](#4-å®é™…åº”ç”¨)
    - [4.1 PostgreSQLè”é‚¦æŸ¥è¯¢](#41-postgresqlè”é‚¦æŸ¥è¯¢)
  - [5. ç›¸å…³æ–‡æ¡£](#5-ç›¸å…³æ–‡æ¡£)
    - [5.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#51-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [6. å‚è€ƒæ–‡çŒ®](#6-å‚è€ƒæ–‡çŒ®)

---

## 1. æ¦‚è¿°

### 1.0 æ•°æ®åº“è”é‚¦æŸ¥è¯¢å·¥ä½œåŸç†æ¦‚è¿°

**è”é‚¦æŸ¥è¯¢**ï¼š

è”é‚¦æŸ¥è¯¢å…è®¸åœ¨å¤šä¸ªæ•°æ®æºä¸Šæ‰§è¡Œç»Ÿä¸€æŸ¥è¯¢ï¼Œé€šè¿‡æŸ¥è¯¢åˆ†è§£å’Œç»“æœåˆå¹¶å®ç°ã€‚

**è”é‚¦æŸ¥è¯¢æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((è”é‚¦æŸ¥è¯¢))
    æ•°æ®æºé›†æˆ
      å¼‚æ„æ•°æ®æº
      ç»Ÿä¸€æ¥å£
      æ¨¡å¼æ˜ å°„
    æŸ¥è¯¢åˆ†è§£
      æŸ¥è¯¢é‡å†™
      å­æŸ¥è¯¢åˆ†å‘
      ç»“æœåˆå¹¶
    ä¼˜åŒ–ç­–ç•¥
      ä»£ä»·ä¼°è®¡
      å¹¶è¡Œæ‰§è¡Œ
      ç¼“å­˜ä¼˜åŒ–
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **æ•°æ®æºé›†æˆ**ï¼šå¤šæ•°æ®æºçš„ç»Ÿä¸€è®¿é—®
- **æŸ¥è¯¢åˆ†è§£**ï¼šæŸ¥è¯¢åˆ†è§£å’Œç»“æœåˆå¹¶
- **å®é™…åº”ç”¨**ï¼šPostgreSQLè”é‚¦æŸ¥è¯¢å®ç°

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 æŸ¥è¯¢åˆ†è§£

**æŸ¥è¯¢åˆ†è§£ç®—æ³•**ï¼š

```haskell
-- æŸ¥è¯¢åˆ†è§£
decomposeQuery :: Query -> [DataSource] -> [SubQuery]
decomposeQuery query sources =
    let relevantSources = filter (relevantTo query) sources
        subQueries = map (rewriteQuery query) relevantSources
    in subQueries
```

### 2.2 ç»“æœåˆå¹¶

**ç»“æœåˆå¹¶**ï¼š

```haskell
-- ç»“æœåˆå¹¶
mergeResults :: [ResultSet] -> ResultSet
mergeResults results =
    foldl union [] results
```

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 è”é‚¦æŸ¥è¯¢å½¢å¼åŒ–

**è”é‚¦æŸ¥è¯¢**ï¼š

```haskell
-- è”é‚¦æŸ¥è¯¢å½¢å¼åŒ–
FederatedQuery = (Q, S, D, M)
where
    Q = query
    S = {s1, s2, ..., sn}  -- æ•°æ®æºé›†åˆ
    D = decompose function
    M = merge function
```

---

## 4. å®é™…åº”ç”¨

### 4.1 PostgreSQLè”é‚¦æŸ¥è¯¢

**ä½¿ç”¨postgres_fdw**ï¼š

```sql
-- åˆ›å»ºå¤–éƒ¨æœåŠ¡å™¨
CREATE SERVER foreign_server
FOREIGN DATA WRAPPER postgres_fdw
OPTIONS (host 'remote_host', dbname 'remote_db');

-- åˆ›å»ºç”¨æˆ·æ˜ å°„
CREATE USER MAPPING FOR current_user
SERVER foreign_server
OPTIONS (user 'remote_user', password 'password');

-- åˆ›å»ºå¤–éƒ¨è¡¨
CREATE FOREIGN TABLE remote_table (
    id INTEGER,
    name VARCHAR
) SERVER foreign_server
OPTIONS (schema_name 'public', table_name 'remote_table');

-- æŸ¥è¯¢å¤–éƒ¨è¡¨
SELECT * FROM remote_table;
```

---

## 5. ç›¸å…³æ–‡æ¡£

### 5.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](./1.1.25-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](./README.md)

---

## 6. å‚è€ƒæ–‡çŒ®

[å¾…è¡¥å……]

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„
