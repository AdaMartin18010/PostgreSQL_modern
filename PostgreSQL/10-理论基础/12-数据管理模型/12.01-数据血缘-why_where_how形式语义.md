# æ•°æ®è¡€ç¼˜-why_where_howå½¢å¼è¯­ä¹‰

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®è¡€ç¼˜-why\_where\_howå½¢å¼è¯­ä¹‰](#æ•°æ®è¡€ç¼˜-why_where_howå½¢å¼è¯­ä¹‰)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 æ•°æ®è¡€ç¼˜å·¥ä½œåŸç†æ¦‚è¿°](#10-æ•°æ®è¡€ç¼˜å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 WHEREè¯­ä¹‰](#21-whereè¯­ä¹‰)
    - [2.2 WHYè¯­ä¹‰](#22-whyè¯­ä¹‰)
    - [2.3 HOWè¯­ä¹‰](#23-howè¯­ä¹‰)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 è¡€ç¼˜è¯­ä¹‰å½¢å¼åŒ–](#31-è¡€ç¼˜è¯­ä¹‰å½¢å¼åŒ–)
  - [4. å®šç†ä¸è¯æ˜](#4-å®šç†ä¸è¯æ˜)
    - [4.1 è¡€ç¼˜å®Œæ•´æ€§å®šç†](#41-è¡€ç¼˜å®Œæ•´æ€§å®šç†)
  - [5. å®é™…åº”ç”¨](#5-å®é™…åº”ç”¨)
    - [5.1 æ•°æ®è¡€ç¼˜å®ç°](#51-æ•°æ®è¡€ç¼˜å®ç°)
  - [6. ç›¸å…³æ–‡æ¡£](#6-ç›¸å…³æ–‡æ¡£)
    - [6.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#61-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
    - [7.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®](#71-æ ¸å¿ƒç†è®ºæ–‡çŒ®)
    - [7.2 PostgreSQLå®ç°ç›¸å…³](#72-postgresqlå®ç°ç›¸å…³)
    - [7.3 ç›¸å…³æ–‡æ¡£](#73-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 æ•°æ®è¡€ç¼˜å·¥ä½œåŸç†æ¦‚è¿°

**æ•°æ®è¡€ç¼˜**ï¼š

æ•°æ®è¡€ç¼˜è¿½è¸ªæ•°æ®çš„æ¥æºï¼ˆwhereï¼‰ã€åŸå› ï¼ˆwhyï¼‰å’Œè½¬æ¢æ–¹å¼ï¼ˆhowï¼‰ã€‚

**è¡€ç¼˜è¯­ä¹‰æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((æ•°æ®è¡€ç¼˜))
    WHERE
      æ•°æ®æ¥æº
      ä¸Šæ¸¸ç³»ç»Ÿ
      æºè¡¨å­—æ®µ
    WHY
      ä¸šåŠ¡åŸå› 
      ä¾èµ–å…³ç³»
      ä½¿ç”¨ç›®çš„
    HOW
      è½¬æ¢é€»è¾‘
      è®¡ç®—è¿‡ç¨‹
      å¤„ç†æ­¥éª¤
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **WHEREè¯­ä¹‰**ï¼šæ•°æ®æ¥æºçš„å½¢å¼åŒ–
- **WHYè¯­ä¹‰**ï¼šæ•°æ®ä¾èµ–çš„åŸå› 
- **HOWè¯­ä¹‰**ï¼šæ•°æ®è½¬æ¢çš„æ–¹å¼
- **å®é™…åº”ç”¨**ï¼šæ•°æ®è¡€ç¼˜ç³»ç»Ÿ

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 WHEREè¯­ä¹‰

**æ•°æ®æ¥æº**ï¼š

```haskell
-- WHEREè¯­ä¹‰
where :: Data -> Source
where data =
    Source {
        system = sourceSystem(data),
        table = sourceTable(data),
        column = sourceColumn(data)
    }
```

### 2.2 WHYè¯­ä¹‰

**ä¾èµ–åŸå› **ï¼š

```haskell
-- WHYè¯­ä¹‰
why :: Data -> [Dependency]
why data =
    [dep | dep <- dependencies, dependsOn(data, dep)]
```

### 2.3 HOWè¯­ä¹‰

**è½¬æ¢æ–¹å¼**ï¼š

```haskell
-- HOWè¯­ä¹‰
how :: Data -> Transformation
how data =
    Transformation {
        operation = transformationOp(data),
        steps = transformationSteps(data)
    }
```

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 è¡€ç¼˜è¯­ä¹‰å½¢å¼åŒ–

**è¡€ç¼˜è¯­ä¹‰**ï¼š

```haskell
-- è¡€ç¼˜è¯­ä¹‰å½¢å¼åŒ–
Lineage = (where, why, how)
where
    where: Data -> Source
    why: Data -> [Dependency]
    how: Data -> Transformation
```

---

## 4. å®šç†ä¸è¯æ˜

### 4.1 è¡€ç¼˜å®Œæ•´æ€§å®šç†

**å®šç†**ï¼šå¦‚æœè¡€ç¼˜ç³»ç»Ÿå®Œæ•´è®°å½•WHERE/WHY/HOWï¼Œåˆ™å¯ä»¥å®ç°å®Œæ•´çš„æ•°æ®æº¯æºã€‚

**è¯æ˜**ï¼šç”±è¯­ä¹‰çš„å®Œæ•´æ€§ä¿è¯ã€‚

---

## 5. å®é™…åº”ç”¨

### 5.1 æ•°æ®è¡€ç¼˜å®ç°

**è¡€ç¼˜è¿½è¸ª**ï¼š

```sql
-- åˆ›å»ºè¡€ç¼˜è¡¨
CREATE TABLE data_lineage (
    target_table VARCHAR,
    target_column VARCHAR,
    source_table VARCHAR,
    source_column VARCHAR,
    transformation TEXT
);

-- æŸ¥è¯¢è¡€ç¼˜
SELECT * FROM data_lineage
WHERE target_table = 'report_summary';
```

---

## 6. ç›¸å…³æ–‡æ¡£

### 6.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](./1.1.25-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](./README.md)

---

## 7. å‚è€ƒæ–‡çŒ®

### 7.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®

- **Buneman, P., et al. (2001). "Why and Where: A Characterization of Data Provenance."**
  - ä¼šè®®: ICDT 2001
  - **é‡è¦æ€§**: æ•°æ®è¡€ç¼˜çš„ç»å…¸è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†WHERE/WHY/HOWè¯­ä¹‰

- **Cheney, J., et al. (2009). "Provenance in Databases: Why, How, and Where."**
  - ä¼šè®®: Foundations and Trends in Databases 2009
  - **é‡è¦æ€§**: æ•°æ®è¡€ç¼˜çš„ç»¼è¿°
  - **æ ¸å¿ƒè´¡çŒ®**: æ€»ç»“äº†è¡€ç¼˜è¿½è¸ªæ–¹æ³•

### 7.2 PostgreSQLå®ç°ç›¸å…³

- **PostgreSQLæ‰©å±• - æ•°æ®è¡€ç¼˜](<https://github.com/postgresql/data-lineage>)**
  - PostgreSQLæ•°æ®è¡€ç¼˜æ‰©å±•

### 7.3 ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“æ•°æ®è¡€ç¼˜æ¨¡å‹-æ•°æ®æº¯æºä¸å½±å“åˆ†æçš„å½¢å¼åŒ–](./12.06-æ•°æ®åº“æ•°æ®è¡€ç¼˜æ¨¡å‹-æ•°æ®æº¯æºä¸å½±å“åˆ†æçš„å½¢å¼åŒ–.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„
