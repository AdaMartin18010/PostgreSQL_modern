# цХ░цНох║Ухобшобф╕ОхРИшзД-хоМцХ┤цАзч║жцЭЯф╕Охобшобш╜иш┐╣чЪДх╜вх╝ПхМЦ

> **цЦЗцбгчЙИцЬм**: v1.0
> **цЬАхРОцЫ┤цЦ░**: 2025-01-16
> **чЙИцЬмшжЖчЫЦ**: PostgreSQL 18.x (цОишНР) тнР | 17.x (цОишНР) | 16.x (хЕ╝хо╣)
> **цЦЗцбгчК╢цАБ**: ЁЯЯб цбЖцЮ╢х╖▓хИЫх╗║я╝МхЖЕхо╣х╛ЕхоМхЦД

---

## ЁЯУЛ чЫох╜Х

- [цХ░цНох║Ухобшобф╕ОхРИшзД-хоМцХ┤цАзч║жцЭЯф╕Охобшобш╜иш┐╣чЪДх╜вх╝ПхМЦ](#цХ░цНох║Ухобшобф╕ОхРИшзД-хоМцХ┤цАзч║жцЭЯф╕Охобшобш╜иш┐╣чЪДх╜вх╝ПхМЦ)
  - [ЁЯУЛ чЫох╜Х](#-чЫох╜Х)
  - [1. цжВш┐░](#1-цжВш┐░)
    - [1.0 цХ░цНох║Ухобшобф╕ОхРИшзДх╖еф╜ЬхОЯчРЖцжВш┐░](#10-цХ░цНох║Ухобшобф╕ОхРИшзДх╖еф╜ЬхОЯчРЖцжВш┐░)
    - [1.1 цЬмцЦЗцбгчЪДшМГхЫ┤](#11-цЬмцЦЗцбгчЪДшМГхЫ┤)
  - [2. ца╕х┐ГхЖЕхо╣](#2-ца╕х┐ГхЖЕхо╣)
    - [2.1 хобшобш╜иш┐╣](#21-хобшобш╜иш┐╣)
    - [2.2 хоМцХ┤цАзч║жцЭЯ](#22-хоМцХ┤цАзч║жцЭЯ)
  - [3. х╜вх╝ПхМЦхоЪф╣Й](#3-х╜вх╝ПхМЦхоЪф╣Й)
    - [3.1 хобшобш╜иш┐╣х╜вх╝ПхМЦ](#31-хобшобш╜иш┐╣х╜вх╝ПхМЦ)
  - [4. хоЮщЩЕх║ФчФи](#4-хоЮщЩЕх║ФчФи)
    - [4.1 PostgreSQLхобшоб](#41-postgresqlхобшоб)
  - [5. чЫ╕хЕ│цЦЗцбг](#5-чЫ╕хЕ│цЦЗцбг)
    - [5.1 чРЖшо║хЯ║чбАцЦЗцбг](#51-чРЖшо║хЯ║чбАцЦЗцбг)
  - [6. хПВшАГцЦЗчМо](#6-хПВшАГцЦЗчМо)

---

## 1. цжВш┐░

### 1.0 цХ░цНох║Ухобшобф╕ОхРИшзДх╖еф╜ЬхОЯчРЖцжВш┐░

**хобшобф╕ОхРИшзД**я╝Ъ

цХ░цНох║Ухобшобшо░х╜ХцЙАцЬЙцХ░цНошо┐щЧохТМф┐оцФ╣цУНф╜Ья╝Мчбоф┐ЭхРИшзДцАзхТМхПпш┐╜ц║пцАзуАВ

**хобшобцибхЮЛцАЭч╗┤хп╝хЫ╛**я╝Ъ

```mermaid
mindmap
  root((хобшобхРИшзД))
    хобшобш╜иш┐╣
      цУНф╜Ьшо░х╜Х
      цЧ╢щЧ┤цИ│
      чФицИ╖цаЗшпЖ
    хоМцХ┤цАзч║жцЭЯ
      хоЮф╜УхоМцХ┤цАз
      хПВчЕзхоМцХ┤цАз
      чФицИ╖хоЪф╣ЙхоМцХ┤цАз
    хРИшзДцАз
      GDPRхРИшзД
      SOXхРИшзД
      HIPAAхРИшзД
```

### 1.1 цЬмцЦЗцбгчЪДшМГхЫ┤

цЬмцЦЗцбгц╢╡чЫЦя╝Ъ

- **хобшобш╜иш┐╣**я╝ЪцУНф╜Ьшо░х╜ХхТМхобшобцЧех┐Ч
- **хоМцХ┤цАзч║жцЭЯ**я╝Ъч║жцЭЯчЪДх╜вх╝ПхМЦхоЪф╣Й
- **хРИшзДцАз**я╝Ъц│ХшзДхРИшзДчЪДхоЮчО░
- **хоЮщЩЕх║ФчФи**я╝ЪPostgreSQLхобшобхоЮчО░

---

## 2. ца╕х┐ГхЖЕхо╣

### 2.1 хобшобш╜иш┐╣

**хобшобшо░х╜Х**я╝Ъ

```haskell
-- хобшобшо░х╜Х
data AuditRecord = AuditRecord {
    timestamp :: Timestamp,
    user :: User,
    action :: Action,
    object :: Object,
    result :: Result
}
```

### 2.2 хоМцХ┤цАзч║жцЭЯ

**ч║жцЭЯч▒╗хЮЛ**я╝Ъ

| ч▒╗хЮЛ | хоЪф╣Й | цгАцЯецЧ╢цЬ║ | чд║ф╛Л |
|------|------|---------|------|
| **хоЮф╜УхоМцХ┤цАз** | ф╕╗щФохФпф╕А | цПТхЕе/цЫ┤цЦ░ | PRIMARY KEY |
| **хПВчЕзхоМцХ┤цАз** | хдЦщФоч║жцЭЯ | цПТхЕе/цЫ┤цЦ░/хИащЩд | FOREIGN KEY |
| **чФицИ╖хоЪф╣Й** | шЗкхоЪф╣ЙшзДхИЩ | цПТхЕе/цЫ┤цЦ░ | CHECKч║жцЭЯ |

---

## 3. х╜вх╝ПхМЦхоЪф╣Й

### 3.1 хобшобш╜иш┐╣х╜вх╝ПхМЦ

**хобшобш╜иш┐╣**я╝Ъ

```haskell
-- хобшобш╜иш┐╣х╜вх╝ПхМЦ
AuditTrail = [AuditRecord]
where
    AuditRecord = (t, u, a, o, r)
```

---

## 4. хоЮщЩЕх║ФчФи

### 4.1 PostgreSQLхобшоб

**хРпчФихобшоб**я╝Ъ

```sql
-- хРпчФихобшобцЙйх▒Х
CREATE EXTENSION IF NOT EXISTS pg_audit;

-- щЕНч╜охобшоб
ALTER SYSTEM SET log_statement = 'all';
ALTER SYSTEM SET log_min_duration_statement = 0;

-- цЯечЬЛхобшобцЧех┐Ч
SELECT * FROM pg_stat_statements;
```

**хоМцХ┤цАзч║жцЭЯ**я╝Ъ

```sql
-- ф╕╗щФоч║жцЭЯ
ALTER TABLE accounts ADD PRIMARY KEY (id);

-- хдЦщФоч║жцЭЯ
ALTER TABLE transactions
ADD CONSTRAINT fk_account
FOREIGN KEY (account_id) REFERENCES accounts(id);

-- CHECKч║жцЭЯ
ALTER TABLE accounts
ADD CONSTRAINT balance_check
CHECK (balance >= 0);
```

---

## 5. чЫ╕хЕ│цЦЗцбг

### 5.1 чРЖшо║хЯ║чбАцЦЗцбг

- [х╜вх╝ПшпншиАф╕ОшпБцШОя╝ЪцА╗шо║](./1.1.25-х╜вх╝ПшпншиАф╕ОшпБцШО-цА╗шо║.md)
- [чРЖшо║хЯ║чбАхп╝шИк](./README.md)

---

## 6. хПВшАГцЦЗчМо

[х╛ЕшбехЕЕ]

---

**цЬАхРОцЫ┤цЦ░**: 2025-01-16
**ч╗┤цКдшАЕ**: Documentation Team
**чК╢цАБ**: ЁЯЯб цбЖцЮ╢х╖▓хИЫх╗║я╝МхЖЕхо╣х╛ЕхоМхЦД
