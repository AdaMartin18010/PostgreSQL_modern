# å…³ç³»çº¦æŸä¸è§„èŒƒåŒ–-å‡½æ•°ä¾èµ–ä¸èŒƒå¼è¯æ˜

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-01-16
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„

---

## ğŸ“‹ ç›®å½•

- [å…³ç³»çº¦æŸä¸è§„èŒƒåŒ–-å‡½æ•°ä¾èµ–ä¸èŒƒå¼è¯æ˜](#å…³ç³»çº¦æŸä¸è§„èŒƒåŒ–-å‡½æ•°ä¾èµ–ä¸èŒƒå¼è¯æ˜)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.0 å…³ç³»çº¦æŸä¸è§„èŒƒåŒ–å·¥ä½œåŸç†æ¦‚è¿°](#10-å…³ç³»çº¦æŸä¸è§„èŒƒåŒ–å·¥ä½œåŸç†æ¦‚è¿°)
    - [1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´](#11-æœ¬æ–‡æ¡£çš„èŒƒå›´)
  - [2. æ ¸å¿ƒå†…å®¹](#2-æ ¸å¿ƒå†…å®¹)
    - [2.1 å‡½æ•°ä¾èµ–å®šä¹‰](#21-å‡½æ•°ä¾èµ–å®šä¹‰)
    - [2.2 Armstrongå…¬ç†](#22-armstrongå…¬ç†)
    - [2.3 èŒƒå¼å±‚æ¬¡](#23-èŒƒå¼å±‚æ¬¡)
  - [3. å½¢å¼åŒ–å®šä¹‰](#3-å½¢å¼åŒ–å®šä¹‰)
    - [3.1 å‡½æ•°ä¾èµ–å½¢å¼åŒ–](#31-å‡½æ•°ä¾èµ–å½¢å¼åŒ–)
    - [3.2 é—­åŒ…å½¢å¼åŒ–](#32-é—­åŒ…å½¢å¼åŒ–)
    - [3.3 èŒƒå¼å½¢å¼åŒ–](#33-èŒƒå¼å½¢å¼åŒ–)
  - [4. å®šç†ä¸è¯æ˜](#4-å®šç†ä¸è¯æ˜)
    - [4.1 Armstrongå…¬ç†å®Œå¤‡æ€§å®šç†](#41-armstrongå…¬ç†å®Œå¤‡æ€§å®šç†)
    - [4.2 èŒƒå¼åŒ…å«å…³ç³»å®šç†](#42-èŒƒå¼åŒ…å«å…³ç³»å®šç†)
  - [5. å®é™…åº”ç”¨](#5-å®é™…åº”ç”¨)
    - [5.1 PostgreSQLä¸­çš„å‡½æ•°ä¾èµ–](#51-postgresqlä¸­çš„å‡½æ•°ä¾èµ–)
  - [6. ç›¸å…³æ–‡æ¡£](#6-ç›¸å…³æ–‡æ¡£)
    - [6.1 ç†è®ºåŸºç¡€æ–‡æ¡£](#61-ç†è®ºåŸºç¡€æ–‡æ¡£)
  - [7. å‚è€ƒæ–‡çŒ®](#7-å‚è€ƒæ–‡çŒ®)
    - [7.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®](#71-æ ¸å¿ƒç†è®ºæ–‡çŒ®)
    - [7.2 è§„èŒƒåŒ–ç›¸å…³](#72-è§„èŒƒåŒ–ç›¸å…³)
    - [7.3 ç›¸å…³æ–‡æ¡£](#73-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

### 1.0 å…³ç³»çº¦æŸä¸è§„èŒƒåŒ–å·¥ä½œåŸç†æ¦‚è¿°

**å‡½æ•°ä¾èµ–ç†è®º**ï¼š

å‡½æ•°ä¾èµ–æ˜¯å…³ç³»æ•°æ®åº“è§„èŒƒåŒ–çš„åŸºç¡€ï¼Œç”¨äºæè¿°å±æ€§ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚æœ¬æ–‡æ¡£æä¾›å‡½æ•°ä¾èµ–çš„å½¢å¼åŒ–å®šä¹‰å’ŒèŒƒå¼è¯æ˜ã€‚

**å‡½æ•°ä¾èµ–æ€ç»´å¯¼å›¾**ï¼š

```mermaid
mindmap
  root((å‡½æ•°ä¾èµ–))
    åŸºæœ¬æ¦‚å¿µ
      å‡½æ•°ä¾èµ–å®šä¹‰
      å¹³å‡¡ä¾èµ–
      éå¹³å‡¡ä¾èµ–
      å®Œå…¨ä¾èµ–
      éƒ¨åˆ†ä¾èµ–
      ä¼ é€’ä¾èµ–
    é—­åŒ…è¿ç®—
      Armstrongå…¬ç†
      è‡ªåå¾‹
      å¢å¹¿å¾‹
      ä¼ é€’å¾‹
      é—­åŒ…è®¡ç®—
      å±æ€§é—­åŒ…
    èŒƒå¼å±‚æ¬¡
      1NF
      2NF
      3NF
      BCNF
      4NF
      5NF
```

**å‡½æ•°ä¾èµ–ç±»å‹å¯¹æ¯”çŸ©é˜µ**ï¼š

| ä¾èµ–ç±»å‹ | å®šä¹‰ | ç¤ºä¾‹ | é—®é¢˜ |
|---------|------|------|------|
| **å®Œå…¨ä¾èµ–** | Yå®Œå…¨ä¾èµ–äºX | {å­¦å·,è¯¾ç¨‹}â†’æˆç»© | æ—  |
| **éƒ¨åˆ†ä¾èµ–** | Yéƒ¨åˆ†ä¾èµ–äºX | {å­¦å·,è¯¾ç¨‹}â†’å§“å | å†—ä½™ |
| **ä¼ é€’ä¾èµ–** | Xâ†’Y, Yâ†’Z, Xâ†’Z | å­¦å·â†’ç³»å·â†’ç³»å | å†—ä½™ |
| **å¤šå€¼ä¾èµ–** | Xâ†’â†’Y | è¯¾ç¨‹â†’â†’æ•™å¸ˆ | å†—ä½™ |

**èŒƒå¼åˆ¤å®šå†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[å…³ç³»R] --> B{æ˜¯å¦1NF?}
    B -->|å¦| C[è½¬æ¢ä¸º1NF]
    B -->|æ˜¯| D{æ˜¯å¦2NF?}
    C --> D
    D -->|å¦| E[æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–]
    D -->|æ˜¯| F{æ˜¯å¦3NF?}
    E --> F
    F -->|å¦| G[æ¶ˆé™¤ä¼ é€’ä¾èµ–]
    F -->|æ˜¯| H{æ˜¯å¦BCNF?}
    G --> H
    H -->|å¦| I[æ¶ˆé™¤ä¸»å±æ€§ä¾èµ–]
    H -->|æ˜¯| J[BCNFå®Œæˆ]
    I --> J

    style A fill:#FFD700
    style J fill:#90EE90
    style C fill:#FF6B6B
    style E fill:#FF6B6B
    style G fill:#FF6B6B
    style I fill:#FF6B6B
```

### 1.1 æœ¬æ–‡æ¡£çš„èŒƒå›´

æœ¬æ–‡æ¡£æ¶µç›–ï¼š

- **å‡½æ•°ä¾èµ–**ï¼šå‡½æ•°ä¾èµ–çš„å½¢å¼åŒ–å®šä¹‰å’Œæ€§è´¨
- **Armstrongå…¬ç†**ï¼šå‡½æ•°ä¾èµ–æ¨ç†çš„å…¬ç†ç³»ç»Ÿ
- **èŒƒå¼ç†è®º**ï¼š1NFåˆ°BCNFçš„èŒƒå¼å®šä¹‰å’Œè¯æ˜
- **å®é™…åº”ç”¨**ï¼šå‡½æ•°ä¾èµ–åœ¨æ•°æ®åº“è®¾è®¡ä¸­çš„åº”ç”¨

---

## 2. æ ¸å¿ƒå†…å®¹

### 2.1 å‡½æ•°ä¾èµ–å®šä¹‰

**å‡½æ•°ä¾èµ–å½¢å¼åŒ–**ï¼š

```haskell
-- å‡½æ•°ä¾èµ–
type FunctionalDependency = (AttributeSet, AttributeSet)

-- å‡½æ•°ä¾èµ–æ»¡è¶³
satisfies :: Relation -> FunctionalDependency -> Bool
satisfies R (X, Y) =
    forall t1, t2 in R:
      if t1[X] = t2[X] then t1[Y] = t2[Y]
```

**å‡½æ•°ä¾èµ–ç±»å‹**ï¼š

```mermaid
graph LR
    A[å‡½æ•°ä¾èµ–] --> B[å¹³å‡¡ä¾èµ–]
    A --> C[éå¹³å‡¡ä¾èµ–]
    A --> D[å®Œå…¨ä¾èµ–]
    A --> E[éƒ¨åˆ†ä¾èµ–]
    A --> F[ä¼ é€’ä¾èµ–]

    B --> G[Xâ†’Y, YâŠ†X]
    C --> H[Xâ†’Y, YâŠˆX]
    D --> I[Yå®Œå…¨ä¾èµ–äºX]
    E --> J[Yéƒ¨åˆ†ä¾èµ–äºX]
    F --> K[Xâ†’Yâ†’Z, Xâ†’Z]

    style A fill:#FFD700
    style G fill:#90EE90
    style H fill:#FF6B6B
```

### 2.2 Armstrongå…¬ç†

**Armstrongå…¬ç†ç³»ç»Ÿ**ï¼š

```haskell
-- Armstrongå…¬ç†
data ArmstrongAxiom =
    Reflexivity AttributeSet AttributeSet      -- è‡ªåå¾‹
  | Augmentation FunctionalDependency AttributeSet  -- å¢å¹¿å¾‹
  | Transitivity FunctionalDependency FunctionalDependency  -- ä¼ é€’å¾‹

-- è‡ªåå¾‹: å¦‚æœY âŠ† Xï¼Œåˆ™X â†’ Y
reflexivity :: AttributeSet -> AttributeSet -> FunctionalDependency
reflexivity X Y = (X, Y) where Y âŠ† X

-- å¢å¹¿å¾‹: å¦‚æœX â†’ Yï¼Œåˆ™XZ â†’ YZ
augmentation :: FunctionalDependency -> AttributeSet -> FunctionalDependency
augmentation (X, Y) Z = (X âˆª Z, Y âˆª Z)

-- ä¼ é€’å¾‹: å¦‚æœX â†’ Yä¸”Y â†’ Zï¼Œåˆ™X â†’ Z
transitivity :: FunctionalDependency -> FunctionalDependency -> FunctionalDependency
transitivity (X, Y) (Y', Z) = (X, Z) where Y = Y'
```

**å…¬ç†æ¨å¯¼è¯æ˜æ ‘**ï¼š

```mermaid
graph TD
    A[FDé›†åˆF] --> B[åº”ç”¨è‡ªåå¾‹]
    A --> C[åº”ç”¨å¢å¹¿å¾‹]
    A --> D[åº”ç”¨ä¼ é€’å¾‹]
    B --> E[ç”Ÿæˆæ–°FD]
    C --> E
    D --> E
    E --> F{æ˜¯å¦è¿˜æœ‰æ–°FD?}
    F -->|æ˜¯| B
    F -->|å¦| G[é—­åŒ…F+]

    style A fill:#FFD700
    style G fill:#90EE90
```

### 2.3 èŒƒå¼å±‚æ¬¡

**èŒƒå¼å±‚æ¬¡å›¾**ï¼š

```mermaid
graph TD
    A[æœªè§„èŒƒåŒ–] --> B[1NF]
    B --> C[2NF]
    C --> D[3NF]
    D --> E[BCNF]
    E --> F[4NF]
    F --> G[5NF]

    B --> B1[åŸå­æ€§]
    C --> C1[æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–]
    D --> D1[æ¶ˆé™¤ä¼ é€’ä¾èµ–]
    E --> E1[æ¶ˆé™¤ä¸»å±æ€§ä¾èµ–]
    F --> F1[æ¶ˆé™¤å¤šå€¼ä¾èµ–]
    G --> G1[æ¶ˆé™¤è¿æ¥ä¾èµ–]

    style A fill:#FF6B6B
    style B fill:#FFD700
    style C fill:#FFD700
    style D fill:#90EE90
    style E fill:#90EE90
    style F fill:#87CEEB
    style G fill:#87CEEB
```

---

## 3. å½¢å¼åŒ–å®šä¹‰

### 3.1 å‡½æ•°ä¾èµ–å½¢å¼åŒ–

**å‡½æ•°ä¾èµ–è¯­ä¹‰**ï¼š

```haskell
-- å‡½æ•°ä¾èµ–è¯­ä¹‰
R âŠ¨ X â†’ Y  iff
    forall t1, t2 âˆˆ R:
      if t1[X] = t2[X] then t1[Y] = t2[Y]
```

### 3.2 é—­åŒ…å½¢å¼åŒ–

**å‡½æ•°ä¾èµ–é—­åŒ…**ï¼š

```haskell
-- å‡½æ•°ä¾èµ–é—­åŒ…
F+ = {X â†’ Y | F âŠ¢ X â†’ Y}

-- å±æ€§é—­åŒ…
X+ = {A | F âŠ¢ X â†’ A}
```

### 3.3 èŒƒå¼å½¢å¼åŒ–

**1NFå®šä¹‰**ï¼š

```haskell
-- 1NF: æ‰€æœ‰å±æ€§éƒ½æ˜¯åŸå­çš„
is1NF R = forall attr in attributes(R): isAtomic(attr)
```

**2NFå®šä¹‰**ï¼š

```haskell
-- 2NF: 1NF + æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–
is2NF R FDs =
    is1NF R &&
    forall (X â†’ A) in FDs:
      if A is non-prime then X is not proper subset of key
```

**3NFå®šä¹‰**ï¼š

```haskell
-- 3NF: 2NF + æ¶ˆé™¤ä¼ é€’ä¾èµ–
is3NF R FDs =
    is2NF R FDs &&
    forall (X â†’ A) in FDs:
      if A is non-prime then X is superkey or A is prime
```

---

## 4. å®šç†ä¸è¯æ˜

### 4.1 Armstrongå…¬ç†å®Œå¤‡æ€§å®šç†

**å®šç†**ï¼šArmstrongå…¬ç†æ˜¯å®Œå¤‡çš„ï¼Œå³æ‰€æœ‰ä»Fé€»è¾‘æ¨å¯¼å‡ºçš„å‡½æ•°ä¾èµ–éƒ½å¯ä»¥é€šè¿‡Armstrongå…¬ç†æ¨å¯¼ã€‚

**è¯æ˜æ ‘**ï¼š

```mermaid
graph TD
    A[Armstrongå…¬ç†å®Œå¤‡æ€§] --> B[å¼•ç†1: å±æ€§é—­åŒ…]
    A --> C[å¼•ç†2: å‡½æ•°ä¾èµ–ç­‰ä»·]
    B --> D[X+åŒ…å«æ‰€æœ‰Xå†³å®šçš„å±æ€§]
    C --> E[F âŠ¢ Xâ†’Y âŸº Y âŠ† X+]
    D --> F[æ„é€ åä¾‹]
    E --> F
    F --> G[è¯æ˜å®Œå¤‡æ€§]
    G --> H[å®šç†å¾—è¯]

    style A fill:#FFD700
    style H fill:#90EE90
```

### 4.2 èŒƒå¼åŒ…å«å…³ç³»å®šç†

**å®šç†**ï¼šBCNF âŠ† 3NF âŠ† 2NF âŠ† 1NF

**è¯æ˜**ï¼š

1. **BCNF âŠ† 3NF**ï¼š
   - BCNFè¦æ±‚æ¯ä¸ªå†³å®šå› å­éƒ½æ˜¯è¶…é”®
   - 3NFå…è®¸éä¸»å±æ€§ä¼ é€’ä¾èµ–
   - å› æ­¤BCNFæ›´ä¸¥æ ¼

2. **3NF âŠ† 2NF**ï¼š
   - 3NFè¦æ±‚æ¶ˆé™¤ä¼ é€’ä¾èµ–
   - 2NFåªè¦æ±‚æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–
   - å› æ­¤3NFæ›´ä¸¥æ ¼

3. **2NF âŠ† 1NF**ï¼š
   - 2NFåœ¨1NFåŸºç¡€ä¸Šæ¶ˆé™¤éƒ¨åˆ†ä¾èµ–
   - å› æ­¤2NFåŒ…å«1NF

---

## 5. å®é™…åº”ç”¨

### 5.1 PostgreSQLä¸­çš„å‡½æ•°ä¾èµ–

**å‡½æ•°ä¾èµ–æ£€æµ‹**ï¼š

```sql
-- PostgreSQLæ”¯æŒå‡½æ•°ä¾èµ–æ£€æµ‹ï¼ˆç»Ÿè®¡ä¿¡æ¯ï¼‰
-- åˆ›å»ºè¡¨
CREATE TABLE students (
    student_id SERIAL PRIMARY KEY,
    student_name VARCHAR(100),
    dept_id INT,
    dept_name VARCHAR(100)
);

-- æ·»åŠ å‡½æ•°ä¾èµ–çº¦æŸï¼ˆé€šè¿‡å”¯ä¸€çº¦æŸï¼‰
ALTER TABLE students
ADD CONSTRAINT fd_dept_name
UNIQUE (dept_id, dept_name);

-- éªŒè¯å‡½æ•°ä¾èµ–
-- å¦‚æœdept_idç›¸åŒï¼Œdept_nameå¿…é¡»ç›¸åŒ
```

**èŒƒå¼è®¾è®¡ç¤ºä¾‹**ï¼š

```sql
-- 1NF: æ¶ˆé™¤é‡å¤ç»„
-- è¿å1NF
CREATE TABLE orders_bad (
    order_id INT,
    items VARCHAR(500)  -- åŒ…å«å¤šä¸ªå€¼
);

-- 1NFè®¾è®¡
CREATE TABLE orders (
    order_id INT,
    item_id INT,
    quantity INT
);

-- 2NF: æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–
-- è¿å2NF: {order_id, item_id} â†’ quantity, {order_id} â†’ order_date
CREATE TABLE order_items_bad (
    order_id INT,
    item_id INT,
    quantity INT,
    order_date DATE
);

-- 2NFè®¾è®¡
CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    order_date DATE
);

CREATE TABLE order_items (
    order_id INT REFERENCES orders(order_id),
    item_id INT,
    quantity INT,
    PRIMARY KEY (order_id, item_id)
);
```

---

## 6. ç›¸å…³æ–‡æ¡£

### 6.1 ç†è®ºåŸºç¡€æ–‡æ¡£

- [å½¢å¼è¯­è¨€ä¸è¯æ˜ï¼šæ€»è®º](./1.1.25-å½¢å¼è¯­è¨€ä¸è¯æ˜-æ€»è®º.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](./README.md)

---

## 7. å‚è€ƒæ–‡çŒ®

### 7.1 æ ¸å¿ƒç†è®ºæ–‡çŒ®

- **Codd, E. F. (1970). "A Relational Model of Data for Large Shared Data Banks."**
  - ä¼šè®®: Communications of the ACM 1970
  - **é‡è¦æ€§**: å…³ç³»æ¨¡å‹çš„å¥ åŸºæ€§è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†å…³ç³»æ¨¡å‹å’Œè§„èŒƒåŒ–ç†è®º

- **Armstrong, W. W. (1974). "Dependency Structures of Data Base Relationships."**
  - ä¼šè®®: IFIP Congress 1974
  - **é‡è¦æ€§**: å‡½æ•°ä¾èµ–ç†è®ºçš„ç»å…¸è®ºæ–‡
  - **æ ¸å¿ƒè´¡çŒ®**: æå‡ºäº†Armstrongå…¬ç†ç³»ç»Ÿ

### 7.2 è§„èŒƒåŒ–ç›¸å…³

- **Maier, D. (1983). "The Theory of Relational Databases."**
  - å‡ºç‰ˆç¤¾: Computer Science Press
  - **é‡è¦æ€§**: å…³ç³»æ•°æ®åº“ç†è®ºçš„ç»å…¸æ•™æ
  - **æ ¸å¿ƒè´¡çŒ®**: ç³»ç»Ÿé˜è¿°äº†è§„èŒƒåŒ–ç†è®º

### 7.3 ç›¸å…³æ–‡æ¡£

- [BCNFä¸3NF-å®Œæ•´è¯æ˜ç¨¿](./09.02-BCNFä¸3NF-å®Œæ•´è¯æ˜ç¨¿.md)
- [ç†è®ºåŸºç¡€å¯¼èˆª](../README.md)

---

**æœ€åæ›´æ–°**: 2025-01-16
**ç»´æŠ¤è€…**: Documentation Team
**çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶å·²åˆ›å»ºï¼Œå†…å®¹å¾…å®Œå–„
