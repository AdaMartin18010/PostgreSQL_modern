# 01 | å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹

> **å·¥å…·ç±»å‹**: Webåº”ç”¨ + CLI
> **å¼€å‘çŠ¶æ€**: âœ… Alphaç‰ˆæœ¬å·²å‘å¸ƒ
> **GitHub**: <https://github.com/db-theory/concurrency-decision-helper>
> **ğŸ“– æ¦‚å¿µè¯å…¸å¼•ç”¨**ï¼šæœ¬æ–‡æ¡£ä¸­æ¶‰åŠçš„ Concurrency Controlã€MVCCã€2PLã€Lock ç­‰æ¦‚å¿µå®šä¹‰ä¸ [æ ¸å¿ƒæ¦‚å¿µè¯å…¸](../00-ç†è®ºæ¡†æ¶æ€»è§ˆ/01-æ ¸å¿ƒæ¦‚å¿µè¯å…¸.md) ä¿æŒä¸€è‡´ã€‚å¦‚å‘ç°ä¸ä¸€è‡´ï¼Œè¯·ä»¥æ ¸å¿ƒæ¦‚å¿µè¯å…¸ä¸ºå‡†ã€‚

---

## ğŸ“‘ ç›®å½•

- [01 | å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹](#01--å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ä¸€ã€å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹èƒŒæ™¯ä¸æ¼”è¿›](#ä¸€å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹èƒŒæ™¯ä¸æ¼”è¿›)
    - [0.1 ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ï¼Ÿ](#01-ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹)
    - [0.2 å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹çš„æ ¸å¿ƒæŒ‘æˆ˜](#02-å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹çš„æ ¸å¿ƒæŒ‘æˆ˜)
  - [äºŒã€å·¥å…·æ¦‚è¿°](#äºŒå·¥å…·æ¦‚è¿°)
    - [1.1 åŠŸèƒ½å®šä½](#11-åŠŸèƒ½å®šä½)
    - [1.2 é€‚ç”¨åœºæ™¯](#12-é€‚ç”¨åœºæ™¯)
  - [äºŒã€éƒ¨ç½²ä¸ä½¿ç”¨](#äºŒéƒ¨ç½²ä¸ä½¿ç”¨)
    - [2.1 å¿«é€Ÿéƒ¨ç½²](#21-å¿«é€Ÿéƒ¨ç½²)
    - [2.2 ä½¿ç”¨æŒ‡å—](#22-ä½¿ç”¨æŒ‡å—)
      - [2.1 å¿«é€Ÿå¼€å§‹](#21-å¿«é€Ÿå¼€å§‹)
    - [2.2 è¾“å…¥é…ç½®](#22-è¾“å…¥é…ç½®)
    - [2.3 è¾“å‡ºç»“æœ](#23-è¾“å‡ºç»“æœ)
  - [ä¸‰ã€æŠ€æœ¯å®ç°](#ä¸‰æŠ€æœ¯å®ç°)
    - [3.1 ç³»ç»Ÿæ¶æ„](#31-ç³»ç»Ÿæ¶æ„)
    - [3.2 æ ¸å¿ƒä»£ç ï¼ˆRustå®ç°ï¼‰](#32-æ ¸å¿ƒä»£ç rustå®ç°)
  - [å››ã€å†³ç­–ç®—æ³•](#å››å†³ç­–ç®—æ³•)
    - [4.1 å†³ç­–æ ‘å®ç°](#41-å†³ç­–æ ‘å®ç°)
    - [4.2 æ€§èƒ½é¢„æµ‹æ¨¡å‹](#42-æ€§èƒ½é¢„æµ‹æ¨¡å‹)
  - [äº”ã€æ¡ˆä¾‹æ¼”ç¤º](#äº”æ¡ˆä¾‹æ¼”ç¤º)
    - [æ¡ˆä¾‹1: ç”µå•†ç§’æ€](#æ¡ˆä¾‹1-ç”µå•†ç§’æ€)
    - [æ¡ˆä¾‹2: é‡‘èäº¤æ˜“](#æ¡ˆä¾‹2-é‡‘èäº¤æ˜“)
  - [å…­ã€å®Œæ•´å®ç°ä»£ç ](#å…­å®Œæ•´å®ç°ä»£ç )
    - [6.1 å†³ç­–æ ‘å¼•æ“å®Œæ•´å®ç°](#61-å†³ç­–æ ‘å¼•æ“å®Œæ•´å®ç°)
    - [6.2 Webå‰ç«¯å®Œæ•´å®ç°](#62-webå‰ç«¯å®Œæ•´å®ç°)
  - [ä¸ƒã€å®é™…éƒ¨ç½²æ¡ˆä¾‹](#ä¸ƒå®é™…éƒ¨ç½²æ¡ˆä¾‹)
    - [7.1 æ¡ˆä¾‹: æŸå…¬å¸ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#71-æ¡ˆä¾‹-æŸå…¬å¸ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
    - [7.2 æ¡ˆä¾‹: å¼€æºç¤¾åŒºä½¿ç”¨åé¦ˆ](#72-æ¡ˆä¾‹-å¼€æºç¤¾åŒºä½¿ç”¨åé¦ˆ)
  - [å…«ã€åä¾‹ä¸é”™è¯¯ä½¿ç”¨](#å…«åä¾‹ä¸é”™è¯¯ä½¿ç”¨)
    - [åä¾‹1: å¿½ç•¥æ€§èƒ½é¢„æµ‹å¯¼è‡´ç³»ç»Ÿå´©æºƒ](#åä¾‹1-å¿½ç•¥æ€§èƒ½é¢„æµ‹å¯¼è‡´ç³»ç»Ÿå´©æºƒ)
    - [åä¾‹2: è¿‡åº¦ä¾èµ–å·¥å…·å¿½ç•¥ä¸šåŠ¡éœ€æ±‚](#åä¾‹2-è¿‡åº¦ä¾èµ–å·¥å…·å¿½ç•¥ä¸šåŠ¡éœ€æ±‚)
    - [åä¾‹3: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ä½¿ç”¨ä¸å½“](#åä¾‹3-å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ä½¿ç”¨ä¸å½“)
    - [åä¾‹4: å¿½ç•¥é€‰æ‹©éªŒè¯](#åä¾‹4-å¿½ç•¥é€‰æ‹©éªŒè¯)
    - [åä¾‹5: å†³ç­–è§„åˆ™é…ç½®é”™è¯¯](#åä¾‹5-å†³ç­–è§„åˆ™é…ç½®é”™è¯¯)
    - [åä¾‹6: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ç›‘æ§ä¸è¶³](#åä¾‹6-å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ç›‘æ§ä¸è¶³)

---

## ä¸€ã€å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹èƒŒæ™¯ä¸æ¼”è¿›

### 0.1 ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ï¼Ÿ

**å†å²èƒŒæ™¯**:

åœ¨æ•°æ®åº“ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œå¦‚ä½•é€‰æ‹©åˆé€‚çš„å¹¶å‘æ§åˆ¶æ–¹æ¡ˆä¸€ç›´æ˜¯ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚1970å¹´ä»£ï¼ŒSystem Ræå‡ºäº†åŸºäºé”çš„å¹¶å‘æ§åˆ¶ï¼Œä½†æ–¹æ¡ˆé€‰æ‹©éœ€è¦æ·±å…¥ç†è§£å„ç§æŠ€æœ¯çš„ä¼˜ç¼ºç‚¹ã€‚å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹é€šè¿‡äº¤äº’å¼é—®ç­”å’Œå†³ç­–æ ‘ï¼Œå¸®åŠ©æ¶æ„å¸ˆå¿«é€Ÿé€‰æ‹©åˆé€‚çš„å¹¶å‘æ§åˆ¶æ–¹æ¡ˆã€ç†è§£å„ç§æŠ€æœ¯çš„æƒè¡¡ã€é¿å…å¸¸è§çš„è®¾è®¡é”™è¯¯ã€‚

**ç†è®ºåŸºç¡€**:

```text
å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹çš„æ ¸å¿ƒ:
â”œâ”€ é—®é¢˜: å¦‚ä½•è‡ªåŠ¨åŒ–é€‰æ‹©å¹¶å‘æ§åˆ¶æ–¹æ¡ˆï¼Ÿ
â”œâ”€ ç†è®º: å¹¶å‘æ§åˆ¶ç†è®ºï¼ˆéš”ç¦»çº§åˆ«ã€é”ã€MVCCï¼‰
â””â”€ å·¥å…·: è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå†³ç­–æ ‘ã€æ€§èƒ½é¢„æµ‹ã€ä»£ç ç”Ÿæˆï¼‰

ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹?
â”œâ”€ æ— å·¥å…·: é€‰æ‹©ç›²ç›®ï¼Œæ•ˆç‡ä½
â”œâ”€ ç»éªŒæ–¹æ³•: ä¸å®Œæ•´ï¼Œå¯èƒ½æœ‰é—æ¼
â””â”€ è‡ªåŠ¨åŒ–å·¥å…·: ç³»ç»ŸåŒ–ã€é«˜æ•ˆã€å¯éªŒè¯
```

**å®é™…åº”ç”¨èƒŒæ™¯**:

```text
å¹¶å‘æ§åˆ¶å†³ç­–å·¥å…·æ¼”è¿›:
â”œâ”€ æ—©æœŸæ–¹æ³• (1970s-1990s)
â”‚   â”œâ”€ ç»éªŒå¼é€‰æ‹©
â”‚   â”œâ”€ é—®é¢˜: æ•ˆç‡ä½
â”‚   â””â”€ ç»“æœ: é€‰æ‹©ä¸å½“
â”‚
â”œâ”€ ç³»ç»ŸåŒ–æ–¹æ³• (1990s-2010s)
â”‚   â”œâ”€ å†³ç­–æŒ‡å—
â”‚   â”œâ”€ æ€§èƒ½æµ‹è¯•
â”‚   â””â”€ é€‰æ‹©æ•ˆç‡æå‡
â”‚
â””â”€ è‡ªåŠ¨åŒ–å·¥å…· (2010s+)
    â”œâ”€ å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹
    â”œâ”€ äº¤äº’å¼é—®ç­”
    â””â”€ æ™ºèƒ½æ¨è
```

**ä¸ºä»€ä¹ˆå¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹é‡è¦ï¼Ÿ**

1. **æ•ˆç‡æå‡**: è‡ªåŠ¨åŒ–é€‰æ‹©ï¼Œæé«˜æ•ˆç‡
2. **æ–¹æ¡ˆä¼˜åŒ–**: è‡ªåŠ¨æ¨èæœ€ä¼˜æ–¹æ¡ˆï¼Œä¼˜åŒ–æ€§èƒ½
3. **çŸ¥è¯†ç§¯ç´¯**: ç§¯ç´¯å’Œåˆ†äº«é€‰æ‹©ç»éªŒ
4. **ç³»ç»Ÿè®¾è®¡**: ä¸ºç³»ç»Ÿè®¾è®¡æä¾›å‚è€ƒ

**åä¾‹: æ— å·¥å…·çš„æ–¹æ¡ˆé€‰æ‹©é—®é¢˜**:

```text
é”™è¯¯è®¾è®¡: æ— å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ï¼Œç»éªŒé€‰æ‹©
â”œâ”€ åœºæ™¯: æ–°ç³»ç»Ÿå¹¶å‘æ§åˆ¶æ–¹æ¡ˆé€‰æ‹©
â”œâ”€ é—®é¢˜: åŸºäºç»éªŒé€‰æ‹©
â”œâ”€ ç»“æœ: é€‰æ‹©ä¸å½“ï¼Œæ€§èƒ½å·®
â””â”€ æ•ˆç‡: é€‰æ‹©æ—¶é—´æ•°å‘¨ï¼Œå¯èƒ½é”™è¯¯ âœ—

æ­£ç¡®è®¾è®¡: ä½¿ç”¨å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹
â”œâ”€ æ–¹æ¡ˆ: ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·
â”œâ”€ ç»“æœ: å¿«é€Ÿé€‰æ‹©ï¼Œæ–¹æ¡ˆæ­£ç¡®
â””â”€ æ•ˆç‡: é€‰æ‹©æ—¶é—´<5åˆ†é’Ÿï¼Œå‡†ç¡®ç‡é«˜ âœ“
```

### 0.2 å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹çš„æ ¸å¿ƒæŒ‘æˆ˜

**å†å²èƒŒæ™¯**:

å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜åŒ…æ‹¬ï¼šå¦‚ä½•å‡†ç¡®å»ºæ¨¡å„ç§æ–¹æ¡ˆã€å¦‚ä½•é‡åŒ–å„ç§å½±å“å› ç´ ã€å¦‚ä½•é€‚åº”ä¸åŒåœºæ™¯ã€å¦‚ä½•éªŒè¯é€‰æ‹©æ­£ç¡®æ€§ç­‰ã€‚è¿™äº›æŒ‘æˆ˜ä¿ƒä½¿å†³ç­–æ–¹æ³•ä¸æ–­ä¼˜åŒ–ã€‚

**ç†è®ºåŸºç¡€**:

```text
å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹æŒ‘æˆ˜:
â”œâ”€ å»ºæ¨¡æŒ‘æˆ˜: å¦‚ä½•å‡†ç¡®å»ºæ¨¡å„ç§æ–¹æ¡ˆ
â”œâ”€ é‡åŒ–æŒ‘æˆ˜: å¦‚ä½•é‡åŒ–å„ç§å½±å“å› ç´ 
â”œâ”€ é€‚åº”æŒ‘æˆ˜: å¦‚ä½•é€‚åº”ä¸åŒåœºæ™¯
â””â”€ éªŒè¯æŒ‘æˆ˜: å¦‚ä½•éªŒè¯é€‰æ‹©æ­£ç¡®æ€§

å†³ç­–åŠ©æ‰‹è§£å†³æ–¹æ¡ˆ:
â”œâ”€ å»ºæ¨¡: å†³ç­–æ ‘ã€è§„åˆ™å¼•æ“
â”œâ”€ é‡åŒ–: æ€§èƒ½æµ‹è¯•ã€ç‰¹å¾å·¥ç¨‹
â”œâ”€ é€‚åº”: åœºæ™¯è¯†åˆ«ã€è‡ªé€‚åº”è°ƒæ•´
â””â”€ éªŒè¯: å®é™…æµ‹è¯•éªŒè¯
```

---

## äºŒã€å·¥å…·æ¦‚è¿°

### 1.1 åŠŸèƒ½å®šä½

**æ ¸å¿ƒä»·å€¼**: 5åˆ†é’Ÿå¾—åˆ°ä¸“å®¶çº§å¹¶å‘æ§åˆ¶æ–¹æ¡ˆ

**è§£å†³ç—›ç‚¹**:

- âŒ ä¸çŸ¥é“é€‰å“ªä¸ªéš”ç¦»çº§åˆ«
- âŒ ä¹è§‚é” vs æ‚²è§‚é”éš¾ä»¥æŠ‰æ‹©
- âŒ CAPæƒè¡¡ä¸æ¸…æ¥š
- âŒ ç¼ºä¹æ€§èƒ½æ•°æ®æ”¯æ’‘

**å·¥å…·æä¾›**:

- âœ… äº¤äº’å¼é—®ç­”
- âœ… è‡ªåŠ¨æ¨èæ–¹æ¡ˆ
- âœ… æ€§èƒ½é¢„æµ‹
- âœ… ä»£ç æ¨¡æ¿ç”Ÿæˆ
- âœ… å†³ç­–ç†ç”±è§£é‡Š

### 1.2 é€‚ç”¨åœºæ™¯

| ä½¿ç”¨è€… | åœºæ™¯ | æ”¶ç›Š |
|-------|------|------|
| **æ¶æ„å¸ˆ** | æ–°é¡¹ç›®æŠ€æœ¯é€‰å‹ | èŠ‚çœ2å‘¨è°ƒç ”æ—¶é—´ |
| **å¼€å‘è€…** | æ€§èƒ½é—®é¢˜æ’æŸ¥ | å¿«é€Ÿå®šä½æ–¹æ¡ˆ |
| **DBA** | é…ç½®ä¼˜åŒ– | æ•°æ®æ”¯æ’‘å†³ç­– |
| **å­¦ç”Ÿ** | å­¦ä¹ å¹¶å‘æ§åˆ¶ | ç†è®ºç»“åˆå®è·µ |

---

## äºŒã€éƒ¨ç½²ä¸ä½¿ç”¨

### 2.1 å¿«é€Ÿéƒ¨ç½²

**æ–¹å¼1: Docker Composeï¼ˆæ¨èï¼Œä¸€é”®å¯åŠ¨ï¼‰**

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd DataBaseTheory/90-äº‹åŠ¡ä¸å¹¶å‘è®¾è®¡ç†è®ºä½“ç³»/scripts/decision-assistant

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x start.sh

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./start.sh dev

# æˆ–å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
./start.sh prod
```

**è®¿é—®åœ°å€**:

- å‰ç«¯Webç•Œé¢: <http://localhost:5173>
- åç«¯API: <http://localhost:8080>
- APIæ–‡æ¡£: <http://localhost:8080/docs>

**Docker Composeé…ç½®** (`docker-compose.yml`):

```yaml
version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - RUST_LOG=info
      - DATABASE_URL=postgresql://user:pass@db:5432/decision_helper
    depends_on:
      - db
    volumes:
      - ./backend:/app
    command: cargo run

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://localhost:8080
    volumes:
      - ./frontend:/app
    command: npm run dev

  db:
    image: postgres:16
    environment:
      - POSTGRES_DB=decision_helper
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

volumes:
  postgres_data:
```

**æ–¹å¼2: æœ¬åœ°å¼€å‘ï¼ˆæ— éœ€Dockerï¼‰**

**åç«¯ï¼ˆRust + Axumï¼‰**:

```bash
# è¿›å…¥åç«¯ç›®å½•
cd scripts/decision-assistant/backend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
cargo build

# è¿è¡Œåç«¯æœåŠ¡
cargo run

# åç«¯è¿è¡Œåœ¨ http://localhost:8080
```

**å‰ç«¯ï¼ˆReact + TypeScript + Viteï¼‰**:

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd scripts/decision-assistant/frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å‰ç«¯è¿è¡Œåœ¨ http://localhost:5173
```

**æ–¹å¼3: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**

```bash
# æ„å»ºç”Ÿäº§é•œåƒ
docker-compose -f docker-compose.prod.yml build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f
```

**æŠ€æœ¯æ ˆç¡®è®¤**:

- âœ… å‰ç«¯: React 18 + TypeScript + Vite
- âœ… åç«¯: Rust 1.70+ + Axum 0.7
- âœ… æ•°æ®åº“: PostgreSQL 16ï¼ˆå¯é€‰ï¼Œç”¨äºå­˜å‚¨å†å²æ¨èï¼‰
- âœ… å®¹å™¨åŒ–: Docker + Docker Compose

### 2.2 ä½¿ç”¨æŒ‡å—

#### 2.1 å¿«é€Ÿå¼€å§‹

**æ–¹å¼1: Webç•Œé¢**:

```bash
# è®¿é—®åœ¨çº¿ç‰ˆæœ¬
https://tools.db-theory.org/decision-helper

# æˆ–æœ¬åœ°è¿è¡Œ
docker run -p 8080:8080 db-tools/decision-helper:latest
```

**ç•Œé¢æˆªå›¾**:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ v1.0.0                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  æ­¥éª¤ 1/5: ä¸šåŠ¡åœºæ™¯                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ è¯·é€‰æ‹©æ‚¨çš„ä¸šåŠ¡åœºæ™¯:                           â”‚     â”‚
â”‚  â”‚ â—‹ ç”µå•†ç§’æ€                                   â”‚     â”‚
â”‚  â”‚ â—‹ é‡‘èäº¤æ˜“                                   â”‚     â”‚
â”‚  â”‚ â— ç¤¾äº¤ç½‘ç»œ                                   â”‚     â”‚
â”‚  â”‚ â—‹ IoTæ—¶åºæ•°æ®                                â”‚     â”‚
â”‚  â”‚ â—‹ å®æ—¶åˆ†æ                                   â”‚     â”‚
â”‚  â”‚ â—‹ è‡ªå®šä¹‰                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                      â”‚
â”‚  [ä¸Šä¸€æ­¥]                [ä¸‹ä¸€æ­¥ â†’]                   â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–¹å¼2: å‘½ä»¤è¡Œ**:

```bash
# å®‰è£…CLI
cargo install db-decision-helper

# äº¤äº’å¼é—®ç­”
db-helper interactive

# ä¸€é”®æ¨èï¼ˆåŸºäºåœºæ™¯ï¼‰
db-helper recommend --scenario seckill

# JSONé…ç½®æ–‡ä»¶
db-helper recommend --config my-system.json
```

### 2.2 è¾“å…¥é…ç½®

**å®Œæ•´è¾“å…¥ç¤ºä¾‹** (JSONæ ¼å¼):

```json
{
  "scenario": {
    "type": "e-commerce",
    "sub_type": "seckill"
  },
  "requirements": {
    "concurrent_users": 100000,
    "peak_qps": 50000,
    "consistency": "strong",
    "availability_target": 99.9,
    "latency_target_p99": 100
  },
  "workload": {
    "read_write_ratio": "1:10",
    "transaction_size": "small",
    "hot_spot": true,
    "data_size": "100GB"
  },
  "infrastructure": {
    "database": "PostgreSQL 16",
    "cpu_cores": 16,
    "memory_gb": 64,
    "storage_type": "NVMe SSD",
    "network": "10Gbps"
  },
  "constraints": {
    "cannot_modify_schema": false,
    "must_use_orm": false,
    "budget": "medium"
  }
}
```

### 2.3 è¾“å‡ºç»“æœ

**æ¨èæ–¹æ¡ˆç¤ºä¾‹**:

```json
{
  "recommendation": {
    "isolation_level": "Read Committed",
    "concurrency_control": {
      "type": "Optimistic Locking",
      "implementation": "version field",
      "retry_strategy": "exponential backoff"
    },
    "caching": {
      "layer": "Redis",
      "strategy": "pre-decrement",
      "ttl": 3600
    },
    "database_config": {
      "shared_buffers": "16GB",
      "work_mem": "64MB",
      "max_connections": 200,
      "synchronous_commit": "off"
    }
  },
  "predictions": {
    "expected_tps": 55000,
    "expected_avg_latency_ms": 18,
    "expected_p99_latency_ms": 95,
    "confidence": 0.92
  },
  "rationale": [
    {
      "decision": "Read Committed isolation level",
      "reason": "High concurrency requirement (100K users) needs minimal lock contention. RC provides sufficient consistency for seckill scenario while maximizing throughput.",
      "tradeoff": "Allows non-repeatable reads, but acceptable for seckill use case"
    },
    {
      "decision": "Optimistic Locking with version field",
      "reason": "Write conflicts are expected but relatively rare (hot spot on inventory, not all rows). Optimistic approach avoids lock acquisition overhead for majority of transactions.",
      "tradeoff": "Requires application-level retry logic"
    },
    {
      "decision": "Redis pre-decrement",
      "reason": "Database bottleneck predicted at 15K TPS without caching. Redis atomic DECR filters 98% of requests, reducing DB load by 50Ã—.",
      "tradeoff": "Introduces eventual consistency window (<100ms), requires Redis-DB sync job"
    }
  ],
  "alternatives": [
    {
      "approach": "Serializable SSI",
      "pros": "Strongest consistency guarantee",
      "cons": "Performance penalty ~60%, expected TPS only 22K",
      "when_to_use": "If data integrity is more critical than performance"
    },
    {
      "approach": "Pessimistic Locking (SELECT FOR UPDATE)",
      "pros": "Simple implementation, no retries needed",
      "cons": "High lock contention, expected TPS only 12K",
      "when_to_use": "Low concurrency scenarios (<100 concurrent users)"
    }
  ],
  "code_templates": {
    "rust": "https://github.com/db-theory/templates/blob/main/seckill.rs",
    "java": "https://github.com/db-theory/templates/blob/main/Seckill.java",
    "python": "https://github.com/db-theory/templates/blob/main/seckill.py"
  },
  "monitoring": {
    "key_metrics": [
      "TPS",
      "P99 latency",
      "Redis-DB consistency lag",
      "Optimistic lock retry rate"
    ],
    "alerts": [
      "TPS < 40K for 5min â†’ Scale out",
      "P99 latency > 150ms â†’ Check slow queries",
      "Retry rate > 10% â†’ Review contention hotspots"
    ]
  },
  "references": [
    "09-å·¥ä¸šæ¡ˆä¾‹åº“/01-ç”µå•†ç§’æ€ç³»ç»Ÿ.md",
    "02-è®¾è®¡æƒè¡¡åˆ†æ/04-æ€§èƒ½-æ­£ç¡®æ€§æƒè¡¡.md"
  ]
}
```

---

## ä¸‰ã€æŠ€æœ¯å®ç°

### 3.1 ç³»ç»Ÿæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å†³ç­–åŠ©æ‰‹ç³»ç»Ÿæ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Web Frontend     â”‚â”€â”€â”€â”€â†’â”‚   API Gateway    â”‚    â”‚
â”‚  â”‚   (React + TS)     â”‚     â”‚   (Axum)         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          Decision Engine                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ Rule Engine     â”‚  â”‚ ML Predictor    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ (å†³ç­–æ ‘éå†)     â”‚  â”‚ (æ€§èƒ½é¢„æµ‹)       â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚           â”‚                    â”‚           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚      Knowledge Base               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - ç†è®ºæ¨¡å‹ (LSEM)                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - å†³ç­–è§„åˆ™ (1000+æ¡)             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - æ€§èƒ½æ•°æ® (å®éªŒç»“æœ)             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  - æ¡ˆä¾‹åº“ (10+åœºæ™¯)               â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚          Code Generator                  â”‚       â”‚
â”‚  â”‚  - Rustæ¨¡æ¿                               â”‚       â”‚
â”‚  â”‚  - Javaæ¨¡æ¿                               â”‚       â”‚
â”‚  â”‚  - Pythonæ¨¡æ¿                             â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒä»£ç ï¼ˆRustå®ç°ï¼‰

**å†³ç­–å¼•æ“**:

```rust
use serde::{Deserialize, Serialize};

#[derive(Deserialize)]
pub struct UserInput {
    scenario: ScenarioType,
    requirements: Requirements,
    workload: Workload,
    infrastructure: Infrastructure,
}

#[derive(Serialize)]
pub struct Recommendation {
    isolation_level: IsolationLevel,
    concurrency_control: ConcurrencyStrategy,
    predictions: PerformancePrediction,
    rationale: Vec<DecisionReason>,
    alternatives: Vec<Alternative>,
}

pub struct DecisionEngine {
    rule_base: RuleBase,
    ml_predictor: MLPredictor,
    knowledge_base: KnowledgeBase,
}

impl DecisionEngine {
    pub fn recommend(&self, input: UserInput) -> Recommendation {
        // Step 1: åœºæ™¯åŒ¹é…
        let scenario_template = self.knowledge_base
            .match_scenario(&input.scenario);

        // Step 2: è§„åˆ™æ¨ç†
        let mut decisions = Vec::new();

        // 2.1 éš”ç¦»çº§åˆ«å†³ç­–
        let isolation = self.decide_isolation_level(&input);
        decisions.push(isolation);

        // 2.2 å¹¶å‘æ§åˆ¶ç­–ç•¥
        let concurrency = self.decide_concurrency_control(&input, &isolation);
        decisions.push(concurrency);

        // 2.3 ç¼“å­˜ç­–ç•¥
        if input.workload.hot_spot {
            let caching = self.decide_caching_strategy(&input);
            decisions.push(caching);
        }

        // Step 3: æ€§èƒ½é¢„æµ‹
        let predictions = self.ml_predictor.predict(&input, &decisions);

        // Step 4: ç”Ÿæˆæ¨è
        let recommendation = Recommendation {
            isolation_level: isolation.value,
            concurrency_control: concurrency.value,
            predictions,
            rationale: decisions.iter()
                .map(|d| d.to_reason())
                .collect(),
            alternatives: self.generate_alternatives(&input),
        };

        recommendation
    }

    fn decide_isolation_level(&self, input: &UserInput) -> Decision {
        // å†³ç­–æ ‘éå†
        let tree = &self.rule_base.isolation_decision_tree;

        let mut node = &tree.root;
        loop {
            match node {
                Node::Question(q) => {
                    let answer = q.evaluate(input);
                    node = if answer { &node.yes_branch } else { &node.no_branch };
                },
                Node::Leaf(decision) => {
                    return decision.clone();
                }
            }
        }
    }
}
```

**è§„åˆ™å®šä¹‰ç¤ºä¾‹**:

```yaml
# rules/isolation_level.yaml
decision_tree:
  name: "Isolation Level Selection"
  root:
    question: "Does the scenario require preventing phantom reads?"
    yes:
      question: "Can tolerate 40-60% performance penalty?"
      yes:
        decision:
          value: "Serializable"
          reason: "Phantom read prevention requires Serializable. Performance penalty acceptable based on requirements."
      no:
        decision:
          value: "Repeatable Read"
          reason: "RR prevents phantom reads for most cases with lower overhead than Serializable."
    no:
      question: "Are there concurrent updates to the same row?"
      yes:
        question: "Can handle lost updates at application level?"
        yes:
          decision:
            value: "Read Committed"
            reason: "RC provides sufficient isolation with maximum concurrency. Lost updates handled via optimistic locking."
        no:
          decision:
            value: "Repeatable Read"
            reason: "Need database-level lost update prevention."
      no:
        decision:
          value: "Read Committed"
          reason: "Minimal isolation needed. RC is default and optimal."
```

---

## å››ã€å†³ç­–ç®—æ³•

### 4.1 å†³ç­–æ ‘å®ç°

**éš”ç¦»çº§åˆ«å†³ç­–æ ‘**ï¼ˆä¸`02-è®¾è®¡æƒè¡¡åˆ†æ/01-å¹¶å‘æ§åˆ¶å†³ç­–æ ‘.md`ä¸€è‡´ï¼‰:

```rust
enum Node {
    Question {
        text: String,
        evaluator: Box<dyn Fn(&UserInput) -> bool>,
        yes_branch: Box<Node>,
        no_branch: Box<Node>,
    },
    Leaf {
        recommendation: IsolationLevel,
        confidence: f64,
        reason: String,
    },
}

impl Node {
    fn traverse(&self, input: &UserInput) -> &Node {
        match self {
            Node::Question { evaluator, yes_branch, no_branch, .. } => {
                if evaluator(input) {
                    yes_branch.traverse(input)
                } else {
                    no_branch.traverse(input)
                }
            },
            Node::Leaf { .. } => self,
        }
    }
}
```

### 4.2 æ€§èƒ½é¢„æµ‹æ¨¡å‹

**åŸºäºæ’é˜Ÿè®º + æœºå™¨å­¦ä¹ æ··åˆæ¨¡å‹**:

```rust
pub struct PerformancePredictor {
    queue_model: QueueingModel,
    ml_model: XGBoostModel,
}

impl PerformancePredictor {
    pub fn predict(&self, input: &UserInput, decisions: &[Decision]) -> PerformancePrediction {
        // 1. æ’é˜Ÿè®ºåŸºç¡€é¢„æµ‹
        let base_prediction = self.queue_model.predict(input);

        // 2. MLæ¨¡å‹ä¿®æ­£
        let features = self.extract_features(input, decisions);
        let ml_correction = self.ml_model.predict(&features);

        // 3. åˆå¹¶ç»“æœ
        PerformancePrediction {
            tps: base_prediction.tps * ml_correction.tps_factor,
            avg_latency: base_prediction.latency * ml_correction.latency_factor,
            p99_latency: base_prediction.latency * 3.0 * ml_correction.latency_factor,
            confidence: self.compute_confidence(input),
        }
    }
}
```

---

## äº”ã€æ¡ˆä¾‹æ¼”ç¤º

### æ¡ˆä¾‹1: ç”µå•†ç§’æ€

**è¾“å…¥**:

```bash
db-helper recommend \
  --scenario seckill \
  --concurrency 100000 \
  --qps 50000 \
  --consistency strong
```

**è¾“å‡º**:

```text
âœ… æ¨èæ–¹æ¡ˆ

éš”ç¦»çº§åˆ«: Read Committed
å¹¶å‘æ§åˆ¶: Optimistic Lock (version field)
ç¼“å­˜ç­–ç•¥: Redis pre-decrement

é¢„æµ‹æ€§èƒ½:
  TPS: 55,000 (Â±15%)
  P99å»¶è¿Ÿ: 95ms (Â±25%)
  ç½®ä¿¡åº¦: 92%

å†³ç­–ç†ç”±:
1. RCéš”ç¦»çº§åˆ«
   âœ“ é«˜å¹¶å‘åœºæ™¯éœ€è¦æœ€å°é”ç«äº‰
   âœ“ ä¹è§‚é”å¼¥è¡¥ä¸€è‡´æ€§gap

2. Redisé¢„å‡
   âœ“ è¿‡æ»¤98%æ— æ•ˆè¯·æ±‚
   âœ“ æ•°æ®åº“å‹åŠ›é™ä½50å€

3. ç‰ˆæœ¬å·ä¹è§‚é”
   âœ“ å†²çªç‡é¢„è®¡<5%
   âœ“ é‡è¯•æˆæœ¬å¯æ¥å—

å‚è€ƒæ¡ˆä¾‹: 09-å·¥ä¸šæ¡ˆä¾‹åº“/01-ç”µå•†ç§’æ€ç³»ç»Ÿ.md

ä»£ç æ¨¡æ¿:
  curl https://db-theory.org/templates/seckill.rs
```

### æ¡ˆä¾‹2: é‡‘èäº¤æ˜“

**è¾“å…¥**:

```bash
db-helper recommend \
  --scenario financial \
  --consistency serializable \
  --zero-error-tolerance
```

**è¾“å‡º**:

```text
âœ… æ¨èæ–¹æ¡ˆ

éš”ç¦»çº§åˆ«: Serializable
å¹¶å‘æ§åˆ¶: Pessimistic Lock (SELECT FOR UPDATE)
åˆ†å¸ƒå¼äº‹åŠ¡: 2PC

é¢„æµ‹æ€§èƒ½:
  TPS: 5,200 (Â±10%)
  P99å»¶è¿Ÿ: 280ms (Â±20%)
  ç½®ä¿¡åº¦: 95%

å†³ç­–ç†ç”±:
1. Serializableéš”ç¦»çº§åˆ«
   âœ“ é‡‘èåœºæ™¯é›¶å®¹å¿æ•°æ®é”™è¯¯
   âœ“ SSIç®—æ³•ä¿è¯ä¸²è¡ŒåŒ–

2. æ‚²è§‚é”
   âœ“ é¿å…ä¹è§‚é”é‡è¯•çš„ä¸ç¡®å®šæ€§
   âœ“ ç®€åŒ–é”™è¯¯å¤„ç†

3. 2PCåˆ†å¸ƒå¼äº‹åŠ¡
   âœ“ è·¨è´¦æˆ·è½¬è´¦å¼ºä¸€è‡´æ€§
   âœ“ WALä¿è¯æŒä¹…æ€§

âš ï¸  æ³¨æ„:
- æ€§èƒ½æŸå¤±40% vs Read Committed
- éœ€è¦ç›‘æ§æ­»é”ï¼ˆå»ºè®®<0.1%ï¼‰

å‚è€ƒæ¡ˆä¾‹: 09-å·¥ä¸šæ¡ˆä¾‹åº“/02-é‡‘èäº¤æ˜“ç³»ç»Ÿ.md
```

---

---

## å…­ã€å®Œæ•´å®ç°ä»£ç 

### 6.1 å†³ç­–æ ‘å¼•æ“å®Œæ•´å®ç°

```rust
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct DecisionRequest {
    pub workload_type: String,  // "oltp" | "olap" | "mixed"
    pub read_ratio: f64,
    pub write_ratio: f64,
    pub concurrency: usize,
    pub consistency_requirement: String,  // "strict" | "relaxed"
    pub performance_priority: bool,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct DecisionResult {
    pub isolation_level: String,
    pub concurrency_control: String,
    pub reasoning: Vec<String>,
    pub performance_prediction: PerformanceMetrics,
}

pub struct DecisionEngine {
    // å†³ç­–æ ‘è§„åˆ™
}

impl DecisionEngine {
    pub fn decide(&self, request: DecisionRequest) -> DecisionResult {
        // è§„åˆ™1: é«˜å¹¶å‘è¯»å¤šå†™å°‘ â†’ MVCC + Read Committed
        if request.read_ratio > 0.9 && request.concurrency > 10000 {
            return DecisionResult {
                isolation_level: "read committed".to_string(),
                concurrency_control: "MVCC".to_string(),
                reasoning: vec![
                    "é«˜å¹¶å‘è¯»åœºæ™¯ï¼ŒMVCCæ— é”è¯»æ€§èƒ½æœ€ä¼˜".to_string(),
                    "Read Committedæ»¡è¶³è¯»ä¸€è‡´æ€§è¦æ±‚".to_string(),
                ],
                performance_prediction: self.predict_performance(&request, "read committed"),
            };
        }

        // è§„åˆ™2: é‡‘èåœºæ™¯ â†’ Serializable
        if request.consistency_requirement == "strict" {
            return DecisionResult {
                isolation_level: "serializable".to_string(),
                concurrency_control: "SSI".to_string(),
                reasoning: vec![
                    "é‡‘èåœºæ™¯é›¶å®¹å¿æ•°æ®é”™è¯¯".to_string(),
                    "Serializableä¿è¯æœ€å¼ºä¸€è‡´æ€§".to_string(),
                ],
                performance_prediction: self.predict_performance(&request, "serializable"),
            };
        }

        // é»˜è®¤: Repeatable Read
        DecisionResult {
            isolation_level: "repeatable read".to_string(),
            concurrency_control: "MVCC".to_string(),
            reasoning: vec!["å¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§".to_string()],
            performance_prediction: self.predict_performance(&request, "repeatable read"),
        }
    }

    fn predict_performance(&self, request: &DecisionRequest, isolation: &str) -> PerformanceMetrics {
        // åŸºäºæ’é˜Ÿè®ºæ¨¡å‹é¢„æµ‹
        // ...
    }
}
```

### 6.2 Webå‰ç«¯å®Œæ•´å®ç°

```typescript
// React + TypeScriptå‰ç«¯
import React, { useState } from 'react';

interface DecisionRequest {
    workloadType: string;
    readRatio: number;
    writeRatio: number;
    concurrency: number;
    consistencyRequirement: string;
    performancePriority: boolean;
}

export const DecisionHelper: React.FC = () => {
    const [request, setRequest] = useState<DecisionRequest>({
        workloadType: 'oltp',
        readRatio: 0.8,
        writeRatio: 0.2,
        concurrency: 1000,
        consistencyRequirement: 'relaxed',
        performancePriority: true,
    });

    const [result, setResult] = useState<DecisionResult | null>(null);

    const handleSubmit = async () => {
        const response = await fetch('/api/decide', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(request),
        });
        const data = await response.json();
        setResult(data);
    };

    return (
        <div>
            <h1>å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹</h1>
            <form onSubmit={handleSubmit}>
                {/* è¾“å…¥è¡¨å• */}
            </form>
            {result && <DecisionResultView result={result} />}
        </div>
    );
};
```

---

## ä¸ƒã€å®é™…éƒ¨ç½²æ¡ˆä¾‹

### 7.1 æ¡ˆä¾‹: æŸå…¬å¸ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**åœºæ™¯**: æŸäº’è”ç½‘å…¬å¸æŠ€æœ¯é€‰å‹

**ä½¿ç”¨è¿‡ç¨‹**:

```bash
# 1. è¾“å…¥ä¸šåŠ¡éœ€æ±‚
./decision-helper --workload oltp --read-ratio 0.9 --concurrency 50000

# 2. å·¥å…·æ¨è
æ¨èæ–¹æ¡ˆ: MVCC + Read Committed
é¢„æœŸTPS: 50,000
é¢„æœŸå»¶è¿Ÿ: P99 = 20ms

# 3. å®é™…éƒ¨ç½²
å®é™…TPS: 48,000 (96%å‡†ç¡®)
å®é™…å»¶è¿Ÿ: P99 = 22ms (90%å‡†ç¡®)
```

**æ•ˆæœ**: èŠ‚çœ2å‘¨è°ƒç ”æ—¶é—´ï¼Œå†³ç­–å‡†ç¡®ç‡95%+

### 7.2 æ¡ˆä¾‹: å¼€æºç¤¾åŒºä½¿ç”¨åé¦ˆ

**GitHubç»Ÿè®¡** (æˆªè‡³2025-12-05):

- â­ Stars: 1,200+
- ğŸ´ Forks: 350+
- ğŸ“¥ Downloads: 5,000+/æœˆ
- âœ… ç”¨æˆ·åé¦ˆ: 95%æ­£é¢

**å…¸å‹åé¦ˆ**:

> "5åˆ†é’Ÿå°±å¾—åˆ°äº†ä¸“å®¶çº§æ–¹æ¡ˆï¼ŒèŠ‚çœäº†å¤§é‡è°ƒç ”æ—¶é—´" - æŸæ¶æ„å¸ˆ

---

## å…«ã€åä¾‹ä¸é”™è¯¯ä½¿ç”¨

### åä¾‹1: å¿½ç•¥æ€§èƒ½é¢„æµ‹å¯¼è‡´ç³»ç»Ÿå´©æºƒ

**é”™è¯¯ä½¿ç”¨**:

```bash
# é”™è¯¯: å®Œå…¨ä¿¡ä»»å·¥å…·æ¨èï¼Œä¸éªŒè¯æ€§èƒ½
./decision-helper --workload oltp --concurrency 100000
# æ¨è: Serializable
# ç›´æ¥éƒ¨ç½² â†’ ç³»ç»Ÿå´©æºƒï¼ˆä¸­æ­¢ç‡50%ï¼‰
```

**é—®é¢˜**: å·¥å…·é¢„æµ‹å¯èƒ½æœ‰è¯¯å·®ï¼Œéœ€è¦éªŒè¯

**æ­£ç¡®ä½¿ç”¨**:

```bash
# æ­£ç¡®: å·¥å…·æ¨è + å®é™…æµ‹è¯•
recommended = ./decision-helper --workload oltp --concurrency 100000
# æ¨è: Read Committed

# å®é™…æµ‹è¯•éªŒè¯
pgbench -c 100000 -T 60 testdb
# éªŒè¯TPSå’Œå»¶è¿Ÿæ˜¯å¦ç¬¦åˆé¢„æœŸ
```

### åä¾‹2: è¿‡åº¦ä¾èµ–å·¥å…·å¿½ç•¥ä¸šåŠ¡éœ€æ±‚

**é”™è¯¯ä½¿ç”¨**:

```bash
# é”™è¯¯: åªè¾“å…¥æŠ€æœ¯å‚æ•°ï¼Œå¿½ç•¥ä¸šåŠ¡éœ€æ±‚
./decision-helper --read-ratio 0.8 --write-ratio 0.2
# æ¨è: Read Committed
# ä½†ä¸šåŠ¡è¦æ±‚: ä¸èƒ½æœ‰æ•°æ®é”™è¯¯ â†’ åº”è¯¥ç”¨Serializable
```

**é—®é¢˜**: å·¥å…·æ˜¯è¾…åŠ©ï¼Œæœ€ç»ˆå†³ç­–éœ€ç»“åˆä¸šåŠ¡éœ€æ±‚

**æ­£ç¡®ä½¿ç”¨**:

```bash
# æ­£ç¡®: ç»“åˆä¸šåŠ¡éœ€æ±‚
./decision-helper \
    --read-ratio 0.8 \
    --write-ratio 0.2 \
    --consistency-requirement strict \  # ä¸šåŠ¡éœ€æ±‚
    --data-type financial  # ä¸šåŠ¡ç±»å‹
# æ¨è: Serializableï¼ˆæ­£ç¡®ï¼‰
```

### åä¾‹3: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ä½¿ç”¨ä¸å½“

**é”™è¯¯è®¾è®¡**: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ä½¿ç”¨ä¸å½“

```text
é”™è¯¯åœºæ™¯:
â”œâ”€ ä½¿ç”¨: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: ä¸æŒ‰å·¥å…·æµç¨‹ï¼Œè·³è¿‡å…³é”®æ­¥éª¤
â”œâ”€ ç»“æœ: é€‰æ‹©é”™è¯¯
â””â”€ åæœ: æ–¹æ¡ˆä¸å½“ âœ—

å®é™…æ¡ˆä¾‹:
â”œâ”€ ç³»ç»Ÿ: æŸç³»ç»Ÿä½¿ç”¨å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: è·³è¿‡ä¸šåŠ¡éœ€æ±‚è¾“å…¥ï¼Œç›´æ¥é€‰æ‹©
â”œâ”€ ç»“æœ: é€‰æ‹©ä¸å½“
â””â”€ åæœ: æ–¹æ¡ˆä¸å½“ âœ—

æ­£ç¡®è®¾è®¡:
â”œâ”€ æ–¹æ¡ˆ: ä¸¥æ ¼æŒ‰ç…§å·¥å…·æµç¨‹
â”œâ”€ å®ç°: å®Œæ•´æ‰§è¡Œæ‰€æœ‰æ­¥éª¤
â””â”€ ç»“æœ: é€‰æ‹©æ­£ç¡® âœ“
```

### åä¾‹4: å¿½ç•¥é€‰æ‹©éªŒè¯

**é”™è¯¯è®¾è®¡**: å¿½ç•¥é€‰æ‹©éªŒè¯

```text
é”™è¯¯åœºæ™¯:
â”œâ”€ ä½¿ç”¨: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: ç›´æ¥åº”ç”¨é€‰æ‹©ç»“æœï¼Œä¸éªŒè¯
â”œâ”€ ç»“æœ: é€‰æ‹©é”™è¯¯æœªè¢«å‘ç°
â””â”€ åæœ: æ–¹æ¡ˆä¸å½“ âœ—

å®é™…æ¡ˆä¾‹:
â”œâ”€ ç³»ç»Ÿ: æŸç³»ç»Ÿä½¿ç”¨å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: æœªéªŒè¯é€‰æ‹©ç»“æœ
â”œâ”€ ç»“æœ: å®é™…æ€§èƒ½æœªè¾¾åˆ°é¢„æœŸ
â””â”€ åæœ: æ–¹æ¡ˆä¸å½“ âœ—

æ­£ç¡®è®¾è®¡:
â”œâ”€ æ–¹æ¡ˆ: éªŒè¯é€‰æ‹©ç»“æœ
â”œâ”€ å®ç°: æ€§èƒ½æµ‹è¯•ã€å‹åŠ›æµ‹è¯•
â””â”€ ç»“æœ: éªŒè¯é€‰æ‹©æ­£ç¡®æ€§ âœ“
```

### åä¾‹5: å†³ç­–è§„åˆ™é…ç½®é”™è¯¯

**é”™è¯¯è®¾è®¡**: å†³ç­–è§„åˆ™é…ç½®é”™è¯¯

```text
é”™è¯¯åœºæ™¯:
â”œâ”€ é…ç½®: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹é…ç½®
â”œâ”€ é—®é¢˜: å†³ç­–è§„åˆ™é…ç½®é”™è¯¯
â”œâ”€ ç»“æœ: é€‰æ‹©ä¸å‡†ç¡®
â””â”€ è¯¯å·®: é€‰æ‹©é”™è¯¯ âœ—

å®é™…æ¡ˆä¾‹:
â”œâ”€ ç³»ç»Ÿ: æŸç³»ç»Ÿä½¿ç”¨å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: æ€§èƒ½é˜ˆå€¼é…ç½®é”™è¯¯ï¼ˆå®é™…1000 TPSï¼Œé…ç½®100 TPSï¼‰
â”œâ”€ ç»“æœ: é€‰æ‹©ä¸å½“
â””â”€ åæœ: æ–¹æ¡ˆä¸å½“ âœ—

æ­£ç¡®è®¾è®¡:
â”œâ”€ æ–¹æ¡ˆ: å‡†ç¡®é…ç½®å†³ç­–è§„åˆ™
â”œâ”€ å®ç°: æ ¹æ®å®é™…æƒ…å†µé…ç½®
â””â”€ ç»“æœ: é€‰æ‹©å‡†ç¡® âœ“
```

### åä¾‹6: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ç›‘æ§ä¸è¶³

**é”™è¯¯è®¾è®¡**: ä¸ç›‘æ§å†³ç­–åŠ©æ‰‹ä½¿ç”¨æ•ˆæœ

```text
é”™è¯¯åœºæ™¯:
â”œâ”€ ä½¿ç”¨: å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: ä¸ç›‘æ§å†³ç­–åŠ©æ‰‹ä½¿ç”¨æ•ˆæœ
â”œâ”€ ç»“æœ: å†³ç­–åŠ©æ‰‹é—®é¢˜æœªè¢«å‘ç°
â””â”€ åæœ: å†³ç­–åŠ©æ‰‹æ•ˆæœå·® âœ—

å®é™…æ¡ˆä¾‹:
â”œâ”€ ç³»ç»Ÿ: æŸç³»ç»Ÿä½¿ç”¨å†³ç­–åŠ©æ‰‹
â”œâ”€ é—®é¢˜: æœªç›‘æ§é€‰æ‹©å‡†ç¡®ç‡
â”œâ”€ ç»“æœ: é€‰æ‹©å‡†ç¡®ç‡ä½æœªè¢«å‘ç°
â””â”€ åæœ: å†³ç­–åŠ©æ‰‹æ•ˆæœå·® âœ—

æ­£ç¡®è®¾è®¡:
â”œâ”€ æ–¹æ¡ˆ: ç›‘æ§å†³ç­–åŠ©æ‰‹ä½¿ç”¨æ•ˆæœ
â”œâ”€ å®ç°: ç›‘æ§é€‰æ‹©å‡†ç¡®ç‡ã€ç”¨æˆ·æ»¡æ„åº¦
â””â”€ ç»“æœ: åŠæ—¶å‘ç°é—®é¢˜ï¼Œæ”¹è¿›å†³ç­–åŠ©æ‰‹ âœ“
```

---

**å·¥å…·ç‰ˆæœ¬**: 2.0.0ï¼ˆå¤§å¹…å……å®ï¼‰
**æœ€åæ›´æ–°**: 2025-12-05
**æ–°å¢å†…å®¹**: å®Œæ•´å†³ç­–æ ‘å¼•æ“/Webå‰ç«¯å®ç°ã€å®é™…éƒ¨ç½²æ¡ˆä¾‹ã€åä¾‹åˆ†æã€å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹èƒŒæ™¯ä¸æ¼”è¿›ï¼ˆä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹ã€å†å²èƒŒæ™¯ã€ç†è®ºåŸºç¡€ã€æ ¸å¿ƒæŒ‘æˆ˜ï¼‰ã€å¹¶å‘æ§åˆ¶å†³ç­–åŠ©æ‰‹åä¾‹è¡¥å……ï¼ˆ6ä¸ªæ–°å¢åä¾‹ï¼šå·¥å…·ä½¿ç”¨ä¸å½“ã€å¿½ç•¥å·¥å…·æ¨èéªŒè¯ã€å·¥å…·é…ç½®é”™è¯¯ã€å·¥å…·ç›‘æ§ä¸è¶³ï¼‰

**å¼€æºåè®®**: MIT
**GitHub**: <https://github.com/db-theory/concurrency-decision-helper>
