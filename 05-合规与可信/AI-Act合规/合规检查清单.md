# 合规检查清单

> **更新时间**: 2025 年 11 月 1 日  
> **技术版本**: pg_dsr 1.0  
> **文档编号**: 05-02-03

## 📑 目录

- [合规检查清单](#合规检查清单)
  - [📑 目录](#-目录)
  - [1. 概述](#1-概述)
  - [2. 检查清单](#2-检查清单)
    - [2.1 数据主权](#21-数据主权)
    - [2.2 数据留存](#22-数据留存)
    - [2.3 审计追踪](#23-审计追踪)
    - [2.4 访问控制](#24-访问控制)
  - [3. 检查方法](#3-检查方法)
    - [3.1 自动化检查](#31-自动化检查)
    - [3.2 合规报告](#32-合规报告)
  - [4. 最佳实践](#4-最佳实践)
  - [5. 参考资料](#5-参考资料)

---

## 1. 概述

合规检查清单提供系统化的合规检查方法。

---

## 2. 检查清单

### 2.1 数据主权

- [ ] 所有数据都有主权标签
- [ ] 实施了跨境数据拦截
- [ ] 访问控制基于主权标签
- [ ] 定期检查主权标签完整性

### 2.2 数据留存

- [ ] 配置了数据留存策略
- [ ] 实现了自动数据清理
- [ ] 保留了必要的审计记录
- [ ] 定期验证留存策略

### 2.3 审计追踪

- [ ] 启用了审计日志
- [ ] 审计日志不可篡改
- [ ] 支持完整追溯
- [ ] 定期备份审计日志

### 2.4 访问控制

- [ ] 实施了基于主权的访问控制
- [ ] 定期审查访问权限
- [ ] 记录了所有访问操作
- [ ] 实现了最小权限原则

---

## 3. 检查方法

### 3.1 自动化检查

```sql
-- 检查主权标签完整性
SELECT
    table_name,
    COUNT(*) as total_rows,
    COUNT(data_sovereignty) as labeled_rows,
    COUNT(*) - COUNT(data_sovereignty) as unlabeled_rows
FROM user_data
GROUP BY table_name;
```

### 3.2 合规报告

```sql
-- 生成合规报告
SELECT
    'Data Sovereignty' as category,
    COUNT(*) as total_records,
    COUNT(CASE WHEN data_sovereignty IS NOT NULL THEN 1 END) as compliant_records,
    ROUND(100.0 * COUNT(CASE WHEN data_sovereignty IS NOT NULL THEN 1 END) / COUNT(*), 2) as compliance_rate
FROM user_data;
```

---

## 4. 最佳实践

1. **定期检查**: 每月进行一次合规检查
1. **自动化**: 使用自动化工具进行检查
1. **文档化**: 记录检查结果和整改措施

---

## 5. 参考资料

- [AI Act 要求解读](./AI-Act要求解读.md)
- [合规实施方案](./合规实施方案.md)

---

**最后更新**: 2025 年 11 月 1 日  
**维护者**: PostgreSQL Modern Team
